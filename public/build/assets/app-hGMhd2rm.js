function qx(u,a){return function(){return u.apply(a,arguments)}}const{toString:WX}=Object.prototype,{getPrototypeOf:eb}=Object,xf=(u=>a=>{const f=WX.call(a);return u[f]||(u[f]=f.slice(8,-1).toLowerCase())})(Object.create(null)),Ss=u=>(u=u.toLowerCase(),a=>xf(a)===u),Rf=u=>a=>typeof a===u,{isArray:Yi}=Array,Ic=Rf("undefined");function jX(u){return u!==null&&!Ic(u)&&u.constructor!==null&&!Ic(u.constructor)&&Vn(u.constructor.isBuffer)&&u.constructor.isBuffer(u)}const Kx=Ss("ArrayBuffer");function qX(u){let a;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?a=ArrayBuffer.isView(u):a=u&&u.buffer&&Kx(u.buffer),a}const KX=Rf("string"),Vn=Rf("function"),Gx=Rf("number"),Of=u=>u!==null&&typeof u=="object",GX=u=>u===!0||u===!1,yf=u=>{if(xf(u)!=="object")return!1;const a=eb(u);return(a===null||a===Object.prototype||Object.getPrototypeOf(a)===null)&&!(Symbol.toStringTag in u)&&!(Symbol.iterator in u)},YX=Ss("Date"),XX=Ss("File"),ZX=Ss("Blob"),QX=Ss("FileList"),JX=u=>Of(u)&&Vn(u.pipe),eZ=u=>{let a;return u&&(typeof FormData=="function"&&u instanceof FormData||Vn(u.append)&&((a=xf(u))==="formdata"||a==="object"&&Vn(u.toString)&&u.toString()==="[object FormData]"))},tZ=Ss("URLSearchParams"),[nZ,sZ,oZ,rZ]=["ReadableStream","Request","Response","Headers"].map(Ss),iZ=u=>u.trim?u.trim():u.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Mc(u,a,{allOwnKeys:f=!1}={}){if(u===null||typeof u>"u")return;let m,y;if(typeof u!="object"&&(u=[u]),Yi(u))for(m=0,y=u.length;m<y;m++)a.call(null,u[m],m,u);else{const _=f?Object.getOwnPropertyNames(u):Object.keys(u),w=_.length;let x;for(m=0;m<w;m++)x=_[m],a.call(null,u[x],x,u)}}function Yx(u,a){a=a.toLowerCase();const f=Object.keys(u);let m=f.length,y;for(;m-- >0;)if(y=f[m],a===y.toLowerCase())return y;return null}const Dr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Xx=u=>!Ic(u)&&u!==Dr;function Fg(){const{caseless:u}=Xx(this)&&this||{},a={},f=(m,y)=>{const _=u&&Yx(a,y)||y;yf(a[_])&&yf(m)?a[_]=Fg(a[_],m):yf(m)?a[_]=Fg({},m):Yi(m)?a[_]=m.slice():a[_]=m};for(let m=0,y=arguments.length;m<y;m++)arguments[m]&&Mc(arguments[m],f);return a}const aZ=(u,a,f,{allOwnKeys:m}={})=>(Mc(a,(y,_)=>{f&&Vn(y)?u[_]=qx(y,f):u[_]=y},{allOwnKeys:m}),u),cZ=u=>(u.charCodeAt(0)===65279&&(u=u.slice(1)),u),lZ=(u,a,f,m)=>{u.prototype=Object.create(a.prototype,m),u.prototype.constructor=u,Object.defineProperty(u,"super",{value:a.prototype}),f&&Object.assign(u.prototype,f)},uZ=(u,a,f,m)=>{let y,_,w;const x={};if(a=a||{},u==null)return a;do{for(y=Object.getOwnPropertyNames(u),_=y.length;_-- >0;)w=y[_],(!m||m(w,u,a))&&!x[w]&&(a[w]=u[w],x[w]=!0);u=f!==!1&&eb(u)}while(u&&(!f||f(u,a))&&u!==Object.prototype);return a},fZ=(u,a,f)=>{u=String(u),(f===void 0||f>u.length)&&(f=u.length),f-=a.length;const m=u.indexOf(a,f);return m!==-1&&m===f},dZ=u=>{if(!u)return null;if(Yi(u))return u;let a=u.length;if(!Gx(a))return null;const f=new Array(a);for(;a-- >0;)f[a]=u[a];return f},mZ=(u=>a=>u&&a instanceof u)(typeof Uint8Array<"u"&&eb(Uint8Array)),pZ=(u,a)=>{const m=(u&&u[Symbol.iterator]).call(u);let y;for(;(y=m.next())&&!y.done;){const _=y.value;a.call(u,_[0],_[1])}},hZ=(u,a)=>{let f;const m=[];for(;(f=u.exec(a))!==null;)m.push(f);return m},gZ=Ss("HTMLFormElement"),bZ=u=>u.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(f,m,y){return m.toUpperCase()+y}),Yk=(({hasOwnProperty:u})=>(a,f)=>u.call(a,f))(Object.prototype),yZ=Ss("RegExp"),Zx=(u,a)=>{const f=Object.getOwnPropertyDescriptors(u),m={};Mc(f,(y,_)=>{let w;(w=a(y,_,u))!==!1&&(m[_]=w||y)}),Object.defineProperties(u,m)},vZ=u=>{Zx(u,(a,f)=>{if(Vn(u)&&["arguments","caller","callee"].indexOf(f)!==-1)return!1;const m=u[f];if(Vn(m)){if(a.enumerable=!1,"writable"in a){a.writable=!1;return}a.set||(a.set=()=>{throw Error("Can not rewrite read-only method '"+f+"'")})}})},CZ=(u,a)=>{const f={},m=y=>{y.forEach(_=>{f[_]=!0})};return Yi(u)?m(u):m(String(u).split(a)),f},EZ=()=>{},_Z=(u,a)=>u!=null&&Number.isFinite(u=+u)?u:a,Cg="abcdefghijklmnopqrstuvwxyz",Xk="0123456789",Qx={DIGIT:Xk,ALPHA:Cg,ALPHA_DIGIT:Cg+Cg.toUpperCase()+Xk},SZ=(u=16,a=Qx.ALPHA_DIGIT)=>{let f="";const{length:m}=a;for(;u--;)f+=a[Math.random()*m|0];return f};function wZ(u){return!!(u&&Vn(u.append)&&u[Symbol.toStringTag]==="FormData"&&u[Symbol.iterator])}const AZ=u=>{const a=new Array(10),f=(m,y)=>{if(Of(m)){if(a.indexOf(m)>=0)return;if(!("toJSON"in m)){a[y]=m;const _=Yi(m)?[]:{};return Mc(m,(w,x)=>{const M=f(w,y+1);!Ic(M)&&(_[x]=M)}),a[y]=void 0,_}}return m};return f(u,0)},TZ=Ss("AsyncFunction"),NZ=u=>u&&(Of(u)||Vn(u))&&Vn(u.then)&&Vn(u.catch),Jx=((u,a)=>u?setImmediate:a?((f,m)=>(Dr.addEventListener("message",({source:y,data:_})=>{y===Dr&&_===f&&m.length&&m.shift()()},!1),y=>{m.push(y),Dr.postMessage(f,"*")}))(`axios@${Math.random()}`,[]):f=>setTimeout(f))(typeof setImmediate=="function",Vn(Dr.postMessage)),kZ=typeof queueMicrotask<"u"?queueMicrotask.bind(Dr):typeof process<"u"&&process.nextTick||Jx,V={isArray:Yi,isArrayBuffer:Kx,isBuffer:jX,isFormData:eZ,isArrayBufferView:qX,isString:KX,isNumber:Gx,isBoolean:GX,isObject:Of,isPlainObject:yf,isReadableStream:nZ,isRequest:sZ,isResponse:oZ,isHeaders:rZ,isUndefined:Ic,isDate:YX,isFile:XX,isBlob:ZX,isRegExp:yZ,isFunction:Vn,isStream:JX,isURLSearchParams:tZ,isTypedArray:mZ,isFileList:QX,forEach:Mc,merge:Fg,extend:aZ,trim:iZ,stripBOM:cZ,inherits:lZ,toFlatObject:uZ,kindOf:xf,kindOfTest:Ss,endsWith:fZ,toArray:dZ,forEachEntry:pZ,matchAll:hZ,isHTMLForm:gZ,hasOwnProperty:Yk,hasOwnProp:Yk,reduceDescriptors:Zx,freezeMethods:vZ,toObjectSet:CZ,toCamelCase:bZ,noop:EZ,toFiniteNumber:_Z,findKey:Yx,global:Dr,isContextDefined:Xx,ALPHABET:Qx,generateString:SZ,isSpecCompliantForm:wZ,toJSONObject:AZ,isAsyncFn:TZ,isThenable:NZ,setImmediate:Jx,asap:kZ};function Ye(u,a,f,m,y){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=u,this.name="AxiosError",a&&(this.code=a),f&&(this.config=f),m&&(this.request=m),y&&(this.response=y,this.status=y.status?y.status:null)}V.inherits(Ye,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:V.toJSONObject(this.config),code:this.code,status:this.status}}});const eR=Ye.prototype,tR={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(u=>{tR[u]={value:u}});Object.defineProperties(Ye,tR);Object.defineProperty(eR,"isAxiosError",{value:!0});Ye.from=(u,a,f,m,y,_)=>{const w=Object.create(eR);return V.toFlatObject(u,w,function(M){return M!==Error.prototype},x=>x!=="isAxiosError"),Ye.call(w,u.message,a,f,m,y),w.cause=u,w.name=u.name,_&&Object.assign(w,_),w};const xZ=null;function Ug(u){return V.isPlainObject(u)||V.isArray(u)}function nR(u){return V.endsWith(u,"[]")?u.slice(0,-2):u}function Zk(u,a,f){return u?u.concat(a).map(function(y,_){return y=nR(y),!f&&_?"["+y+"]":y}).join(f?".":""):a}function RZ(u){return V.isArray(u)&&!u.some(Ug)}const OZ=V.toFlatObject(V,{},null,function(a){return/^is[A-Z]/.test(a)});function Df(u,a,f){if(!V.isObject(u))throw new TypeError("target must be an object");a=a||new FormData,f=V.toFlatObject(f,{metaTokens:!0,dots:!1,indexes:!1},!1,function(ge,ce){return!V.isUndefined(ce[ge])});const m=f.metaTokens,y=f.visitor||$,_=f.dots,w=f.indexes,M=(f.Blob||typeof Blob<"u"&&Blob)&&V.isSpecCompliantForm(a);if(!V.isFunction(y))throw new TypeError("visitor must be a function");function z(he){if(he===null)return"";if(V.isDate(he))return he.toISOString();if(!M&&V.isBlob(he))throw new Ye("Blob is not supported. Use a Buffer instead.");return V.isArrayBuffer(he)||V.isTypedArray(he)?M&&typeof Blob=="function"?new Blob([he]):Buffer.from(he):he}function $(he,ge,ce){let We=he;if(he&&!ce&&typeof he=="object"){if(V.endsWith(ge,"{}"))ge=m?ge:ge.slice(0,-2),he=JSON.stringify(he);else if(V.isArray(he)&&RZ(he)||(V.isFileList(he)||V.endsWith(ge,"[]"))&&(We=V.toArray(he)))return ge=nR(ge),We.forEach(function(G,ye){!(V.isUndefined(G)||G===null)&&a.append(w===!0?Zk([ge],ye,_):w===null?ge:ge+"[]",z(G))}),!1}return Ug(he)?!0:(a.append(Zk(ce,ge,_),z(he)),!1)}const re=[],we=Object.assign(OZ,{defaultVisitor:$,convertValue:z,isVisitable:Ug});function _e(he,ge){if(!V.isUndefined(he)){if(re.indexOf(he)!==-1)throw Error("Circular reference detected in "+ge.join("."));re.push(he),V.forEach(he,function(We,Xe){(!(V.isUndefined(We)||We===null)&&y.call(a,We,V.isString(Xe)?Xe.trim():Xe,ge,we))===!0&&_e(We,ge?ge.concat(Xe):[Xe])}),re.pop()}}if(!V.isObject(u))throw new TypeError("data must be an object");return _e(u),a}function Qk(u){const a={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(u).replace(/[!'()~]|%20|%00/g,function(m){return a[m]})}function tb(u,a){this._pairs=[],u&&Df(u,this,a)}const sR=tb.prototype;sR.append=function(a,f){this._pairs.push([a,f])};sR.toString=function(a){const f=a?function(m){return a.call(this,m,Qk)}:Qk;return this._pairs.map(function(y){return f(y[0])+"="+f(y[1])},"").join("&")};function DZ(u){return encodeURIComponent(u).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function oR(u,a,f){if(!a)return u;const m=f&&f.encode||DZ,y=f&&f.serialize;let _;if(y?_=y(a,f):_=V.isURLSearchParams(a)?a.toString():new tb(a,f).toString(m),_){const w=u.indexOf("#");w!==-1&&(u=u.slice(0,w)),u+=(u.indexOf("?")===-1?"?":"&")+_}return u}class Jk{constructor(){this.handlers=[]}use(a,f,m){return this.handlers.push({fulfilled:a,rejected:f,synchronous:m?m.synchronous:!1,runWhen:m?m.runWhen:null}),this.handlers.length-1}eject(a){this.handlers[a]&&(this.handlers[a]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(a){V.forEach(this.handlers,function(m){m!==null&&a(m)})}}const rR={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},PZ=typeof URLSearchParams<"u"?URLSearchParams:tb,BZ=typeof FormData<"u"?FormData:null,LZ=typeof Blob<"u"?Blob:null,IZ={isBrowser:!0,classes:{URLSearchParams:PZ,FormData:BZ,Blob:LZ},protocols:["http","https","file","blob","url","data"]},nb=typeof window<"u"&&typeof document<"u",Hg=typeof navigator=="object"&&navigator||void 0,$Z=nb&&(!Hg||["ReactNative","NativeScript","NS"].indexOf(Hg.product)<0),MZ=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",FZ=nb&&window.location.href||"http://localhost",UZ=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:nb,hasStandardBrowserEnv:$Z,hasStandardBrowserWebWorkerEnv:MZ,navigator:Hg,origin:FZ},Symbol.toStringTag,{value:"Module"})),Wn={...UZ,...IZ};function HZ(u,a){return Df(u,new Wn.classes.URLSearchParams,Object.assign({visitor:function(f,m,y,_){return Wn.isNode&&V.isBuffer(f)?(this.append(m,f.toString("base64")),!1):_.defaultVisitor.apply(this,arguments)}},a))}function zZ(u){return V.matchAll(/\w+|\[(\w*)]/g,u).map(a=>a[0]==="[]"?"":a[1]||a[0])}function VZ(u){const a={},f=Object.keys(u);let m;const y=f.length;let _;for(m=0;m<y;m++)_=f[m],a[_]=u[_];return a}function iR(u){function a(f,m,y,_){let w=f[_++];if(w==="__proto__")return!0;const x=Number.isFinite(+w),M=_>=f.length;return w=!w&&V.isArray(y)?y.length:w,M?(V.hasOwnProp(y,w)?y[w]=[y[w],m]:y[w]=m,!x):((!y[w]||!V.isObject(y[w]))&&(y[w]=[]),a(f,m,y[w],_)&&V.isArray(y[w])&&(y[w]=VZ(y[w])),!x)}if(V.isFormData(u)&&V.isFunction(u.entries)){const f={};return V.forEachEntry(u,(m,y)=>{a(zZ(m),y,f,0)}),f}return null}function WZ(u,a,f){if(V.isString(u))try{return(a||JSON.parse)(u),V.trim(u)}catch(m){if(m.name!=="SyntaxError")throw m}return(f||JSON.stringify)(u)}const Fc={transitional:rR,adapter:["xhr","http","fetch"],transformRequest:[function(a,f){const m=f.getContentType()||"",y=m.indexOf("application/json")>-1,_=V.isObject(a);if(_&&V.isHTMLForm(a)&&(a=new FormData(a)),V.isFormData(a))return y?JSON.stringify(iR(a)):a;if(V.isArrayBuffer(a)||V.isBuffer(a)||V.isStream(a)||V.isFile(a)||V.isBlob(a)||V.isReadableStream(a))return a;if(V.isArrayBufferView(a))return a.buffer;if(V.isURLSearchParams(a))return f.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),a.toString();let x;if(_){if(m.indexOf("application/x-www-form-urlencoded")>-1)return HZ(a,this.formSerializer).toString();if((x=V.isFileList(a))||m.indexOf("multipart/form-data")>-1){const M=this.env&&this.env.FormData;return Df(x?{"files[]":a}:a,M&&new M,this.formSerializer)}}return _||y?(f.setContentType("application/json",!1),WZ(a)):a}],transformResponse:[function(a){const f=this.transitional||Fc.transitional,m=f&&f.forcedJSONParsing,y=this.responseType==="json";if(V.isResponse(a)||V.isReadableStream(a))return a;if(a&&V.isString(a)&&(m&&!this.responseType||y)){const w=!(f&&f.silentJSONParsing)&&y;try{return JSON.parse(a)}catch(x){if(w)throw x.name==="SyntaxError"?Ye.from(x,Ye.ERR_BAD_RESPONSE,this,null,this.response):x}}return a}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Wn.classes.FormData,Blob:Wn.classes.Blob},validateStatus:function(a){return a>=200&&a<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};V.forEach(["delete","get","head","post","put","patch"],u=>{Fc.headers[u]={}});const jZ=V.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qZ=u=>{const a={};let f,m,y;return u&&u.split(`
`).forEach(function(w){y=w.indexOf(":"),f=w.substring(0,y).trim().toLowerCase(),m=w.substring(y+1).trim(),!(!f||a[f]&&jZ[f])&&(f==="set-cookie"?a[f]?a[f].push(m):a[f]=[m]:a[f]=a[f]?a[f]+", "+m:m)}),a},ex=Symbol("internals");function Oc(u){return u&&String(u).trim().toLowerCase()}function vf(u){return u===!1||u==null?u:V.isArray(u)?u.map(vf):String(u)}function KZ(u){const a=Object.create(null),f=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let m;for(;m=f.exec(u);)a[m[1]]=m[2];return a}const GZ=u=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(u.trim());function Eg(u,a,f,m,y){if(V.isFunction(m))return m.call(this,a,f);if(y&&(a=f),!!V.isString(a)){if(V.isString(m))return a.indexOf(m)!==-1;if(V.isRegExp(m))return m.test(a)}}function YZ(u){return u.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(a,f,m)=>f.toUpperCase()+m)}function XZ(u,a){const f=V.toCamelCase(" "+a);["get","set","has"].forEach(m=>{Object.defineProperty(u,m+f,{value:function(y,_,w){return this[m].call(this,a,y,_,w)},configurable:!0})})}class kn{constructor(a){a&&this.set(a)}set(a,f,m){const y=this;function _(x,M,z){const $=Oc(M);if(!$)throw new Error("header name must be a non-empty string");const re=V.findKey(y,$);(!re||y[re]===void 0||z===!0||z===void 0&&y[re]!==!1)&&(y[re||M]=vf(x))}const w=(x,M)=>V.forEach(x,(z,$)=>_(z,$,M));if(V.isPlainObject(a)||a instanceof this.constructor)w(a,f);else if(V.isString(a)&&(a=a.trim())&&!GZ(a))w(qZ(a),f);else if(V.isHeaders(a))for(const[x,M]of a.entries())_(M,x,m);else a!=null&&_(f,a,m);return this}get(a,f){if(a=Oc(a),a){const m=V.findKey(this,a);if(m){const y=this[m];if(!f)return y;if(f===!0)return KZ(y);if(V.isFunction(f))return f.call(this,y,m);if(V.isRegExp(f))return f.exec(y);throw new TypeError("parser must be boolean|regexp|function")}}}has(a,f){if(a=Oc(a),a){const m=V.findKey(this,a);return!!(m&&this[m]!==void 0&&(!f||Eg(this,this[m],m,f)))}return!1}delete(a,f){const m=this;let y=!1;function _(w){if(w=Oc(w),w){const x=V.findKey(m,w);x&&(!f||Eg(m,m[x],x,f))&&(delete m[x],y=!0)}}return V.isArray(a)?a.forEach(_):_(a),y}clear(a){const f=Object.keys(this);let m=f.length,y=!1;for(;m--;){const _=f[m];(!a||Eg(this,this[_],_,a,!0))&&(delete this[_],y=!0)}return y}normalize(a){const f=this,m={};return V.forEach(this,(y,_)=>{const w=V.findKey(m,_);if(w){f[w]=vf(y),delete f[_];return}const x=a?YZ(_):String(_).trim();x!==_&&delete f[_],f[x]=vf(y),m[x]=!0}),this}concat(...a){return this.constructor.concat(this,...a)}toJSON(a){const f=Object.create(null);return V.forEach(this,(m,y)=>{m!=null&&m!==!1&&(f[y]=a&&V.isArray(m)?m.join(", "):m)}),f}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([a,f])=>a+": "+f).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(a){return a instanceof this?a:new this(a)}static concat(a,...f){const m=new this(a);return f.forEach(y=>m.set(y)),m}static accessor(a){const m=(this[ex]=this[ex]={accessors:{}}).accessors,y=this.prototype;function _(w){const x=Oc(w);m[x]||(XZ(y,w),m[x]=!0)}return V.isArray(a)?a.forEach(_):_(a),this}}kn.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);V.reduceDescriptors(kn.prototype,({value:u},a)=>{let f=a[0].toUpperCase()+a.slice(1);return{get:()=>u,set(m){this[f]=m}}});V.freezeMethods(kn);function _g(u,a){const f=this||Fc,m=a||f,y=kn.from(m.headers);let _=m.data;return V.forEach(u,function(x){_=x.call(f,_,y.normalize(),a?a.status:void 0)}),y.normalize(),_}function aR(u){return!!(u&&u.__CANCEL__)}function Xi(u,a,f){Ye.call(this,u??"canceled",Ye.ERR_CANCELED,a,f),this.name="CanceledError"}V.inherits(Xi,Ye,{__CANCEL__:!0});function cR(u,a,f){const m=f.config.validateStatus;!f.status||!m||m(f.status)?u(f):a(new Ye("Request failed with status code "+f.status,[Ye.ERR_BAD_REQUEST,Ye.ERR_BAD_RESPONSE][Math.floor(f.status/100)-4],f.config,f.request,f))}function ZZ(u){const a=/^([-+\w]{1,25})(:?\/\/|:)/.exec(u);return a&&a[1]||""}function QZ(u,a){u=u||10;const f=new Array(u),m=new Array(u);let y=0,_=0,w;return a=a!==void 0?a:1e3,function(M){const z=Date.now(),$=m[_];w||(w=z),f[y]=M,m[y]=z;let re=_,we=0;for(;re!==y;)we+=f[re++],re=re%u;if(y=(y+1)%u,y===_&&(_=(_+1)%u),z-w<a)return;const _e=$&&z-$;return _e?Math.round(we*1e3/_e):void 0}}function JZ(u,a){let f=0,m=1e3/a,y,_;const w=(z,$=Date.now())=>{f=$,y=null,_&&(clearTimeout(_),_=null),u.apply(null,z)};return[(...z)=>{const $=Date.now(),re=$-f;re>=m?w(z,$):(y=z,_||(_=setTimeout(()=>{_=null,w(y)},m-re)))},()=>y&&w(y)]}const Sf=(u,a,f=3)=>{let m=0;const y=QZ(50,250);return JZ(_=>{const w=_.loaded,x=_.lengthComputable?_.total:void 0,M=w-m,z=y(M),$=w<=x;m=w;const re={loaded:w,total:x,progress:x?w/x:void 0,bytes:M,rate:z||void 0,estimated:z&&x&&$?(x-w)/z:void 0,event:_,lengthComputable:x!=null,[a?"download":"upload"]:!0};u(re)},f)},tx=(u,a)=>{const f=u!=null;return[m=>a[0]({lengthComputable:f,total:u,loaded:m}),a[1]]},nx=u=>(...a)=>V.asap(()=>u(...a)),eQ=Wn.hasStandardBrowserEnv?function(){const a=Wn.navigator&&/(msie|trident)/i.test(Wn.navigator.userAgent),f=document.createElement("a");let m;function y(_){let w=_;return a&&(f.setAttribute("href",w),w=f.href),f.setAttribute("href",w),{href:f.href,protocol:f.protocol?f.protocol.replace(/:$/,""):"",host:f.host,search:f.search?f.search.replace(/^\?/,""):"",hash:f.hash?f.hash.replace(/^#/,""):"",hostname:f.hostname,port:f.port,pathname:f.pathname.charAt(0)==="/"?f.pathname:"/"+f.pathname}}return m=y(window.location.href),function(w){const x=V.isString(w)?y(w):w;return x.protocol===m.protocol&&x.host===m.host}}():function(){return function(){return!0}}(),tQ=Wn.hasStandardBrowserEnv?{write(u,a,f,m,y,_){const w=[u+"="+encodeURIComponent(a)];V.isNumber(f)&&w.push("expires="+new Date(f).toGMTString()),V.isString(m)&&w.push("path="+m),V.isString(y)&&w.push("domain="+y),_===!0&&w.push("secure"),document.cookie=w.join("; ")},read(u){const a=document.cookie.match(new RegExp("(^|;\\s*)("+u+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove(u){this.write(u,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function nQ(u){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(u)}function sQ(u,a){return a?u.replace(/\/?\/$/,"")+"/"+a.replace(/^\/+/,""):u}function lR(u,a){return u&&!nQ(a)?sQ(u,a):a}const sx=u=>u instanceof kn?{...u}:u;function $r(u,a){a=a||{};const f={};function m(z,$,re){return V.isPlainObject(z)&&V.isPlainObject($)?V.merge.call({caseless:re},z,$):V.isPlainObject($)?V.merge({},$):V.isArray($)?$.slice():$}function y(z,$,re){if(V.isUndefined($)){if(!V.isUndefined(z))return m(void 0,z,re)}else return m(z,$,re)}function _(z,$){if(!V.isUndefined($))return m(void 0,$)}function w(z,$){if(V.isUndefined($)){if(!V.isUndefined(z))return m(void 0,z)}else return m(void 0,$)}function x(z,$,re){if(re in a)return m(z,$);if(re in u)return m(void 0,z)}const M={url:_,method:_,data:_,baseURL:w,transformRequest:w,transformResponse:w,paramsSerializer:w,timeout:w,timeoutMessage:w,withCredentials:w,withXSRFToken:w,adapter:w,responseType:w,xsrfCookieName:w,xsrfHeaderName:w,onUploadProgress:w,onDownloadProgress:w,decompress:w,maxContentLength:w,maxBodyLength:w,beforeRedirect:w,transport:w,httpAgent:w,httpsAgent:w,cancelToken:w,socketPath:w,responseEncoding:w,validateStatus:x,headers:(z,$)=>y(sx(z),sx($),!0)};return V.forEach(Object.keys(Object.assign({},u,a)),function($){const re=M[$]||y,we=re(u[$],a[$],$);V.isUndefined(we)&&re!==x||(f[$]=we)}),f}const uR=u=>{const a=$r({},u);let{data:f,withXSRFToken:m,xsrfHeaderName:y,xsrfCookieName:_,headers:w,auth:x}=a;a.headers=w=kn.from(w),a.url=oR(lR(a.baseURL,a.url),u.params,u.paramsSerializer),x&&w.set("Authorization","Basic "+btoa((x.username||"")+":"+(x.password?unescape(encodeURIComponent(x.password)):"")));let M;if(V.isFormData(f)){if(Wn.hasStandardBrowserEnv||Wn.hasStandardBrowserWebWorkerEnv)w.setContentType(void 0);else if((M=w.getContentType())!==!1){const[z,...$]=M?M.split(";").map(re=>re.trim()).filter(Boolean):[];w.setContentType([z||"multipart/form-data",...$].join("; "))}}if(Wn.hasStandardBrowserEnv&&(m&&V.isFunction(m)&&(m=m(a)),m||m!==!1&&eQ(a.url))){const z=y&&_&&tQ.read(_);z&&w.set(y,z)}return a},oQ=typeof XMLHttpRequest<"u",rQ=oQ&&function(u){return new Promise(function(f,m){const y=uR(u);let _=y.data;const w=kn.from(y.headers).normalize();let{responseType:x,onUploadProgress:M,onDownloadProgress:z}=y,$,re,we,_e,he;function ge(){_e&&_e(),he&&he(),y.cancelToken&&y.cancelToken.unsubscribe($),y.signal&&y.signal.removeEventListener("abort",$)}let ce=new XMLHttpRequest;ce.open(y.method.toUpperCase(),y.url,!0),ce.timeout=y.timeout;function We(){if(!ce)return;const G=kn.from("getAllResponseHeaders"in ce&&ce.getAllResponseHeaders()),je={data:!x||x==="text"||x==="json"?ce.responseText:ce.response,status:ce.status,statusText:ce.statusText,headers:G,config:u,request:ce};cR(function(Be){f(Be),ge()},function(Be){m(Be),ge()},je),ce=null}"onloadend"in ce?ce.onloadend=We:ce.onreadystatechange=function(){!ce||ce.readyState!==4||ce.status===0&&!(ce.responseURL&&ce.responseURL.indexOf("file:")===0)||setTimeout(We)},ce.onabort=function(){ce&&(m(new Ye("Request aborted",Ye.ECONNABORTED,u,ce)),ce=null)},ce.onerror=function(){m(new Ye("Network Error",Ye.ERR_NETWORK,u,ce)),ce=null},ce.ontimeout=function(){let ye=y.timeout?"timeout of "+y.timeout+"ms exceeded":"timeout exceeded";const je=y.transitional||rR;y.timeoutErrorMessage&&(ye=y.timeoutErrorMessage),m(new Ye(ye,je.clarifyTimeoutError?Ye.ETIMEDOUT:Ye.ECONNABORTED,u,ce)),ce=null},_===void 0&&w.setContentType(null),"setRequestHeader"in ce&&V.forEach(w.toJSON(),function(ye,je){ce.setRequestHeader(je,ye)}),V.isUndefined(y.withCredentials)||(ce.withCredentials=!!y.withCredentials),x&&x!=="json"&&(ce.responseType=y.responseType),z&&([we,he]=Sf(z,!0),ce.addEventListener("progress",we)),M&&ce.upload&&([re,_e]=Sf(M),ce.upload.addEventListener("progress",re),ce.upload.addEventListener("loadend",_e)),(y.cancelToken||y.signal)&&($=G=>{ce&&(m(!G||G.type?new Xi(null,u,ce):G),ce.abort(),ce=null)},y.cancelToken&&y.cancelToken.subscribe($),y.signal&&(y.signal.aborted?$():y.signal.addEventListener("abort",$)));const Xe=ZZ(y.url);if(Xe&&Wn.protocols.indexOf(Xe)===-1){m(new Ye("Unsupported protocol "+Xe+":",Ye.ERR_BAD_REQUEST,u));return}ce.send(_||null)})},iQ=(u,a)=>{let f=new AbortController,m;const y=function(M){if(!m){m=!0,w();const z=M instanceof Error?M:this.reason;f.abort(z instanceof Ye?z:new Xi(z instanceof Error?z.message:z))}};let _=a&&setTimeout(()=>{y(new Ye(`timeout ${a} of ms exceeded`,Ye.ETIMEDOUT))},a);const w=()=>{u&&(_&&clearTimeout(_),_=null,u.forEach(M=>{M&&(M.removeEventListener?M.removeEventListener("abort",y):M.unsubscribe(y))}),u=null)};u.forEach(M=>M&&M.addEventListener&&M.addEventListener("abort",y));const{signal:x}=f;return x.unsubscribe=w,[x,()=>{_&&clearTimeout(_),_=null}]},aQ=function*(u,a){let f=u.byteLength;if(!a||f<a){yield u;return}let m=0,y;for(;m<f;)y=m+a,yield u.slice(m,y),m=y},cQ=async function*(u,a,f){for await(const m of u)yield*aQ(ArrayBuffer.isView(m)?m:await f(String(m)),a)},ox=(u,a,f,m,y)=>{const _=cQ(u,a,y);let w=0,x,M=z=>{x||(x=!0,m&&m(z))};return new ReadableStream({async pull(z){try{const{done:$,value:re}=await _.next();if($){M(),z.close();return}let we=re.byteLength;if(f){let _e=w+=we;f(_e)}z.enqueue(new Uint8Array(re))}catch($){throw M($),$}},cancel(z){return M(z),_.return()}},{highWaterMark:2})},Pf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",fR=Pf&&typeof ReadableStream=="function",zg=Pf&&(typeof TextEncoder=="function"?(u=>a=>u.encode(a))(new TextEncoder):async u=>new Uint8Array(await new Response(u).arrayBuffer())),dR=(u,...a)=>{try{return!!u(...a)}catch{return!1}},lQ=fR&&dR(()=>{let u=!1;const a=new Request(Wn.origin,{body:new ReadableStream,method:"POST",get duplex(){return u=!0,"half"}}).headers.has("Content-Type");return u&&!a}),rx=64*1024,Vg=fR&&dR(()=>V.isReadableStream(new Response("").body)),wf={stream:Vg&&(u=>u.body)};Pf&&(u=>{["text","arrayBuffer","blob","formData","stream"].forEach(a=>{!wf[a]&&(wf[a]=V.isFunction(u[a])?f=>f[a]():(f,m)=>{throw new Ye(`Response type '${a}' is not supported`,Ye.ERR_NOT_SUPPORT,m)})})})(new Response);const uQ=async u=>{if(u==null)return 0;if(V.isBlob(u))return u.size;if(V.isSpecCompliantForm(u))return(await new Request(u).arrayBuffer()).byteLength;if(V.isArrayBufferView(u)||V.isArrayBuffer(u))return u.byteLength;if(V.isURLSearchParams(u)&&(u=u+""),V.isString(u))return(await zg(u)).byteLength},fQ=async(u,a)=>{const f=V.toFiniteNumber(u.getContentLength());return f??uQ(a)},dQ=Pf&&(async u=>{let{url:a,method:f,data:m,signal:y,cancelToken:_,timeout:w,onDownloadProgress:x,onUploadProgress:M,responseType:z,headers:$,withCredentials:re="same-origin",fetchOptions:we}=uR(u);z=z?(z+"").toLowerCase():"text";let[_e,he]=y||_||w?iQ([y,_],w):[],ge,ce;const We=()=>{!ge&&setTimeout(()=>{_e&&_e.unsubscribe()}),ge=!0};let Xe;try{if(M&&lQ&&f!=="get"&&f!=="head"&&(Xe=await fQ($,m))!==0){let Be=new Request(a,{method:"POST",body:m,duplex:"half"}),nt;if(V.isFormData(m)&&(nt=Be.headers.get("content-type"))&&$.setContentType(nt),Be.body){const[qe,Fe]=tx(Xe,Sf(nx(M)));m=ox(Be.body,rx,qe,Fe,zg)}}V.isString(re)||(re=re?"include":"omit");const G="credentials"in Request.prototype;ce=new Request(a,{...we,signal:_e,method:f.toUpperCase(),headers:$.normalize().toJSON(),body:m,duplex:"half",credentials:G?re:void 0});let ye=await fetch(ce);const je=Vg&&(z==="stream"||z==="response");if(Vg&&(x||je)){const Be={};["status","statusText","headers"].forEach(j=>{Be[j]=ye[j]});const nt=V.toFiniteNumber(ye.headers.get("content-length")),[qe,Fe]=x&&tx(nt,Sf(nx(x),!0))||[];ye=new Response(ox(ye.body,rx,qe,()=>{Fe&&Fe(),je&&We()},zg),Be)}z=z||"text";let Te=await wf[V.findKey(wf,z)||"text"](ye,u);return!je&&We(),he&&he(),await new Promise((Be,nt)=>{cR(Be,nt,{data:Te,headers:kn.from(ye.headers),status:ye.status,statusText:ye.statusText,config:u,request:ce})})}catch(G){throw We(),G&&G.name==="TypeError"&&/fetch/i.test(G.message)?Object.assign(new Ye("Network Error",Ye.ERR_NETWORK,u,ce),{cause:G.cause||G}):Ye.from(G,G&&G.code,u,ce)}}),Wg={http:xZ,xhr:rQ,fetch:dQ};V.forEach(Wg,(u,a)=>{if(u){try{Object.defineProperty(u,"name",{value:a})}catch{}Object.defineProperty(u,"adapterName",{value:a})}});const ix=u=>`- ${u}`,mQ=u=>V.isFunction(u)||u===null||u===!1,mR={getAdapter:u=>{u=V.isArray(u)?u:[u];const{length:a}=u;let f,m;const y={};for(let _=0;_<a;_++){f=u[_];let w;if(m=f,!mQ(f)&&(m=Wg[(w=String(f)).toLowerCase()],m===void 0))throw new Ye(`Unknown adapter '${w}'`);if(m)break;y[w||"#"+_]=m}if(!m){const _=Object.entries(y).map(([x,M])=>`adapter ${x} `+(M===!1?"is not supported by the environment":"is not available in the build"));let w=a?_.length>1?`since :
`+_.map(ix).join(`
`):" "+ix(_[0]):"as no adapter specified";throw new Ye("There is no suitable adapter to dispatch the request "+w,"ERR_NOT_SUPPORT")}return m},adapters:Wg};function Sg(u){if(u.cancelToken&&u.cancelToken.throwIfRequested(),u.signal&&u.signal.aborted)throw new Xi(null,u)}function ax(u){return Sg(u),u.headers=kn.from(u.headers),u.data=_g.call(u,u.transformRequest),["post","put","patch"].indexOf(u.method)!==-1&&u.headers.setContentType("application/x-www-form-urlencoded",!1),mR.getAdapter(u.adapter||Fc.adapter)(u).then(function(m){return Sg(u),m.data=_g.call(u,u.transformResponse,m),m.headers=kn.from(m.headers),m},function(m){return aR(m)||(Sg(u),m&&m.response&&(m.response.data=_g.call(u,u.transformResponse,m.response),m.response.headers=kn.from(m.response.headers))),Promise.reject(m)})}const pR="1.7.5",sb={};["object","boolean","number","function","string","symbol"].forEach((u,a)=>{sb[u]=function(m){return typeof m===u||"a"+(a<1?"n ":" ")+u}});const cx={};sb.transitional=function(a,f,m){function y(_,w){return"[Axios v"+pR+"] Transitional option '"+_+"'"+w+(m?". "+m:"")}return(_,w,x)=>{if(a===!1)throw new Ye(y(w," has been removed"+(f?" in "+f:"")),Ye.ERR_DEPRECATED);return f&&!cx[w]&&(cx[w]=!0,console.warn(y(w," has been deprecated since v"+f+" and will be removed in the near future"))),a?a(_,w,x):!0}};function pQ(u,a,f){if(typeof u!="object")throw new Ye("options must be an object",Ye.ERR_BAD_OPTION_VALUE);const m=Object.keys(u);let y=m.length;for(;y-- >0;){const _=m[y],w=a[_];if(w){const x=u[_],M=x===void 0||w(x,_,u);if(M!==!0)throw new Ye("option "+_+" must be "+M,Ye.ERR_BAD_OPTION_VALUE);continue}if(f!==!0)throw new Ye("Unknown option "+_,Ye.ERR_BAD_OPTION)}}const jg={assertOptions:pQ,validators:sb},$o=jg.validators;class Lr{constructor(a){this.defaults=a,this.interceptors={request:new Jk,response:new Jk}}async request(a,f){try{return await this._request(a,f)}catch(m){if(m instanceof Error){let y;Error.captureStackTrace?Error.captureStackTrace(y={}):y=new Error;const _=y.stack?y.stack.replace(/^.+\n/,""):"";try{m.stack?_&&!String(m.stack).endsWith(_.replace(/^.+\n.+\n/,""))&&(m.stack+=`
`+_):m.stack=_}catch{}}throw m}}_request(a,f){typeof a=="string"?(f=f||{},f.url=a):f=a||{},f=$r(this.defaults,f);const{transitional:m,paramsSerializer:y,headers:_}=f;m!==void 0&&jg.assertOptions(m,{silentJSONParsing:$o.transitional($o.boolean),forcedJSONParsing:$o.transitional($o.boolean),clarifyTimeoutError:$o.transitional($o.boolean)},!1),y!=null&&(V.isFunction(y)?f.paramsSerializer={serialize:y}:jg.assertOptions(y,{encode:$o.function,serialize:$o.function},!0)),f.method=(f.method||this.defaults.method||"get").toLowerCase();let w=_&&V.merge(_.common,_[f.method]);_&&V.forEach(["delete","get","head","post","put","patch","common"],he=>{delete _[he]}),f.headers=kn.concat(w,_);const x=[];let M=!0;this.interceptors.request.forEach(function(ge){typeof ge.runWhen=="function"&&ge.runWhen(f)===!1||(M=M&&ge.synchronous,x.unshift(ge.fulfilled,ge.rejected))});const z=[];this.interceptors.response.forEach(function(ge){z.push(ge.fulfilled,ge.rejected)});let $,re=0,we;if(!M){const he=[ax.bind(this),void 0];for(he.unshift.apply(he,x),he.push.apply(he,z),we=he.length,$=Promise.resolve(f);re<we;)$=$.then(he[re++],he[re++]);return $}we=x.length;let _e=f;for(re=0;re<we;){const he=x[re++],ge=x[re++];try{_e=he(_e)}catch(ce){ge.call(this,ce);break}}try{$=ax.call(this,_e)}catch(he){return Promise.reject(he)}for(re=0,we=z.length;re<we;)$=$.then(z[re++],z[re++]);return $}getUri(a){a=$r(this.defaults,a);const f=lR(a.baseURL,a.url);return oR(f,a.params,a.paramsSerializer)}}V.forEach(["delete","get","head","options"],function(a){Lr.prototype[a]=function(f,m){return this.request($r(m||{},{method:a,url:f,data:(m||{}).data}))}});V.forEach(["post","put","patch"],function(a){function f(m){return function(_,w,x){return this.request($r(x||{},{method:a,headers:m?{"Content-Type":"multipart/form-data"}:{},url:_,data:w}))}}Lr.prototype[a]=f(),Lr.prototype[a+"Form"]=f(!0)});class ob{constructor(a){if(typeof a!="function")throw new TypeError("executor must be a function.");let f;this.promise=new Promise(function(_){f=_});const m=this;this.promise.then(y=>{if(!m._listeners)return;let _=m._listeners.length;for(;_-- >0;)m._listeners[_](y);m._listeners=null}),this.promise.then=y=>{let _;const w=new Promise(x=>{m.subscribe(x),_=x}).then(y);return w.cancel=function(){m.unsubscribe(_)},w},a(function(_,w,x){m.reason||(m.reason=new Xi(_,w,x),f(m.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(a){if(this.reason){a(this.reason);return}this._listeners?this._listeners.push(a):this._listeners=[a]}unsubscribe(a){if(!this._listeners)return;const f=this._listeners.indexOf(a);f!==-1&&this._listeners.splice(f,1)}static source(){let a;return{token:new ob(function(y){a=y}),cancel:a}}}function hQ(u){return function(f){return u.apply(null,f)}}function gQ(u){return V.isObject(u)&&u.isAxiosError===!0}const qg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(qg).forEach(([u,a])=>{qg[a]=u});function hR(u){const a=new Lr(u),f=qx(Lr.prototype.request,a);return V.extend(f,Lr.prototype,a,{allOwnKeys:!0}),V.extend(f,a,null,{allOwnKeys:!0}),f.create=function(y){return hR($r(u,y))},f}const Ut=hR(Fc);Ut.Axios=Lr;Ut.CanceledError=Xi;Ut.CancelToken=ob;Ut.isCancel=aR;Ut.VERSION=pR;Ut.toFormData=Df;Ut.AxiosError=Ye;Ut.Cancel=Ut.CanceledError;Ut.all=function(a){return Promise.all(a)};Ut.spread=hQ;Ut.isAxiosError=gQ;Ut.mergeConfig=$r;Ut.AxiosHeaders=kn;Ut.formToJSON=u=>iR(V.isHTMLForm(u)?new FormData(u):u);Ut.getAdapter=mR.getAdapter;Ut.HttpStatusCode=qg;Ut.default=Ut;window.axios=Ut;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";var gn="top",jn="bottom",qn="right",bn="left",Bf="auto",Zi=[gn,jn,qn,bn],Mr="start",zi="end",gR="clippingParents",rb="viewport",Mi="popper",bR="reference",Kg=Zi.reduce(function(u,a){return u.concat([a+"-"+Mr,a+"-"+zi])},[]),ib=[].concat(Zi,[Bf]).reduce(function(u,a){return u.concat([a,a+"-"+Mr,a+"-"+zi])},[]),yR="beforeRead",vR="read",CR="afterRead",ER="beforeMain",_R="main",SR="afterMain",wR="beforeWrite",AR="write",TR="afterWrite",NR=[yR,vR,CR,ER,_R,SR,wR,AR,TR];function Ks(u){return u?(u.nodeName||"").toLowerCase():null}function Kn(u){if(u==null)return window;if(u.toString()!=="[object Window]"){var a=u.ownerDocument;return a&&a.defaultView||window}return u}function Fr(u){var a=Kn(u).Element;return u instanceof a||u instanceof Element}function rs(u){var a=Kn(u).HTMLElement;return u instanceof a||u instanceof HTMLElement}function ab(u){if(typeof ShadowRoot>"u")return!1;var a=Kn(u).ShadowRoot;return u instanceof a||u instanceof ShadowRoot}function bQ(u){var a=u.state;Object.keys(a.elements).forEach(function(f){var m=a.styles[f]||{},y=a.attributes[f]||{},_=a.elements[f];!rs(_)||!Ks(_)||(Object.assign(_.style,m),Object.keys(y).forEach(function(w){var x=y[w];x===!1?_.removeAttribute(w):_.setAttribute(w,x===!0?"":x)}))})}function yQ(u){var a=u.state,f={popper:{position:a.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(a.elements.popper.style,f.popper),a.styles=f,a.elements.arrow&&Object.assign(a.elements.arrow.style,f.arrow),function(){Object.keys(a.elements).forEach(function(m){var y=a.elements[m],_=a.attributes[m]||{},w=Object.keys(a.styles.hasOwnProperty(m)?a.styles[m]:f[m]),x=w.reduce(function(M,z){return M[z]="",M},{});!rs(y)||!Ks(y)||(Object.assign(y.style,x),Object.keys(_).forEach(function(M){y.removeAttribute(M)}))})}}const cb={name:"applyStyles",enabled:!0,phase:"write",fn:bQ,effect:yQ,requires:["computeStyles"]};function js(u){return u.split("-")[0]}var Ir=Math.max,Af=Math.min,Vi=Math.round;function Gg(){var u=navigator.userAgentData;return u!=null&&u.brands&&Array.isArray(u.brands)?u.brands.map(function(a){return a.brand+"/"+a.version}).join(" "):navigator.userAgent}function kR(){return!/^((?!chrome|android).)*safari/i.test(Gg())}function Wi(u,a,f){a===void 0&&(a=!1),f===void 0&&(f=!1);var m=u.getBoundingClientRect(),y=1,_=1;a&&rs(u)&&(y=u.offsetWidth>0&&Vi(m.width)/u.offsetWidth||1,_=u.offsetHeight>0&&Vi(m.height)/u.offsetHeight||1);var w=Fr(u)?Kn(u):window,x=w.visualViewport,M=!kR()&&f,z=(m.left+(M&&x?x.offsetLeft:0))/y,$=(m.top+(M&&x?x.offsetTop:0))/_,re=m.width/y,we=m.height/_;return{width:re,height:we,top:$,right:z+re,bottom:$+we,left:z,x:z,y:$}}function lb(u){var a=Wi(u),f=u.offsetWidth,m=u.offsetHeight;return Math.abs(a.width-f)<=1&&(f=a.width),Math.abs(a.height-m)<=1&&(m=a.height),{x:u.offsetLeft,y:u.offsetTop,width:f,height:m}}function xR(u,a){var f=a.getRootNode&&a.getRootNode();if(u.contains(a))return!0;if(f&&ab(f)){var m=a;do{if(m&&u.isSameNode(m))return!0;m=m.parentNode||m.host}while(m)}return!1}function fo(u){return Kn(u).getComputedStyle(u)}function vQ(u){return["table","td","th"].indexOf(Ks(u))>=0}function zo(u){return((Fr(u)?u.ownerDocument:u.document)||window.document).documentElement}function Lf(u){return Ks(u)==="html"?u:u.assignedSlot||u.parentNode||(ab(u)?u.host:null)||zo(u)}function lx(u){return!rs(u)||fo(u).position==="fixed"?null:u.offsetParent}function CQ(u){var a=/firefox/i.test(Gg()),f=/Trident/i.test(Gg());if(f&&rs(u)){var m=fo(u);if(m.position==="fixed")return null}var y=Lf(u);for(ab(y)&&(y=y.host);rs(y)&&["html","body"].indexOf(Ks(y))<0;){var _=fo(y);if(_.transform!=="none"||_.perspective!=="none"||_.contain==="paint"||["transform","perspective"].indexOf(_.willChange)!==-1||a&&_.willChange==="filter"||a&&_.filter&&_.filter!=="none")return y;y=y.parentNode}return null}function Uc(u){for(var a=Kn(u),f=lx(u);f&&vQ(f)&&fo(f).position==="static";)f=lx(f);return f&&(Ks(f)==="html"||Ks(f)==="body"&&fo(f).position==="static")?a:f||CQ(u)||a}function ub(u){return["top","bottom"].indexOf(u)>=0?"x":"y"}function Bc(u,a,f){return Ir(u,Af(a,f))}function EQ(u,a,f){var m=Bc(u,a,f);return m>f?f:m}function RR(){return{top:0,right:0,bottom:0,left:0}}function OR(u){return Object.assign({},RR(),u)}function DR(u,a){return a.reduce(function(f,m){return f[m]=u,f},{})}var _Q=function(a,f){return a=typeof a=="function"?a(Object.assign({},f.rects,{placement:f.placement})):a,OR(typeof a!="number"?a:DR(a,Zi))};function SQ(u){var a,f=u.state,m=u.name,y=u.options,_=f.elements.arrow,w=f.modifiersData.popperOffsets,x=js(f.placement),M=ub(x),z=[bn,qn].indexOf(x)>=0,$=z?"height":"width";if(!(!_||!w)){var re=_Q(y.padding,f),we=lb(_),_e=M==="y"?gn:bn,he=M==="y"?jn:qn,ge=f.rects.reference[$]+f.rects.reference[M]-w[M]-f.rects.popper[$],ce=w[M]-f.rects.reference[M],We=Uc(_),Xe=We?M==="y"?We.clientHeight||0:We.clientWidth||0:0,G=ge/2-ce/2,ye=re[_e],je=Xe-we[$]-re[he],Te=Xe/2-we[$]/2+G,Be=Bc(ye,Te,je),nt=M;f.modifiersData[m]=(a={},a[nt]=Be,a.centerOffset=Be-Te,a)}}function wQ(u){var a=u.state,f=u.options,m=f.element,y=m===void 0?"[data-popper-arrow]":m;y!=null&&(typeof y=="string"&&(y=a.elements.popper.querySelector(y),!y)||xR(a.elements.popper,y)&&(a.elements.arrow=y))}const PR={name:"arrow",enabled:!0,phase:"main",fn:SQ,effect:wQ,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ji(u){return u.split("-")[1]}var AQ={top:"auto",right:"auto",bottom:"auto",left:"auto"};function TQ(u,a){var f=u.x,m=u.y,y=a.devicePixelRatio||1;return{x:Vi(f*y)/y||0,y:Vi(m*y)/y||0}}function ux(u){var a,f=u.popper,m=u.popperRect,y=u.placement,_=u.variation,w=u.offsets,x=u.position,M=u.gpuAcceleration,z=u.adaptive,$=u.roundOffsets,re=u.isFixed,we=w.x,_e=we===void 0?0:we,he=w.y,ge=he===void 0?0:he,ce=typeof $=="function"?$({x:_e,y:ge}):{x:_e,y:ge};_e=ce.x,ge=ce.y;var We=w.hasOwnProperty("x"),Xe=w.hasOwnProperty("y"),G=bn,ye=gn,je=window;if(z){var Te=Uc(f),Be="clientHeight",nt="clientWidth";if(Te===Kn(f)&&(Te=zo(f),fo(Te).position!=="static"&&x==="absolute"&&(Be="scrollHeight",nt="scrollWidth")),Te=Te,y===gn||(y===bn||y===qn)&&_===zi){ye=jn;var qe=re&&Te===je&&je.visualViewport?je.visualViewport.height:Te[Be];ge-=qe-m.height,ge*=M?1:-1}if(y===bn||(y===gn||y===jn)&&_===zi){G=qn;var Fe=re&&Te===je&&je.visualViewport?je.visualViewport.width:Te[nt];_e-=Fe-m.width,_e*=M?1:-1}}var j=Object.assign({position:x},z&&AQ),$e=$===!0?TQ({x:_e,y:ge},Kn(f)):{x:_e,y:ge};if(_e=$e.x,ge=$e.y,M){var pt;return Object.assign({},j,(pt={},pt[ye]=Xe?"0":"",pt[G]=We?"0":"",pt.transform=(je.devicePixelRatio||1)<=1?"translate("+_e+"px, "+ge+"px)":"translate3d("+_e+"px, "+ge+"px, 0)",pt))}return Object.assign({},j,(a={},a[ye]=Xe?ge+"px":"",a[G]=We?_e+"px":"",a.transform="",a))}function NQ(u){var a=u.state,f=u.options,m=f.gpuAcceleration,y=m===void 0?!0:m,_=f.adaptive,w=_===void 0?!0:_,x=f.roundOffsets,M=x===void 0?!0:x,z={placement:js(a.placement),variation:ji(a.placement),popper:a.elements.popper,popperRect:a.rects.popper,gpuAcceleration:y,isFixed:a.options.strategy==="fixed"};a.modifiersData.popperOffsets!=null&&(a.styles.popper=Object.assign({},a.styles.popper,ux(Object.assign({},z,{offsets:a.modifiersData.popperOffsets,position:a.options.strategy,adaptive:w,roundOffsets:M})))),a.modifiersData.arrow!=null&&(a.styles.arrow=Object.assign({},a.styles.arrow,ux(Object.assign({},z,{offsets:a.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:M})))),a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-placement":a.placement})}const fb={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:NQ,data:{}};var ff={passive:!0};function kQ(u){var a=u.state,f=u.instance,m=u.options,y=m.scroll,_=y===void 0?!0:y,w=m.resize,x=w===void 0?!0:w,M=Kn(a.elements.popper),z=[].concat(a.scrollParents.reference,a.scrollParents.popper);return _&&z.forEach(function($){$.addEventListener("scroll",f.update,ff)}),x&&M.addEventListener("resize",f.update,ff),function(){_&&z.forEach(function($){$.removeEventListener("scroll",f.update,ff)}),x&&M.removeEventListener("resize",f.update,ff)}}const db={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:kQ,data:{}};var xQ={left:"right",right:"left",bottom:"top",top:"bottom"};function Cf(u){return u.replace(/left|right|bottom|top/g,function(a){return xQ[a]})}var RQ={start:"end",end:"start"};function fx(u){return u.replace(/start|end/g,function(a){return RQ[a]})}function mb(u){var a=Kn(u),f=a.pageXOffset,m=a.pageYOffset;return{scrollLeft:f,scrollTop:m}}function pb(u){return Wi(zo(u)).left+mb(u).scrollLeft}function OQ(u,a){var f=Kn(u),m=zo(u),y=f.visualViewport,_=m.clientWidth,w=m.clientHeight,x=0,M=0;if(y){_=y.width,w=y.height;var z=kR();(z||!z&&a==="fixed")&&(x=y.offsetLeft,M=y.offsetTop)}return{width:_,height:w,x:x+pb(u),y:M}}function DQ(u){var a,f=zo(u),m=mb(u),y=(a=u.ownerDocument)==null?void 0:a.body,_=Ir(f.scrollWidth,f.clientWidth,y?y.scrollWidth:0,y?y.clientWidth:0),w=Ir(f.scrollHeight,f.clientHeight,y?y.scrollHeight:0,y?y.clientHeight:0),x=-m.scrollLeft+pb(u),M=-m.scrollTop;return fo(y||f).direction==="rtl"&&(x+=Ir(f.clientWidth,y?y.clientWidth:0)-_),{width:_,height:w,x,y:M}}function hb(u){var a=fo(u),f=a.overflow,m=a.overflowX,y=a.overflowY;return/auto|scroll|overlay|hidden/.test(f+y+m)}function BR(u){return["html","body","#document"].indexOf(Ks(u))>=0?u.ownerDocument.body:rs(u)&&hb(u)?u:BR(Lf(u))}function Lc(u,a){var f;a===void 0&&(a=[]);var m=BR(u),y=m===((f=u.ownerDocument)==null?void 0:f.body),_=Kn(m),w=y?[_].concat(_.visualViewport||[],hb(m)?m:[]):m,x=a.concat(w);return y?x:x.concat(Lc(Lf(w)))}function Yg(u){return Object.assign({},u,{left:u.x,top:u.y,right:u.x+u.width,bottom:u.y+u.height})}function PQ(u,a){var f=Wi(u,!1,a==="fixed");return f.top=f.top+u.clientTop,f.left=f.left+u.clientLeft,f.bottom=f.top+u.clientHeight,f.right=f.left+u.clientWidth,f.width=u.clientWidth,f.height=u.clientHeight,f.x=f.left,f.y=f.top,f}function dx(u,a,f){return a===rb?Yg(OQ(u,f)):Fr(a)?PQ(a,f):Yg(DQ(zo(u)))}function BQ(u){var a=Lc(Lf(u)),f=["absolute","fixed"].indexOf(fo(u).position)>=0,m=f&&rs(u)?Uc(u):u;return Fr(m)?a.filter(function(y){return Fr(y)&&xR(y,m)&&Ks(y)!=="body"}):[]}function LQ(u,a,f,m){var y=a==="clippingParents"?BQ(u):[].concat(a),_=[].concat(y,[f]),w=_[0],x=_.reduce(function(M,z){var $=dx(u,z,m);return M.top=Ir($.top,M.top),M.right=Af($.right,M.right),M.bottom=Af($.bottom,M.bottom),M.left=Ir($.left,M.left),M},dx(u,w,m));return x.width=x.right-x.left,x.height=x.bottom-x.top,x.x=x.left,x.y=x.top,x}function LR(u){var a=u.reference,f=u.element,m=u.placement,y=m?js(m):null,_=m?ji(m):null,w=a.x+a.width/2-f.width/2,x=a.y+a.height/2-f.height/2,M;switch(y){case gn:M={x:w,y:a.y-f.height};break;case jn:M={x:w,y:a.y+a.height};break;case qn:M={x:a.x+a.width,y:x};break;case bn:M={x:a.x-f.width,y:x};break;default:M={x:a.x,y:a.y}}var z=y?ub(y):null;if(z!=null){var $=z==="y"?"height":"width";switch(_){case Mr:M[z]=M[z]-(a[$]/2-f[$]/2);break;case zi:M[z]=M[z]+(a[$]/2-f[$]/2);break}}return M}function qi(u,a){a===void 0&&(a={});var f=a,m=f.placement,y=m===void 0?u.placement:m,_=f.strategy,w=_===void 0?u.strategy:_,x=f.boundary,M=x===void 0?gR:x,z=f.rootBoundary,$=z===void 0?rb:z,re=f.elementContext,we=re===void 0?Mi:re,_e=f.altBoundary,he=_e===void 0?!1:_e,ge=f.padding,ce=ge===void 0?0:ge,We=OR(typeof ce!="number"?ce:DR(ce,Zi)),Xe=we===Mi?bR:Mi,G=u.rects.popper,ye=u.elements[he?Xe:we],je=LQ(Fr(ye)?ye:ye.contextElement||zo(u.elements.popper),M,$,w),Te=Wi(u.elements.reference),Be=LR({reference:Te,element:G,strategy:"absolute",placement:y}),nt=Yg(Object.assign({},G,Be)),qe=we===Mi?nt:Te,Fe={top:je.top-qe.top+We.top,bottom:qe.bottom-je.bottom+We.bottom,left:je.left-qe.left+We.left,right:qe.right-je.right+We.right},j=u.modifiersData.offset;if(we===Mi&&j){var $e=j[y];Object.keys(Fe).forEach(function(pt){var yn=[qn,jn].indexOf(pt)>=0?1:-1,Se=[gn,jn].indexOf(pt)>=0?"y":"x";Fe[pt]+=$e[Se]*yn})}return Fe}function IQ(u,a){a===void 0&&(a={});var f=a,m=f.placement,y=f.boundary,_=f.rootBoundary,w=f.padding,x=f.flipVariations,M=f.allowedAutoPlacements,z=M===void 0?ib:M,$=ji(m),re=$?x?Kg:Kg.filter(function(he){return ji(he)===$}):Zi,we=re.filter(function(he){return z.indexOf(he)>=0});we.length===0&&(we=re);var _e=we.reduce(function(he,ge){return he[ge]=qi(u,{placement:ge,boundary:y,rootBoundary:_,padding:w})[js(ge)],he},{});return Object.keys(_e).sort(function(he,ge){return _e[he]-_e[ge]})}function $Q(u){if(js(u)===Bf)return[];var a=Cf(u);return[fx(u),a,fx(a)]}function MQ(u){var a=u.state,f=u.options,m=u.name;if(!a.modifiersData[m]._skip){for(var y=f.mainAxis,_=y===void 0?!0:y,w=f.altAxis,x=w===void 0?!0:w,M=f.fallbackPlacements,z=f.padding,$=f.boundary,re=f.rootBoundary,we=f.altBoundary,_e=f.flipVariations,he=_e===void 0?!0:_e,ge=f.allowedAutoPlacements,ce=a.options.placement,We=js(ce),Xe=We===ce,G=M||(Xe||!he?[Cf(ce)]:$Q(ce)),ye=[ce].concat(G).reduce(function(As,Cn){return As.concat(js(Cn)===Bf?IQ(a,{placement:Cn,boundary:$,rootBoundary:re,padding:z,flipVariations:he,allowedAutoPlacements:ge}):Cn)},[]),je=a.rects.reference,Te=a.rects.popper,Be=new Map,nt=!0,qe=ye[0],Fe=0;Fe<ye.length;Fe++){var j=ye[Fe],$e=js(j),pt=ji(j)===Mr,yn=[gn,jn].indexOf($e)>=0,Se=yn?"width":"height",_t=qi(a,{placement:j,boundary:$,rootBoundary:re,altBoundary:we,padding:z}),vn=yn?pt?qn:bn:pt?jn:gn;je[Se]>Te[Se]&&(vn=Cf(vn));var te=Cf(vn),St=[];if(_&&St.push(_t[$e]<=0),x&&St.push(_t[vn]<=0,_t[te]<=0),St.every(function(As){return As})){qe=j,nt=!1;break}Be.set(j,St)}if(nt)for(var jo=he?3:1,ae=function(Cn){var tt=ye.find(function(dt){var b=Be.get(dt);if(b)return b.slice(0,Cn).every(function(Ko){return Ko})});if(tt)return qe=tt,"break"},ls=jo;ls>0;ls--){var qo=ae(ls);if(qo==="break")break}a.placement!==qe&&(a.modifiersData[m]._skip=!0,a.placement=qe,a.reset=!0)}}const IR={name:"flip",enabled:!0,phase:"main",fn:MQ,requiresIfExists:["offset"],data:{_skip:!1}};function mx(u,a,f){return f===void 0&&(f={x:0,y:0}),{top:u.top-a.height-f.y,right:u.right-a.width+f.x,bottom:u.bottom-a.height+f.y,left:u.left-a.width-f.x}}function px(u){return[gn,qn,jn,bn].some(function(a){return u[a]>=0})}function FQ(u){var a=u.state,f=u.name,m=a.rects.reference,y=a.rects.popper,_=a.modifiersData.preventOverflow,w=qi(a,{elementContext:"reference"}),x=qi(a,{altBoundary:!0}),M=mx(w,m),z=mx(x,y,_),$=px(M),re=px(z);a.modifiersData[f]={referenceClippingOffsets:M,popperEscapeOffsets:z,isReferenceHidden:$,hasPopperEscaped:re},a.attributes.popper=Object.assign({},a.attributes.popper,{"data-popper-reference-hidden":$,"data-popper-escaped":re})}const $R={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:FQ};function UQ(u,a,f){var m=js(u),y=[bn,gn].indexOf(m)>=0?-1:1,_=typeof f=="function"?f(Object.assign({},a,{placement:u})):f,w=_[0],x=_[1];return w=w||0,x=(x||0)*y,[bn,qn].indexOf(m)>=0?{x,y:w}:{x:w,y:x}}function HQ(u){var a=u.state,f=u.options,m=u.name,y=f.offset,_=y===void 0?[0,0]:y,w=ib.reduce(function($,re){return $[re]=UQ(re,a.rects,_),$},{}),x=w[a.placement],M=x.x,z=x.y;a.modifiersData.popperOffsets!=null&&(a.modifiersData.popperOffsets.x+=M,a.modifiersData.popperOffsets.y+=z),a.modifiersData[m]=w}const MR={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:HQ};function zQ(u){var a=u.state,f=u.name;a.modifiersData[f]=LR({reference:a.rects.reference,element:a.rects.popper,strategy:"absolute",placement:a.placement})}const gb={name:"popperOffsets",enabled:!0,phase:"read",fn:zQ,data:{}};function VQ(u){return u==="x"?"y":"x"}function WQ(u){var a=u.state,f=u.options,m=u.name,y=f.mainAxis,_=y===void 0?!0:y,w=f.altAxis,x=w===void 0?!1:w,M=f.boundary,z=f.rootBoundary,$=f.altBoundary,re=f.padding,we=f.tether,_e=we===void 0?!0:we,he=f.tetherOffset,ge=he===void 0?0:he,ce=qi(a,{boundary:M,rootBoundary:z,padding:re,altBoundary:$}),We=js(a.placement),Xe=ji(a.placement),G=!Xe,ye=ub(We),je=VQ(ye),Te=a.modifiersData.popperOffsets,Be=a.rects.reference,nt=a.rects.popper,qe=typeof ge=="function"?ge(Object.assign({},a.rects,{placement:a.placement})):ge,Fe=typeof qe=="number"?{mainAxis:qe,altAxis:qe}:Object.assign({mainAxis:0,altAxis:0},qe),j=a.modifiersData.offset?a.modifiersData.offset[a.placement]:null,$e={x:0,y:0};if(Te){if(_){var pt,yn=ye==="y"?gn:bn,Se=ye==="y"?jn:qn,_t=ye==="y"?"height":"width",vn=Te[ye],te=vn+ce[yn],St=vn-ce[Se],jo=_e?-nt[_t]/2:0,ae=Xe===Mr?Be[_t]:nt[_t],ls=Xe===Mr?-nt[_t]:-Be[_t],qo=a.elements.arrow,As=_e&&qo?lb(qo):{width:0,height:0},Cn=a.modifiersData["arrow#persistent"]?a.modifiersData["arrow#persistent"].padding:RR(),tt=Cn[yn],dt=Cn[Se],b=Bc(0,Be[_t],As[_t]),Ko=G?Be[_t]/2-jo-b-tt-Fe.mainAxis:ae-b-tt-Fe.mainAxis,zf=G?-Be[_t]/2+jo+b+dt+Fe.mainAxis:ls+b+dt+Fe.mainAxis,ta=a.elements.arrow&&Uc(a.elements.arrow),jc=ta?ye==="y"?ta.clientTop||0:ta.clientLeft||0:0,qc=(pt=j==null?void 0:j[ye])!=null?pt:0,Ze=vn+Ko-qc-jc,ut=vn+zf-qc,Ue=Bc(_e?Af(te,Ze):te,vn,_e?Ir(St,ut):St);Te[ye]=Ue,$e[ye]=Ue-vn}if(x){var U,Kc=ye==="x"?gn:bn,po=ye==="x"?jn:qn,ve=Te[je],Ts=je==="y"?"height":"width",Vt=ve+ce[Kc],na=ve-ce[po],vt=[gn,bn].indexOf(We)!==-1,ho=(U=j==null?void 0:j[je])!=null?U:0,sa=vt?Vt:ve-Be[Ts]-nt[Ts]-ho+Fe.altAxis,sn=vt?ve+Be[Ts]+nt[Ts]-ho-Fe.altAxis:na,Gn=_e&&vt?EQ(sa,ve,sn):Bc(_e?sa:Vt,ve,_e?sn:na);Te[je]=Gn,$e[je]=Gn-ve}a.modifiersData[m]=$e}}const FR={name:"preventOverflow",enabled:!0,phase:"main",fn:WQ,requiresIfExists:["offset"]};function jQ(u){return{scrollLeft:u.scrollLeft,scrollTop:u.scrollTop}}function qQ(u){return u===Kn(u)||!rs(u)?mb(u):jQ(u)}function KQ(u){var a=u.getBoundingClientRect(),f=Vi(a.width)/u.offsetWidth||1,m=Vi(a.height)/u.offsetHeight||1;return f!==1||m!==1}function GQ(u,a,f){f===void 0&&(f=!1);var m=rs(a),y=rs(a)&&KQ(a),_=zo(a),w=Wi(u,y,f),x={scrollLeft:0,scrollTop:0},M={x:0,y:0};return(m||!m&&!f)&&((Ks(a)!=="body"||hb(_))&&(x=qQ(a)),rs(a)?(M=Wi(a,!0),M.x+=a.clientLeft,M.y+=a.clientTop):_&&(M.x=pb(_))),{x:w.left+x.scrollLeft-M.x,y:w.top+x.scrollTop-M.y,width:w.width,height:w.height}}function YQ(u){var a=new Map,f=new Set,m=[];u.forEach(function(_){a.set(_.name,_)});function y(_){f.add(_.name);var w=[].concat(_.requires||[],_.requiresIfExists||[]);w.forEach(function(x){if(!f.has(x)){var M=a.get(x);M&&y(M)}}),m.push(_)}return u.forEach(function(_){f.has(_.name)||y(_)}),m}function XQ(u){var a=YQ(u);return NR.reduce(function(f,m){return f.concat(a.filter(function(y){return y.phase===m}))},[])}function ZQ(u){var a;return function(){return a||(a=new Promise(function(f){Promise.resolve().then(function(){a=void 0,f(u())})})),a}}function QQ(u){var a=u.reduce(function(f,m){var y=f[m.name];return f[m.name]=y?Object.assign({},y,m,{options:Object.assign({},y.options,m.options),data:Object.assign({},y.data,m.data)}):m,f},{});return Object.keys(a).map(function(f){return a[f]})}var hx={placement:"bottom",modifiers:[],strategy:"absolute"};function gx(){for(var u=arguments.length,a=new Array(u),f=0;f<u;f++)a[f]=arguments[f];return!a.some(function(m){return!(m&&typeof m.getBoundingClientRect=="function")})}function If(u){u===void 0&&(u={});var a=u,f=a.defaultModifiers,m=f===void 0?[]:f,y=a.defaultOptions,_=y===void 0?hx:y;return function(x,M,z){z===void 0&&(z=_);var $={placement:"bottom",orderedModifiers:[],options:Object.assign({},hx,_),modifiersData:{},elements:{reference:x,popper:M},attributes:{},styles:{}},re=[],we=!1,_e={state:$,setOptions:function(We){var Xe=typeof We=="function"?We($.options):We;ge(),$.options=Object.assign({},_,$.options,Xe),$.scrollParents={reference:Fr(x)?Lc(x):x.contextElement?Lc(x.contextElement):[],popper:Lc(M)};var G=XQ(QQ([].concat(m,$.options.modifiers)));return $.orderedModifiers=G.filter(function(ye){return ye.enabled}),he(),_e.update()},forceUpdate:function(){if(!we){var We=$.elements,Xe=We.reference,G=We.popper;if(gx(Xe,G)){$.rects={reference:GQ(Xe,Uc(G),$.options.strategy==="fixed"),popper:lb(G)},$.reset=!1,$.placement=$.options.placement,$.orderedModifiers.forEach(function(Fe){return $.modifiersData[Fe.name]=Object.assign({},Fe.data)});for(var ye=0;ye<$.orderedModifiers.length;ye++){if($.reset===!0){$.reset=!1,ye=-1;continue}var je=$.orderedModifiers[ye],Te=je.fn,Be=je.options,nt=Be===void 0?{}:Be,qe=je.name;typeof Te=="function"&&($=Te({state:$,options:nt,name:qe,instance:_e})||$)}}}},update:ZQ(function(){return new Promise(function(ce){_e.forceUpdate(),ce($)})}),destroy:function(){ge(),we=!0}};if(!gx(x,M))return _e;_e.setOptions(z).then(function(ce){!we&&z.onFirstUpdate&&z.onFirstUpdate(ce)});function he(){$.orderedModifiers.forEach(function(ce){var We=ce.name,Xe=ce.options,G=Xe===void 0?{}:Xe,ye=ce.effect;if(typeof ye=="function"){var je=ye({state:$,name:We,instance:_e,options:G}),Te=function(){};re.push(je||Te)}})}function ge(){re.forEach(function(ce){return ce()}),re=[]}return _e}}var JQ=If(),eJ=[db,gb,fb,cb],tJ=If({defaultModifiers:eJ}),nJ=[db,gb,fb,cb,MR,IR,FR,PR,$R],bb=If({defaultModifiers:nJ});const UR=Object.freeze(Object.defineProperty({__proto__:null,afterMain:SR,afterRead:CR,afterWrite:TR,applyStyles:cb,arrow:PR,auto:Bf,basePlacements:Zi,beforeMain:ER,beforeRead:yR,beforeWrite:wR,bottom:jn,clippingParents:gR,computeStyles:fb,createPopper:bb,createPopperBase:JQ,createPopperLite:tJ,detectOverflow:qi,end:zi,eventListeners:db,flip:IR,hide:$R,left:bn,main:_R,modifierPhases:NR,offset:MR,placements:ib,popper:Mi,popperGenerator:If,popperOffsets:gb,preventOverflow:FR,read:vR,reference:bR,right:qn,start:Mr,top:gn,variationPlacements:Kg,viewport:rb,write:AR},Symbol.toStringTag,{value:"Module"}));/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */const Mo=new Map,wg={set(u,a,f){Mo.has(u)||Mo.set(u,new Map);const m=Mo.get(u);if(!m.has(a)&&m.size!==0){console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(m.keys())[0]}.`);return}m.set(a,f)},get(u,a){return Mo.has(u)&&Mo.get(u).get(a)||null},remove(u,a){if(!Mo.has(u))return;const f=Mo.get(u);f.delete(a),f.size===0&&Mo.delete(u)}},sJ=1e6,oJ=1e3,Xg="transitionend",HR=u=>(u&&window.CSS&&window.CSS.escape&&(u=u.replace(/#([^\s"#']+)/g,(a,f)=>`#${CSS.escape(f)}`)),u),rJ=u=>u==null?`${u}`:Object.prototype.toString.call(u).match(/\s([a-z]+)/i)[1].toLowerCase(),iJ=u=>{do u+=Math.floor(Math.random()*sJ);while(document.getElementById(u));return u},aJ=u=>{if(!u)return 0;let{transitionDuration:a,transitionDelay:f}=window.getComputedStyle(u);const m=Number.parseFloat(a),y=Number.parseFloat(f);return!m&&!y?0:(a=a.split(",")[0],f=f.split(",")[0],(Number.parseFloat(a)+Number.parseFloat(f))*oJ)},zR=u=>{u.dispatchEvent(new Event(Xg))},lo=u=>!u||typeof u!="object"?!1:(typeof u.jquery<"u"&&(u=u[0]),typeof u.nodeType<"u"),Fo=u=>lo(u)?u.jquery?u[0]:u:typeof u=="string"&&u.length>0?document.querySelector(HR(u)):null,Qi=u=>{if(!lo(u)||u.getClientRects().length===0)return!1;const a=getComputedStyle(u).getPropertyValue("visibility")==="visible",f=u.closest("details:not([open])");if(!f)return a;if(f!==u){const m=u.closest("summary");if(m&&m.parentNode!==f||m===null)return!1}return a},Uo=u=>!u||u.nodeType!==Node.ELEMENT_NODE||u.classList.contains("disabled")?!0:typeof u.disabled<"u"?u.disabled:u.hasAttribute("disabled")&&u.getAttribute("disabled")!=="false",VR=u=>{if(!document.documentElement.attachShadow)return null;if(typeof u.getRootNode=="function"){const a=u.getRootNode();return a instanceof ShadowRoot?a:null}return u instanceof ShadowRoot?u:u.parentNode?VR(u.parentNode):null},Tf=()=>{},Hc=u=>{u.offsetHeight},WR=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ag=[],cJ=u=>{document.readyState==="loading"?(Ag.length||document.addEventListener("DOMContentLoaded",()=>{for(const a of Ag)a()}),Ag.push(u)):u()},is=()=>document.documentElement.dir==="rtl",cs=u=>{cJ(()=>{const a=WR();if(a){const f=u.NAME,m=a.fn[f];a.fn[f]=u.jQueryInterface,a.fn[f].Constructor=u,a.fn[f].noConflict=()=>(a.fn[f]=m,u.jQueryInterface)}})},Nn=(u,a=[],f=u)=>typeof u=="function"?u(...a):f,jR=(u,a,f=!0)=>{if(!f){Nn(u);return}const y=aJ(a)+5;let _=!1;const w=({target:x})=>{x===a&&(_=!0,a.removeEventListener(Xg,w),Nn(u))};a.addEventListener(Xg,w),setTimeout(()=>{_||zR(a)},y)},yb=(u,a,f,m)=>{const y=u.length;let _=u.indexOf(a);return _===-1?!f&&m?u[y-1]:u[0]:(_+=f?1:-1,m&&(_=(_+y)%y),u[Math.max(0,Math.min(_,y-1))])},lJ=/[^.]*(?=\..*)\.|.*/,uJ=/\..*/,fJ=/::\d+$/,Tg={};let bx=1;const qR={mouseenter:"mouseover",mouseleave:"mouseout"},dJ=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function KR(u,a){return a&&`${a}::${bx++}`||u.uidEvent||bx++}function GR(u){const a=KR(u);return u.uidEvent=a,Tg[a]=Tg[a]||{},Tg[a]}function mJ(u,a){return function f(m){return vb(m,{delegateTarget:u}),f.oneOff&&oe.off(u,m.type,a),a.apply(u,[m])}}function pJ(u,a,f){return function m(y){const _=u.querySelectorAll(a);for(let{target:w}=y;w&&w!==this;w=w.parentNode)for(const x of _)if(x===w)return vb(y,{delegateTarget:w}),m.oneOff&&oe.off(u,y.type,a,f),f.apply(w,[y])}}function YR(u,a,f=null){return Object.values(u).find(m=>m.callable===a&&m.delegationSelector===f)}function XR(u,a,f){const m=typeof a=="string",y=m?f:a||f;let _=ZR(u);return dJ.has(_)||(_=u),[m,y,_]}function yx(u,a,f,m,y){if(typeof a!="string"||!u)return;let[_,w,x]=XR(a,f,m);a in qR&&(w=(he=>function(ge){if(!ge.relatedTarget||ge.relatedTarget!==ge.delegateTarget&&!ge.delegateTarget.contains(ge.relatedTarget))return he.call(this,ge)})(w));const M=GR(u),z=M[x]||(M[x]={}),$=YR(z,w,_?f:null);if($){$.oneOff=$.oneOff&&y;return}const re=KR(w,a.replace(lJ,"")),we=_?pJ(u,f,w):mJ(u,w);we.delegationSelector=_?f:null,we.callable=w,we.oneOff=y,we.uidEvent=re,z[re]=we,u.addEventListener(x,we,_)}function Zg(u,a,f,m,y){const _=YR(a[f],m,y);_&&(u.removeEventListener(f,_,!!y),delete a[f][_.uidEvent])}function hJ(u,a,f,m){const y=a[f]||{};for(const[_,w]of Object.entries(y))_.includes(m)&&Zg(u,a,f,w.callable,w.delegationSelector)}function ZR(u){return u=u.replace(uJ,""),qR[u]||u}const oe={on(u,a,f,m){yx(u,a,f,m,!1)},one(u,a,f,m){yx(u,a,f,m,!0)},off(u,a,f,m){if(typeof a!="string"||!u)return;const[y,_,w]=XR(a,f,m),x=w!==a,M=GR(u),z=M[w]||{},$=a.startsWith(".");if(typeof _<"u"){if(!Object.keys(z).length)return;Zg(u,M,w,_,y?f:null);return}if($)for(const re of Object.keys(M))hJ(u,M,re,a.slice(1));for(const[re,we]of Object.entries(z)){const _e=re.replace(fJ,"");(!x||a.includes(_e))&&Zg(u,M,w,we.callable,we.delegationSelector)}},trigger(u,a,f){if(typeof a!="string"||!u)return null;const m=WR(),y=ZR(a),_=a!==y;let w=null,x=!0,M=!0,z=!1;_&&m&&(w=m.Event(a,f),m(u).trigger(w),x=!w.isPropagationStopped(),M=!w.isImmediatePropagationStopped(),z=w.isDefaultPrevented());const $=vb(new Event(a,{bubbles:x,cancelable:!0}),f);return z&&$.preventDefault(),M&&u.dispatchEvent($),$.defaultPrevented&&w&&w.preventDefault(),$}};function vb(u,a={}){for(const[f,m]of Object.entries(a))try{u[f]=m}catch{Object.defineProperty(u,f,{configurable:!0,get(){return m}})}return u}function vx(u){if(u==="true")return!0;if(u==="false")return!1;if(u===Number(u).toString())return Number(u);if(u===""||u==="null")return null;if(typeof u!="string")return u;try{return JSON.parse(decodeURIComponent(u))}catch{return u}}function Ng(u){return u.replace(/[A-Z]/g,a=>`-${a.toLowerCase()}`)}const uo={setDataAttribute(u,a,f){u.setAttribute(`data-bs-${Ng(a)}`,f)},removeDataAttribute(u,a){u.removeAttribute(`data-bs-${Ng(a)}`)},getDataAttributes(u){if(!u)return{};const a={},f=Object.keys(u.dataset).filter(m=>m.startsWith("bs")&&!m.startsWith("bsConfig"));for(const m of f){let y=m.replace(/^bs/,"");y=y.charAt(0).toLowerCase()+y.slice(1,y.length),a[y]=vx(u.dataset[m])}return a},getDataAttribute(u,a){return vx(u.getAttribute(`data-bs-${Ng(a)}`))}};class zc{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(a){return a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a}_mergeConfigObj(a,f){const m=lo(f)?uo.getDataAttribute(f,"config"):{};return{...this.constructor.Default,...typeof m=="object"?m:{},...lo(f)?uo.getDataAttributes(f):{},...typeof a=="object"?a:{}}}_typeCheckConfig(a,f=this.constructor.DefaultType){for(const[m,y]of Object.entries(f)){const _=a[m],w=lo(_)?"element":rJ(_);if(!new RegExp(y).test(w))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${m}" provided type "${w}" but expected type "${y}".`)}}}const gJ="5.3.3";class ws extends zc{constructor(a,f){super(),a=Fo(a),a&&(this._element=a,this._config=this._getConfig(f),wg.set(this._element,this.constructor.DATA_KEY,this))}dispose(){wg.remove(this._element,this.constructor.DATA_KEY),oe.off(this._element,this.constructor.EVENT_KEY);for(const a of Object.getOwnPropertyNames(this))this[a]=null}_queueCallback(a,f,m=!0){jR(a,f,m)}_getConfig(a){return a=this._mergeConfigObj(a,this._element),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}static getInstance(a){return wg.get(Fo(a),this.DATA_KEY)}static getOrCreateInstance(a,f={}){return this.getInstance(a)||new this(a,typeof f=="object"?f:null)}static get VERSION(){return gJ}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(a){return`${a}${this.EVENT_KEY}`}}const kg=u=>{let a=u.getAttribute("data-bs-target");if(!a||a==="#"){let f=u.getAttribute("href");if(!f||!f.includes("#")&&!f.startsWith("."))return null;f.includes("#")&&!f.startsWith("#")&&(f=`#${f.split("#")[1]}`),a=f&&f!=="#"?f.trim():null}return a?a.split(",").map(f=>HR(f)).join(","):null},Le={find(u,a=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(a,u))},findOne(u,a=document.documentElement){return Element.prototype.querySelector.call(a,u)},children(u,a){return[].concat(...u.children).filter(f=>f.matches(a))},parents(u,a){const f=[];let m=u.parentNode.closest(a);for(;m;)f.push(m),m=m.parentNode.closest(a);return f},prev(u,a){let f=u.previousElementSibling;for(;f;){if(f.matches(a))return[f];f=f.previousElementSibling}return[]},next(u,a){let f=u.nextElementSibling;for(;f;){if(f.matches(a))return[f];f=f.nextElementSibling}return[]},focusableChildren(u){const a=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(f=>`${f}:not([tabindex^="-"])`).join(",");return this.find(a,u).filter(f=>!Uo(f)&&Qi(f))},getSelectorFromElement(u){const a=kg(u);return a&&Le.findOne(a)?a:null},getElementFromSelector(u){const a=kg(u);return a?Le.findOne(a):null},getMultipleElementsFromSelector(u){const a=kg(u);return a?Le.find(a):[]}},$f=(u,a="hide")=>{const f=`click.dismiss${u.EVENT_KEY}`,m=u.NAME;oe.on(document,f,`[data-bs-dismiss="${m}"]`,function(y){if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),Uo(this))return;const _=Le.getElementFromSelector(this)||this.closest(`.${m}`);u.getOrCreateInstance(_)[a]()})},bJ="alert",yJ="bs.alert",QR=`.${yJ}`,vJ=`close${QR}`,CJ=`closed${QR}`,EJ="fade",_J="show";class Mf extends ws{static get NAME(){return bJ}close(){if(oe.trigger(this._element,vJ).defaultPrevented)return;this._element.classList.remove(_J);const f=this._element.classList.contains(EJ);this._queueCallback(()=>this._destroyElement(),this._element,f)}_destroyElement(){this._element.remove(),oe.trigger(this._element,CJ),this.dispose()}static jQueryInterface(a){return this.each(function(){const f=Mf.getOrCreateInstance(this);if(typeof a=="string"){if(f[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);f[a](this)}})}}$f(Mf,"close");cs(Mf);const SJ="button",wJ="bs.button",AJ=`.${wJ}`,TJ=".data-api",NJ="active",Cx='[data-bs-toggle="button"]',kJ=`click${AJ}${TJ}`;class Ff extends ws{static get NAME(){return SJ}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(NJ))}static jQueryInterface(a){return this.each(function(){const f=Ff.getOrCreateInstance(this);a==="toggle"&&f[a]()})}}oe.on(document,kJ,Cx,u=>{u.preventDefault();const a=u.target.closest(Cx);Ff.getOrCreateInstance(a).toggle()});cs(Ff);const xJ="swipe",Ji=".bs.swipe",RJ=`touchstart${Ji}`,OJ=`touchmove${Ji}`,DJ=`touchend${Ji}`,PJ=`pointerdown${Ji}`,BJ=`pointerup${Ji}`,LJ="touch",IJ="pen",$J="pointer-event",MJ=40,FJ={endCallback:null,leftCallback:null,rightCallback:null},UJ={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class Nf extends zc{constructor(a,f){super(),this._element=a,!(!a||!Nf.isSupported())&&(this._config=this._getConfig(f),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return FJ}static get DefaultType(){return UJ}static get NAME(){return xJ}dispose(){oe.off(this._element,Ji)}_start(a){if(!this._supportPointerEvents){this._deltaX=a.touches[0].clientX;return}this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX)}_end(a){this._eventIsPointerPenTouch(a)&&(this._deltaX=a.clientX-this._deltaX),this._handleSwipe(),Nn(this._config.endCallback)}_move(a){this._deltaX=a.touches&&a.touches.length>1?0:a.touches[0].clientX-this._deltaX}_handleSwipe(){const a=Math.abs(this._deltaX);if(a<=MJ)return;const f=a/this._deltaX;this._deltaX=0,f&&Nn(f>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(oe.on(this._element,PJ,a=>this._start(a)),oe.on(this._element,BJ,a=>this._end(a)),this._element.classList.add($J)):(oe.on(this._element,RJ,a=>this._start(a)),oe.on(this._element,OJ,a=>this._move(a)),oe.on(this._element,DJ,a=>this._end(a)))}_eventIsPointerPenTouch(a){return this._supportPointerEvents&&(a.pointerType===IJ||a.pointerType===LJ)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const HJ="carousel",zJ="bs.carousel",Vo=`.${zJ}`,JR=".data-api",VJ="ArrowLeft",WJ="ArrowRight",jJ=500,Dc="next",Ii="prev",Fi="left",Ef="right",qJ=`slide${Vo}`,xg=`slid${Vo}`,KJ=`keydown${Vo}`,GJ=`mouseenter${Vo}`,YJ=`mouseleave${Vo}`,XJ=`dragstart${Vo}`,ZJ=`load${Vo}${JR}`,QJ=`click${Vo}${JR}`,eO="carousel",df="active",JJ="slide",eee="carousel-item-end",tee="carousel-item-start",nee="carousel-item-next",see="carousel-item-prev",tO=".active",nO=".carousel-item",oee=tO+nO,ree=".carousel-item img",iee=".carousel-indicators",aee="[data-bs-slide], [data-bs-slide-to]",cee='[data-bs-ride="carousel"]',lee={[VJ]:Ef,[WJ]:Fi},uee={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},fee={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Vc extends ws{constructor(a,f){super(a,f),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=Le.findOne(iee,this._element),this._addEventListeners(),this._config.ride===eO&&this.cycle()}static get Default(){return uee}static get DefaultType(){return fee}static get NAME(){return HJ}next(){this._slide(Dc)}nextWhenVisible(){!document.hidden&&Qi(this._element)&&this.next()}prev(){this._slide(Ii)}pause(){this._isSliding&&zR(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){if(this._config.ride){if(this._isSliding){oe.one(this._element,xg,()=>this.cycle());return}this.cycle()}}to(a){const f=this._getItems();if(a>f.length-1||a<0)return;if(this._isSliding){oe.one(this._element,xg,()=>this.to(a));return}const m=this._getItemIndex(this._getActive());if(m===a)return;const y=a>m?Dc:Ii;this._slide(y,f[a])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(a){return a.defaultInterval=a.interval,a}_addEventListeners(){this._config.keyboard&&oe.on(this._element,KJ,a=>this._keydown(a)),this._config.pause==="hover"&&(oe.on(this._element,GJ,()=>this.pause()),oe.on(this._element,YJ,()=>this._maybeEnableCycle())),this._config.touch&&Nf.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of Le.find(ree,this._element))oe.on(m,XJ,y=>y.preventDefault());const f={leftCallback:()=>this._slide(this._directionToOrder(Fi)),rightCallback:()=>this._slide(this._directionToOrder(Ef)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),jJ+this._config.interval))}};this._swipeHelper=new Nf(this._element,f)}_keydown(a){if(/input|textarea/i.test(a.target.tagName))return;const f=lee[a.key];f&&(a.preventDefault(),this._slide(this._directionToOrder(f)))}_getItemIndex(a){return this._getItems().indexOf(a)}_setActiveIndicatorElement(a){if(!this._indicatorsElement)return;const f=Le.findOne(tO,this._indicatorsElement);f.classList.remove(df),f.removeAttribute("aria-current");const m=Le.findOne(`[data-bs-slide-to="${a}"]`,this._indicatorsElement);m&&(m.classList.add(df),m.setAttribute("aria-current","true"))}_updateInterval(){const a=this._activeElement||this._getActive();if(!a)return;const f=Number.parseInt(a.getAttribute("data-bs-interval"),10);this._config.interval=f||this._config.defaultInterval}_slide(a,f=null){if(this._isSliding)return;const m=this._getActive(),y=a===Dc,_=f||yb(this._getItems(),m,y,this._config.wrap);if(_===m)return;const w=this._getItemIndex(_),x=_e=>oe.trigger(this._element,_e,{relatedTarget:_,direction:this._orderToDirection(a),from:this._getItemIndex(m),to:w});if(x(qJ).defaultPrevented||!m||!_)return;const z=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(w),this._activeElement=_;const $=y?tee:eee,re=y?nee:see;_.classList.add(re),Hc(_),m.classList.add($),_.classList.add($);const we=()=>{_.classList.remove($,re),_.classList.add(df),m.classList.remove(df,re,$),this._isSliding=!1,x(xg)};this._queueCallback(we,m,this._isAnimated()),z&&this.cycle()}_isAnimated(){return this._element.classList.contains(JJ)}_getActive(){return Le.findOne(oee,this._element)}_getItems(){return Le.find(nO,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(a){return is()?a===Fi?Ii:Dc:a===Fi?Dc:Ii}_orderToDirection(a){return is()?a===Ii?Fi:Ef:a===Ii?Ef:Fi}static jQueryInterface(a){return this.each(function(){const f=Vc.getOrCreateInstance(this,a);if(typeof a=="number"){f.to(a);return}if(typeof a=="string"){if(f[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);f[a]()}})}}oe.on(document,QJ,aee,function(u){const a=Le.getElementFromSelector(this);if(!a||!a.classList.contains(eO))return;u.preventDefault();const f=Vc.getOrCreateInstance(a),m=this.getAttribute("data-bs-slide-to");if(m){f.to(m),f._maybeEnableCycle();return}if(uo.getDataAttribute(this,"slide")==="next"){f.next(),f._maybeEnableCycle();return}f.prev(),f._maybeEnableCycle()});oe.on(window,ZJ,()=>{const u=Le.find(cee);for(const a of u)Vc.getOrCreateInstance(a)});cs(Vc);const dee="collapse",mee="bs.collapse",Wc=`.${mee}`,pee=".data-api",hee=`show${Wc}`,gee=`shown${Wc}`,bee=`hide${Wc}`,yee=`hidden${Wc}`,vee=`click${Wc}${pee}`,Rg="show",Hi="collapse",mf="collapsing",Cee="collapsed",Eee=`:scope .${Hi} .${Hi}`,_ee="collapse-horizontal",See="width",wee="height",Aee=".collapse.show, .collapse.collapsing",Qg='[data-bs-toggle="collapse"]',Tee={parent:null,toggle:!0},Nee={parent:"(null|element)",toggle:"boolean"};class $c extends ws{constructor(a,f){super(a,f),this._isTransitioning=!1,this._triggerArray=[];const m=Le.find(Qg);for(const y of m){const _=Le.getSelectorFromElement(y),w=Le.find(_).filter(x=>x===this._element);_!==null&&w.length&&this._triggerArray.push(y)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return Tee}static get DefaultType(){return Nee}static get NAME(){return dee}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let a=[];if(this._config.parent&&(a=this._getFirstLevelChildren(Aee).filter(x=>x!==this._element).map(x=>$c.getOrCreateInstance(x,{toggle:!1}))),a.length&&a[0]._isTransitioning||oe.trigger(this._element,hee).defaultPrevented)return;for(const x of a)x.hide();const m=this._getDimension();this._element.classList.remove(Hi),this._element.classList.add(mf),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const y=()=>{this._isTransitioning=!1,this._element.classList.remove(mf),this._element.classList.add(Hi,Rg),this._element.style[m]="",oe.trigger(this._element,gee)},w=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(y,this._element,!0),this._element.style[m]=`${this._element[w]}px`}hide(){if(this._isTransitioning||!this._isShown()||oe.trigger(this._element,bee).defaultPrevented)return;const f=this._getDimension();this._element.style[f]=`${this._element.getBoundingClientRect()[f]}px`,Hc(this._element),this._element.classList.add(mf),this._element.classList.remove(Hi,Rg);for(const y of this._triggerArray){const _=Le.getElementFromSelector(y);_&&!this._isShown(_)&&this._addAriaAndCollapsedClass([y],!1)}this._isTransitioning=!0;const m=()=>{this._isTransitioning=!1,this._element.classList.remove(mf),this._element.classList.add(Hi),oe.trigger(this._element,yee)};this._element.style[f]="",this._queueCallback(m,this._element,!0)}_isShown(a=this._element){return a.classList.contains(Rg)}_configAfterMerge(a){return a.toggle=!!a.toggle,a.parent=Fo(a.parent),a}_getDimension(){return this._element.classList.contains(_ee)?See:wee}_initializeChildren(){if(!this._config.parent)return;const a=this._getFirstLevelChildren(Qg);for(const f of a){const m=Le.getElementFromSelector(f);m&&this._addAriaAndCollapsedClass([f],this._isShown(m))}}_getFirstLevelChildren(a){const f=Le.find(Eee,this._config.parent);return Le.find(a,this._config.parent).filter(m=>!f.includes(m))}_addAriaAndCollapsedClass(a,f){if(a.length)for(const m of a)m.classList.toggle(Cee,!f),m.setAttribute("aria-expanded",f)}static jQueryInterface(a){const f={};return typeof a=="string"&&/show|hide/.test(a)&&(f.toggle=!1),this.each(function(){const m=$c.getOrCreateInstance(this,f);if(typeof a=="string"){if(typeof m[a]>"u")throw new TypeError(`No method named "${a}"`);m[a]()}})}}oe.on(document,vee,Qg,function(u){(u.target.tagName==="A"||u.delegateTarget&&u.delegateTarget.tagName==="A")&&u.preventDefault();for(const a of Le.getMultipleElementsFromSelector(this))$c.getOrCreateInstance(a,{toggle:!1}).toggle()});cs($c);const Ex="dropdown",kee="bs.dropdown",Ur=`.${kee}`,Cb=".data-api",xee="Escape",_x="Tab",Ree="ArrowUp",Sx="ArrowDown",Oee=2,Dee=`hide${Ur}`,Pee=`hidden${Ur}`,Bee=`show${Ur}`,Lee=`shown${Ur}`,sO=`click${Ur}${Cb}`,oO=`keydown${Ur}${Cb}`,Iee=`keyup${Ur}${Cb}`,Ui="show",$ee="dropup",Mee="dropend",Fee="dropstart",Uee="dropup-center",Hee="dropdown-center",Pr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',zee=`${Pr}.${Ui}`,_f=".dropdown-menu",Vee=".navbar",Wee=".navbar-nav",jee=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",qee=is()?"top-end":"top-start",Kee=is()?"top-start":"top-end",Gee=is()?"bottom-end":"bottom-start",Yee=is()?"bottom-start":"bottom-end",Xee=is()?"left-start":"right-start",Zee=is()?"right-start":"left-start",Qee="top",Jee="bottom",ete={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},tte={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class qs extends ws{constructor(a,f){super(a,f),this._popper=null,this._parent=this._element.parentNode,this._menu=Le.next(this._element,_f)[0]||Le.prev(this._element,_f)[0]||Le.findOne(_f,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ete}static get DefaultType(){return tte}static get NAME(){return Ex}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Uo(this._element)||this._isShown())return;const a={relatedTarget:this._element};if(!oe.trigger(this._element,Bee,a).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Wee))for(const m of[].concat(...document.body.children))oe.on(m,"mouseover",Tf);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Ui),this._element.classList.add(Ui),oe.trigger(this._element,Lee,a)}}hide(){if(Uo(this._element)||!this._isShown())return;const a={relatedTarget:this._element};this._completeHide(a)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(a){if(!oe.trigger(this._element,Dee,a).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))oe.off(m,"mouseover",Tf);this._popper&&this._popper.destroy(),this._menu.classList.remove(Ui),this._element.classList.remove(Ui),this._element.setAttribute("aria-expanded","false"),uo.removeDataAttribute(this._menu,"popper"),oe.trigger(this._element,Pee,a)}}_getConfig(a){if(a=super._getConfig(a),typeof a.reference=="object"&&!lo(a.reference)&&typeof a.reference.getBoundingClientRect!="function")throw new TypeError(`${Ex.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return a}_createPopper(){if(typeof UR>"u")throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let a=this._element;this._config.reference==="parent"?a=this._parent:lo(this._config.reference)?a=Fo(this._config.reference):typeof this._config.reference=="object"&&(a=this._config.reference);const f=this._getPopperConfig();this._popper=bb(a,this._menu,f)}_isShown(){return this._menu.classList.contains(Ui)}_getPlacement(){const a=this._parent;if(a.classList.contains(Mee))return Xee;if(a.classList.contains(Fee))return Zee;if(a.classList.contains(Uee))return Qee;if(a.classList.contains(Hee))return Jee;const f=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return a.classList.contains($ee)?f?Kee:qee:f?Yee:Gee}_detectNavbar(){return this._element.closest(Vee)!==null}_getOffset(){const{offset:a}=this._config;return typeof a=="string"?a.split(",").map(f=>Number.parseInt(f,10)):typeof a=="function"?f=>a(f,this._element):a}_getPopperConfig(){const a={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(uo.setDataAttribute(this._menu,"popper","static"),a.modifiers=[{name:"applyStyles",enabled:!1}]),{...a,...Nn(this._config.popperConfig,[a])}}_selectMenuItem({key:a,target:f}){const m=Le.find(jee,this._menu).filter(y=>Qi(y));m.length&&yb(m,f,a===Sx,!m.includes(f)).focus()}static jQueryInterface(a){return this.each(function(){const f=qs.getOrCreateInstance(this,a);if(typeof a=="string"){if(typeof f[a]>"u")throw new TypeError(`No method named "${a}"`);f[a]()}})}static clearMenus(a){if(a.button===Oee||a.type==="keyup"&&a.key!==_x)return;const f=Le.find(zee);for(const m of f){const y=qs.getInstance(m);if(!y||y._config.autoClose===!1)continue;const _=a.composedPath(),w=_.includes(y._menu);if(_.includes(y._element)||y._config.autoClose==="inside"&&!w||y._config.autoClose==="outside"&&w||y._menu.contains(a.target)&&(a.type==="keyup"&&a.key===_x||/input|select|option|textarea|form/i.test(a.target.tagName)))continue;const x={relatedTarget:y._element};a.type==="click"&&(x.clickEvent=a),y._completeHide(x)}}static dataApiKeydownHandler(a){const f=/input|textarea/i.test(a.target.tagName),m=a.key===xee,y=[Ree,Sx].includes(a.key);if(!y&&!m||f&&!m)return;a.preventDefault();const _=this.matches(Pr)?this:Le.prev(this,Pr)[0]||Le.next(this,Pr)[0]||Le.findOne(Pr,a.delegateTarget.parentNode),w=qs.getOrCreateInstance(_);if(y){a.stopPropagation(),w.show(),w._selectMenuItem(a);return}w._isShown()&&(a.stopPropagation(),w.hide(),_.focus())}}oe.on(document,oO,Pr,qs.dataApiKeydownHandler);oe.on(document,oO,_f,qs.dataApiKeydownHandler);oe.on(document,sO,qs.clearMenus);oe.on(document,Iee,qs.clearMenus);oe.on(document,sO,Pr,function(u){u.preventDefault(),qs.getOrCreateInstance(this).toggle()});cs(qs);const rO="backdrop",nte="fade",wx="show",Ax=`mousedown.bs.${rO}`,ste={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ote={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class iO extends zc{constructor(a){super(),this._config=this._getConfig(a),this._isAppended=!1,this._element=null}static get Default(){return ste}static get DefaultType(){return ote}static get NAME(){return rO}show(a){if(!this._config.isVisible){Nn(a);return}this._append();const f=this._getElement();this._config.isAnimated&&Hc(f),f.classList.add(wx),this._emulateAnimation(()=>{Nn(a)})}hide(a){if(!this._config.isVisible){Nn(a);return}this._getElement().classList.remove(wx),this._emulateAnimation(()=>{this.dispose(),Nn(a)})}dispose(){this._isAppended&&(oe.off(this._element,Ax),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const a=document.createElement("div");a.className=this._config.className,this._config.isAnimated&&a.classList.add(nte),this._element=a}return this._element}_configAfterMerge(a){return a.rootElement=Fo(a.rootElement),a}_append(){if(this._isAppended)return;const a=this._getElement();this._config.rootElement.append(a),oe.on(a,Ax,()=>{Nn(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(a){jR(a,this._getElement(),this._config.isAnimated)}}const rte="focustrap",ite="bs.focustrap",kf=`.${ite}`,ate=`focusin${kf}`,cte=`keydown.tab${kf}`,lte="Tab",ute="forward",Tx="backward",fte={autofocus:!0,trapElement:null},dte={autofocus:"boolean",trapElement:"element"};class aO extends zc{constructor(a){super(),this._config=this._getConfig(a),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return fte}static get DefaultType(){return dte}static get NAME(){return rte}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),oe.off(document,kf),oe.on(document,ate,a=>this._handleFocusin(a)),oe.on(document,cte,a=>this._handleKeydown(a)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,oe.off(document,kf))}_handleFocusin(a){const{trapElement:f}=this._config;if(a.target===document||a.target===f||f.contains(a.target))return;const m=Le.focusableChildren(f);m.length===0?f.focus():this._lastTabNavDirection===Tx?m[m.length-1].focus():m[0].focus()}_handleKeydown(a){a.key===lte&&(this._lastTabNavDirection=a.shiftKey?Tx:ute)}}const Nx=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",kx=".sticky-top",pf="padding-right",xx="margin-right";class Jg{constructor(){this._element=document.body}getWidth(){const a=document.documentElement.clientWidth;return Math.abs(window.innerWidth-a)}hide(){const a=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,pf,f=>f+a),this._setElementAttributes(Nx,pf,f=>f+a),this._setElementAttributes(kx,xx,f=>f-a)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,pf),this._resetElementAttributes(Nx,pf),this._resetElementAttributes(kx,xx)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(a,f,m){const y=this.getWidth(),_=w=>{if(w!==this._element&&window.innerWidth>w.clientWidth+y)return;this._saveInitialAttribute(w,f);const x=window.getComputedStyle(w).getPropertyValue(f);w.style.setProperty(f,`${m(Number.parseFloat(x))}px`)};this._applyManipulationCallback(a,_)}_saveInitialAttribute(a,f){const m=a.style.getPropertyValue(f);m&&uo.setDataAttribute(a,f,m)}_resetElementAttributes(a,f){const m=y=>{const _=uo.getDataAttribute(y,f);if(_===null){y.style.removeProperty(f);return}uo.removeDataAttribute(y,f),y.style.setProperty(f,_)};this._applyManipulationCallback(a,m)}_applyManipulationCallback(a,f){if(lo(a)){f(a);return}for(const m of Le.find(a,this._element))f(m)}}const mte="modal",pte="bs.modal",as=`.${pte}`,hte=".data-api",gte="Escape",bte=`hide${as}`,yte=`hidePrevented${as}`,cO=`hidden${as}`,lO=`show${as}`,vte=`shown${as}`,Cte=`resize${as}`,Ete=`click.dismiss${as}`,_te=`mousedown.dismiss${as}`,Ste=`keydown.dismiss${as}`,wte=`click${as}${hte}`,Rx="modal-open",Ate="fade",Ox="show",Og="modal-static",Tte=".modal.show",Nte=".modal-dialog",kte=".modal-body",xte='[data-bs-toggle="modal"]',Rte={backdrop:!0,focus:!0,keyboard:!0},Ote={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ki extends ws{constructor(a,f){super(a,f),this._dialog=Le.findOne(Nte,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Jg,this._addEventListeners()}static get Default(){return Rte}static get DefaultType(){return Ote}static get NAME(){return mte}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){this._isShown||this._isTransitioning||oe.trigger(this._element,lO,{relatedTarget:a}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Rx),this._adjustDialog(),this._backdrop.show(()=>this._showElement(a)))}hide(){!this._isShown||this._isTransitioning||oe.trigger(this._element,bte).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Ox),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated()))}dispose(){oe.off(window,as),oe.off(this._dialog,as),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new iO({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new aO({trapElement:this._element})}_showElement(a){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const f=Le.findOne(kte,this._dialog);f&&(f.scrollTop=0),Hc(this._element),this._element.classList.add(Ox);const m=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,oe.trigger(this._element,vte,{relatedTarget:a})};this._queueCallback(m,this._dialog,this._isAnimated())}_addEventListeners(){oe.on(this._element,Ste,a=>{if(a.key===gte){if(this._config.keyboard){this.hide();return}this._triggerBackdropTransition()}}),oe.on(window,Cte,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),oe.on(this._element,_te,a=>{oe.one(this._element,Ete,f=>{if(!(this._element!==a.target||this._element!==f.target)){if(this._config.backdrop==="static"){this._triggerBackdropTransition();return}this._config.backdrop&&this.hide()}})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Rx),this._resetAdjustments(),this._scrollBar.reset(),oe.trigger(this._element,cO)})}_isAnimated(){return this._element.classList.contains(Ate)}_triggerBackdropTransition(){if(oe.trigger(this._element,yte).defaultPrevented)return;const f=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;m==="hidden"||this._element.classList.contains(Og)||(f||(this._element.style.overflowY="hidden"),this._element.classList.add(Og),this._queueCallback(()=>{this._element.classList.remove(Og),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const a=this._element.scrollHeight>document.documentElement.clientHeight,f=this._scrollBar.getWidth(),m=f>0;if(m&&!a){const y=is()?"paddingLeft":"paddingRight";this._element.style[y]=`${f}px`}if(!m&&a){const y=is()?"paddingRight":"paddingLeft";this._element.style[y]=`${f}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(a,f){return this.each(function(){const m=Ki.getOrCreateInstance(this,a);if(typeof a=="string"){if(typeof m[a]>"u")throw new TypeError(`No method named "${a}"`);m[a](f)}})}}oe.on(document,wte,xte,function(u){const a=Le.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&u.preventDefault(),oe.one(a,lO,y=>{y.defaultPrevented||oe.one(a,cO,()=>{Qi(this)&&this.focus()})});const f=Le.findOne(Tte);f&&Ki.getInstance(f).hide(),Ki.getOrCreateInstance(a).toggle(this)});$f(Ki);cs(Ki);const Dte="offcanvas",Pte="bs.offcanvas",mo=`.${Pte}`,uO=".data-api",Bte=`load${mo}${uO}`,Lte="Escape",Dx="show",Px="showing",Bx="hiding",Ite="offcanvas-backdrop",fO=".offcanvas.show",$te=`show${mo}`,Mte=`shown${mo}`,Fte=`hide${mo}`,Lx=`hidePrevented${mo}`,dO=`hidden${mo}`,Ute=`resize${mo}`,Hte=`click${mo}${uO}`,zte=`keydown.dismiss${mo}`,Vte='[data-bs-toggle="offcanvas"]',Wte={backdrop:!0,keyboard:!0,scroll:!1},jte={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Ho extends ws{constructor(a,f){super(a,f),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Wte}static get DefaultType(){return jte}static get NAME(){return Dte}toggle(a){return this._isShown?this.hide():this.show(a)}show(a){if(this._isShown||oe.trigger(this._element,$te,{relatedTarget:a}).defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||new Jg().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Px);const m=()=>{(!this._config.scroll||this._config.backdrop)&&this._focustrap.activate(),this._element.classList.add(Dx),this._element.classList.remove(Px),oe.trigger(this._element,Mte,{relatedTarget:a})};this._queueCallback(m,this._element,!0)}hide(){if(!this._isShown||oe.trigger(this._element,Fte).defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Bx),this._backdrop.hide();const f=()=>{this._element.classList.remove(Dx,Bx),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Jg().reset(),oe.trigger(this._element,dO)};this._queueCallback(f,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const a=()=>{if(this._config.backdrop==="static"){oe.trigger(this._element,Lx);return}this.hide()},f=!!this._config.backdrop;return new iO({className:Ite,isVisible:f,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:f?a:null})}_initializeFocusTrap(){return new aO({trapElement:this._element})}_addEventListeners(){oe.on(this._element,zte,a=>{if(a.key===Lte){if(this._config.keyboard){this.hide();return}oe.trigger(this._element,Lx)}})}static jQueryInterface(a){return this.each(function(){const f=Ho.getOrCreateInstance(this,a);if(typeof a=="string"){if(f[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);f[a](this)}})}}oe.on(document,Hte,Vte,function(u){const a=Le.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&u.preventDefault(),Uo(this))return;oe.one(a,dO,()=>{Qi(this)&&this.focus()});const f=Le.findOne(fO);f&&f!==a&&Ho.getInstance(f).hide(),Ho.getOrCreateInstance(a).toggle(this)});oe.on(window,Bte,()=>{for(const u of Le.find(fO))Ho.getOrCreateInstance(u).show()});oe.on(window,Ute,()=>{for(const u of Le.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(u).position!=="fixed"&&Ho.getOrCreateInstance(u).hide()});$f(Ho);cs(Ho);const qte=/^aria-[\w-]*$/i,mO={"*":["class","dir","id","lang","role",qte],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Kte=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Gte=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Yte=(u,a)=>{const f=u.nodeName.toLowerCase();return a.includes(f)?Kte.has(f)?!!Gte.test(u.nodeValue):!0:a.filter(m=>m instanceof RegExp).some(m=>m.test(f))};function Xte(u,a,f){if(!u.length)return u;if(f&&typeof f=="function")return f(u);const y=new window.DOMParser().parseFromString(u,"text/html"),_=[].concat(...y.body.querySelectorAll("*"));for(const w of _){const x=w.nodeName.toLowerCase();if(!Object.keys(a).includes(x)){w.remove();continue}const M=[].concat(...w.attributes),z=[].concat(a["*"]||[],a[x]||[]);for(const $ of M)Yte($,z)||w.removeAttribute($.nodeName)}return y.body.innerHTML}const Zte="TemplateFactory",Qte={allowList:mO,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Jte={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},ene={entry:"(string|element|function|null)",selector:"(string|element)"};class tne extends zc{constructor(a){super(),this._config=this._getConfig(a)}static get Default(){return Qte}static get DefaultType(){return Jte}static get NAME(){return Zte}getContent(){return Object.values(this._config.content).map(a=>this._resolvePossibleFunction(a)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(a){return this._checkContent(a),this._config.content={...this._config.content,...a},this}toHtml(){const a=document.createElement("div");a.innerHTML=this._maybeSanitize(this._config.template);for(const[y,_]of Object.entries(this._config.content))this._setContent(a,_,y);const f=a.children[0],m=this._resolvePossibleFunction(this._config.extraClass);return m&&f.classList.add(...m.split(" ")),f}_typeCheckConfig(a){super._typeCheckConfig(a),this._checkContent(a.content)}_checkContent(a){for(const[f,m]of Object.entries(a))super._typeCheckConfig({selector:f,entry:m},ene)}_setContent(a,f,m){const y=Le.findOne(m,a);if(y){if(f=this._resolvePossibleFunction(f),!f){y.remove();return}if(lo(f)){this._putElementInTemplate(Fo(f),y);return}if(this._config.html){y.innerHTML=this._maybeSanitize(f);return}y.textContent=f}}_maybeSanitize(a){return this._config.sanitize?Xte(a,this._config.allowList,this._config.sanitizeFn):a}_resolvePossibleFunction(a){return Nn(a,[this])}_putElementInTemplate(a,f){if(this._config.html){f.innerHTML="",f.append(a);return}f.textContent=a.textContent}}const nne="tooltip",sne=new Set(["sanitize","allowList","sanitizeFn"]),Dg="fade",one="modal",hf="show",rne=".tooltip-inner",Ix=`.${one}`,$x="hide.bs.modal",Pc="hover",Pg="focus",ine="click",ane="manual",cne="hide",lne="hidden",une="show",fne="shown",dne="inserted",mne="click",pne="focusin",hne="focusout",gne="mouseenter",bne="mouseleave",yne={AUTO:"auto",TOP:"top",RIGHT:is()?"left":"right",BOTTOM:"bottom",LEFT:is()?"right":"left"},vne={allowList:mO,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Cne={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ea extends ws{constructor(a,f){if(typeof UR>"u")throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(a,f),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return vne}static get DefaultType(){return Cne}static get NAME(){return nne}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){if(this._isEnabled){if(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()){this._leave();return}this._enter()}}dispose(){clearTimeout(this._timeout),oe.off(this._element.closest(Ix),$x,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!(this._isWithContent()&&this._isEnabled))return;const a=oe.trigger(this._element,this.constructor.eventName(une)),m=(VR(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(a.defaultPrevented||!m)return;this._disposePopper();const y=this._getTipElement();this._element.setAttribute("aria-describedby",y.getAttribute("id"));const{container:_}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(_.append(y),oe.trigger(this._element,this.constructor.eventName(dne))),this._popper=this._createPopper(y),y.classList.add(hf),"ontouchstart"in document.documentElement)for(const x of[].concat(...document.body.children))oe.on(x,"mouseover",Tf);const w=()=>{oe.trigger(this._element,this.constructor.eventName(fne)),this._isHovered===!1&&this._leave(),this._isHovered=!1};this._queueCallback(w,this.tip,this._isAnimated())}hide(){if(!this._isShown()||oe.trigger(this._element,this.constructor.eventName(cne)).defaultPrevented)return;if(this._getTipElement().classList.remove(hf),"ontouchstart"in document.documentElement)for(const y of[].concat(...document.body.children))oe.off(y,"mouseover",Tf);this._activeTrigger[ine]=!1,this._activeTrigger[Pg]=!1,this._activeTrigger[Pc]=!1,this._isHovered=null;const m=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),oe.trigger(this._element,this.constructor.eventName(lne)))};this._queueCallback(m,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(a){const f=this._getTemplateFactory(a).toHtml();if(!f)return null;f.classList.remove(Dg,hf),f.classList.add(`bs-${this.constructor.NAME}-auto`);const m=iJ(this.constructor.NAME).toString();return f.setAttribute("id",m),this._isAnimated()&&f.classList.add(Dg),f}setContent(a){this._newContent=a,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(a){return this._templateFactory?this._templateFactory.changeContent(a):this._templateFactory=new tne({...this._config,content:a,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[rne]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(a){return this.constructor.getOrCreateInstance(a.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Dg)}_isShown(){return this.tip&&this.tip.classList.contains(hf)}_createPopper(a){const f=Nn(this._config.placement,[this,a,this._element]),m=yne[f.toUpperCase()];return bb(this._element,a,this._getPopperConfig(m))}_getOffset(){const{offset:a}=this._config;return typeof a=="string"?a.split(",").map(f=>Number.parseInt(f,10)):typeof a=="function"?f=>a(f,this._element):a}_resolvePossibleFunction(a){return Nn(a,[this._element])}_getPopperConfig(a){const f={placement:a,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:m=>{this._getTipElement().setAttribute("data-popper-placement",m.state.placement)}}]};return{...f,...Nn(this._config.popperConfig,[f])}}_setListeners(){const a=this._config.trigger.split(" ");for(const f of a)if(f==="click")oe.on(this._element,this.constructor.eventName(mne),this._config.selector,m=>{this._initializeOnDelegatedTarget(m).toggle()});else if(f!==ane){const m=f===Pc?this.constructor.eventName(gne):this.constructor.eventName(pne),y=f===Pc?this.constructor.eventName(bne):this.constructor.eventName(hne);oe.on(this._element,m,this._config.selector,_=>{const w=this._initializeOnDelegatedTarget(_);w._activeTrigger[_.type==="focusin"?Pg:Pc]=!0,w._enter()}),oe.on(this._element,y,this._config.selector,_=>{const w=this._initializeOnDelegatedTarget(_);w._activeTrigger[_.type==="focusout"?Pg:Pc]=w._element.contains(_.relatedTarget),w._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},oe.on(this._element.closest(Ix),$x,this._hideModalHandler)}_fixTitle(){const a=this._element.getAttribute("title");a&&(!this._element.getAttribute("aria-label")&&!this._element.textContent.trim()&&this._element.setAttribute("aria-label",a),this._element.setAttribute("data-bs-original-title",a),this._element.removeAttribute("title"))}_enter(){if(this._isShown()||this._isHovered){this._isHovered=!0;return}this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show)}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(a,f){clearTimeout(this._timeout),this._timeout=setTimeout(a,f)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(a){const f=uo.getDataAttributes(this._element);for(const m of Object.keys(f))sne.has(m)&&delete f[m];return a={...f,...typeof a=="object"&&a?a:{}},a=this._mergeConfigObj(a),a=this._configAfterMerge(a),this._typeCheckConfig(a),a}_configAfterMerge(a){return a.container=a.container===!1?document.body:Fo(a.container),typeof a.delay=="number"&&(a.delay={show:a.delay,hide:a.delay}),typeof a.title=="number"&&(a.title=a.title.toString()),typeof a.content=="number"&&(a.content=a.content.toString()),a}_getDelegateConfig(){const a={};for(const[f,m]of Object.entries(this._config))this.constructor.Default[f]!==m&&(a[f]=m);return a.selector=!1,a.trigger="manual",a}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(a){return this.each(function(){const f=ea.getOrCreateInstance(this,a);if(typeof a=="string"){if(typeof f[a]>"u")throw new TypeError(`No method named "${a}"`);f[a]()}})}}cs(ea);const Ene="popover",_ne=".popover-header",Sne=".popover-body",wne={...ea.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ane={...ea.DefaultType,content:"(null|string|element|function)"};class Eb extends ea{static get Default(){return wne}static get DefaultType(){return Ane}static get NAME(){return Ene}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[_ne]:this._getTitle(),[Sne]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(a){return this.each(function(){const f=Eb.getOrCreateInstance(this,a);if(typeof a=="string"){if(typeof f[a]>"u")throw new TypeError(`No method named "${a}"`);f[a]()}})}}cs(Eb);const Tne="scrollspy",Nne="bs.scrollspy",_b=`.${Nne}`,kne=".data-api",xne=`activate${_b}`,Mx=`click${_b}`,Rne=`load${_b}${kne}`,One="dropdown-item",$i="active",Dne='[data-bs-spy="scroll"]',Bg="[href]",Pne=".nav, .list-group",Fx=".nav-link",Bne=".nav-item",Lne=".list-group-item",Ine=`${Fx}, ${Bne} > ${Fx}, ${Lne}`,$ne=".dropdown",Mne=".dropdown-toggle",Fne={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Une={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Uf extends ws{constructor(a,f){super(a,f),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Fne}static get DefaultType(){return Une}static get NAME(){return Tne}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const a of this._observableSections.values())this._observer.observe(a)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(a){return a.target=Fo(a.target)||document.body,a.rootMargin=a.offset?`${a.offset}px 0px -30%`:a.rootMargin,typeof a.threshold=="string"&&(a.threshold=a.threshold.split(",").map(f=>Number.parseFloat(f))),a}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(oe.off(this._config.target,Mx),oe.on(this._config.target,Mx,Bg,a=>{const f=this._observableSections.get(a.target.hash);if(f){a.preventDefault();const m=this._rootElement||window,y=f.offsetTop-this._element.offsetTop;if(m.scrollTo){m.scrollTo({top:y,behavior:"smooth"});return}m.scrollTop=y}}))}_getNewObserver(){const a={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(f=>this._observerCallback(f),a)}_observerCallback(a){const f=w=>this._targetLinks.get(`#${w.target.id}`),m=w=>{this._previousScrollData.visibleEntryTop=w.target.offsetTop,this._process(f(w))},y=(this._rootElement||document.documentElement).scrollTop,_=y>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=y;for(const w of a){if(!w.isIntersecting){this._activeTarget=null,this._clearActiveClass(f(w));continue}const x=w.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(_&&x){if(m(w),!y)return;continue}!_&&!x&&m(w)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const a=Le.find(Bg,this._config.target);for(const f of a){if(!f.hash||Uo(f))continue;const m=Le.findOne(decodeURI(f.hash),this._element);Qi(m)&&(this._targetLinks.set(decodeURI(f.hash),f),this._observableSections.set(f.hash,m))}}_process(a){this._activeTarget!==a&&(this._clearActiveClass(this._config.target),this._activeTarget=a,a.classList.add($i),this._activateParents(a),oe.trigger(this._element,xne,{relatedTarget:a}))}_activateParents(a){if(a.classList.contains(One)){Le.findOne(Mne,a.closest($ne)).classList.add($i);return}for(const f of Le.parents(a,Pne))for(const m of Le.prev(f,Ine))m.classList.add($i)}_clearActiveClass(a){a.classList.remove($i);const f=Le.find(`${Bg}.${$i}`,a);for(const m of f)m.classList.remove($i)}static jQueryInterface(a){return this.each(function(){const f=Uf.getOrCreateInstance(this,a);if(typeof a=="string"){if(f[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);f[a]()}})}}oe.on(window,Rne,()=>{for(const u of Le.find(Dne))Uf.getOrCreateInstance(u)});cs(Uf);const Hne="tab",zne="bs.tab",Hr=`.${zne}`,Vne=`hide${Hr}`,Wne=`hidden${Hr}`,jne=`show${Hr}`,qne=`shown${Hr}`,Kne=`click${Hr}`,Gne=`keydown${Hr}`,Yne=`load${Hr}`,Xne="ArrowLeft",Ux="ArrowRight",Zne="ArrowUp",Hx="ArrowDown",Lg="Home",zx="End",Br="active",Vx="fade",Ig="show",Qne="dropdown",pO=".dropdown-toggle",Jne=".dropdown-menu",$g=`:not(${pO})`,ese='.list-group, .nav, [role="tablist"]',tse=".nav-item, .list-group-item",nse=`.nav-link${$g}, .list-group-item${$g}, [role="tab"]${$g}`,hO='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Mg=`${nse}, ${hO}`,sse=`.${Br}[data-bs-toggle="tab"], .${Br}[data-bs-toggle="pill"], .${Br}[data-bs-toggle="list"]`;class Gi extends ws{constructor(a){super(a),this._parent=this._element.closest(ese),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),oe.on(this._element,Gne,f=>this._keydown(f)))}static get NAME(){return Hne}show(){const a=this._element;if(this._elemIsActive(a))return;const f=this._getActiveElem(),m=f?oe.trigger(f,Vne,{relatedTarget:a}):null;oe.trigger(a,jne,{relatedTarget:f}).defaultPrevented||m&&m.defaultPrevented||(this._deactivate(f,a),this._activate(a,f))}_activate(a,f){if(!a)return;a.classList.add(Br),this._activate(Le.getElementFromSelector(a));const m=()=>{if(a.getAttribute("role")!=="tab"){a.classList.add(Ig);return}a.removeAttribute("tabindex"),a.setAttribute("aria-selected",!0),this._toggleDropDown(a,!0),oe.trigger(a,qne,{relatedTarget:f})};this._queueCallback(m,a,a.classList.contains(Vx))}_deactivate(a,f){if(!a)return;a.classList.remove(Br),a.blur(),this._deactivate(Le.getElementFromSelector(a));const m=()=>{if(a.getAttribute("role")!=="tab"){a.classList.remove(Ig);return}a.setAttribute("aria-selected",!1),a.setAttribute("tabindex","-1"),this._toggleDropDown(a,!1),oe.trigger(a,Wne,{relatedTarget:f})};this._queueCallback(m,a,a.classList.contains(Vx))}_keydown(a){if(![Xne,Ux,Zne,Hx,Lg,zx].includes(a.key))return;a.stopPropagation(),a.preventDefault();const f=this._getChildren().filter(y=>!Uo(y));let m;if([Lg,zx].includes(a.key))m=f[a.key===Lg?0:f.length-1];else{const y=[Ux,Hx].includes(a.key);m=yb(f,a.target,y,!0)}m&&(m.focus({preventScroll:!0}),Gi.getOrCreateInstance(m).show())}_getChildren(){return Le.find(Mg,this._parent)}_getActiveElem(){return this._getChildren().find(a=>this._elemIsActive(a))||null}_setInitialAttributes(a,f){this._setAttributeIfNotExists(a,"role","tablist");for(const m of f)this._setInitialAttributesOnChild(m)}_setInitialAttributesOnChild(a){a=this._getInnerElement(a);const f=this._elemIsActive(a),m=this._getOuterElement(a);a.setAttribute("aria-selected",f),m!==a&&this._setAttributeIfNotExists(m,"role","presentation"),f||a.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(a,"role","tab"),this._setInitialAttributesOnTargetPanel(a)}_setInitialAttributesOnTargetPanel(a){const f=Le.getElementFromSelector(a);f&&(this._setAttributeIfNotExists(f,"role","tabpanel"),a.id&&this._setAttributeIfNotExists(f,"aria-labelledby",`${a.id}`))}_toggleDropDown(a,f){const m=this._getOuterElement(a);if(!m.classList.contains(Qne))return;const y=(_,w)=>{const x=Le.findOne(_,m);x&&x.classList.toggle(w,f)};y(pO,Br),y(Jne,Ig),m.setAttribute("aria-expanded",f)}_setAttributeIfNotExists(a,f,m){a.hasAttribute(f)||a.setAttribute(f,m)}_elemIsActive(a){return a.classList.contains(Br)}_getInnerElement(a){return a.matches(Mg)?a:Le.findOne(Mg,a)}_getOuterElement(a){return a.closest(tse)||a}static jQueryInterface(a){return this.each(function(){const f=Gi.getOrCreateInstance(this);if(typeof a=="string"){if(f[a]===void 0||a.startsWith("_")||a==="constructor")throw new TypeError(`No method named "${a}"`);f[a]()}})}}oe.on(document,Kne,hO,function(u){["A","AREA"].includes(this.tagName)&&u.preventDefault(),!Uo(this)&&Gi.getOrCreateInstance(this).show()});oe.on(window,Yne,()=>{for(const u of Le.find(sse))Gi.getOrCreateInstance(u)});cs(Gi);const ose="toast",rse="bs.toast",Wo=`.${rse}`,ise=`mouseover${Wo}`,ase=`mouseout${Wo}`,cse=`focusin${Wo}`,lse=`focusout${Wo}`,use=`hide${Wo}`,fse=`hidden${Wo}`,dse=`show${Wo}`,mse=`shown${Wo}`,pse="fade",Wx="hide",gf="show",bf="showing",hse={animation:"boolean",autohide:"boolean",delay:"number"},gse={animation:!0,autohide:!0,delay:5e3};class Hf extends ws{constructor(a,f){super(a,f),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return gse}static get DefaultType(){return hse}static get NAME(){return ose}show(){if(oe.trigger(this._element,dse).defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(pse);const f=()=>{this._element.classList.remove(bf),oe.trigger(this._element,mse),this._maybeScheduleHide()};this._element.classList.remove(Wx),Hc(this._element),this._element.classList.add(gf,bf),this._queueCallback(f,this._element,this._config.animation)}hide(){if(!this.isShown()||oe.trigger(this._element,use).defaultPrevented)return;const f=()=>{this._element.classList.add(Wx),this._element.classList.remove(bf,gf),oe.trigger(this._element,fse)};this._element.classList.add(bf),this._queueCallback(f,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(gf),super.dispose()}isShown(){return this._element.classList.contains(gf)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(a,f){switch(a.type){case"mouseover":case"mouseout":{this._hasMouseInteraction=f;break}case"focusin":case"focusout":{this._hasKeyboardInteraction=f;break}}if(f){this._clearTimeout();return}const m=a.relatedTarget;this._element===m||this._element.contains(m)||this._maybeScheduleHide()}_setListeners(){oe.on(this._element,ise,a=>this._onInteraction(a,!0)),oe.on(this._element,ase,a=>this._onInteraction(a,!1)),oe.on(this._element,cse,a=>this._onInteraction(a,!0)),oe.on(this._element,lse,a=>this._onInteraction(a,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(a){return this.each(function(){const f=Hf.getOrCreateInstance(this,a);if(typeof a=="string"){if(typeof f[a]>"u")throw new TypeError(`No method named "${a}"`);f[a](this)}})}}$f(Hf);cs(Hf);function bse(u){return u&&u.__esModule&&Object.prototype.hasOwnProperty.call(u,"default")?u.default:u}var gO={exports:{}};(function(u){(function(){var a=function(e){if(e===null)return"null";if(e===void 0)return"undefined";var t=typeof e;return t==="object"&&(Array.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="Array")?"array":t==="object"&&(String.prototype.isPrototypeOf(e)||e.constructor&&e.constructor.name==="String")?"string":t},f=function(e){return["undefined","boolean","number","string","function","xml","null"].indexOf(e)!==-1},m=function(e,t){var n=Array.prototype.slice.call(e);return n.sort(t)},y=function(e,t){return _(function(n,s){return e.eq(t(n),t(s))})},_=function(e){return{eq:e}},w=_(function(e,t){return e===t}),x=w,M=function(e){return _(function(t,n){if(t.length!==n.length)return!1;for(var s=t.length,o=0;o<s;o++)if(!e.eq(t[o],n[o]))return!1;return!0})},z=function(e,t){return y(M(e),function(n){return m(n,t)})},$=function(e){return _(function(t,n){var s=Object.keys(t),o=Object.keys(n);if(!z(x).eq(s,o))return!1;for(var r=s.length,i=0;i<r;i++){var c=s[i];if(!e.eq(t[c],n[c]))return!1}return!0})},re=_(function(e,t){if(e===t)return!0;var n=a(e),s=a(t);return n!==s?!1:f(n)?e===t:n==="array"?M(re).eq(e,t):n==="object"?$(re).eq(e,t):!1});const we=Object.getPrototypeOf,_e=(e,t,n)=>{var s;return n(e,t.prototype)?!0:((s=e.constructor)===null||s===void 0?void 0:s.name)===t.name},he=e=>{const t=typeof e;return e===null?"null":t==="object"&&Array.isArray(e)?"array":t==="object"&&_e(e,String,(n,s)=>s.isPrototypeOf(n))?"string":t},ge=e=>t=>he(t)===e,ce=e=>t=>typeof t===e,We=e=>t=>e===t,Xe=(e,t)=>ye(e)&&_e(e,t,(n,s)=>we(n)===s),G=ge("string"),ye=ge("object"),je=e=>Xe(e,Object),Te=ge("array"),Be=We(null),nt=ce("boolean"),qe=We(void 0),Fe=e=>e==null,j=e=>!Fe(e),$e=ce("function"),pt=ce("number"),yn=(e,t)=>{if(Te(e)){for(let n=0,s=e.length;n<s;++n)if(!t(e[n]))return!1;return!0}return!1},Se=()=>{},_t=(e,t)=>(...n)=>e(t.apply(null,n)),vn=(e,t)=>n=>e(t(n)),te=e=>()=>e,St=e=>e,jo=(e,t)=>e===t;function ae(e,...t){return(...n)=>{const s=t.concat(n);return e.apply(null,s)}}const ls=e=>t=>!e(t),qo=e=>()=>{throw new Error(e)},As=e=>e(),Cn=e=>{e()},tt=te(!1),dt=te(!0);class b{constructor(t,n){this.tag=t,this.value=n}static some(t){return new b(!0,t)}static none(){return b.singletonNone}fold(t,n){return this.tag?n(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?b.some(t(this.value)):b.none()}bind(t){return this.tag?t(this.value):b.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:b.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(t??"Called getOrDie on None")}static from(t){return j(t)?b.some(t):b.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}b.singletonNone=new b(!1);const Ko=Array.prototype.slice,zf=Array.prototype.indexOf,ta=Array.prototype.push,jc=(e,t)=>zf.call(e,t),qc=(e,t)=>{const n=jc(e,t);return n===-1?b.none():b.some(n)},Ze=(e,t)=>jc(e,t)>-1,ut=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return!0}return!1},Ue=(e,t)=>{const n=e.length,s=new Array(n);for(let o=0;o<n;o++){const r=e[o];s[o]=t(r,o)}return s},U=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];t(o,n)}},Kc=(e,t)=>{for(let n=e.length-1;n>=0;n--){const s=e[n];t(s,n)}},po=(e,t)=>{const n=[],s=[];for(let o=0,r=e.length;o<r;o++){const i=e[o];(t(i,o)?n:s).push(i)}return{pass:n,fail:s}},ve=(e,t)=>{const n=[];for(let s=0,o=e.length;s<o;s++){const r=e[s];t(r,s)&&n.push(r)}return n},Ts=(e,t,n)=>(Kc(e,(s,o)=>{n=t(n,s,o)}),n),Vt=(e,t,n)=>(U(e,(s,o)=>{n=t(n,s,o)}),n),na=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++){const r=e[s];if(t(r,s))return b.some(r);if(n(r,s))break}return b.none()},vt=(e,t)=>na(e,t,tt),ho=(e,t)=>{for(let n=0,s=e.length;n<s;n++){const o=e[n];if(t(o,n))return b.some(n)}return b.none()},sa=e=>{const t=[];for(let n=0,s=e.length;n<s;++n){if(!Te(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);ta.apply(t,e[n])}return t},sn=(e,t)=>sa(Ue(e,t)),Gn=(e,t)=>{for(let n=0,s=e.length;n<s;++n){const o=e[n];if(t(o,n)!==!0)return!1}return!0},oa=e=>{const t=Ko.call(e,0);return t.reverse(),t},Gc=(e,t)=>ve(e,n=>!Ze(t,n)),Vf=(e,t)=>{const n={};for(let s=0,o=e.length;s<o;s++){const r=e[s];n[String(r)]=t(r,s)}return n},Go=(e,t)=>{const n=Ko.call(e,0);return n.sort(t),n},ra=(e,t)=>t>=0&&t<e.length?b.some(e[t]):b.none(),on=e=>ra(e,0),go=e=>ra(e,e.length-1),En=$e(Array.from)?Array.from:e=>Ko.call(e),zr=(e,t)=>{for(let n=0;n<e.length;n++){const s=t(e[n],n);if(s.isSome())return s}return b.none()},Sb=(e,t)=>{const n=[],s=$e(t)?o=>ut(n,r=>t(r,o)):o=>Ze(n,o);for(let o=0,r=e.length;o<r;o++){const i=e[o];s(i)||n.push(i)}return n},un=Object.keys,bO=Object.hasOwnProperty,ot=(e,t)=>{const n=un(e);for(let s=0,o=n.length;s<o;s++){const r=n[s],i=e[r];t(i,r)}},ia=(e,t)=>yO(e,(n,s)=>({k:s,v:t(n,s)})),yO=(e,t)=>{const n={};return ot(e,(s,o)=>{const r=t(s,o);n[r.k]=r.v}),n},Wf=e=>(t,n)=>{e[n]=t},wb=(e,t,n,s)=>{ot(e,(o,r)=>{(t(o,r)?n:s)(o,r)})},vO=(e,t)=>{const n={},s={};return wb(e,t,Wf(n),Wf(s)),{t:n,f:s}},aa=(e,t)=>{const n={};return wb(e,t,Wf(n),Se),n},Yc=(e,t)=>{const n=[];return ot(e,(s,o)=>{n.push(t(s,o))}),n},jf=e=>Yc(e,St),ct=(e,t)=>Ae(e,t)?b.from(e[t]):b.none(),Ae=(e,t)=>bO.call(e,t),Vr=(e,t)=>Ae(e,t)&&e[t]!==void 0&&e[t]!==null,CO=(e,t,n=re)=>$(n).eq(e,t),Ab=e=>{const t={};return U(e,n=>{t[n]={}}),un(t)},Tb=e=>e.length!==void 0,qf=Array.isArray,EO=e=>{if(qf(e))return e;{const t=[];for(let n=0,s=e.length;n<s;n++)t[n]=e[n];return t}},Xc=(e,t,n)=>{if(!e)return!1;if(n=n||e,Tb(e)){for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e)===!1)return!1}else for(const s in e)if(Ae(e,s)&&t.call(n,e[s],s,e)===!1)return!1;return!0},Kf=(e,t)=>{const n=[];return Xc(e,(s,o)=>{n.push(t(s,o,e))}),n},ca=(e,t)=>{const n=[];return Xc(e,(s,o)=>{(!t||t(s,o,e))&&n.push(s)}),n},_O=(e,t)=>{if(e){for(let n=0,s=e.length;n<s;n++)if(e[n]===t)return n}return-1},Zc=(e,t,n,s)=>{let o=qe(n)?e[0]:n;for(let r=0;r<e.length;r++)o=t.call(s,o,e[r],r);return o},Nb=(e,t,n)=>{for(let s=0,o=e.length;s<o;s++)if(t.call(n,e[s],s,e))return s;return-1},Yo=e=>e[e.length-1],Ns=e=>{let t=!1,n;return(...s)=>(t||(t=!0,n=e.apply(null,s)),n)},SO=(e,t,n,s)=>{const o=e.isiOS()&&/ipad/i.test(n)===!0,r=e.isiOS()&&!o,i=e.isiOS()||e.isAndroid(),c=i||s("(pointer:coarse)"),l=o||!r&&i&&s("(min-device-width:768px)"),d=r||i&&!l,p=t.isSafari()&&e.isiOS()&&/safari/i.test(n)===!1,h=!d&&!l&&!p;return{isiPad:te(o),isiPhone:te(r),isTablet:te(l),isPhone:te(d),isTouch:te(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:te(p),isDesktop:te(h)}},wO=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n];if(s.test(t))return s}},AO=(e,t)=>{const n=wO(e,t);if(!n)return{major:0,minor:0};const s=o=>Number(t.replace(n,"$"+o));return Gf(s(1),s(2))},TO=(e,t)=>{const n=String(t).toLowerCase();return e.length===0?kb():AO(e,n)},kb=()=>Gf(0,0),Gf=(e,t)=>({major:e,minor:t}),la={nu:Gf,detect:TO,unknown:kb},NO=(e,t)=>zr(t.brands,n=>{const s=n.brand.toLowerCase();return vt(e,o=>{var r;return s===((r=o.brand)===null||r===void 0?void 0:r.toLowerCase())}).map(o=>({current:o.name,version:la.nu(parseInt(n.version,10),0)}))}),xb=(e,t)=>{const n=String(t).toLowerCase();return vt(e,s=>s.search(n))},kO=(e,t)=>xb(e,t).map(n=>{const s=la.detect(n.versionRegexes,t);return{current:n.name,version:s}}),xO=(e,t)=>xb(e,t).map(n=>{const s=la.detect(n.versionRegexes,t);return{current:n.name,version:s}}),RO=(e,t)=>e.substring(t),Rb=(e,t,n)=>t===""||e.length>=t.length&&e.substr(n,n+t.length)===t,Ob=(e,t)=>kt(e,t)?RO(e,t.length):e,Wt=(e,t,n=0,s)=>{const o=e.indexOf(t,n);return o!==-1?qe(s)?!0:o+t.length<=s:!1},kt=(e,t)=>Rb(e,t,0),Yf=(e,t)=>Rb(e,t,e.length-t.length),Xf=e=>t=>t.replace(e,""),Wr=Xf(/^\s+|\s+$/g),OO=Xf(/^\s+/g),Db=Xf(/\s+$/g),ks=e=>e.length>0,ua=e=>!ks(e),DO=(e,t)=>t<=0?"":new Array(t+1).join(e),Qc=(e,t=10)=>{const n=parseInt(e,t);return isNaN(n)?b.none():b.some(n)},Zf=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Gs=e=>t=>Wt(t,e),PO=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:e=>Wt(e,"edge/")&&Wt(e,"chrome")&&Wt(e,"safari")&&Wt(e,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Zf],search:e=>Wt(e,"chrome")&&!Wt(e,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:e=>Wt(e,"msie")||Wt(e,"trident")},{name:"Opera",versionRegexes:[Zf,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Gs("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Gs("firefox")},{name:"Safari",versionRegexes:[Zf,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:e=>(Wt(e,"safari")||Wt(e,"mobile/"))&&Wt(e,"applewebkit")}],BO=[{name:"Windows",search:Gs("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:e=>Wt(e,"iphone")||Wt(e,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Gs("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Gs("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Gs("linux"),versionRegexes:[]},{name:"Solaris",search:Gs("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Gs("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Gs("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Pb={browsers:te(PO),oses:te(BO)},Bb="Edge",Lb="Chromium",Ib="IE",$b="Opera",Mb="Firefox",Fb="Safari",LO=()=>Ub({current:void 0,version:la.unknown()}),Ub=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isEdge:s(Bb),isChromium:s(Lb),isIE:s(Ib),isOpera:s($b),isFirefox:s(Mb),isSafari:s(Fb)}},Hb={unknown:LO,nu:Ub,edge:te(Bb),chromium:te(Lb),ie:te(Ib),opera:te($b),firefox:te(Mb),safari:te(Fb)},zb="Windows",Vb="iOS",Wb="Android",jb="Linux",qb="macOS",Kb="Solaris",Gb="FreeBSD",Yb="ChromeOS",IO=()=>Xb({current:void 0,version:la.unknown()}),Xb=e=>{const t=e.current,n=e.version,s=o=>()=>t===o;return{current:t,version:n,isWindows:s(zb),isiOS:s(Vb),isAndroid:s(Wb),isMacOS:s(qb),isLinux:s(jb),isSolaris:s(Kb),isFreeBSD:s(Gb),isChromeOS:s(Yb)}},Zb={unknown:IO,nu:Xb,windows:te(zb),ios:te(Vb),android:te(Wb),linux:te(jb),macos:te(qb),solaris:te(Kb),freebsd:te(Gb),chromeos:te(Yb)},$O={detect:(e,t,n)=>{const s=Pb.browsers(),o=Pb.oses(),r=t.bind(l=>NO(s,l)).orThunk(()=>kO(s,e)).fold(Hb.unknown,Hb.nu),i=xO(o,e).fold(Zb.unknown,Zb.nu),c=SO(i,r,e,n);return{browser:r,os:i,deviceType:c}}},MO=e=>window.matchMedia(e).matches;let FO=Ns(()=>$O.detect(window.navigator.userAgent,b.from(window.navigator.userAgentData),MO));const xs=()=>FO(),UO=window.navigator.userAgent,Qf=xs(),Rs=Qf.browser,Os=Qf.os,Xo=Qf.deviceType,HO=UO.indexOf("Windows Phone")!==-1,Ve={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Rs.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Rs.isIE(),windowsPhone:HO,browser:{current:Rs.current,version:Rs.version,isChromium:Rs.isChromium,isEdge:Rs.isEdge,isFirefox:Rs.isFirefox,isIE:Rs.isIE,isOpera:Rs.isOpera,isSafari:Rs.isSafari},os:{current:Os.current,version:Os.version,isAndroid:Os.isAndroid,isChromeOS:Os.isChromeOS,isFreeBSD:Os.isFreeBSD,isiOS:Os.isiOS,isLinux:Os.isLinux,isMacOS:Os.isMacOS,isSolaris:Os.isSolaris,isWindows:Os.isWindows},deviceType:{isDesktop:Xo.isDesktop,isiPad:Xo.isiPad,isiPhone:Xo.isiPhone,isPhone:Xo.isPhone,isTablet:Xo.isTablet,isTouch:Xo.isTouch,isWebView:Xo.isWebView}},zO=/^\s*|\s*$/g,Qb=e=>Fe(e)?"":(""+e).replace(zO,""),VO=(e,t)=>t?t==="array"&&qf(e)?!0:typeof e===t:e!==void 0,WO=(e,t,n={})=>{const s=G(e)?e.split(t||","):e||[];let o=s.length;for(;o--;)n[s[o]]={};return n},jO=Ae,qO=(e,...t)=>{for(let n=0;n<t.length;n++){const s=t[n];for(const o in s)if(Ae(s,o)){const r=s[o];r!==void 0&&(e[o]=r)}}return e},Jb=function(e,t,n,s){s=s||this,e&&(n&&(e=e[n]),Xc(e,(o,r)=>t.call(s,o,r,n)===!1?!1:(Jb(o,t,n,s),!0)))},X={trim:Qb,isArray:qf,is:VO,toArray:EO,makeMap:WO,each:Xc,map:Kf,grep:ca,inArray:_O,hasOwn:jO,extend:qO,walk:Jb,resolve:(e,t=window)=>{const n=e.split(".");for(let s=0,o=n.length;s<o&&(t=t[n[s]],!!t);s++);return t},explode:(e,t)=>Te(e)?e:e===""?[]:Kf(e.split(t||","),Qb),_addCacheSuffix:e=>{const t=Ve.cacheSuffix;return t&&(e+=(e.indexOf("?")===-1?"?":"&")+t),e}},jr=(e,t,n=jo)=>e.exists(s=>n(s,t)),ey=(e,t,n=jo)=>jt(e,t,n).getOr(e.isNone()&&t.isNone()),KO=e=>{const t=[],n=s=>{t.push(s)};for(let s=0;s<e.length;s++)e[s].each(n);return t},jt=(e,t,n)=>e.isSome()&&t.isSome()?b.some(n(e.getOrDie(),t.getOrDie())):b.none(),GO=(e,t,n,s)=>e.isSome()&&t.isSome()&&n.isSome()?b.some(s(e.getOrDie(),t.getOrDie(),n.getOrDie())):b.none(),qr=(e,t)=>e?b.some(t):b.none(),YO=typeof window<"u"?window:Function("return this;")(),XO=(e,t)=>{let n=t??YO;for(let s=0;s<e.length&&n!==void 0&&n!==null;++s)n=n[e[s]];return n},ty=(e,t)=>{const n=e.split(".");return XO(n,t)},ZO=(e,t)=>ty(e,t),QO=(e,t)=>{const n=ZO(e,t);if(n==null)throw new Error(e+" not available on this browser");return n},JO=Object.getPrototypeOf,eD=e=>QO("HTMLElement",e),tD=e=>{const t=ty("ownerDocument.defaultView",e);return ye(e)&&(eD(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(JO(e).constructor.name))},Jc=8,ny=9,sy=11,fa=1,oy=3,He=e=>e.dom.nodeName.toLowerCase(),ry=e=>e.dom.nodeType,el=e=>t=>ry(t)===e,nD=e=>ry(e)===Jc||He(e)==="#comment",tl=e=>_n(e)&&tD(e.dom),_n=el(fa),rn=el(oy),sD=el(ny),oD=el(sy),nl=e=>t=>_n(t)&&He(t)===e,iy=(e,t,n)=>{if(G(n)||nt(n)||pt(n))e.setAttribute(t,n+"");else throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple")},$t=(e,t,n)=>{iy(e.dom,t,n)},Ys=(e,t)=>{const n=e.dom;ot(t,(s,o)=>{iy(n,o,s)})},Sn=(e,t)=>{const n=e.dom.getAttribute(t);return n===null?void 0:n},Xs=(e,t)=>b.from(Sn(e,t)),da=(e,t)=>{const n=e.dom;return n&&n.hasAttribute?n.hasAttribute(t):!1},Mt=(e,t)=>{e.dom.removeAttribute(t)},rD=e=>{const t=e.dom.attributes;return t==null||t.length===0},ay=e=>Vt(e.dom.attributes,(t,n)=>(t[n.name]=n.value,t),{}),Jf=(e,t)=>{const n=Sn(e,t);return n===void 0||n===""?[]:n.split(" ")},iD=(e,t,n)=>{const o=Jf(e,t).concat([n]);return $t(e,t,o.join(" ")),!0},aD=(e,t,n)=>{const s=ve(Jf(e,t),o=>o!==n);return s.length>0?$t(e,t,s.join(" ")):Mt(e,t),!1},ma=e=>e.dom.classList!==void 0,cy=e=>Jf(e,"class"),ly=(e,t)=>iD(e,"class",t),uy=(e,t)=>aD(e,"class",t),cD=(e,t)=>Ze(cy(e),t)?uy(e,t):ly(e,t),Kr=(e,t)=>{ma(e)?e.dom.classList.add(t):ly(e,t)},fy=e=>{(ma(e)?e.dom.classList:cy(e)).length===0&&Mt(e,"class")},pa=(e,t)=>{ma(e)?e.dom.classList.remove(t):uy(e,t),fy(e)},lD=(e,t)=>{const n=ma(e)?e.dom.classList.toggle(t):cD(e,t);return fy(e),n},ed=(e,t)=>ma(e)&&e.dom.classList.contains(t),uD=(e,t)=>{const s=(t||document).createElement("div");if(s.innerHTML=e,!s.hasChildNodes()||s.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return ha(s.childNodes[0])},fD=(e,t)=>{const s=(t||document).createElement(e);return ha(s)},dD=(e,t)=>{const s=(t||document).createTextNode(e);return ha(s)},ha=e=>{if(e==null)throw new Error("Node cannot be null or undefined");return{dom:e}},A={fromHtml:uD,fromTag:fD,fromText:dD,fromDom:ha,fromPoint:(e,t,n)=>b.from(e.dom.elementFromPoint(t,n)).map(ha)},dy=(e,t)=>{const n=[],s=r=>(n.push(r),t(r));let o=t(e);do o=o.bind(s);while(o.isSome());return n},us=(e,t)=>{const n=e.dom;if(n.nodeType!==fa)return!1;{const s=n;if(s.matches!==void 0)return s.matches(t);if(s.msMatchesSelector!==void 0)return s.msMatchesSelector(t);if(s.webkitMatchesSelector!==void 0)return s.webkitMatchesSelector(t);if(s.mozMatchesSelector!==void 0)return s.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")}},my=e=>e.nodeType!==fa&&e.nodeType!==ny&&e.nodeType!==sy||e.childElementCount===0,mD=(e,t)=>{const n=t===void 0?document:t.dom;return my(n)?[]:Ue(n.querySelectorAll(e),A.fromDom)},pD=(e,t)=>{const n=t===void 0?document:t.dom;return my(n)?b.none():b.from(n.querySelector(e)).map(A.fromDom)},Qe=(e,t)=>e.dom===t.dom,fs=(e,t)=>{const n=e.dom,s=t.dom;return n===s?!1:n.contains(s)},py=e=>A.fromDom(e.dom.ownerDocument),bo=e=>sD(e)?e:py(e),hD=e=>A.fromDom(bo(e).dom.documentElement),ga=e=>A.fromDom(bo(e).dom.defaultView),ds=e=>b.from(e.dom.parentNode).map(A.fromDom),sl=e=>b.from(e.dom.parentElement).map(A.fromDom),hy=(e,t)=>{const n=$e(t)?t:tt;let s=e.dom;const o=[];for(;s.parentNode!==null&&s.parentNode!==void 0;){const r=s.parentNode,i=A.fromDom(r);if(o.push(i),n(i)===!0)break;s=r}return o},gD=e=>{const t=n=>ve(n,s=>!Qe(e,s));return ds(e).map(qt).map(t).getOr([])},yo=e=>b.from(e.dom.previousSibling).map(A.fromDom),ba=e=>b.from(e.dom.nextSibling).map(A.fromDom),gy=e=>oa(dy(e,yo)),by=e=>dy(e,ba),qt=e=>Ue(e.dom.childNodes,A.fromDom),Gr=(e,t)=>{const n=e.dom.childNodes;return b.from(n[t]).map(A.fromDom)},td=e=>Gr(e,0),nd=e=>Gr(e,e.dom.childNodes.length-1),sd=e=>e.dom.childNodes.length,bD=e=>{const t=e.dom.head;if(t==null)throw new Error("Head is not available yet");return A.fromDom(t)},od=e=>oD(e)&&j(e.dom.host),vo=e=>A.fromDom(e.dom.getRootNode()),rd=e=>od(e)?e:bD(bo(e)),yD=e=>od(e)?e:A.fromDom(bo(e).dom.body),vD=e=>{const t=vo(e);return od(t)?b.some(t):b.none()},CD=e=>A.fromDom(e.dom.host),yy=e=>{if(j(e.target)){const t=A.fromDom(e.target);if(_n(t)&&ED(t)&&e.composed&&e.composedPath){const n=e.composedPath();if(n)return on(n)}}return b.from(e.target)},ED=e=>j(e.dom.shadowRoot),Yr=e=>{const t=rn(e)?e.dom.parentNode:e.dom;if(t==null||t.ownerDocument===null)return!1;const n=t.ownerDocument;return vD(A.fromDom(t)).fold(()=>n.body.contains(t),vn(Yr,CD))};var vy=(e,t,n,s,o)=>e(n,s)?b.some(n):$e(o)&&o(n)?b.none():t(n,s,o);const Zs=(e,t,n)=>{let s=e.dom;const o=$e(n)?n:tt;for(;s.parentNode;){s=s.parentNode;const r=A.fromDom(s);if(t(r))return b.some(r);if(o(r))break}return b.none()},Zo=(e,t,n)=>vy((o,r)=>r(o),Zs,e,t,n),_D=(e,t)=>{const n=e.dom;return n.parentNode?SD(A.fromDom(n.parentNode),s=>!Qe(e,s)&&t(s)):b.none()},SD=(e,t)=>{const n=o=>t(A.fromDom(o));return vt(e.dom.childNodes,n).map(A.fromDom)},id=(e,t)=>{const n=s=>{for(let o=0;o<s.childNodes.length;o++){const r=A.fromDom(s.childNodes[o]);if(t(r))return b.some(r);const i=n(s.childNodes[o]);if(i.isSome())return i}return b.none()};return n(e.dom)},ya=(e,t,n)=>Zs(e,s=>us(s,t),n),ol=(e,t)=>pD(t,e),Xr=(e,t,n)=>vy((o,r)=>us(o,r),ya,e,t,n),wD=e=>Xr(e,"[contenteditable]"),Qo=(e,t=!1)=>Yr(e)?e.dom.isContentEditable:wD(e).fold(te(t),n=>AD(n)==="true"),AD=e=>e.dom.contentEditable,va=e=>e.style!==void 0&&$e(e.style.getPropertyValue),Cy=(e,t,n)=>{if(!G(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);va(e)&&e.style.setProperty(t,n)},TD=(e,t)=>{va(e)&&e.style.removeProperty(t)},Ey=(e,t,n)=>{const s=e.dom;Cy(s,t,n)},rl=(e,t)=>{const n=e.dom;ot(t,(s,o)=>{Cy(n,o,s)})},Ds=(e,t)=>{const n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return o===""&&!Yr(e)?_y(n,t):o},_y=(e,t)=>va(e)?e.style.getPropertyValue(t):"",il=(e,t)=>{const n=e.dom,s=_y(n,t);return b.from(s).filter(o=>o.length>0)},ad=e=>{const t={},n=e.dom;if(va(n))for(let s=0;s<n.style.length;s++){const o=n.style.item(s);t[o]=n.style[o]}return t},Sy=(e,t)=>{const n=e.dom;TD(n,t),jr(Xs(e,"style").map(Wr),"")&&Mt(e,"style")},ND=e=>e.dom.offsetWidth,fn=(e,t)=>{ds(e).each(s=>{s.dom.insertBefore(t.dom,e.dom)})},Qs=(e,t)=>{ba(e).fold(()=>{ds(e).each(o=>{At(o,t)})},s=>{fn(s,t)})},cd=(e,t)=>{td(e).fold(()=>{At(e,t)},s=>{e.dom.insertBefore(t.dom,s.dom)})},At=(e,t)=>{e.dom.appendChild(t.dom)},wy=(e,t)=>{fn(e,t),At(t,e)},kD=(e,t)=>{U(t,(n,s)=>{const o=s===0?e:t[s-1];Qs(o,n)})},Jo=(e,t)=>{U(t,n=>{At(e,n)})},Zr=e=>{e.dom.textContent="",U(qt(e),t=>{lt(t)})},lt=e=>{const t=e.dom;t.parentNode!==null&&t.parentNode.removeChild(t)},Co=e=>{const t=qt(e);t.length>0&&kD(e,t),lt(e)},xD=(e,t)=>{const s=(t||document).createElement("div");return s.innerHTML=e,qt(A.fromDom(s))},ld=e=>Ue(e,A.fromDom),Ay=e=>e.dom.innerHTML,al=(e,t)=>{const s=py(e).dom,o=A.fromDom(s.createDocumentFragment()),r=xD(t,s);Jo(o,r),Zr(e),At(e,o)},RD=e=>{const t=A.fromTag("div"),n=A.fromDom(e.dom.cloneNode(!0));return At(t,n),Ay(t)},OD=(e,t,n,s,o,r,i)=>({target:e,x:t,y:n,stop:s,prevent:o,kill:r,raw:i}),DD=e=>{const t=A.fromDom(yy(e).getOr(e.target)),n=()=>e.stopPropagation(),s=()=>e.preventDefault(),o=_t(s,n);return OD(t,e.clientX,e.clientY,n,s,o,e)},PD=(e,t)=>n=>{e(n)&&t(DD(n))},BD=(e,t,n,s,o)=>{const r=PD(n,s);return e.dom.addEventListener(t,r,o),{unbind:ae(ID,e,t,r,o)}},LD=(e,t,n,s)=>BD(e,t,n,s,!1),ID=(e,t,n,s)=>{e.dom.removeEventListener(t,n,s)},Ty=(e,t)=>({left:e,top:t,translate:(s,o)=>Ty(e+s,t+o)}),Qr=Ty,$D=e=>{const t=e.getBoundingClientRect();return Qr(t.left,t.top)},cl=(e,t)=>e!==void 0?e:t!==void 0?t:0,MD=e=>{const t=e.dom.ownerDocument,n=t.body,s=t.defaultView,o=t.documentElement;if(n===e.dom)return Qr(n.offsetLeft,n.offsetTop);const r=cl(s==null?void 0:s.pageYOffset,o.scrollTop),i=cl(s==null?void 0:s.pageXOffset,o.scrollLeft),c=cl(o.clientTop,n.clientTop),l=cl(o.clientLeft,n.clientLeft);return ud(e).translate(i-l,r-c)},ud=e=>{const t=e.dom,s=t.ownerDocument.body;return s===t?Qr(s.offsetLeft,s.offsetTop):Yr(e)?$D(t):Qr(0,0)},fd=e=>{const t=e!==void 0?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,s=t.body.scrollTop||t.documentElement.scrollTop;return Qr(n,s)},Ny=(e,t,n)=>{const o=(n!==void 0?n.dom:document).defaultView;o&&o.scrollTo(e,t)},ky=(e,t)=>{xs().browser.isSafari()&&$e(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},FD=e=>{const t=e===void 0?window:e;return xs().browser.isFirefox()?b.none():b.from(t.visualViewport)},xy=(e,t,n,s)=>({x:e,y:t,width:n,height:s,right:e+n,bottom:t+s}),Ry=e=>{const t=e===void 0?window:e,n=t.document,s=fd(A.fromDom(n));return FD(t).fold(()=>{const o=t.document.documentElement,r=o.clientWidth,i=o.clientHeight;return xy(s.left,s.top,r,i)},o=>xy(Math.max(o.pageLeft,s.left),Math.max(o.pageTop,s.top),o.width,o.height))},UD=(e,t)=>ve(qt(e),t),Oy=(e,t)=>{let n=[];return U(qt(e),s=>{t(s)&&(n=n.concat([s])),n=n.concat(Oy(s,t))}),n},Kt=(e,t)=>mD(t,e),Dy=(e,t,n)=>Zs(e,t,n).isSome(),HD=(e,t)=>_D(e,t).isSome(),Py=(e,t)=>id(e,t).isSome();class Pt{constructor(t,n){this.node=t,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,n,s,o){if(t){if(!o&&t[n])return t[n];if(t!==this.rootNode){let r=t[s];if(r)return r;for(let i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(r=i[s],r)return r}}}findPreviousNode(t,n){if(t){const s=t.previousSibling;if(this.rootNode&&s===this.rootNode)return;if(s){if(!n){for(let r=s.lastChild;r;r=r.lastChild)if(!r.lastChild)return r}return s}const o=t.parentNode;if(o&&o!==this.rootNode)return o}}}const Ca="\uFEFF",xt=" ",dd=e=>e===Ca,zD=e=>e.replace(/\uFEFF/g,""),VD=/^[ \t\r\n]*$/,Jr=e=>VD.test(e),WD=e=>{for(const t of e)if(!dd(t))return!1;return!0},jD=e=>" \f	\v".indexOf(e)!==-1,By=e=>e===`
`||e==="\r",qD=(e,t)=>t<e.length&&t>=0?By(e[t]):!1,Ly=(e,t=4,n=!0,s=!0)=>{const o=DO(" ",t),r=e.replace(/\t/g,o);return Vt(r,(c,l)=>jD(l)||l===xt?c.pcIsSpace||c.str===""&&n||c.str.length===r.length-1&&s||qD(r,c.str.length+1)?{pcIsSpace:!1,str:c.str+xt}:{pcIsSpace:!0,str:c.str+" "}:{pcIsSpace:By(l),str:c.str+l},{pcIsSpace:!1,str:""}).str},er=e=>t=>!!t&&t.nodeType===e,ll=e=>!!e&&!Object.getPrototypeOf(e),fe=er(1),Js=e=>fe(e)&&tl(A.fromDom(e)),KD=e=>fe(e)&&e.namespaceURI==="http://www.w3.org/2000/svg",Ea=e=>{const t=e.toLowerCase();return n=>j(n)&&n.nodeName.toLowerCase()===t},ms=e=>{const t=e.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const s=n.nodeName.toLowerCase();return Ze(t,s)}return!1}},ul=(e,t)=>{const n=t.toLowerCase().split(" ");return s=>{if(fe(s)){const o=s.ownerDocument.defaultView;if(o)for(let r=0;r<n.length;r++){const i=o.getComputedStyle(s,null);if((i?i.getPropertyValue(e):null)===n[r])return!0}}return!1}},GD=e=>t=>fe(t)&&t.hasAttribute(e),tr=e=>fe(e)&&e.hasAttribute("data-mce-bogus"),YD=e=>fe(e)&&e.getAttribute("data-mce-bogus")==="all",Ps=e=>fe(e)&&e.tagName==="TABLE",Iy=e=>t=>!!(Js(t)&&(t.contentEditable===e||t.getAttribute("data-mce-contenteditable")===e)),md=ms(["textarea","input"]),q=er(3),XD=er(4),ZD=er(7),Eo=er(8),_a=er(9),pd=er(11),ht=Ea("br"),$y=Ea("img"),Yn=Iy("true"),rt=Iy("false"),fl=ms(["td","th"]),QD=ms(["td","th","caption"]),Bs=ms(["video","audio","object","embed"]),JD=Ea("li"),hd=Ea("details"),eP=Ea("summary"),My={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},tP=(e,t,n)=>{const s=A.fromDom(t),o=A.fromDom(e),r=n.getWhitespaceElements();return Dy(o,c=>Ae(r,He(c)),ae(Qe,s))},nP=e=>fe(e)&&e.nodeName==="A"&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id")),sP=(e,t)=>fe(e)&&Ae(t.getNonEmptyElements(),e.nodeName),oP=GD("data-mce-bookmark"),rP=e=>sl(A.fromDom(e)).exists(t=>!Qo(t)),iP=(e,t,n)=>Jr(e.data)&&!tP(e,t,n),aP=(e,t,n,s)=>q(e)&&!iP(e,t,n)&&(!s.includeZwsp||!WD(e.data)),gd=(e,t,n,s)=>$e(s.isContent)&&s.isContent(t)||sP(t,e)||oP(t)||nP(t)||aP(t,n,e,s)||rt(t)||Yn(t)&&rP(t),eo=(e,t,n)=>{const s={...My,...n};if(s.checkRootAsContent&&gd(e,t,t,s))return!1;let o=t.firstChild,r=0;if(!o)return!0;const i=new Pt(o,t);do{if(s.skipBogus&&fe(o)){const c=o.getAttribute("data-mce-bogus");if(c){o=i.next(c==="all");continue}}if(Eo(o)){o=i.next(!0);continue}if(ht(o)){r++,o=i.next();continue}if(gd(e,o,t,s))return!1;o=i.next()}while(o);return r<=1},Gt=(e,t,n)=>eo(e,t.dom,{checkRootAsContent:!0,...n}),Fy=(e,t,n)=>gd(e,t,t,{includeZwsp:My.includeZwsp,...n}),Bt=e=>{let t=e;return{get:()=>t,set:o=>{t=o}}},cP=e=>{const t=Bt(b.none()),n=()=>t.get().each(e);return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:c=>{n(),t.set(b.some(c))}}},lP=e=>{const t=Bt(b.none()),n=()=>t.get().each(c=>clearInterval(c));return{clear:()=>{n(),t.set(b.none())},isSet:()=>t.get().isSome(),get:()=>t.get(),set:c=>{n(),t.set(b.some(setInterval(c,e)))}}},to=()=>{const e=cP(Se);return{...e,on:n=>e.get().each(n)}},Uy=e=>{const t=e.toLowerCase();return t==="svg"?"svg":t==="math"?"math":"html"},nr=e=>Uy(e)!=="html",bd=e=>nr(e.nodeName),Hy=e=>Uy(e.nodeName),uP=["svg","math"],fP=()=>{const e=to(),t=()=>e.get().map(Hy).getOr("html");return{track:o=>(bd(o)?e.set(o):e.get().exists(r=>!r.contains(o))&&e.clear(),t()),current:t,reset:()=>{e.clear()}}},dl="data-mce-block",dP=e=>ve(un(e),t=>!/[A-Z]/.test(t)),yd=e=>Ue(dP(e),t=>{const n=CSS.escape(t);return`${n}:`+Ue(uP,s=>`not(${s} ${n})`).join(":")}).join(","),zy=(e,t)=>j(t.querySelector(e))?(t.setAttribute(dl,"true"),t.getAttribute("data-mce-selected")==="inline-boundary"&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(dl),!1),Vy=(e,t)=>{const n=yd(e.getTransparentElements()),s=yd(e.getBlockElements());return ve(t.querySelectorAll(n),o=>zy(s,o))},Wy=(e,t,n)=>{var s;const o=n?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(eo(e,r,{checkRootAsContent:!0})){(s=r.parentNode)===null||s===void 0||s.removeChild(r);return}},mP=(e,t,n)=>{const s=document.createRange(),o=t.parentNode;if(o){s.setStartBefore(t),s.setEndBefore(n);const r=s.extractContents();Wy(e,r,!0),s.setStartAfter(n),s.setEndAfter(t);const i=s.extractContents();Wy(e,i,!1),eo(e,r,{checkRootAsContent:!0})||o.insertBefore(r,t),eo(e,n,{checkRootAsContent:!0})||o.insertBefore(n,t),eo(e,i,{checkRootAsContent:!0})||o.insertBefore(i,t),o.removeChild(t)}},pP=(e,t,n)=>{const s=e.getBlockElements(),o=A.fromDom(t),r=c=>He(c)in s,i=c=>Qe(c,o);U(ld(n),c=>{Zs(c,r,i).each(l=>{const d=UD(c,p=>r(p)&&!e.isValidChild(He(l),He(p)));if(d.length>0){const p=sl(l);U(d,h=>{Zs(h,r,i).each(g=>{mP(e,g.dom,h.dom)})}),p.each(h=>Vy(e,h.dom))}})})},hP=(e,t,n)=>{U([...n,...sr(e,t)?[t]:[]],s=>U(Kt(A.fromDom(s),s.nodeName.toLowerCase()),o=>{yP(e,o.dom)&&Co(o)}))},vd=(e,t)=>{const n=Vy(e,t);pP(e,t,n),hP(e,t,n)},gP=(e,t)=>{if(_d(e,t)){const n=yd(e.getBlockElements());zy(n,t)}},bP=(e,t,n)=>{const s=r=>Qe(r,A.fromDom(t)),o=hy(A.fromDom(n),s);ra(o,o.length-2).filter(_n).fold(()=>vd(e,t),r=>vd(e,r.dom))},Cd=e=>e.hasAttribute(dl),Ed=(e,t)=>Ae(e.getTransparentElements(),t),_d=(e,t)=>fe(t)&&Ed(e,t.nodeName),sr=(e,t)=>_d(e,t)&&Cd(t),yP=(e,t)=>_d(e,t)&&!Cd(t),Sd=(e,t)=>t.type===1&&Ed(e,t.name)&&G(t.attr(dl)),vP=xs().browser,jy=e=>vt(e,_n),CP=e=>vP.isFirefox()&&He(e)==="table"?jy(qt(e)).filter(t=>He(t)==="caption").bind(t=>jy(by(t)).map(n=>{const s=n.dom.offsetTop,o=t.dom.offsetTop,r=t.dom.offsetHeight;return s<=o?-r:0})).getOr(0):0,qy=(e,t)=>e.children&&Ze(e.children,t),EP=(e,t,n)=>{let s=0,o=0;const r=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&Ds(A.fromDom(e),"position")==="static"){const c=t.getBoundingClientRect();return s=c.left+(r.documentElement.scrollLeft||e.scrollLeft)-r.documentElement.clientLeft,o=c.top+(r.documentElement.scrollTop||e.scrollTop)-r.documentElement.clientTop,{x:s,y:o}}let i=t;for(;i&&i!==n&&i.nodeType&&!qy(i,n);){const c=i;s+=c.offsetLeft||0,o+=c.offsetTop||0,i=c.offsetParent}for(i=t.parentNode;i&&i!==n&&i.nodeType&&!qy(i,n);)s-=i.scrollLeft||0,o-=i.scrollTop||0,i=i.parentNode;o+=CP(A.fromDom(t))}return{x:s,y:o}},Ky=(e,t={})=>{let n=0;const s={},o=A.fromDom(e),r=bo(o),i=T=>{t.referrerPolicy=T},c=T=>{t.contentCssCors=T},l=T=>{At(rd(o),T)},d=T=>{const k=rd(o);ol(k,"#"+T).each(lt)},p=T=>ct(s,T).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0})),h=T=>new Promise((k,N)=>{let R;const H=X._addCacheSuffix(T),K=p(H);s[H]=K,K.count++;const ee=(ie,de)=>{U(ie,Cn),K.status=de,K.passed=[],K.failed=[],R&&(R.onload=null,R.onerror=null,R=null)},I=()=>ee(K.passed,2),D=()=>ee(K.failed,3);if(k&&K.passed.push(k),N&&K.failed.push(N),K.status===1)return;if(K.status===2){I();return}if(K.status===3){D();return}K.status=1;const F=A.fromTag("link",r.dom);Ys(F,{rel:"stylesheet",type:"text/css",id:K.id}),t.contentCssCors&&$t(F,"crossOrigin","anonymous"),t.referrerPolicy&&$t(F,"referrerpolicy",t.referrerPolicy),R=F.dom,R.onload=I,R.onerror=D,l(F),$t(F,"href",H)}),g=(T,k)=>{const N=p(T);s[T]=N,N.count++;const R=A.fromTag("style",r.dom);Ys(R,{rel:"stylesheet",type:"text/css",id:N.id}),R.dom.innerHTML=k,l(R)},v=T=>Promise.allSettled(Ue(T,N=>h(N).then(te(N)))).then(N=>{const R=po(N,H=>H.status==="fulfilled");return R.fail.length>0?Promise.reject(Ue(R.fail,H=>H.reason)):Ue(R.pass,H=>H.value)}),E=T=>{const k=X._addCacheSuffix(T);ct(s,k).each(N=>{--N.count===0&&(delete s[k],d(N.id))})};return{load:h,loadRawCss:g,loadAll:v,unload:E,unloadRawCss:T=>{ct(s,T).each(k=>{--k.count===0&&(delete s[T],d(k.id))})},unloadAll:T=>{U(T,k=>{E(k)})},_setReferrerPolicy:i,_setContentCssCors:c}},Gy=(()=>{const e=new WeakMap;return{forElement:(n,s)=>{const r=vo(n).dom;return b.from(e.get(r)).getOrThunk(()=>{const i=Ky(r,s);return e.set(r,i),i})}}})(),_P=e=>e.nodeName.toLowerCase()==="span",Yy=(e,t)=>j(e)&&(Fy(t,e)||t.isInline(e.nodeName.toLowerCase())),SP=(e,t,n)=>{const s=new Pt(e,t).prev(!1),o=new Pt(e,t).next(!1),r=qe(s)||Yy(s,n),i=qe(o)||Yy(o,n);return r&&i},Xy=e=>_P(e)&&e.getAttribute("data-mce-type")==="bookmark",wP=(e,t,n)=>q(e)&&e.data.length>0&&SP(e,t,n),AP=e=>fe(e)?e.childNodes.length>0:!1,TP=e=>pd(e)||_a(e),wd=(e,t,n,s)=>{var o;const r=s||t;if(fe(t)&&Xy(t))return t;const i=t.childNodes;for(let c=i.length-1;c>=0;c--)wd(e,i[c],n,r);if(fe(t)){const c=t.childNodes;c.length===1&&Xy(c[0])&&((o=t.parentNode)===null||o===void 0||o.insertBefore(c[0],t))}return!TP(t)&&!Fy(n,t)&&!AP(t)&&!wP(t,r,n)&&e.remove(t),t},NP=X.makeMap,ml=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pl=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,kP=/[<>&\"\']/g,xP=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,RP={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},or={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},OP={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},DP=e=>{const t=A.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e},Zy=(e,t)=>{const n={};if(e){const s=e.split(",");t=t||10;for(let o=0;o<s.length;o+=2){const r=String.fromCharCode(parseInt(s[o],t));if(!or[r]){const i="&"+s[o+1]+";";n[r]=i,n[i]=r}}return n}else return},Ad=Zy("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Qy=(e,t)=>e.replace(t?ml:pl,n=>or[n]||n),PP=e=>(""+e).replace(kP,t=>or[t]||t),Jy=(e,t)=>e.replace(t?ml:pl,n=>n.length>1?"&#"+((n.charCodeAt(0)-55296)*1024+(n.charCodeAt(1)-56320)+65536)+";":or[n]||"&#"+n.charCodeAt(0)+";"),Td=(e,t,n)=>{const s=n||Ad;return e.replace(t?ml:pl,o=>or[o]||s[o]||o)},rr={encodeRaw:Qy,encodeAllRaw:PP,encodeNumeric:Jy,encodeNamed:Td,getEncodeFunc:(e,t)=>{const n=Zy(t)||Ad,s=(i,c)=>i.replace(c?ml:pl,l=>or[l]!==void 0?or[l]:n[l]!==void 0?n[l]:l.length>1?"&#"+((l.charCodeAt(0)-55296)*1024+(l.charCodeAt(1)-56320)+65536)+";":"&#"+l.charCodeAt(0)+";"),o=(i,c)=>Td(i,c,n),r=NP(e.replace(/\+/g,","));return r.named&&r.numeric?s:r.named?t?o:Td:r.numeric?Jy:Qy},decode:e=>e.replace(xP,(t,n)=>n?(n.charAt(0).toLowerCase()==="x"?n=parseInt(n.substr(1),16):n=parseInt(n,10),n>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(n&1023))):RP[n]||String.fromCharCode(n)):OP[t]||Ad[t]||DP(t))},Ht=(e,t)=>(e=X.trim(e),e?e.split(t||" "):[]),ev=e=>new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$"),BP=e=>ye(e)&&e.source&&Object.prototype.toString.call(e)==="[object RegExp]",LP=e=>{const t=n=>Te(n)?Ue(n,t):BP(n)?new RegExp(n.source,n.flags):ye(n)?ia(n,t):n;return t(e)},IP=e=>{const t=/^(~)?(.+)$/;return sn(Ht(e,","),n=>{const s=t.exec(n);if(s){const r=s[1]==="~"?"span":"div",i=s[2];return[{cloneName:r,name:i}]}else return[]})},tv=e=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",...e!=="html4"?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate","itemprop","itemscope","itemtype"]:[],...e!=="html5-strict"?["xml:lang"]:[]]),nv=e=>{let t,n;t="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment",e!=="html4"&&(t+=" article aside details dialog figure main header footer hgroup section nav "+"a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),e!=="html5-strict"&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),t=[t,"center dir isindex noframes"].join(" "));const s=[t,n].join(" ");return{blockContent:t,phrasingContent:n,flowContent:s}},Nd=e=>{const{blockContent:t,phrasingContent:n,flowContent:s}=nv(e),o=r=>Object.freeze(r.split(" "));return Object.freeze({blockContent:o(t),phrasingContent:o(n),flowContent:o(s)})},$P={html4:Ns(()=>Nd("html4")),html5:Ns(()=>Nd("html5")),"html5-strict":Ns(()=>Nd("html5-strict"))},sv=(e,t)=>{const{blockContent:n,phrasingContent:s,flowContent:o}=$P[e]();return t==="blocks"?b.some(n):t==="phrasing"?b.some(s):t==="flow"?b.some(o):b.none()},MP=e=>{const t=tv(e),{phrasingContent:n,flowContent:s}=nv(e),o={},r=(l,d,p)=>{o[l]={attributes:Vf(d,te({})),attributesOrder:d,children:Vf(p,te({}))}},i=(l,d="",p="")=>{const h=Ht(p),g=Ht(l);let v=g.length;const E=[...t,...Ht(d)];for(;v--;)r(g[v],E.slice(),h)},c=(l,d)=>{const p=Ht(l),h=Ht(d);let g=p.length;for(;g--;){const v=o[p[g]];for(let E=0,C=h.length;E<C;E++)v.attributes[h[E]]={},v.attributesOrder.push(h[E])}};return e!=="html5-strict"&&(U(Ht("acronym applet basefont big font strike tt"),p=>{i(p,"",n)}),U(Ht("center dir isindex noframes"),p=>{i(p,"",s)})),i("html","manifest","head body"),i("head","","base command link meta noscript script style title"),i("title hr noscript br"),i("base","href target"),i("link","href rel media hreflang type sizes hreflang"),i("meta","name http-equiv content charset"),i("style","media type scoped"),i("script","src async defer type charset"),i("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",s),i("dd div","",s),i("address dt caption","",e==="html4"?n:s),i("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),i("blockquote","cite",s),i("ol","reversed start type","li"),i("ul","","li"),i("li","value",s),i("dl","","dt dd"),i("a","href target rel media hreflang type",e==="html4"?n:s),i("q","cite",n),i("ins del","cite datetime",s),i("img","src sizes srcset alt usemap ismap width height"),i("iframe","src name width height",s),i("embed","src type width height"),i("object","data type typemustmatch name usemap form width height",[s,"param"].join(" ")),i("param","name value"),i("map","name",[s,"area"].join(" ")),i("area","alt coords shape href target rel media hreflang type"),i("table","border","caption colgroup thead tfoot tbody tr"+(e==="html4"?" col":"")),i("colgroup","span","col"),i("col","span"),i("tbody thead tfoot","","tr"),i("tr","","td th"),i("td","colspan rowspan headers",s),i("th","colspan rowspan headers scope abbr",s),i("form","accept-charset action autocomplete enctype method name novalidate target",s),i("fieldset","disabled form name",[s,"legend"].join(" ")),i("label","form for",n),i("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),i("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value",e==="html4"?s:n),i("select","disabled form multiple name required size","option optgroup"),i("optgroup","disabled label","option"),i("option","disabled label selected value"),i("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),i("menu","type label",[s,"li"].join(" ")),i("noscript","",s),e!=="html4"&&(i("wbr"),i("ruby","",[n,"rt rp"].join(" ")),i("figcaption","",s),i("mark rt rp bdi","",n),i("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),i("canvas","width height",s),i("data","value",n),i("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[s,"track source"].join(" ")),i("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[s,"track source"].join(" ")),i("picture","","img source"),i("source","src srcset type media sizes"),i("track","kind src srclang label default"),i("datalist","",[n,"option"].join(" ")),i("article section nav aside main header footer","",s),i("hgroup","","h1 h2 h3 h4 h5 h6"),i("figure","",[s,"figcaption"].join(" ")),i("time","datetime",n),i("dialog","open",s),i("command","type label icon disabled checked radiogroup command"),i("output","for form name",n),i("progress","value max",n),i("meter","value min max low high optimum",n),i("details","open",[s,"summary"].join(" ")),i("keygen","autofocus challenge disabled form keytype name"),r("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),e!=="html5-strict"&&(c("script","language xml:space"),c("style","xml:space"),c("object","declare classid code codebase codetype archive standby align border hspace vspace"),c("embed","align name hspace vspace"),c("param","valuetype type"),c("a","charset name rev shape coords"),c("br","clear"),c("applet","codebase archive code object alt name width height align hspace vspace"),c("img","name longdesc align border hspace vspace"),c("iframe","longdesc frameborder marginwidth marginheight scrolling align"),c("font basefont","size color face"),c("input","usemap align"),c("select"),c("textarea"),c("h1 h2 h3 h4 h5 h6 div p legend caption","align"),c("ul","type compact"),c("li","type"),c("ol dl menu dir","compact"),c("pre","width xml:space"),c("hr","align noshade size width"),c("isindex","prompt"),c("table","summary width frame rules cellspacing cellpadding align bgcolor"),c("col","width align char charoff valign"),c("colgroup","width align char charoff valign"),c("thead","align char charoff valign"),c("tr","align char charoff valign bgcolor"),c("th","axis align char charoff valign nowrap bgcolor width height"),c("form","accept"),c("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),c("tfoot","align char charoff valign"),c("tbody","align char charoff valign"),c("area","nohref"),c("body","background bgcolor text link vlink alink")),e!=="html4"&&(c("input button select textarea","autofocus"),c("input textarea","placeholder"),c("a","download"),c("link script img","crossorigin"),c("img","loading"),c("iframe","sandbox seamless allow allowfullscreen loading referrerpolicy")),e!=="html4"&&U([o.video,o.audio],l=>{delete l.children.audio,delete l.children.video}),U(Ht("a form meter progress dfn"),l=>{o[l]&&delete o[l].children[l]}),delete o.caption.children.table,delete o.script,o},FP=e=>e==="-"?"remove":"add",kd=e=>{const t=/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/;return b.from(t.exec(e)).map(n=>({preset:n[1]==="@",name:n[2]}))},UP=e=>{const t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return sn(Ht(e,","),n=>{const s=t.exec(n);if(s){const o=s[1],r=o?FP(o):"replace",i=s[2],c=sn(Ht(s[3],"|"),l=>kd(l).toArray());return[{operation:r,name:i,validChildren:c}]}else return[]})},HP=(e,t)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,s=/[*?+]/,{attributes:o,attributesOrder:r}=t;return U(Ht(e,"|"),i=>{const c=n.exec(i);if(c){const l={},d=c[1],p=c[2].replace(/[\\:]:/g,":"),h=c[3],g=c[4];if(d==="!"&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(p),l.required=!0),d==="-"){delete o[p],r.splice(X.inArray(r,p),1);return}if(h&&(h==="="?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:p,value:g}),l.defaultValue=g):h==="~"?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:p,value:g}),l.forcedValue=g):h==="<"&&(l.validValues=X.makeMap(g,"?"))),s.test(p)){const v=l;t.attributePatterns=t.attributePatterns||[],v.pattern=ev(p),t.attributePatterns.push(v)}else o[p]||r.push(p),o[p]=l}})},zP=(e,t)=>{ot(e.attributes,(n,s)=>{t.attributes[s]=n}),t.attributesOrder.push(...e.attributesOrder)},VP=(e,t)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return sn(Ht(t,","),s=>{const o=n.exec(s);if(o){const r=o[1],i=o[2],c=o[3],l=o[4],d=o[5],p={attributes:{},attributesOrder:[]};if(e.each(h=>zP(h,p)),r==="#"?p.paddEmpty=!0:r==="-"&&(p.removeEmpty=!0),l==="!"&&(p.removeEmptyAttrs=!0),d&&HP(d,p),c&&(p.outputName=i),i==="@")if(e.isNone())e=b.some(p);else return[];return[c?{name:i,element:p,aliasName:c}:{name:i,element:p}]}else return[]})},hl={},Sa=X.makeMap,ps=X.each,ov=X.extend,rv=X.explode,iv=(e,t={})=>{const n=Sa(e," ",Sa(e.toUpperCase()," "));return ov(n,t)},av=e=>iv("td th li dt dd figcaption caption details summary",e.getTextBlockElements()),xd=(e,t)=>{if(e){const n={};return G(e)&&(e={"*":e}),ps(e,(s,o)=>{n[o]=n[o.toUpperCase()]=t==="map"?Sa(s,/[, ]/):rv(s,/[, ]/)}),n}else return},_o=(e={})=>{var t;const n={},s={};let o=[];const r={},i={},c=(me,Ie,it)=>{const mt=e[me];if(mt)return Sa(mt,/[, ]/,Sa(mt.toUpperCase(),/[, ]/));{let Ct=hl[me];return Ct||(Ct=iv(Ie,it),hl[me]=Ct),Ct}},l=(t=e.schema)!==null&&t!==void 0?t:"html5",d=MP(l);e.verify_html===!1&&(e.valid_elements="*[*]");const p=xd(e.valid_styles),h=xd(e.invalid_styles,"map"),g=xd(e.valid_classes,"map"),v=c("whitespace_elements","pre script noscript style textarea video audio iframe object code"),E=c("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=c("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),S=c("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),T="td th iframe video audio object script code",k=c("non_empty_elements",T+" pre svg textarea summary",C),N=c("move_caret_before_on_enter_elements",T+" table",C),R="h1 h2 h3 h4 h5 h6",H=c("text_block_elements",R+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),K=c("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",H),ee=c("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),I=c("transparent_elements","a ins del canvas map"),D=c("wrap_block_elements","pre "+R);ps("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),me=>{i[me]=new RegExp("</"+me+"[^>]*>","gi")});const F=me=>{const Ie=b.from(n["@"]),it=/[*?+]/;U(VP(Ie,me??""),({name:mt,element:Ct,aliasName:Dt})=>{if(Dt&&(n[Dt]=Ct),it.test(mt)){const bt=Ct;bt.pattern=ev(mt),o.push(bt)}else n[mt]=Ct})},ie=me=>{o=[],U(un(n),Ie=>{delete n[Ie]}),F(me)},de=(me,Ie)=>{var it,mt;delete hl.text_block_elements,delete hl.block_elements;const Ct=Ie.extends?!pn(Ie.extends):!1,Dt=Ie.extends;if(s[me]=Dt?s[Dt]:{},r[me]=Dt??me,k[me.toUpperCase()]={},k[me]={},Ct||(K[me.toUpperCase()]={},K[me]={}),Dt&&!n[me]&&n[Dt]){const bt=LP(n[Dt]);delete bt.removeEmptyAttrs,delete bt.removeEmpty,n[me]=bt}else n[me]={attributesOrder:[],attributes:{}};if(Te(Ie.attributes)){const bt=Qt=>{yt.attributesOrder.push(Qt),yt.attributes[Qt]={}},yt=(it=n[me])!==null&&it!==void 0?it:{};delete yt.attributesDefault,delete yt.attributesForced,delete yt.attributePatterns,delete yt.attributesRequired,yt.attributesOrder=[],yt.attributes={},U(Ie.attributes,Qt=>{const Jn=tv(l);kd(Qt).each(({preset:es,name:ts})=>{es?ts==="global"&&U(Jn,bt):bt(ts)})}),n[me]=yt}if(nt(Ie.padEmpty)){const bt=(mt=n[me])!==null&&mt!==void 0?mt:{};bt.paddEmpty=Ie.padEmpty,n[me]=bt}if(Te(Ie.children)){const bt={},yt=Jn=>{bt[Jn]={}},Qt=Jn=>{sv(l,Jn).each(es=>{U(es,yt)})};U(Ie.children,Jn=>{kd(Jn).each(({preset:es,name:ts})=>{es?Qt(ts):yt(ts)})}),s[me]=bt}Dt&&ot(s,(bt,yt)=>{bt[Dt]&&(s[yt]=bt=ov({},s[yt]),bt[me]=bt[Dt])})},Ne=me=>{U(IP(me??""),({name:Ie,cloneName:it})=>{de(Ie,{extends:it})})},Re=me=>{ye(me)?ot(me,(Ie,it)=>de(it,Ie)):G(me)&&Ne(me)},ze=me=>{U(UP(me??""),({operation:Ie,name:it,validChildren:mt})=>{const Ct=Ie==="replace"?{"#comment":{}}:s[it],Dt=yt=>{Ie==="remove"?delete Ct[yt]:Ct[yt]={}},bt=yt=>{sv(l,yt).each(Qt=>{U(Qt,Dt)})};U(mt,({preset:yt,name:Qt})=>{yt?bt(Qt):Dt(Qt)}),s[it]=Ct})},Ge=me=>{const Ie=n[me];if(Ie)return Ie;let it=o.length;for(;it--;){const mt=o[it];if(mt.pattern.test(me))return mt}},ft=()=>{e.valid_elements?(ie(e.valid_elements),ps(d,(me,Ie)=>{s[Ie]=me.children})):(ps(d,(me,Ie)=>{n[Ie]={attributes:me.attributes,attributesOrder:me.attributesOrder},s[Ie]=me.children}),ps(Ht("strong/b em/i"),me=>{const Ie=Ht(me,"/");n[Ie[1]].outputName=Ie[0]}),ps(ee,(me,Ie)=>{n[Ie]&&(e.padd_empty_block_inline_children&&(n[Ie].paddInEmptyBlock=!0),n[Ie].removeEmpty=!0)}),ps(Ht("ol ul blockquote a table tbody"),me=>{n[me]&&(n[me].removeEmpty=!0)}),ps(Ht("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),me=>{n[me]&&(n[me].paddEmpty=!0)}),ps(Ht("span"),me=>{n[me].removeEmptyAttrs=!0})),delete n.svg,Re(e.custom_elements),ze(e.valid_children),F(e.extended_valid_elements),ze("+ol[ul|ol],+ul[ul|ol]"),ps({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(me,Ie)=>{n[Ie]&&(n[Ie].parentsRequired=Ht(me))}),e.invalid_elements&&ps(rv(e.invalid_elements),me=>{n[me]&&delete n[me]}),Ge("span")||F("span[!data-mce-type|*]")},It=te(p),et=te(h),Z=te(g),ue=te(S),Me=te(K),Q=te(H),pe=te(ee),xe=te(Object.seal(C)),J=te(E),ke=te(k),Oe=te(N),wt=te(v),Ke=te(I),Et=te(D),Fn=te(Object.seal(i)),_s=(me,Ie)=>{const it=s[me.toLowerCase()];return!!(it&&it[Ie.toLowerCase()])},Zt=(me,Ie)=>{const it=Ge(me);if(it)if(Ie){if(it.attributes[Ie])return!0;const mt=it.attributePatterns;if(mt){let Ct=mt.length;for(;Ct--;)if(mt[Ct].pattern.test(Ie))return!0}}else return!0;return!1},pn=me=>Ae(Me(),me),Un=me=>!kt(me,"#")&&Zt(me)&&!pn(me),hn=me=>Ae(Et(),me)||Un(me),Hn=te(r);return ft(),{type:l,children:s,elements:n,getValidStyles:It,getValidClasses:Z,getBlockElements:Me,getInvalidStyles:et,getVoidElements:xe,getTextBlockElements:Q,getTextInlineElements:pe,getBoolAttrs:ue,getElementRule:Ge,getSelfClosingElements:J,getNonEmptyElements:ke,getMoveCaretBeforeOnEnterElements:Oe,getWhitespaceElements:wt,getTransparentElements:Ke,getSpecialElements:Fn,isValidChild:_s,isValid:Zt,isBlock:pn,isInline:Un,isWrapper:hn,getCustomElements:Hn,addValidElements:F,setValidElements:ie,addCustomElements:Re,addValidChildren:ze}},WP=e=>({value:jP(e)}),jP=e=>Ob(e,"#").toUpperCase(),Rd=e=>{const t=e.toString(16);return(t.length===1?"0"+t:t).toUpperCase()},qP=e=>{const t=Rd(e.red)+Rd(e.green)+Rd(e.blue);return WP(t)},cv=/^\s*rgb\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*\)\s*$/i,lv=/^\s*rgba\s*\(\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*(\d+)\s*[,\s]\s*((?:\d?\.\d+|\d+)%?)\s*\)\s*$/i,KP=(e,t,n,s)=>({red:e,green:t,blue:n,alpha:s}),uv=(e,t,n,s)=>{const o=parseInt(e,10),r=parseInt(t,10),i=parseInt(n,10),c=parseFloat(s);return KP(o,r,i,c)},GP=e=>cv.test(e)?"rgb":lv.test(e)?"rgba":"other",fv=e=>{const t=cv.exec(e);if(t!==null)return b.some(uv(t[1],t[2],t[3],"1"));const n=lv.exec(e);return n!==null?b.some(uv(n[1],n[2],n[3],n[4])):b.none()},YP=e=>`rgba(${e.red},${e.green},${e.blue},${e.alpha})`,wa=e=>fv(e).map(qP).map(t=>"#"+t.value).getOr(e),Od=(e={},t)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,s=/\s*([^:]+):\s*([^;]+);?/g,o=/\s+$/,r={};let i,c;const l=Ca;t&&(i=t.getValidStyles(),c=t.getInvalidStyles());const d=(`\\" \\' \\; \\: ; : `+l).split(" ");for(let h=0;h<d.length;h++)r[d[h]]=l+h,r[l+h]=d[h];const p={parse:h=>{const g={};let v=!1;const E=e.url_converter,C=e.url_converter_scope||p,S=(I,D,F)=>{const ie=g[I+"-top"+D];if(!ie)return;const de=g[I+"-right"+D];if(!de)return;const Ne=g[I+"-bottom"+D];if(!Ne)return;const Re=g[I+"-left"+D];if(!Re)return;const ze=[ie,de,Ne,Re];let Ge=ze.length-1;for(;Ge--&&ze[Ge]===ze[Ge+1];);Ge>-1&&F||(g[I+D]=Ge===-1?ze[0]:ze.join(" "),delete g[I+"-top"+D],delete g[I+"-right"+D],delete g[I+"-bottom"+D],delete g[I+"-left"+D])},T=I=>{const D=g[I];if(!D)return;const F=D.indexOf(",")>-1?[D]:D.split(" ");let ie=F.length;for(;ie--;)if(F[ie]!==F[0])return!1;return g[I]=F[0],!0},k=(I,D,F,ie)=>{T(D)&&T(F)&&T(ie)&&(g[I]=g[D]+" "+g[F]+" "+g[ie],delete g[D],delete g[F],delete g[ie])},N=I=>(v=!0,r[I]),R=(I,D)=>(v&&(I=I.replace(/\uFEFF[0-9]/g,F=>r[F])),D||(I=I.replace(/\\([\'\";:])/g,"$1")),I),H=I=>String.fromCharCode(parseInt(I.slice(1),16)),K=I=>I.replace(/\\[0-9a-f]+/gi,H),ee=(I,D,F,ie,de,Ne)=>{if(de=de||Ne,de)return de=R(de),"'"+de.replace(/\'/g,"\\'")+"'";if(D=R(D||F||ie||""),!e.allow_script_urls){const Re=D.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Re)||!e.allow_svg_data_urls&&/^data:image\/svg/i.test(Re))return""}return E&&(D=E.call(C,D,"style")),"url('"+D.replace(/\'/g,"\\'")+"')"};if(h){h=h.replace(/[\u0000-\u001F]/g,""),h=h.replace(/\\[\"\';:\uFEFF]/g,N).replace(/\"[^\"]+\"|\'[^\']+\'/g,D=>D.replace(/[;:]/g,N));let I;for(;I=s.exec(h);){s.lastIndex=I.index+I[0].length;let D=I[1].replace(o,"").toLowerCase(),F=I[2].replace(o,"");if(D&&F){if(D=K(D),F=K(F),D.indexOf(l)!==-1||D.indexOf('"')!==-1||!e.allow_script_urls&&(D==="behavior"||/expression\s*\(|\/\*|\*\//.test(F)))continue;D==="font-weight"&&F==="700"?F="bold":(D==="color"||D==="background-color")&&(F=F.toLowerCase()),GP(F)==="rgb"&&fv(F).each(ie=>{F=wa(YP(ie)).toLowerCase()}),F=F.replace(n,ee),g[D]=v?R(F,!0):F}}S("border","",!0),S("border","-width"),S("border","-color"),S("border","-style"),S("padding",""),S("margin",""),k("border","border-width","border-style","border-color"),g.border==="medium none"&&delete g.border,g["border-image"]==="none"&&delete g["border-image"]}return g},serialize:(h,g)=>{let v="";const E=(S,T)=>{const k=T[S];if(k)for(let N=0,R=k.length;N<R;N++){const H=k[N],K=h[H];K&&(v+=(v.length>0?" ":"")+H+": "+K+";")}},C=(S,T)=>{if(!c||!T)return!0;let k=c["*"];return k&&k[S]?!1:(k=c[T],!(k&&k[S]))};return g&&i?(E("*",i),E(g,i)):ot(h,(S,T)=>{S&&C(T,g)&&(v+=(v.length>0?" ":"")+T+": "+S+";")}),v}};return p},XP={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},ZP=e=>e instanceof Event||$e(e.initEvent),QP=e=>e.isDefaultPrevented===dt||e.isDefaultPrevented===tt,JP=e=>Fe(e.preventDefault)||ZP(e),dv=(e,t)=>{const n=t??{};for(const s in e)Ae(XP,s)||(n[s]=e[s]);return j(e.composedPath)&&(n.composedPath=()=>e.composedPath()),j(e.getModifierState)&&(n.getModifierState=s=>e.getModifierState(s)),j(e.getTargetRanges)&&(n.getTargetRanges=()=>e.getTargetRanges()),n},Dd=(e,t,n,s)=>{var o;const r=dv(t,s);return r.type=e,Fe(r.target)&&(r.target=(o=r.srcElement)!==null&&o!==void 0?o:n),JP(t)&&(r.preventDefault=()=>{r.defaultPrevented=!0,r.isDefaultPrevented=dt,$e(t.preventDefault)&&t.preventDefault()},r.stopPropagation=()=>{r.cancelBubble=!0,r.isPropagationStopped=dt,$e(t.stopPropagation)&&t.stopPropagation()},r.stopImmediatePropagation=()=>{r.isImmediatePropagationStopped=dt,r.stopPropagation()},QP(r)||(r.isDefaultPrevented=r.defaultPrevented===!0?dt:tt,r.isPropagationStopped=r.cancelBubble===!0?dt:tt,r.isImmediatePropagationStopped=tt)),r},e1="mce-data-",t1=/^(?:mouse|contextmenu)|click/,Pd=(e,t,n,s)=>{e.addEventListener(t,n,s||!1)},gl=(e,t,n,s)=>{e.removeEventListener(t,n,s||!1)},n1=e=>j(e)&&t1.test(e.type),Aa=(e,t)=>{const n=Dd(e.type,e,document,t);if(n1(e)&&qe(e.pageX)&&!qe(e.clientX)){const s=n.target.ownerDocument||document,o=s.documentElement,r=s.body,i=n;i.pageX=e.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),i.pageY=e.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)}return n},s1=(e,t,n)=>{const s=e.document,o={type:"ready"};if(n.domLoaded){t(o);return}const r=()=>s.readyState==="complete"||s.readyState==="interactive"&&s.body,i=()=>{gl(e,"DOMContentLoaded",i),gl(e,"load",i),n.domLoaded||(n.domLoaded=!0,t(o)),e=null};r()?i():Pd(e,"DOMContentLoaded",i),n.domLoaded||Pd(e,"load",i)};class ir{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando=e1+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,n,s,o){const r=this;let i;const c=window,l=g=>{r.executeHandlers(Aa(g||c.event),d)};if(!t||q(t)||Eo(t))return s;let d;t[r.expando]?d=t[r.expando]:(d=r.count++,t[r.expando]=d,r.events[d]={}),o=o||t;const p=n.split(" ");let h=p.length;for(;h--;){let g=p[h],v=l,E=!1,C=!1;if(g==="DOMContentLoaded"&&(g="ready"),r.domLoaded&&g==="ready"&&t.readyState==="complete"){s.call(o,Aa({type:g}));continue}!r.hasFocusIn&&(g==="focusin"||g==="focusout")&&(E=!0,C=g==="focusin"?"focus":"blur",v=S=>{const T=Aa(S||c.event);T.type=T.type==="focus"?"focusin":"focusout",r.executeHandlers(T,d)}),i=r.events[d][g],i?g==="ready"&&r.domLoaded?s(Aa({type:g})):i.push({func:s,scope:o}):(r.events[d][g]=i=[{func:s,scope:o}],i.fakeName=C,i.capture=E,i.nativeHandler=v,g==="ready"?s1(t,v,r):Pd(t,C||g,v,E))}return t=i=null,s}unbind(t,n,s){if(!t||q(t)||Eo(t))return this;const o=t[this.expando];if(o){let r=this.events[o];if(n){const i=n.split(" ");let c=i.length;for(;c--;){const l=i[c],d=r[l];if(d){if(s){let p=d.length;for(;p--;)if(d[p].func===s){const h=d.nativeHandler,g=d.fakeName,v=d.capture,E=d.slice(0,p).concat(d.slice(p+1));E.nativeHandler=h,E.fakeName=g,E.capture=v,r[l]=E}}(!s||d.length===0)&&(delete r[l],gl(t,d.fakeName||l,d.nativeHandler,d.capture))}}}else ot(r,(i,c)=>{gl(t,i.fakeName||c,i.nativeHandler,i.capture)}),r={};for(const i in r)if(Ae(r,i))return this;delete this.events[o];try{delete t[this.expando]}catch{t[this.expando]=null}}return this}fire(t,n,s){return this.dispatch(t,n,s)}dispatch(t,n,s){if(!t||q(t)||Eo(t))return this;const o=Aa({type:n,target:t},s);do{const r=t[this.expando];r&&this.executeHandlers(o,r),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!o.isPropagationStopped());return this}clean(t){if(!t||q(t)||Eo(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const n=t.getElementsByTagName("*");let s=n.length;for(;s--;)t=n[s],t[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,n){const s=this.events[n],o=s&&s[t.type];if(o)for(let r=0,i=o.length;r<i;r++){const c=o[r];if(c&&c.func.call(c.scope,t)===!1&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}ir.Event=new ir;const Bd=X.each,o1=X.grep,Ld="data-mce-style",r1=X.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Ta=(e,t,n)=>{Fe(n)||n===""?Mt(e,t):$t(e,t,n)},mv=e=>e.replace(/[A-Z]/g,t=>"-"+t.toLowerCase()),ei=(e,t)=>{let n=0;if(e)for(let s=e.nodeType,o=e.previousSibling;o;o=o.previousSibling){const r=o.nodeType;t&&q(o)&&(r===s||!o.data.length)||(n++,s=r)}return n},pv=(e,t)=>{const n=Sn(t,"style"),s=e.serialize(e.parse(n),He(t));Ta(t,Ld,s)},i1=(e,t)=>pt(e)?Ae(r1,t)?e+"":e+"px":e,hv=(e,t,n)=>{const s=mv(t);Fe(n)||n===""?Sy(e,s):Ey(e,s,i1(n,s))},a1=(e,t,n)=>{const s=t.keep_values,o={set:(i,c,l)=>{const d=A.fromDom(i);$e(t.url_converter)&&j(c)&&(c=t.url_converter.call(t.url_converter_scope||n(),String(c),l,i));const p="data-mce-"+l;Ta(d,p,c),Ta(d,l,c)},get:(i,c)=>{const l=A.fromDom(i);return Sn(l,"data-mce-"+c)||Sn(l,c)}},r={style:{set:(i,c)=>{const l=A.fromDom(i);s&&Ta(l,Ld,c),Mt(l,"style"),G(c)&&rl(l,e.parse(c))},get:i=>{const c=A.fromDom(i),l=Sn(c,Ld)||Sn(c,"style");return e.serialize(e.parse(l),He(c))}}};return s&&(r.href=r.src=o),r},st=(e,t={})=>{const n={},s=window,o={};let r=0;const i=!0,c=!0,l=Gy.forElement(A.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),d=[],p=t.schema?t.schema:_o({}),h=Od({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),g=t.ownEvents?new ir:ir.Event,v=p.getBlockElements(),E=O=>G(O)?Ae(v,O):fe(O)&&(Ae(v,O.nodeName)||sr(p,O)),C=O=>O&&e&&G(O)?e.getElementById(O):O,S=O=>{const P=C(O);return j(P)?A.fromDom(P):null},T=(O,P,Y="")=>{let W;const be=S(O);if(j(be)&&_n(be)){const Pe=Rc[P];Pe&&Pe.get?W=Pe.get(be.dom,P):W=Sn(be,P)}return j(W)?W:Y},k=O=>{const P=C(O);return Fe(P)?[]:P.attributes},N=(O,P,Y)=>{ue(O,W=>{if(fe(W)){const be=A.fromDom(W),Pe=Y===""?null:Y,at=Sn(be,P),ns=Rc[P];ns&&ns.set?ns.set(be.dom,Pe,P):Ta(be,P,Pe),at!==Pe&&t.onSetAttrib&&t.onSetAttrib({attrElm:be.dom,attrName:P,attrValue:Pe})}})},R=(O,P)=>O.cloneNode(P),H=()=>t.root_element||e.body,K=O=>{const P=Ry(O);return{x:P.x,y:P.y,w:P.width,h:P.height}},ee=(O,P)=>EP(e.body,C(O),P),I=(O,P,Y)=>{ue(O,W=>{const be=A.fromDom(W);hv(be,P,Y),t.update_styles&&pv(h,be)})},D=(O,P)=>{ue(O,Y=>{const W=A.fromDom(Y);ot(P,(be,Pe)=>{hv(W,Pe,be)}),t.update_styles&&pv(h,W)})},F=(O,P,Y)=>{const W=C(O);if(!(Fe(W)||!Js(W)&&!KD(W)))return Y?Ds(A.fromDom(W),mv(P)):(P=P.replace(/-(\D)/g,(be,Pe)=>Pe.toUpperCase()),P==="float"&&(P="cssFloat"),W.style?W.style[P]:void 0)},ie=O=>{const P=C(O);if(!P)return{w:0,h:0};let Y=F(P,"width"),W=F(P,"height");return(!Y||Y.indexOf("px")===-1)&&(Y="0"),(!W||W.indexOf("px")===-1)&&(W="0"),{w:parseInt(Y,10)||P.offsetWidth||P.clientWidth,h:parseInt(W,10)||P.offsetHeight||P.clientHeight}},de=O=>{const P=C(O),Y=ee(P),W=ie(P);return{x:Y.x,y:Y.y,w:W.w,h:W.h}},Ne=(O,P)=>{if(!O)return!1;const Y=Te(O)?O:[O];return ut(Y,W=>us(A.fromDom(W),P))},Re=(O,P,Y,W)=>{const be=[];let Pe=C(O);W=W===void 0;const at=Y||(H().nodeName!=="BODY"?H().parentNode:null);if(G(P))if(P==="*")P=fe;else{const ns=P;P=lf=>Ne(lf,ns)}for(;Pe&&!(Pe===at||Fe(Pe.nodeType)||_a(Pe)||pd(Pe));){if(!P||P(Pe))if(W)be.push(Pe);else return[Pe];Pe=Pe.parentNode}return W?be:null},ze=(O,P,Y)=>{const W=Re(O,P,Y,!1);return W&&W.length>0?W[0]:null},Ge=(O,P,Y)=>{let W=P;if(O){G(P)&&(W=be=>Ne(be,P));for(let be=O[Y];be;be=be[Y])if($e(W)&&W(be))return be}return null},ft=(O,P)=>Ge(O,P,"nextSibling"),It=(O,P)=>Ge(O,P,"previousSibling"),et=O=>$e(O.querySelectorAll),Z=(O,P)=>{var Y,W;const be=(W=(Y=C(P))!==null&&Y!==void 0?Y:t.root_element)!==null&&W!==void 0?W:e;return et(be)?En(be.querySelectorAll(O)):[]},ue=function(O,P,Y){const W=Y??this;if(Te(O)){const be=[];return Bd(O,(Pe,at)=>{const ns=C(Pe);ns&&be.push(P.call(W,ns,at))}),be}else{const be=C(O);return be?P.call(W,be):!1}},Me=(O,P)=>{ue(O,Y=>{ot(P,(W,be)=>{N(Y,be,W)})})},Q=(O,P)=>{ue(O,Y=>{const W=A.fromDom(Y);al(W,P)})},pe=(O,P,Y,W,be)=>ue(O,Pe=>{const at=G(P)?e.createElement(P):P;return j(Y)&&Me(at,Y),W&&(!G(W)&&W.nodeType?at.appendChild(W):G(W)&&Q(at,W)),be?at:Pe.appendChild(at)}),xe=(O,P,Y)=>pe(e.createElement(O),O,P,Y,!0),J=rr.decode,ke=rr.encodeAllRaw,Oe=(O,P,Y="")=>{let W="<"+O;for(const be in P)Vr(P,be)&&(W+=" "+be+'="'+ke(P[be])+'"');return ua(Y)&&Ae(p.getVoidElements(),O)?W+" />":W+">"+Y+"</"+O+">"},wt=O=>{const P=e.createElement("div"),Y=e.createDocumentFragment();Y.appendChild(P),O&&(P.innerHTML=O);let W;for(;W=P.firstChild;)Y.appendChild(W);return Y.removeChild(P),Y},Ke=(O,P)=>ue(O,Y=>{const W=A.fromDom(Y);return P&&U(qt(W),be=>{rn(be)&&be.dom.length===0?lt(be):fn(W,be)}),lt(W),W.dom}),Et=O=>ue(O,P=>{const Y=P.attributes;for(let W=Y.length-1;W>=0;W--)P.removeAttributeNode(Y.item(W))}),Fn=O=>h.parse(O),_s=(O,P)=>h.serialize(O,P),Zt=O=>{if(Ws!==st.DOM&&e===document){if(n[O])return;n[O]=!0}let P=e.getElementById("mceDefaultStyles");if(!P){P=e.createElement("style"),P.id="mceDefaultStyles",P.type="text/css";const Y=e.head;Y.firstChild?Y.insertBefore(P,Y.firstChild):Y.appendChild(P)}P.styleSheet?P.styleSheet.cssText+=O:P.appendChild(e.createTextNode(O))},pn=O=>{O||(O=""),U(O.split(","),P=>{o[P]=!0,l.load(P).catch(Se)})},Un=(O,P,Y)=>{ue(O,W=>{if(fe(W)){const be=A.fromDom(W),Pe=P.split(" ");U(Pe,at=>{j(Y)?(Y?Kr:pa)(be,at):lD(be,at)})}})},hn=(O,P)=>{Un(O,P,!0)},Hn=(O,P)=>{Un(O,P,!1)},me=(O,P)=>{const Y=S(O),W=P.split(" ");return j(Y)&&Gn(W,be=>ed(Y,be))},Ie=O=>{ue(O,P=>Sy(A.fromDom(P),"display"))},it=O=>{ue(O,P=>Ey(A.fromDom(P),"display","none"))},mt=O=>{const P=S(O);return j(P)&&jr(il(P,"display"),"none")},Ct=O=>(O||"mce_")+r++,Dt=O=>{const P=S(O);return j(P)?fe(P.dom)?P.dom.outerHTML:RD(P):""},bt=(O,P)=>{ue(O,Y=>{fe(Y)&&(Y.outerHTML=P)})},yt=(O,P)=>{const Y=C(P);return ue(O,W=>{const be=Y==null?void 0:Y.parentNode,Pe=Y==null?void 0:Y.nextSibling;return be&&(Pe?be.insertBefore(W,Pe):be.appendChild(W)),W})},Qt=(O,P,Y)=>ue(P,W=>{var be;const Pe=Te(P)?O.cloneNode(!0):O;return Y&&Bd(o1(W.childNodes),at=>{Pe.appendChild(at)}),(be=W.parentNode)===null||be===void 0||be.replaceChild(Pe,W),W}),Jn=(O,P)=>{if(O.nodeName!==P.toUpperCase()){const Y=xe(P);return Bd(k(O),W=>{N(Y,W.nodeName,T(O,W.nodeName))}),Qt(Y,O,!0),Y}else return O},es=(O,P)=>{let Y=O;for(;Y;){let W=P;for(;W&&Y!==W;)W=W.parentNode;if(Y===W)break;Y=Y.parentNode}return!Y&&O.ownerDocument?O.ownerDocument.documentElement:Y},ts=(O,P,Y)=>je(P)?eo(p,O,{...Y,isContent:be=>{const Pe=be.nodeName.toLowerCase();return!!P[Pe]}}):eo(p,O,Y),zn=()=>e.createRange(),Io=(O,P,Y)=>{let W=zn(),be,Pe;if(O&&P&&O.parentNode&&P.parentNode){const at=O.parentNode;return W.setStart(at,ei(O)),W.setEnd(P.parentNode,ei(P)),be=W.extractContents(),W=zn(),W.setStart(P.parentNode,ei(P)+1),W.setEnd(at,ei(O)+1),Pe=W.extractContents(),at.insertBefore(wd(Ws,be,p),O),Y?at.insertBefore(Y,O):at.insertBefore(P,O),at.insertBefore(wd(Ws,Pe,p),O),Ke(O),Y||P}else return},Bi=(O,P,Y,W)=>{if(Te(O)){let be=O.length;const Pe=[];for(;be--;)Pe[be]=Bi(O[be],P,Y,W);return Pe}else return t.collect&&(O===e||O===s)&&d.push([O,P,Y,W]),g.bind(O,P,Y,W||Ws)},Li=(O,P,Y)=>{if(Te(O)){let W=O.length;const be=[];for(;W--;)be[W]=Li(O[W],P,Y);return be}else{if(d.length>0&&(O===e||O===s)){let W=d.length;for(;W--;){const[be,Pe,at]=d[W];O===be&&(!P||P===Pe)&&(!Y||Y===at)&&g.unbind(be,Pe,at)}}return g.unbind(O,P,Y)}},bg=(O,P,Y)=>g.dispatch(O,P,Y),ao=(O,P,Y)=>g.dispatch(O,P,Y),cf=O=>{if(O&&Js(O)){const P=O.getAttribute("data-mce-contenteditable");return P&&P!=="inherit"?P:O.contentEditable!=="inherit"?O.contentEditable:null}else return null},Ws={doc:e,settings:t,win:s,files:o,stdMode:i,boxModel:c,styleSheetLoader:l,boundEvents:d,styles:h,schema:p,events:g,isBlock:E,root:null,clone:R,getRoot:H,getViewPort:K,getRect:de,getSize:ie,getParent:ze,getParents:Re,get:C,getNext:ft,getPrev:It,select:Z,is:Ne,add:pe,create:xe,createHTML:Oe,createFragment:wt,remove:Ke,setStyle:I,getStyle:F,setStyles:D,removeAllAttribs:Et,setAttrib:N,setAttribs:Me,getAttrib:T,getPos:ee,parseStyle:Fn,serializeStyle:_s,addStyle:Zt,loadCSS:pn,addClass:hn,removeClass:Hn,hasClass:me,toggleClass:Un,show:Ie,hide:it,isHidden:mt,uniqueId:Ct,setHTML:Q,getOuterHTML:Dt,setOuterHTML:bt,decode:J,encode:ke,insertAfter:yt,replace:Qt,rename:Jn,findCommonAncestor:es,run:ue,getAttribs:k,isEmpty:ts,createRng:zn,nodeIndex:ei,split:Io,bind:Bi,unbind:Li,fire:ao,dispatch:bg,getContentEditable:cf,getContentEditableParent:O=>{const P=H();let Y=null;for(let W=O;W&&W!==P&&(Y=cf(W),Y===null);W=W.parentNode);return Y},isEditable:O=>{if(j(O)){const P=fe(O)?O:O.parentElement;return j(P)&&Js(P)&&Qo(A.fromDom(P))}else return!1},destroy:()=>{if(d.length>0){let O=d.length;for(;O--;){const[P,Y,W]=d[O];g.unbind(P,Y,W)}}ot(o,(O,P)=>{l.unload(P),delete o[P]})},isChildOf:(O,P)=>O===P||P.contains(O),dumpRng:O=>"startContainer: "+O.startContainer.nodeName+", startOffset: "+O.startOffset+", endContainer: "+O.endContainer.nodeName+", endOffset: "+O.endOffset},Rc=a1(h,t,te(Ws));return Ws};st.DOM=st(document),st.nodeIndex=ei;const c1=st.DOM,l1=0,u1=1,bl=2,gv=3;class no{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise((n,s)=>{const o=c1;let r;const i=()=>{o.remove(d),r&&(r.onerror=r.onload=r=null)},c=()=>{i(),n()},l=()=>{i(),s("Failed to load script: "+t)},d=o.uniqueId();r=document.createElement("script"),r.id=d,r.type="text/javascript",r.src=X._addCacheSuffix(t),this.settings.referrerPolicy&&o.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=c,r.onerror=l,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)})}isDone(t){return this.states[t]===bl}markDone(t){this.states[t]=bl}add(t){const n=this;return n.queue.push(t),n.states[t]===void 0&&(n.states[t]=l1),new Promise((o,r)=>{n.scriptLoadedCallbacks[t]||(n.scriptLoadedCallbacks[t]=[]),n.scriptLoadedCallbacks[t].push({resolve:o,reject:r})})}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const n=this,s=(l,d)=>{ct(n.scriptLoadedCallbacks,d).each(p=>{U(p,h=>h[l](d))}),delete n.scriptLoadedCallbacks[d]},o=l=>{const d=ve(l,p=>p.status==="rejected");return d.length>0?Promise.reject(sn(d,({reason:p})=>Te(p)?p:[p])):Promise.resolve()},r=l=>Promise.allSettled(Ue(l,d=>n.states[d]===bl?(s("resolve",d),Promise.resolve()):n.states[d]===gv?(s("reject",d),Promise.reject(d)):(n.states[d]=u1,n.loadScript(d).then(()=>{n.states[d]=bl,s("resolve",d);const p=n.queue;return p.length>0?(n.queue=[],r(p).then(o)):Promise.resolve()},()=>(n.states[d]=gv,s("reject",d),Promise.reject(d)))))),i=l=>(n.loading=!0,r(l).then(d=>{n.loading=!1;const p=n.queueLoadedCallbacks.shift();return b.from(p).each(Cn),o(d)})),c=Ab(t);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>{i(c).then(l,d)})}):i(c)}}no.ScriptLoader=new no;const f1=(e,t)=>{const n=e.indexOf(t);return n!==-1&&e.indexOf(t,n+1)>n},d1=e=>ye(e)&&Ae(e,"raw"),m1=e=>Te(e)&&e.length>1,Na={},Id=Bt("en"),bv=()=>ct(Na,Id.get()),hs={getData:()=>ia(Na,e=>({...e})),setCode:e=>{e&&Id.set(e)},getCode:()=>Id.get(),add:(e,t)=>{let n=Na[e];n||(Na[e]=n={});const s=Ue(un(t),o=>o.toLowerCase());ot(t,(o,r)=>{const i=r.toLowerCase();i!==r&&f1(s,i)?(Ae(t,i)||(n[i]=o),n[r]=o):n[i]=o})},translate:e=>{const t=bv().getOr({}),n=i=>$e(i)?Object.prototype.toString.call(i):s(i)?"":""+i,s=i=>i===""||i===null||i===void 0,o=i=>{const c=n(i);return Ae(t,c)?n(t[c]):ct(t,c.toLowerCase()).map(n).getOr(c)},r=i=>i.replace(/{context:\w+}$/,"");if(s(e))return"";if(d1(e))return n(e.raw);if(m1(e)){const i=e.slice(1),c=o(e[0]).replace(/\{([0-9]+)\}/g,(l,d)=>Ae(i,d)?n(i[d]):l);return r(c)}return r(o(e))},isRtl:()=>bv().bind(e=>ct(e,"_dir")).exists(e=>e==="rtl"),hasCode:e=>Ae(Na,e)},en=()=>{const e=[],t={},n={},s=[],o=(C,S)=>{const T=ve(s,k=>k.name===C&&k.state===S);U(T,k=>k.resolve())},r=C=>Ae(t,C),i=C=>Ae(n,C),c=C=>{if(n[C])return n[C].instance},l=(C,S)=>{const T=hs.getCode(),k=","+(S||"")+",";!T||S&&k.indexOf(","+T+",")===-1||no.ScriptLoader.add(t[C]+"/langs/"+T+".js")},d=(C,S)=>{en.languageLoad!==!1&&(r(C)?l(C,S):E(C,"loaded").then(()=>l(C,S)))},p=(C,S)=>(e.push(S),n[C]={instance:S},o(C,"added"),S),h=C=>{delete t[C],delete n[C]},g=(C,S)=>G(S)?G(C)?{prefix:"",resource:S,suffix:""}:{prefix:C.prefix,resource:S,suffix:C.suffix}:S,v=(C,S)=>{if(t[C])return Promise.resolve();let T=G(S)?S:S.prefix+S.resource+S.suffix;T.indexOf("/")!==0&&T.indexOf("://")===-1&&(T=en.baseURL+"/"+T),t[C]=T.substring(0,T.lastIndexOf("/"));const k=()=>(o(C,"loaded"),Promise.resolve());return n[C]?k():no.ScriptLoader.add(T).then(k)},E=(C,S="added")=>S==="added"&&i(C)||S==="loaded"&&r(C)?Promise.resolve():new Promise(T=>{s.push({name:C,state:S,resolve:T})});return{items:e,urls:t,lookup:n,get:c,requireLangPack:d,add:p,remove:h,createUrl:g,load:v,waitFor:E}};en.languageLoad=!0,en.baseURL="",en.PluginManager=en(),en.ThemeManager=en(),en.ModelManager=en();const yl=(e,t)=>{let n=null;return{cancel:()=>{Be(n)||(clearTimeout(n),n=null)},throttle:(...r)=>{Be(n)&&(n=setTimeout(()=>{n=null,e.apply(null,r)},t))}}},$d=(e,t)=>{let n=null;const s=()=>{Be(n)||(clearTimeout(n),n=null)};return{cancel:s,throttle:(...r)=>{s(),n=setTimeout(()=>{n=null,e.apply(null,r)},t)}}},p1=(e,t,n)=>ya(e,t,n).isSome(),ka=te("mce-annotation"),ar=te("data-mce-annotation"),ti=te("data-mce-annotation-uid"),xa=te("data-mce-annotation-active"),Ra=te("data-mce-annotation-classes"),Oa=te("data-mce-annotation-attrs"),yv=e=>t=>Qe(t,e),vv=(e,t)=>{const n=e.selection.getRng(),s=A.fromDom(n.startContainer),o=A.fromDom(e.getBody()),r=t.fold(()=>"."+ka(),l=>`[${ar()}="${l}"]`),i=Gr(s,n.startOffset).getOr(s);return Xr(i,r,yv(o)).bind(l=>Xs(l,`${ti()}`).bind(d=>Xs(l,`${ar()}`).map(p=>{const h=Ev(e,d);return{uid:d,name:p,elements:h}})))},h1=e=>_n(e)&&ed(e,ka()),Cv=(e,t)=>da(e,"data-mce-bogus")||p1(e,'[data-mce-bogus="all"]',yv(t)),Ev=(e,t)=>{const n=A.fromDom(e.getBody()),s=Kt(n,`[${ti()}="${t}"]`);return ve(s,o=>!Cv(o,n))},_v=(e,t)=>{const n=A.fromDom(e.getBody()),s=Kt(n,`[${ar()}="${t}"]`),o={};return U(s,r=>{if(!Cv(r,n)){const i=Sn(r,ti()),c=ct(o,i).getOr([]);o[i]=c.concat([r])}}),o},g1=(e,t)=>{const n=Bt({}),s=()=>({listeners:[],previous:to()}),o=(h,g)=>{r(h,v=>(g(v),v))},r=(h,g)=>{const v=n.get(),E=ct(v,h).getOrThunk(s),C=g(E);v[h]=C,n.set(v)},i=(h,g,v)=>{o(h,E=>{U(E.listeners,C=>C(!0,h,{uid:g,nodes:Ue(v,S=>S.dom)}))})},c=h=>{o(h,g=>{U(g.listeners,v=>v(!1,h))})},l=(h,g)=>{U(Ev(e,h),v=>{g?$t(v,xa(),"true"):Mt(v,xa())})},d=$d(()=>{const h=Go(t.getNames());U(h,g=>{r(g,v=>{const E=v.previous.get();return vv(e,b.some(g)).fold(()=>{E.each(C=>{c(g),v.previous.clear(),l(C,!1)})},({uid:C,name:S,elements:T})=>{jr(E,C)||(E.each(k=>l(k,!1)),i(S,C,T),v.previous.set(C),l(C,!0))}),{previous:v.previous,listeners:v.listeners}})})},30);return e.on("remove",()=>{d.cancel()}),e.on("NodeChange",()=>{d.throttle()}),{addListener:(h,g)=>{r(h,v=>({previous:v.previous,listeners:v.listeners.concat([g])}))}}},b1=(e,t)=>{const n=ar(),s=r=>b.from(r.attr(n)).bind(t.lookup),o=r=>{var i,c;r.attr(ti(),null),r.attr(ar(),null),r.attr(xa(),null);const l=b.from(r.attr(Oa())).map(g=>g.split(",")).getOr([]),d=b.from(r.attr(Ra())).map(g=>g.split(",")).getOr([]);U(l,g=>r.attr(g,null));const p=(c=(i=r.attr("class"))===null||i===void 0?void 0:i.split(" "))!==null&&c!==void 0?c:[],h=Gc(p,[ka()].concat(d));r.attr("class",h.length>0?h.join(" "):null),r.attr(Ra(),null),r.attr(Oa(),null)};e.serializer.addTempAttr(xa()),e.serializer.addAttributeFilter(n,r=>{for(const i of r)s(i).each(c=>{c.persistent===!1&&(i.name==="span"?i.unwrap():o(i))})})},y1=()=>{const e={};return{register:(o,r)=>{e[o]={name:o,settings:r}},lookup:o=>ct(e,o).map(r=>r.settings),getNames:()=>un(e)}},v1=(e,t,n)=>Math.min(Math.max(e,t),n),Sv=()=>window.crypto.getRandomValues(new Uint32Array(1))[0]/4294967295;let wv=0;const Da=e=>{const n=new Date().getTime(),s=Math.floor(Sv()*1e9);return wv++,e+"_"+s+wv+String(n)},C1=(e,t)=>{U(t,n=>{Kr(e,n)})},E1=(e,t)=>{U(t,n=>{pa(e,n)})},Av=(e,t)=>A.fromDom(e.dom.cloneNode(t)),cr=e=>Av(e,!1),Tv=e=>Av(e,!0),_1=(e,t)=>{const n=A.fromTag(t),s=ay(e);return Ys(n,s),n},S1=(e,t)=>{const n=_1(e,t);Qs(e,n);const s=qt(e);return Jo(n,s),lt(e),n},Nv=(e,t,n=tt)=>{const s=new Pt(e,t),o=r=>{let i;do i=s[r]();while(i&&!q(i)&&!n(i));return b.from(i).filter(q)};return{current:()=>b.from(s.current()).filter(q),next:()=>o("next"),prev:()=>o("prev"),prev2:()=>o("prev2")}},lr=(e,t)=>{const n=t||(i=>e.isBlock(i)||ht(i)||rt(i)),s=(i,c,l,d)=>{if(q(i)){const p=d(i,c,i.data);if(p!==-1)return b.some({container:i,offset:p})}return l().bind(p=>s(p.container,p.offset,l,d))};return{backwards:(i,c,l,d)=>{const p=Nv(i,d??e.getRoot(),n);return s(i,c,()=>p.prev().map(h=>({container:h,offset:h.length})),l).getOrNull()},forwards:(i,c,l,d)=>{const p=Nv(i,d??e.getRoot(),n);return s(i,c,()=>p.next().map(h=>({container:h,offset:0})),l).getOrNull()}}},Md=((e,t)=>{const n=r=>{if(!e(r))throw new Error("Can only get "+t+" value of a "+t+" node");return s(r).getOr("")},s=r=>e(r)?b.from(r.dom.nodeValue):b.none();return{get:n,getOption:s,set:(r,i)=>{if(!e(r))throw new Error("Can only set raw "+t+" value of a "+t+" node");r.dom.nodeValue=i}}})(rn,"text"),Pa=e=>Md.get(e),w1=e=>Md.getOption(e),kv=(e,t)=>Md.set(e,t),A1=["td","th"],T1=["thead","tbody","tfoot"],N1=["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"],k1=["li","dd","dt"],x1=["ul","ol","dl"],R1=["pre","script","textarea","style"],ni=e=>{let t;return n=>(t=t||Vf(e,dt),Ae(t,He(n)))},O1=e=>He(e)==="table",ur=e=>_n(e)&&He(e)==="br",xv=ni(N1),Fd=ni(x1),si=ni(k1),D1=ni(T1),Ba=ni(A1),vl=ni(R1),P1=e=>{const t=[];let n=e.dom;for(;n;)t.push(A.fromDom(n)),n=n.lastChild;return t},B1=e=>{const t=Kt(e,"br"),n=ve(P1(e).slice(-1),ur);t.length===n.length&&U(n,lt)},oi=()=>{const e=A.fromTag("br");return $t(e,"data-mce-bogus","1"),e},So=e=>{Zr(e),At(e,oi())},L1=(e,t)=>{nd(e).each(n=>{yo(n).each(s=>{t.isBlock(He(e))&&ur(n)&&t.isBlock(He(s))&&lt(n)})})},Rt=Ca,Cl=dd,wn=zD,I1=e=>e.insertContent(Rt,{preserve_zwsp:!0}),$1=fe,ri=q,ii=e=>(ri(e)&&(e=e.parentNode),$1(e)&&e.hasAttribute("data-mce-caret")),wo=e=>ri(e)&&Cl(e.data),xn=e=>ii(e)||wo(e),Rv=e=>e.firstChild!==e.lastChild||!ht(e.firstChild),M1=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Rt),r=e.parentNode;if(t){const i=e.previousSibling;if(ri(i)){if(xn(i))return i;if(_l(i))return i.splitText(i.data.length-1)}r==null||r.insertBefore(o,e)}else{const i=e.nextSibling;if(ri(i)){if(xn(i))return i;if(El(i))return i.splitText(1),i}e.nextSibling?r==null||r.insertBefore(o,e.nextSibling):r==null||r.appendChild(o)}return o},Ud=e=>{const t=e.container();return q(t)?t.data.charAt(e.offset())===Rt||e.isAtStart()&&wo(t.previousSibling):!1},Hd=e=>{const t=e.container();return q(t)?t.data.charAt(e.offset()-1)===Rt||e.isAtEnd()&&wo(t.nextSibling):!1},F1=(e,t,n)=>{var s;const r=((s=t.ownerDocument)!==null&&s!==void 0?s:document).createElement(e);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(oi().dom);const i=t.parentNode;return n?i==null||i.insertBefore(r,t):t.nextSibling?i==null||i.insertBefore(r,t.nextSibling):i==null||i.appendChild(r),r},El=e=>ri(e)&&e.data[0]===Rt,_l=e=>ri(e)&&e.data[e.data.length-1]===Rt,U1=e=>{var t;const n=e.getElementsByTagName("br"),s=n[n.length-1];tr(s)&&((t=s.parentNode)===null||t===void 0||t.removeChild(s))},zd=e=>e&&e.hasAttribute("data-mce-caret")?(U1(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null,Ov=e=>ii(e.startContainer),ai=Math.round,fr=e=>e?{left:ai(e.left),top:ai(e.top),bottom:ai(e.bottom),right:ai(e.right),width:ai(e.width),height:ai(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},Dv=(e,t)=>(e=fr(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e),H1=(e,t)=>e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right,Pv=(e,t,n)=>e>=0&&e<=Math.min(t.height,n.height)/2,La=(e,t)=>{const n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top?!0:e.top>t.bottom?!1:Pv(t.top-e.bottom,e,t)},Ia=(e,t)=>e.top>t.bottom?!0:e.bottom<t.top?!1:Pv(t.bottom-e.top,e,t),z1=(e,t,n)=>t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom,V1=e=>Vt(e,(t,n)=>t.fold(()=>b.some(n),s=>{const o=Math.min(n.left,s.left),r=Math.min(n.top,s.top),i=Math.max(n.right,s.right),c=Math.max(n.bottom,s.bottom);return b.some({top:r,right:i,bottom:c,left:o,width:i-o,height:c-r})}),b.none()),Bv=(e,t,n)=>{const s=Math.max(Math.min(t,e.left+e.width),e.left),o=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-s)*(t-s)+(n-o)*(n-o))},W1=(e,t)=>Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top)),Sl=e=>{const t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},Ao=(e,t)=>{if(fe(e)&&e.hasChildNodes()){const n=e.childNodes,s=v1(t,0,n.length-1);return n[s]}else return e},j1=(e,t)=>{if(!(t<0&&fe(e)&&e.hasChildNodes()))return Ao(e,t)},q1=new RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Lv=e=>G(e)&&e.charCodeAt(0)>=768&&q1.test(e),K1=(...e)=>t=>{for(let n=0;n<e.length;n++)if(e[n](t))return!0;return!1},G1=(...e)=>t=>{for(let n=0;n<e.length;n++)if(!e[n](t))return!1;return!0},Iv=Yn,Y1=rt,X1=ht,Z1=q,Q1=ms(["script","style","textarea"]),$v=ms(["img","input","textarea","hr","iframe","video","audio","object","embed"]),J1=ms(["table"]),eB=xn,gs=e=>eB(e)?!1:Z1(e)?!Q1(e.parentNode):$v(e)||X1(e)||J1(e)||Vd(e),tB=e=>fe(e)&&e.getAttribute("unselectable")==="true",Vd=e=>!tB(e)&&Y1(e),nB=(e,t)=>{for(let n=e.parentNode;n&&n!==t;n=n.parentNode){if(Vd(n))return!1;if(Iv(n))return!0}return!0},sB=e=>Vd(e)?!Vt(En(e.getElementsByTagName("*")),(t,n)=>t||Iv(n),!1):!1,oB=e=>$v(e)||sB(e),Mv=(e,t)=>gs(e)&&nB(e,t),Fv=fe,rB=gs,Uv=ul("display","block table"),iB=ul("float","left right"),$a=G1(Fv,rB,ls(iB)),aB=ls(ul("white-space","pre pre-line pre-wrap")),Ma=q,Wd=ht,Hv=st.nodeIndex,wl=j1,jd=e=>e?e.createRange():st.DOM.createRng(),qd=e=>G(e)&&/[\r\n\t ]/.test(e),zv=e=>!!e.setStart&&!!e.setEnd,Kd=e=>{const t=e.startContainer,n=e.startOffset;if(qd(e.toString())&&aB(t.parentNode)&&q(t)){const s=t.data;if(qd(s[n-1])||qd(s[n+1]))return!0}return!1},cB=e=>{const t=e.ownerDocument,n=jd(t),s=t.createTextNode(xt),o=e.parentNode;o.insertBefore(s,e),n.setStart(s,0),n.setEnd(s,1);const r=fr(n.getBoundingClientRect());return o.removeChild(s),r},lB=e=>{const t=e.startContainer,n=e.endContainer,s=e.startOffset,o=e.endOffset;if(t===n&&q(n)&&s===0&&o===1){const r=e.cloneRange();return r.setEndAfter(n),To(r)}else return null},Vv=e=>e.left===0&&e.right===0&&e.top===0&&e.bottom===0,To=e=>{var t;let n;const s=e.getClientRects();return s.length>0?n=fr(s[0]):n=fr(e.getBoundingClientRect()),!zv(e)&&Wd(e)&&Vv(n)?cB(e):Vv(n)&&zv(e)&&(t=lB(e))!==null&&t!==void 0?t:n},dr=(e,t)=>{const n=Dv(e,t);return n.width=1,n.right=n.left+1,n},uB=e=>{const t=[],n=i=>{i.height!==0&&(t.length>0&&H1(i,t[t.length-1])||t.push(i))},s=(i,c)=>{const l=jd(i.ownerDocument);if(c<i.data.length){if(Lv(i.data[c]))return;if(Lv(i.data[c-1])&&(l.setStart(i,c),l.setEnd(i,c+1),!Kd(l))){n(dr(To(l),!1));return}}c>0&&(l.setStart(i,c-1),l.setEnd(i,c),Kd(l)||n(dr(To(l),!1))),c<i.data.length&&(l.setStart(i,c),l.setEnd(i,c+1),Kd(l)||n(dr(To(l),!0)))},o=e.container(),r=e.offset();if(Ma(o))return s(o,r),t;if(Fv(o))if(e.isAtEnd()){const i=wl(o,r);Ma(i)&&s(i,i.data.length),$a(i)&&!Wd(i)&&n(dr(To(i),!1))}else{const i=wl(o,r);if(Ma(i)&&s(i,0),$a(i)&&e.isAtEnd())return n(dr(To(i),!1)),t;const c=wl(e.container(),e.offset()-1);$a(c)&&!Wd(c)&&(Uv(c)||Uv(i)||!$a(i))&&n(dr(To(c),!1)),$a(i)&&n(dr(To(i),!0))}return t},L=(e,t,n)=>{const s=()=>(Ma(e),t===0),o=()=>Ma(e)?t>=e.data.length:t>=e.childNodes.length,r=()=>{const p=jd(e.ownerDocument);return p.setStart(e,t),p.setEnd(e,t),p},i=()=>(n||(n=uB(L(e,t))),n),c=()=>i().length>0,l=p=>p&&e===p.container()&&t===p.offset(),d=p=>wl(e,p?t-1:t);return{container:te(e),offset:te(t),toRange:r,getClientRects:i,isVisible:c,isAtStart:s,isAtEnd:o,isEqual:l,getNode:d}};L.fromRangeStart=e=>L(e.startContainer,e.startOffset),L.fromRangeEnd=e=>L(e.endContainer,e.endOffset),L.after=e=>L(e.parentNode,Hv(e)+1),L.before=e=>L(e.parentNode,Hv(e)),L.isAbove=(e,t)=>jt(on(t.getClientRects()),go(e.getClientRects()),La).getOr(!1),L.isBelow=(e,t)=>jt(go(t.getClientRects()),on(e.getClientRects()),Ia).getOr(!1),L.isAtStart=e=>e?e.isAtStart():!1,L.isAtEnd=e=>e?e.isAtEnd():!1,L.isTextPosition=e=>e?q(e.container()):!1,L.isElementPosition=e=>!L.isTextPosition(e);const Al=(e,t)=>{q(t)&&t.data.length===0&&e.remove(t)},fB=(e,t,n)=>{t.insertNode(n),Al(e,n.previousSibling),Al(e,n.nextSibling)},dB=(e,t,n)=>{const s=b.from(n.firstChild),o=b.from(n.lastChild);t.insertNode(n),s.each(r=>Al(e,r.previousSibling)),o.each(r=>Al(e,r.nextSibling))},Gd=(e,t,n)=>{pd(n)?dB(e,t,n):fB(e,t,n)},bs=q,Wv=tr,jv=st.nodeIndex,qv=e=>{const t=e.parentNode;return Wv(t)?qv(t):t},Yd=e=>e?Zc(e.childNodes,(t,n)=>(Wv(n)&&n.nodeName!=="BR"?t=t.concat(Yd(n)):t.push(n),t),[]):[],mB=(e,t)=>{let n=e;for(;(n=n.previousSibling)&&bs(n);)t+=n.data.length;return t},Kv=e=>t=>e===t,pB=e=>{let t,n;t=Yd(qv(e)),n=Nb(t,Kv(e),e),t=t.slice(0,n+1);const s=Zc(t,(o,r,i)=>(bs(r)&&bs(t[i-1])&&o++,o),0);return t=ca(t,ms([e.nodeName])),n=Nb(t,Kv(e),e),n-s},Gv=e=>(bs(e)?"text()":e.nodeName.toLowerCase())+"["+pB(e)+"]",hB=(e,t,n)=>{const s=[];for(let o=t.parentNode;o&&o!==e;o=o.parentNode)s.push(o);return s},Yv=(e,t)=>{let n=[],s=t.container(),o=t.offset(),r;if(bs(s))r=mB(s,o);else{const c=s.childNodes;o>=c.length?(r="after",o=c.length-1):r="before",s=c[o]}n.push(Gv(s));let i=hB(e,s);return i=ca(i,ls(tr)),n=n.concat(Kf(i,c=>Gv(c))),n.reverse().join("/")+","+r},gB=(e,t,n)=>{let s=Yd(e);return s=ca(s,(o,r)=>!bs(o)||!bs(s[r-1])),s=ca(s,ms([t])),s[n]},bB=(e,t)=>{let n=e,s=0;for(;bs(n);){const o=n.data.length;if(t>=s&&t<=s+o){e=n,t=t-s;break}if(!bs(n.nextSibling)){e=n,t=o;break}s+=o,n=n.nextSibling}return bs(e)&&t>e.data.length&&(t=e.data.length),L(e,t)},Xv=(e,t)=>{if(!t)return null;const n=t.split(","),s=n[0].split("/"),o=n.length>1?n[1]:"before",r=Zc(s,(i,c)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(c);return l?(l[1]==="text()"&&(l[1]="#text"),gB(i,l[1],parseInt(l[2],10))):null},e);if(!r)return null;if(!bs(r)&&r.parentNode){let i;return o==="after"?i=jv(r)+1:i=jv(r),L(r.parentNode,i)}return bB(r,parseInt(o,10))},Tl=rt,yB=(e,t,n)=>{let s=e(t.data.slice(0,n)).length;for(let o=t.previousSibling;o&&q(o);o=o.previousSibling)s+=e(o.data).length;return s},Zv=(e,t,n,s,o)=>{const r=o?s.startContainer:s.endContainer;let i=o?s.startOffset:s.endOffset;const c=[],l=e.getRoot();if(q(r))c.push(n?yB(t,r,i):i);else{let d=0;const p=r.childNodes;i>=p.length&&p.length&&(d=1,i=Math.max(0,p.length-1)),c.push(e.nodeIndex(p[i],n)+d)}for(let d=r;d&&d!==l;d=d.parentNode)c.push(e.nodeIndex(d,n));return c},vB=(e,t,n,s)=>{const o=t.dom,r=Zv(o,e,n,s,!0),i=t.isForward(),c=Ov(s)?{isFakeCaret:!0}:{};if(t.isCollapsed())return{start:r,forward:i,...c};{const l=Zv(o,e,n,s,!1);return{start:r,end:l,forward:i,...c}}},Xd=(e,t,n)=>{let s=0;return X.each(e.select(t),o=>{if(o.getAttribute("data-mce-bogus")!=="all"){if(o===n)return!1;s++;return}}),s},Qv=(e,t)=>{let n=t?e.startContainer:e.endContainer,s=t?e.startOffset:e.endOffset;if(fe(n)&&n.nodeName==="TR"){const o=n.childNodes;n=o[Math.min(t?s:s-1,o.length-1)],n&&(s=t?0:n.childNodes.length,t?e.setStart(n,s):e.setEnd(n,s))}},Jv=e=>(Qv(e,!0),Qv(e,!1),e),eC=(e,t)=>{if(fe(e)&&(e=Ao(e,t),Tl(e)))return e;if(xn(e)){q(e)&&ii(e)&&(e=e.parentNode);let n=e.previousSibling;if(Tl(n)||(n=e.nextSibling,Tl(n)))return n}},CB=e=>eC(e.startContainer,e.startOffset)||eC(e.endContainer,e.endOffset),tC=(e,t,n)=>{const s=n.getNode(),o=n.getRng();if(s.nodeName==="IMG"||Tl(s)){const i=s.nodeName;return{name:i,index:Xd(n.dom,i,s)}}const r=CB(o);if(r){const i=r.tagName;return{name:i,index:Xd(n.dom,i,r)}}return vB(e,n,t,o)},EB=e=>{const t=e.getRng();return{start:Yv(e.dom.getRoot(),L.fromRangeStart(t)),end:Yv(e.dom.getRoot(),L.fromRangeEnd(t)),forward:e.isForward()}},_B=e=>({rng:e.getRng(),forward:e.isForward()}),nC=(e,t,n)=>{const s={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",s,"&#xFEFF;"):e.create("span",s)},sC=(e,t)=>{const n=e.dom;let s=e.getRng();const o=n.uniqueId(),r=e.isCollapsed(),i=e.getNode(),c=i.nodeName,l=e.isForward();if(c==="IMG")return{name:c,index:Xd(n,c,i)};const d=Jv(s.cloneRange());if(!r){d.collapse(!1);const h=nC(n,o+"_end",t);Gd(n,d,h)}s=Jv(s),s.collapse(!0);const p=nC(n,o+"_start",t);return Gd(n,s,p),e.moveToBookmark({id:o,keep:!0,forward:l}),{id:o,forward:l}},SB=(e,t,n=!1)=>t===2?tC(wn,n,e):t===3?EB(e):t?_B(e):sC(e,!1),Zd=ae(tC,St,!0),oC=e=>{const t=r=>r(e),n=te(e),s=()=>o,o={tag:!0,inner:e,fold:(r,i)=>i(e),isValue:dt,isError:tt,map:r=>an.value(r(e)),mapError:s,bind:t,exists:t,forall:t,getOr:n,or:s,getOrThunk:n,orThunk:s,getOrDie:n,each:r=>{r(e)},toOptional:()=>b.some(e)};return o},rC=e=>{const t=()=>n,n={tag:!1,inner:e,fold:(s,o)=>s(e),isValue:tt,isError:dt,map:t,mapError:s=>an.error(s(e)),bind:t,exists:tt,forall:dt,getOr:St,or:St,getOrThunk:As,orThunk:As,getOrDie:qo(String(e)),each:Se,toOptional:b.none};return n},an={value:oC,error:rC,fromOption:(e,t)=>e.fold(()=>rC(t),oC)},Ls={generate:e=>{if(!Te(e))throw new Error("cases must be an array");if(e.length===0)throw new Error("there must be at least one case");const t=[],n={};return U(e,(s,o)=>{const r=un(s);if(r.length!==1)throw new Error("one and only one name per case");const i=r[0],c=s[i];if(n[i]!==void 0)throw new Error("duplicate key detected:"+i);if(i==="cata")throw new Error("cannot have a case named cata (sorry)");if(!Te(c))throw new Error("case arguments must be an array");t.push(i),n[i]=(...l)=>{const d=l.length;if(d!==c.length)throw new Error("Wrong number of arguments to case "+i+". Expected "+c.length+" ("+c+"), got "+d);return{fold:(...h)=>{if(h.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+h.length);return h[o].apply(null,l)},match:h=>{const g=un(h);if(t.length!==g.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+`
Actual: `+g.join(","));if(!Gn(t,E=>Ze(g,E)))throw new Error("Not all branches were specified when using match. Specified: "+g.join(", ")+`
Required: `+t.join(", "));return h[i].apply(null,l)},log:h=>{console.log(h,{constructors:t,constructor:i,params:l})}}}}),n}};Ls.generate([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const wB=e=>{const t=[],n=[];return U(e,s=>{s.fold(o=>{t.push(o)},o=>{n.push(o)})}),{errors:t,values:n}},AB=e=>e.type==="inline-command"||e.type==="inline-format",TB=e=>e.type==="block-command"||e.type==="block-format",NB=(e,t)=>(e.type==="block-command"||e.type==="block-format")&&e.trigger===t,kB=e=>{var t;const n=o=>an.error({message:o,pattern:e}),s=(o,r,i)=>{if(e.format!==void 0){let c;if(Te(e.format)){if(!Gn(e.format,G))return n(o+" pattern has non-string items in the `format` array");c=e.format}else if(G(e.format))c=[e.format];else return n(o+" pattern has non-string `format` parameter");return an.value(r(c))}else return e.cmd!==void 0?G(e.cmd)?an.value(i(e.cmd,e.value)):n(o+" pattern has non-string `cmd` parameter"):n(o+" pattern is missing both `format` and `cmd` parameters")};if(!ye(e))return n("Raw pattern is not an object");if(!G(e.start))return n("Raw pattern is missing `start` parameter");if(e.end!==void 0){if(!G(e.end))return n("Inline pattern has non-string `end` parameter");if(e.start.length===0&&e.end.length===0)return n("Inline pattern has empty `start` and `end` parameters");let o=e.start,r=e.end;return r.length===0&&(r=o,o=""),s("Inline",i=>({type:"inline-format",start:o,end:r,format:i}),(i,c)=>({type:"inline-command",start:o,end:r,cmd:i,value:c}))}else{if(e.replacement!==void 0)return G(e.replacement)?e.start.length===0?n("Replacement pattern has empty `start` parameter"):an.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const o=(t=e.trigger)!==null&&t!==void 0?t:"space";return e.start.length===0?n("Block pattern has empty `start` parameter"):s("Block",r=>({type:"block-format",start:e.start,format:r[0],trigger:o}),(r,i)=>({type:"block-command",start:e.start,cmd:r,value:i,trigger:o}))}}},iC=e=>ve(e,TB),aC=e=>ve(e,AB),xB=(e,t)=>({inlinePatterns:aC(e),blockPatterns:iC(e),dynamicPatternsLookup:t}),Qd=(e,t)=>({...e,blockPatterns:ve(e.blockPatterns,n=>NB(n,t))}),cC=e=>{const t=wB(Ue(e,kB));return U(t.errors,n=>console.error(n.message,n.pattern)),t.values},RB=e=>t=>{const n=e(t);return cC(n)},Jd=xs().deviceType,OB=Jd.isTouch(),DB=st.DOM,PB=e=>{const t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return Vt(t,(n,s)=>{const o=s.split("="),r=o[0],i=o.length>1?o[1]:r;return n[Wr(r)]=Wr(i),n},{})},lC=e=>Xe(e,RegExp),se=e=>t=>t.options.get(e),Nl=e=>G(e)||ye(e),uC=(e,t="")=>n=>{const s=G(n);if(s)if(n.indexOf("=")!==-1){const o=PB(n);return{value:ct(o,e.id).getOr(t),valid:s}}else return{value:n,valid:s};else return{valid:!1,message:"Must be a string."}},BB=e=>{const t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:uC(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:uC(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:n=>{const s=G(n)&&ks(n);return s?{value:n,valid:s}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:n=>{const s=Ze(["block","linebreak","invert","default"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:n=>nt(n)?{valid:!0,value:n}:G(n)?{valid:!0,value:n}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:n=>{const s=n===!1||G(n)||yn(n,G);return s?G(n)?{value:Ue(n.split(","),Wr),valid:s}:Te(n)?{value:n,valid:s}:n===!1?{value:[],valid:s}:{value:n,valid:s}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:nm(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:n=>{const s=G(n)||yn(n,G);return s?{value:Te(n)?n:Ue(n.split(","),Wr),valid:s}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:n=>{const s=nt(n)||G(n);return s?n===!1||Jd.isiPhone()||Jd.isiPad()?{value:"",valid:s}:{value:n===!0?"table,img,figure.image,div,video,iframe":n,valid:s}:{valid:!1,message:"Must be boolean or a string"}},default:!OB}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"string"}),t("service_message",{processor:"string"}),t("theme",{processor:n=>n===!1||G(n)||$e(n),default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:n=>{const s=n===!1||G(n);return s?{value:n===!1?"":n,valid:s}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:Nl}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:Nl}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:Nl}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:Nl}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:n=>G(n)||n===!0}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("license_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:n=>yn(n,ye)||n===!1?{value:cC(n===!1?[]:n),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),t("text_patterns_lookup",{processor:n=>$e(n)?{value:RB(n),valid:!0}:{valid:!1,message:"Must be a single function"},default:n=>[]}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:n=>yn(n,lC)?{value:n,valid:!0}:lC(n)?{value:[n],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!0}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:n=>{const s=Ze(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:n=>{const s=Ze(["inherited","collapsed","expanded"],n);return s?{value:n,valid:s}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("sandbox_iframes",{processor:"boolean",default:!0}),t("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),t("convert_unsafe_embeds",{processor:"boolean",default:!0}),e.on("ScriptsLoaded",()=>{t("directionality",{processor:"string",default:hs.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:DB.getAttrib(e.getElement(),"placeholder")})})},LB=se("iframe_attrs"),IB=se("doctype"),fC=se("document_base_url"),$B=se("body_id"),MB=se("body_class"),dC=se("content_security_policy"),FB=se("br_in_pre"),Yt=se("forced_root_block"),Fa=se("forced_root_block_attrs"),UB=se("newline_behavior"),HB=se("br_newline_selector"),zB=se("no_newline_selector"),VB=se("keep_styles"),WB=se("end_container_on_empty_block"),mC=se("automatic_uploads"),pC=se("images_reuse_filename"),jB=se("images_replace_blob_uris"),hC=se("icons"),qB=se("icons_url"),KB=se("images_upload_url"),GB=se("images_upload_base_path"),YB=se("images_upload_credentials"),XB=se("images_upload_handler"),ZB=se("content_css_cors"),em=se("referrer_policy"),gC=se("language"),QB=se("language_url"),bC=se("indent_use_margin"),JB=se("indentation"),eL=se("content_css"),tL=se("content_style"),yC=se("font_css"),nL=se("directionality"),sL=se("inline_boundaries_selector"),vC=se("object_resizing"),oL=se("resize_img_proportional"),rL=se("placeholder"),CC=se("event_root"),iL=se("service_message"),ci=se("theme"),aL=se("theme_url"),tm=se("model"),cL=se("model_url"),Ua=se("inline_boundaries"),lL=se("formats"),uL=se("preview_styles"),fL=se("format_empty_lines"),dL=se("format_noneditable_selector"),mL=se("custom_ui_selector"),nm=se("inline"),pL=se("hidden_input"),hL=se("submit_patch"),gL=se("add_form_submit_trigger"),bL=se("add_unload_trigger"),yL=se("custom_undo_redo_levels"),vL=se("disable_nodechange"),EC=se("readonly"),CL=se("editable_root"),_C=se("content_css_cors"),kl=se("plugins"),EL=se("external_plugins"),_L=se("block_unsupported_drop"),SL=se("visual"),wL=se("visual_table_class"),SC=se("visual_anchor_class"),wC=se("iframe_aria_text"),AL=se("setup"),TL=se("init_instance_callback"),NL=se("urlconverter_callback"),kL=se("auto_focus"),xL=se("browser_spellcheck"),RL=se("protect"),OL=se("paste_block_drop"),xl=se("paste_data_images"),DL=se("paste_preprocess"),PL=se("paste_postprocess"),BL=se("newdocument_content"),LL=se("paste_webkit_styles"),IL=se("paste_remove_styles_if_webkit"),$L=se("paste_merge_formats"),ML=se("smart_paste"),FL=se("paste_as_text"),UL=se("paste_tab_spaces"),HL=se("allow_html_data_urls"),zL=se("text_patterns"),VL=se("text_patterns_lookup"),AC=se("noneditable_class"),WL=se("editable_class"),jL=se("noneditable_regexp"),qL=se("preserve_cdata"),KL=se("highlight_on_focus"),TC=se("xss_sanitization"),GL=se("init_content_sync"),YL=e=>e.options.isSet("text_patterns_lookup"),XL=e=>X.explode(e.options.get("font_size_style_values")),ZL=e=>X.explode(e.options.get("font_size_classes")),QL=e=>e.options.get("encoding")==="xml",NC=e=>X.explode(e.options.get("images_file_types")),JL=se("table_tab_navigation"),eI=se("details_initial_state"),tI=se("details_serialized_state"),kC=se("sandbox_iframes"),sm=e=>e.options.get("sandbox_iframes_exclusions"),nI=se("convert_unsafe_embeds"),sI=se("license_key"),oI=se("api_key"),rI=fe,xC=q,RC=e=>{const t=e.parentNode;t&&t.removeChild(e)},OC=e=>{const t=wn(e);return{count:e.length-t.length,text:t}},DC=e=>{let t;for(;(t=e.data.lastIndexOf(Rt))!==-1;)e.deleteData(t,1)},PC=(e,t)=>(mr(e),t),iI=(e,t)=>{const n=OC(e.data.substr(0,t.offset())),s=OC(e.data.substr(t.offset()));return(n.text+s.text).length>0?(DC(e),L(e,t.offset()-n.count)):t},aI=(e,t)=>{const n=t.container(),s=qc(En(n.childNodes),e).map(o=>o<t.offset()?L(n,t.offset()-1):t).getOr(t);return mr(e),s},cI=(e,t)=>xC(e)&&t.container()===e?iI(e,t):PC(e,t),lI=(e,t)=>t.container()===e.parentNode?aI(e,t):PC(e,t),uI=(e,t)=>L.isTextPosition(t)?cI(e,t):lI(e,t),mr=e=>{rI(e)&&xn(e)&&(Rv(e)?e.removeAttribute("data-mce-caret"):RC(e)),xC(e)&&(DC(e),e.data.length===0&&RC(e))},fI=rt,dI=Bs,mI=fl,pI="*[contentEditable=false],video,audio,embed,object",BC=(e,t,n)=>{const s=Dv(t.getBoundingClientRect(),n);let o,r;if(e.tagName==="BODY"){const c=e.ownerDocument.documentElement;o=e.scrollLeft||c.scrollLeft,r=e.scrollTop||c.scrollTop}else{const c=e.getBoundingClientRect();o=e.scrollLeft-c.left,r=e.scrollTop-c.top}s.left+=o,s.right+=o,s.top+=r,s.bottom+=r,s.width=1;let i=t.offsetWidth-t.clientWidth;return i>0&&(n&&(i*=-1),s.left+=i,s.right+=i),s},hI=e=>{var t,n;const s=Kt(A.fromDom(e),pI);for(let o=0;o<s.length;o++){const r=s[o].dom;let i=r.previousSibling;if(_l(i)){const c=i.data;c.length===1?(t=i.parentNode)===null||t===void 0||t.removeChild(i):i.deleteData(c.length-1,1)}i=r.nextSibling,El(i)&&(i.data.length===1?(n=i.parentNode)===null||n===void 0||n.removeChild(i):i.deleteData(0,1))}},gI=(e,t,n,s)=>{const o=to();let r,i;const c=Yt(e),l=e.dom,d=(C,S)=>{let T;if(p(),mI(S))return null;if(n(S)){const k=F1(c,S,C),N=BC(t,S,C);l.setStyle(k,"top",N.top),l.setStyle(k,"caret-color","transparent"),i=k;const R=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(R,{...N}),l.add(t,R),o.set({caret:R,element:S,before:C}),C&&l.addClass(R,"mce-visual-caret-before"),h(),T=S.ownerDocument.createRange(),T.setStart(k,0),T.setEnd(k,0)}else return i=M1(S,C),T=S.ownerDocument.createRange(),Ha(i.nextSibling)?(T.setStart(i,0),T.setEnd(i,0)):(T.setStart(i,1),T.setEnd(i,1)),T;return T},p=()=>{hI(t),i&&(mr(i),i=null),o.on(C=>{l.remove(C.caret),o.clear()}),r&&(clearInterval(r),r=void 0)},h=()=>{r=setInterval(()=>{o.on(C=>{s()?l.toggleClass(C.caret,"mce-visual-caret-hidden"):l.addClass(C.caret,"mce-visual-caret-hidden")})},500)};return{show:d,hide:p,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{o.on(C=>{const S=BC(t,C.element,C.before);l.setStyles(C.caret,{...S})})},destroy:()=>clearInterval(r)}},LC=()=>Ve.browser.isFirefox(),Ha=e=>fI(e)||dI(e),za=e=>(Ha(e)||Ps(e)&&LC())&&sl(A.fromDom(e)).exists(Qo),bI=Yn,om=rt,yI=Bs,IC=ul("display","block table table-cell table-caption list-item"),$C=xn,MC=ii,vI=fe,CI=q,EI=gs,li=e=>e>0,pr=e=>e<0,Rl=(e,t)=>{let n;for(;n=e(t);)if(!MC(n))return n;return null},Va=(e,t,n,s,o)=>{const r=new Pt(e,s),i=om(e)||MC(e);let c;if(pr(t)){if(i&&(c=Rl(r.prev.bind(r),!0),n(c)))return c;for(;c=Rl(r.prev.bind(r),o);)if(n(c))return c}if(li(t)){if(i&&(c=Rl(r.next.bind(r),!0),n(c)))return c;for(;c=Rl(r.next.bind(r),o);)if(n(c))return c}return null},_I=(e,t)=>{const n=o=>bI(o.dom),s=o=>o.dom===t;return Zs(A.fromDom(e),n,s).map(o=>o.dom).getOr(t)},No=(e,t)=>{for(;e&&e!==t;){if(IC(e))return e;e=e.parentNode}return null},Is=(e,t,n)=>No(e.container(),n)===No(t.container(),n),rm=(e,t)=>{if(!t)return b.none();const n=t.container(),s=t.offset();return vI(n)?b.from(n.childNodes[s+e]):b.none()},FC=(e,t)=>{var n;const o=((n=t.ownerDocument)!==null&&n!==void 0?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},SI=(e,t,n)=>No(t,e)===No(n,e),UC=(e,t,n)=>{const s=e?"previousSibling":"nextSibling";let o=n;for(;o&&o!==t;){let r=o[s];if(r&&$C(r)&&(r=r[s]),om(r)||yI(r)){if(SI(t,r,o))return r;break}if(EI(r))break;o=o.parentNode}return null},Wa=ae(FC,!0),ja=ae(FC,!1),im=(e,t,n)=>{let s;const o=ae(UC,!0,t),r=ae(UC,!1,t),i=n.startContainer,c=n.startOffset;if(ii(i)){const l=CI(i)?i.parentNode:i,d=l.getAttribute("data-mce-caret");if(d==="before"&&(s=l.nextSibling,za(s)))return Wa(s);if(d==="after"&&(s=l.previousSibling,za(s)))return ja(s)}if(!n.collapsed)return n;if(q(i)){if($C(i)){if(e===1){if(s=r(i),s)return Wa(s);if(s=o(i),s)return ja(s)}if(e===-1){if(s=o(i),s)return ja(s);if(s=r(i),s)return Wa(s)}return n}if(_l(i)&&c>=i.data.length-1)return e===1&&(s=r(i),s)?Wa(s):n;if(El(i)&&c<=1)return e===-1&&(s=o(i),s)?ja(s):n;if(c===i.data.length)return s=r(i),s?Wa(s):n;if(c===0)return s=o(i),s?ja(s):n}return n},HC=(e,t)=>rm(e?0:-1,t).filter(om),qa=(e,t,n)=>{const s=im(e,t,n);return e===-1?L.fromRangeStart(s):L.fromRangeEnd(s)},Ol=e=>b.from(e.getNode()).map(A.fromDom),wI=e=>b.from(e.getNode(!0)).map(A.fromDom),am=(e,t)=>{let n=t;for(;n=e(n);)if(n.isVisible())return n;return n},Dl=(e,t)=>{const n=Is(e,t);return!n&&ht(e.getNode())?!0:n};var Lt;(function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"})(Lt||(Lt={}));const AI=rt,$s=q,zC=fe,cm=ht,ui=gs,VC=oB,Pl=Mv,TI=(e,t)=>{const n=[];let s=e;for(;s&&s!==t;)n.push(s),s=s.parentNode;return n},WC=(e,t)=>e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null,jC=(e,t)=>{if(li(e)){if(ui(t.previousSibling)&&!$s(t.previousSibling))return L.before(t);if($s(t))return L(t,0)}if(pr(e)){if(ui(t.nextSibling)&&!$s(t.nextSibling))return L.after(t);if($s(t))return L(t,t.data.length)}return pr(e)?cm(t)?L.before(t):L.after(t):L.before(t)},NI=(e,t)=>{const n=t.nextSibling;return n&&ui(n)?$s(n)?L(n,0):L.before(n):lm(Lt.Forwards,L.after(t),e)},lm=(e,t,n)=>{let s,o,r,i;if(!zC(n)||!t)return null;if(t.isEqual(L.after(n))&&n.lastChild){if(i=L.after(n.lastChild),pr(e)&&ui(n.lastChild)&&zC(n.lastChild))return cm(n.lastChild)?L.before(n.lastChild):i}else i=t;const c=i.container();let l=i.offset();if($s(c)){if(pr(e)&&l>0)return L(c,--l);if(li(e)&&l<c.length)return L(c,++l);s=c}else{if(pr(e)&&l>0&&(o=WC(c,l-1),ui(o)))return!VC(o)&&(r=Va(o,e,Pl,o),r)?$s(r)?L(r,r.data.length):L.after(r):$s(o)?L(o,o.data.length):L.before(o);if(li(e)&&l<c.childNodes.length&&(o=WC(c,l),ui(o)))return cm(o)?NI(n,o):!VC(o)&&(r=Va(o,e,Pl,o),r)?$s(r)?L(r,0):L.before(r):$s(o)?L(o,0):L.after(o);s=o||i.getNode()}if(s&&(li(e)&&i.isAtEnd()||pr(e)&&i.isAtStart())&&(s=Va(s,e,dt,n,!0),Pl(s,n)))return jC(e,s);o=s&&Va(s,e,Pl,n);const d=Yo(ve(TI(c,n),AI));return d&&(!o||!d.contains(o))?(li(e)?i=L.after(d):i=L.before(d),i):o?jC(e,o):null},Ms=e=>({next:t=>lm(Lt.Forwards,t,e),prev:t=>lm(Lt.Backwards,t,e)}),kI=(e,t,n)=>{const s=e?L.before(n):L.after(n);return Rn(e,t,s)},xI=e=>ht(e)?L.before(e):L.after(e),qC=e=>L.isTextPosition(e)?e.offset()===0:gs(e.getNode()),KC=e=>{if(L.isTextPosition(e)){const t=e.container();return e.offset()===t.data.length}else return gs(e.getNode(!0))},GC=(e,t)=>!L.isTextPosition(e)&&!L.isTextPosition(t)&&e.getNode()===t.getNode(!0),RI=e=>!L.isTextPosition(e)&&ht(e.getNode()),OI=(e,t,n)=>e?!GC(t,n)&&!RI(t)&&KC(t)&&qC(n):!GC(n,t)&&qC(t)&&KC(n),Rn=(e,t,n)=>{const s=Ms(t);return b.from(e?s.next(n):s.prev(n))},fi=(e,t,n)=>Rn(e,t,n).bind(s=>Is(n,s,t)&&OI(e,n,s)?Rn(e,t,s):b.some(s)),YC=(e,t,n,s)=>fi(e,t,n).bind(o=>s(o)?YC(e,t,o,s):b.some(o)),di=(e,t)=>{const n=e?t.firstChild:t.lastChild;return q(n)?b.some(L(n,e?0:n.data.length)):n?gs(n)?b.some(e?L.before(n):xI(n)):kI(e,t,n):b.none()},cn=ae(Rn,!0),dn=ae(Rn,!1),Xt=ae(di,!0),Xn=ae(di,!1),um="_mce_caret",On=e=>fe(e)&&e.id===um,hr=(e,t)=>{let n=t;for(;n&&n!==e;){if(On(n))return n;n=n.parentNode}return null},DI=e=>G(e.start),PI=e=>Ae(e,"rng"),BI=e=>Ae(e,"id"),XC=e=>Ae(e,"name"),ZC=e=>X.isArray(e.start),Bl=e=>!XC(e)&&nt(e.forward)?e.forward:!0,QC=(e,t)=>(fe(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t),LI=(e,t)=>{const n=b.from(Xv(e.getRoot(),t.start)),s=b.from(Xv(e.getRoot(),t.end));return jt(n,s,(o,r)=>{const i=e.createRng();return i.setStart(o.container(),o.offset()),i.setEnd(r.container(),r.offset()),{range:i,forward:Bl(t)}})},II=(e,t)=>{var n;const o=((n=e.ownerDocument)!==null&&n!==void 0?n:document).createTextNode(Rt);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)},$I=e=>!e.hasChildNodes(),MI=(e,t)=>Xn(e).fold(tt,n=>(t.setStart(n.container(),n.offset()),t.setEnd(n.container(),n.offset()),!0)),JC=(e,t,n)=>$I(t)&&hr(e,t)?(II(t,n),!0):!1,eE=(e,t,n,s)=>{const o=n[t?"start":"end"],r=e.getRoot();if(o){let i=r,c=o[0];for(let l=o.length-1;i&&l>=1;l--){const d=i.childNodes;if(JC(r,i,s))return!0;if(o[l]>d.length-1)return JC(r,i,s)?!0:MI(i,s);i=d[o[l]]}q(i)&&(c=Math.min(o[0],i.data.length)),fe(i)&&(c=Math.min(o[0],i.childNodes.length)),t?s.setStart(i,c):s.setEnd(i,c)}return!0},fm=e=>q(e)&&e.data.length>0,tE=(e,t,n)=>{const s=e.get(n.id+"_"+t),o=s==null?void 0:s.parentNode,r=n.keep;if(s&&o){let i,c;if(t==="start"?r?s.hasChildNodes()?(i=s.firstChild,c=1):fm(s.nextSibling)?(i=s.nextSibling,c=0):fm(s.previousSibling)?(i=s.previousSibling,c=s.previousSibling.data.length):(i=o,c=e.nodeIndex(s)+1):(i=o,c=e.nodeIndex(s)):r?s.hasChildNodes()?(i=s.firstChild,c=1):fm(s.previousSibling)?(i=s.previousSibling,c=s.previousSibling.data.length):(i=o,c=e.nodeIndex(s)):(i=o,c=e.nodeIndex(s)),!r){const l=s.previousSibling,d=s.nextSibling;X.each(X.grep(s.childNodes),h=>{q(h)&&(h.data=h.data.replace(/\uFEFF/g,""))});let p;for(;p=e.get(n.id+"_"+t);)e.remove(p,!0);if(q(d)&&q(l)&&!Ve.browser.isOpera()){const h=l.data.length;l.appendData(d.data),e.remove(d),i=l,c=h}}return b.some(L(i,c))}else return b.none()},FI=(e,t)=>{const n=e.createRng();return eE(e,!0,t,n)&&eE(e,!1,t,n)?b.some({range:n,forward:Bl(t)}):b.none()},UI=(e,t)=>{const n=tE(e,"start",t),s=tE(e,"end",t);return jt(n,s.or(n),(o,r)=>{const i=e.createRng();return i.setStart(QC(e,o.container()),o.offset()),i.setEnd(QC(e,r.container()),r.offset()),{range:i,forward:Bl(t)}})},HI=(e,t)=>b.from(e.select(t.name)[t.index]).map(n=>{const s=e.createRng();return s.selectNode(n),{range:s,forward:!0}}),zI=(e,t)=>{const n=e.dom;if(t){if(ZC(t))return FI(n,t);if(DI(t))return LI(n,t);if(BI(t))return UI(n,t);if(XC(t))return HI(n,t);if(PI(t))return b.some({range:t.rng,forward:Bl(t)})}return b.none()},VI=(e,t,n)=>SB(e,t,n),WI=(e,t)=>{zI(e,t).each(({range:n,forward:s})=>{e.setRng(n,s)})},Dn=e=>fe(e)&&e.tagName==="SPAN"&&e.getAttribute("data-mce-type")==="bookmark",Ll=(e=>t=>e===t)(xt),gr=e=>e!==""&&` \f
\r	\v`.indexOf(e)!==-1,dm=e=>!gr(e)&&!Ll(e)&&!dd(e),mm=e=>{const t=[];if(e)for(let n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},jI=e=>sn(e,t=>{const n=Sl(t);return n?[A.fromDom(n)]:[]}),qI=e=>mm(e).length>1,KI=e=>ve(jI(e),Ba),GI=e=>Kt(e,"td[data-mce-selected],th[data-mce-selected]"),nE=(e,t)=>{const n=GI(t);return n.length>0?n:KI(e)},mi=e=>nE(mm(e.selection.getSel()),A.fromDom(e.getBody())),Ka=(e,t)=>ya(e,"table",t),YI=e=>{const t=e.startContainer,n=e.startOffset;return q(t)?n===0?b.some(A.fromDom(t)):b.none():b.from(t.childNodes[n]).map(A.fromDom)},XI=e=>{const t=e.endContainer,n=e.endOffset;return q(t)?n===t.data.length?b.some(A.fromDom(t)):b.none():b.from(t.childNodes[n-1]).map(A.fromDom)},sE=e=>td(e).fold(te([e]),t=>[e].concat(sE(t))),pm=e=>nd(e).fold(te([e]),t=>He(t)==="br"?yo(t).map(n=>[e].concat(pm(n))).getOr([]):[e].concat(pm(t))),hm=(e,t)=>jt(YI(t),XI(t),(n,s)=>{const o=vt(sE(e),ae(Qe,n)),r=vt(pm(e),ae(Qe,s));return o.isSome()&&r.isSome()}).getOr(!1),gm=(e,t,n,s)=>{const o=n,r=new Pt(n,o),i=aa(e.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!Ze(["td","th","table"],d.toLowerCase()));let c=n;do{if(q(c)&&X.trim(c.data).length!==0){s?t.setStart(c,0):t.setEnd(c,c.data.length);return}if(i[c.nodeName]){s?t.setStartBefore(c):c.nodeName==="BR"?t.setEndBefore(c):t.setEndAfter(c);return}}while(c=s?r.next():r.prev());o.nodeName==="BODY"&&(s?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},Il=e=>{const t=e.selection.getSel();return j(t)&&t.rangeCount>0},bm=(e,t)=>{const n=mi(e);n.length>0?U(n,s=>{const o=s.dom,r=e.dom.createRng();r.setStartBefore(o),r.setEndAfter(o),t(r,!0)}):t(e.selection.getRng(),!1)},oE=(e,t,n)=>{const s=sC(e,t);n(s),e.moveToBookmark(s)},Ga=e=>pt(e==null?void 0:e.nodeType),ym=e=>fe(e)&&!Dn(e)&&!On(e)&&!tr(e),ZI=(e,t)=>{if(ym(t)&&!/^(TD|TH)$/.test(t.nodeName)){const n=e.getAttrib(t,"data-mce-selected"),s=parseInt(n,10);return!isNaN(s)&&s>0}else return!1},rE=(e,t,n)=>{const{selection:s,dom:o}=e,r=s.getNode(),i=rt(r);oE(s,!0,()=>{t()}),i&&rt(r)&&o.isChildOf(r,e.getBody())?e.selection.select(r):n(s.getStart())&&QI(o,s)},QI=(e,t)=>{var n,s;const o=t.getRng(),{startContainer:r,startOffset:i}=o,c=t.getNode();if(!ZI(e,c)&&fe(r)){const l=r.childNodes,d=e.getRoot();let p;if(i<l.length){const h=l[i];p=new Pt(h,(n=e.getParent(h,e.isBlock))!==null&&n!==void 0?n:d)}else{const h=l[l.length-1];p=new Pt(h,(s=e.getParent(h,e.isBlock))!==null&&s!==void 0?s:d),p.next(!0)}for(let h=p.current();h;h=p.next()){if(e.getContentEditable(h)==="false")return;if(q(h)&&!Cm(h)){o.setStart(h,0),t.setRng(o);return}}}},iE=(e,t,n)=>{if(e){const s=t?"nextSibling":"previousSibling";for(e=e[s];e;e=e[s])if(fe(e)||!Cm(e))return e}},vm=(e,t)=>!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||sr(e,t),pi=(e,t,n)=>e.schema.isValidChild(t,n),Cm=(e,t=!1)=>{if(j(e)&&q(e)){const n=t?e.data.replace(/ /g," "):e.data;return Jr(n)}else return!1},JI=e=>j(e)&&q(e)&&e.length===0,e$=(e,t)=>{const n="[data-mce-cef-wrappable]",s=dL(e),o=ua(s)?n:`${n},${s}`;return us(A.fromDom(t),o)},aE=(e,t)=>{const n=e.dom;return ym(t)&&n.getContentEditable(t)==="false"&&e$(e,t)&&n.select('[contenteditable="true"]',t).length===0},ko=(e,t)=>$e(e)?e(t):(j(t)&&(e=e.replace(/%(\w+)/g,(n,s)=>t[s]||n)),e),Em=(e,t)=>(e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()),_m=(e,t)=>{if(Fe(e))return null;{let n=String(e);return(t==="color"||t==="backgroundColor")&&(n=wa(n)),t==="fontWeight"&&e===700&&(n="bold"),t==="fontFamily"&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},$l=(e,t,n)=>{const s=e.getStyle(t,n);return _m(s,n)},cE=(e,t)=>{let n;return e.getParent(t,s=>fe(s)?(n=e.getStyle(s,"text-decoration"),!!n&&n!=="none"):!1),n},Ml=(e,t,n)=>e.getParents(t,n,e.getRoot()),Sm=(e,t,n)=>{const s=e.formatter.get(t);return j(s)&&ut(s,n)},t$=(e,t)=>Sm(e,t,s=>{const o=r=>$e(r)||r.length>1&&r.charAt(0)==="%";return ut(["styles","attributes"],r=>ct(s,r).exists(i=>{const c=Te(i)?i:jf(i);return ut(c,o)}))}),n$=(e,t,n)=>{const s=["inline","block","selector","attributes","styles","classes"],o=r=>aa(r,(i,c)=>ut(s,l=>l===c));return Sm(e,t,r=>{const i=o(r);return Sm(e,n,c=>{const l=o(c);return CO(i,l)})})},Fs=e=>Vr(e,"block"),s$=e=>Fs(e)&&e.wrapper===!0,o$=e=>Fs(e)&&e.wrapper!==!0,Pn=e=>Vr(e,"selector"),Ot=e=>Vr(e,"inline"),r$=e=>Pn(e)&&Ot(e)&&jr(ct(e,"mixed"),!0),wm=e=>Pn(e)&&e.expand!==!1&&!Ot(e),i$=e=>{const t=[];let n=e;for(;n;){if(q(n)&&n.data!==Rt||n.childNodes.length>1)return[];fe(n)&&t.push(n),n=n.firstChild}return t},lE=e=>i$(e).length>0,Am=e=>On(e.dom)&&lE(e.dom),hi=Dn,uE=Ml,fE=Cm,a$=vm,c$=e=>ht(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling,dE=(e,t)=>{let n=t;for(;n;){if(fe(n)&&e.getContentEditable(n))return e.getContentEditable(n)==="false"?n:t;n=n.parentNode}return t},mE=(e,t,n,s)=>{const o=t.data;if(e){for(let r=n;r>0;r--)if(s(o.charAt(r-1)))return r}else for(let r=n;r<o.length;r++)if(s(o.charAt(r)))return r;return-1},l$=(e,t,n)=>mE(e,t,n,s=>Ll(s)||gr(s)),u$=(e,t,n)=>mE(e,t,n,dm),pE=(e,t,n,s,o,r)=>{let i;const c=e.getParent(n,e.isBlock)||t,l=(p,h,g)=>{const v=lr(e),E=o?v.backwards:v.forwards;return b.from(E(p,h,(C,S)=>hi(C.parentNode)?-1:(i=C,g(o,C,S)),c))};return l(n,s,l$).bind(p=>r?l(p.container,p.offset+(o?-1:0),u$):b.some(p)).orThunk(()=>i?b.some({container:i,offset:o?0:i.length}):b.none())},hE=(e,t,n,s,o)=>{const r=s[o];q(s)&&ua(s.data)&&r&&(s=r);const i=uE(e,s);for(let c=0;c<i.length;c++)for(let l=0;l<t.length;l++){const d=t[l];if(!(j(d.collapsed)&&d.collapsed!==n.collapsed)&&Pn(d)&&e.is(i[c],d.selector))return i[c]}return s},gE=(e,t,n,s)=>{var o;let r=n;const i=e.getRoot(),c=t[0];if(Fs(c)&&(r=c.wrapper?null:e.getParent(n,c.block,i)),!r){const l=(o=e.getParent(n,"LI,TD,TH,SUMMARY"))!==null&&o!==void 0?o:i;r=e.getParent(q(n)?n.parentNode:n,d=>d!==i&&a$(e.schema,d),l)}if(r&&Fs(c)&&c.wrapper&&(r=uE(e,r,"ul,ol").reverse()[0]||r),!r)for(r=n;r&&r[s]&&!e.isBlock(r[s])&&(r=r[s],!Em(r,"br")););return r||n},bE=(e,t,n,s)=>{const o=n.parentNode;return j(n[s])?!1:o===t||Fe(o)||e.isBlock(o)?!0:bE(e,t,o,s)},Fl=(e,t,n,s,o)=>{let r=n;const i=o?"previousSibling":"nextSibling",c=e.getRoot();if(q(n)&&!fE(n)&&(o?s>0:s<n.data.length))return n;for(;r;){if(!t[0].block_expand&&e.isBlock(r))return r;for(let l=r[i];l;l=l[i]){const d=q(l)&&!bE(e,c,l,i);if(!hi(l)&&!c$(l)&&!fE(l,d))return r}if(r===c||r.parentNode===c){n=r;break}r=r.parentNode}return n},yE=e=>hi(e.parentNode)||hi(e),br=(e,t,n,s=!1)=>{let{startContainer:o,startOffset:r,endContainer:i,endOffset:c}=t;const l=n[0];return fe(o)&&o.hasChildNodes()&&(o=Ao(o,r),q(o)&&(r=0)),fe(i)&&i.hasChildNodes()&&(i=Ao(i,t.collapsed?c:c-1),q(i)&&(c=i.data.length)),o=dE(e,o),i=dE(e,i),yE(o)&&(o=hi(o)?o:o.parentNode,t.collapsed?o=o.previousSibling||o:o=o.nextSibling||o,q(o)&&(r=t.collapsed?o.length:0)),yE(i)&&(i=hi(i)?i:i.parentNode,t.collapsed?i=i.nextSibling||i:i=i.previousSibling||i,q(i)&&(c=t.collapsed?0:i.length)),t.collapsed&&(pE(e,e.getRoot(),o,r,!0,s).each(({container:h,offset:g})=>{o=h,r=g}),pE(e,e.getRoot(),i,c,!1,s).each(({container:h,offset:g})=>{i=h,c=g})),(Ot(l)||l.block_expand)&&((!Ot(l)||!q(o)||r===0)&&(o=Fl(e,n,o,r,!0)),(!Ot(l)||!q(i)||c===i.data.length)&&(i=Fl(e,n,i,c,!1))),wm(l)&&(o=hE(e,n,t,o,"previousSibling"),i=hE(e,n,t,i,"nextSibling")),(Fs(l)||Pn(l))&&(o=gE(e,n,o,"previousSibling"),i=gE(e,n,i,"nextSibling"),Fs(l)&&(e.isBlock(o)||(o=Fl(e,n,o,r,!0),q(o)&&(r=0)),e.isBlock(i)||(i=Fl(e,n,i,c,!1),q(i)&&(c=i.data.length)))),fe(o)&&o.parentNode&&(r=e.nodeIndex(o),o=o.parentNode),fe(i)&&i.parentNode&&(c=e.nodeIndex(i)+1,i=i.parentNode),{startContainer:o,startOffset:r,endContainer:i,endOffset:c}},Ya=(e,t,n)=>{var s;const o=t.startOffset,r=Ao(t.startContainer,o),i=t.endOffset,c=Ao(t.endContainer,i-1),l=S=>{const T=S[0];q(T)&&T===r&&o>=T.data.length&&S.splice(0,1);const k=S[S.length-1];return i===0&&S.length>0&&k===c&&q(k)&&S.splice(S.length-1,1),S},d=(S,T,k)=>{const N=[];for(;S&&S!==k;S=S[T])N.push(S);return N},p=(S,T)=>e.getParent(S,k=>k.parentNode===T,T),h=(S,T,k)=>{const N=k?"nextSibling":"previousSibling";for(let R=S,H=R.parentNode;R&&R!==T;R=H){H=R.parentNode;const K=d(R===S?R:R[N],N);K.length&&(k||K.reverse(),n(l(K)))}};if(r===c)return n(l([r]));const g=(s=e.findCommonAncestor(r,c))!==null&&s!==void 0?s:e.getRoot();if(e.isChildOf(r,c))return h(r,g,!0);if(e.isChildOf(c,r))return h(c,g);const v=p(r,g)||r,E=p(c,g)||c;h(r,v,!0);const C=d(v===r?v:v.nextSibling,"nextSibling",E===c?E.nextSibling:E);C.length&&n(l(C)),h(c,E)},f$=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],d$=e=>rn(e)&&Pa(e)===Rt,m$=(e,t,n,s)=>ds(t).fold(()=>"skipping",o=>s==="br"||d$(t)?"valid":h1(t)?"existing":On(t.dom)?"caret":ut(f$,r=>us(t,r))?"valid-block":!pi(e,n,s)||!pi(e,He(o),n)?"invalid-child":"valid"),p$=(e,t)=>{const n=br(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)},vE=(e,t,n,s,o,r)=>{const{uid:i=t,...c}=n;Kr(e,ka()),$t(e,`${ti()}`,i),$t(e,`${ar()}`,s);const{attributes:l={},classes:d=[]}=o(i,c);if(Ys(e,l),C1(e,d),r){d.length>0&&$t(e,`${Ra()}`,d.join(","));const p=un(l);p.length>0&&$t(e,`${Oa()}`,p.join(","))}},h$=e=>{pa(e,ka()),Mt(e,`${ti()}`),Mt(e,`${ar()}`),Mt(e,`${xa()}`);const t=Xs(e,`${Oa()}`).map(s=>s.split(",")).getOr([]),n=Xs(e,`${Ra()}`).map(s=>s.split(",")).getOr([]);U(t,s=>Mt(e,s)),E1(e,n),Mt(e,`${Ra()}`),Mt(e,`${Oa()}`)},CE=(e,t,n,s,o)=>{const r=A.fromTag("span",e);return vE(r,t,n,s,o,!1),r},g$=(e,t,n,s,o,r)=>{const i=[],c=CE(e.getDoc(),n,r,s,o),l=to(),d=()=>{l.clear()},p=()=>l.get().getOrThunk(()=>{const E=cr(c);return i.push(E),l.set(E),E}),h=E=>{U(E,g)},g=E=>{switch(m$(e,E,"span",He(E))){case"invalid-child":{d();const S=qt(E);h(S),d();break}case"valid-block":{d(),vE(E,n,r,s,o,!0);break}case"valid":{const S=p();wy(E,S);break}}},v=E=>{const C=Ue(E,A.fromDom);h(C)};return Ya(e.dom,t,E=>{d(),v(E)}),i},b$=(e,t,n,s)=>{e.undoManager.transact(()=>{const o=e.selection,r=o.getRng(),i=mi(e).length>0,c=Da("mce-annotation");if(r.collapsed&&!i&&p$(e,r),o.getRng().collapsed&&!i){const l=CE(e.getDoc(),c,s,t,n.decorate);al(l,xt),o.getRng().insertNode(l.dom),o.select(l.dom)}else oE(o,!1,()=>{bm(e,l=>{g$(e,l,c,t,n.decorate,s)})})})},EE=e=>{const t=y1();b1(e,t);const n=g1(e,t),s=nl("span"),o=r=>{U(r,i=>{s(i)?Co(i):h$(i)})};return{register:(r,i)=>{t.register(r,i)},annotate:(r,i)=>{t.lookup(r).each(c=>{b$(e,r,c,i)})},annotationChanged:(r,i)=>{n.addListener(r,i)},remove:r=>{vv(e,b.some(r)).each(({elements:i})=>{const c=e.selection.getBookmark();o(i),e.selection.moveToBookmark(c)})},removeAll:r=>{const i=e.selection.getBookmark();ot(_v(e,r),(c,l)=>{o(c)}),e.selection.moveToBookmark(i)},getAll:r=>{const i=_v(e,r);return ia(i,c=>Ue(c,l=>l.dom))}}},Xa=e=>({getBookmark:ae(VI,e),moveToBookmark:ae(WI,e)});Xa.isBookmarkNode=Dn;const _E=(e,t,n)=>n.collapsed?!1:ut(n.getClientRects(),s=>z1(s,e,t)),y$=(e,t)=>e.dispatch("PreProcess",t),v$=(e,t)=>e.dispatch("PostProcess",t),C$=e=>{e.dispatch("remove")},E$=e=>{e.dispatch("detach")},_$=(e,t)=>{e.dispatch("SwitchMode",{mode:t})},S$=(e,t,n,s,o)=>{e.dispatch("ObjectResizeStart",{target:t,width:n,height:s,origin:o})},w$=(e,t,n,s,o)=>{e.dispatch("ObjectResized",{target:t,width:n,height:s,origin:o})},A$=e=>{e.dispatch("PreInit")},T$=e=>{e.dispatch("PostRender")},N$=e=>{e.dispatch("Init")},k$=(e,t)=>{e.dispatch("PlaceholderToggle",{state:t})},SE=(e,t,n)=>{e.dispatch(t,n)},wE=(e,t,n,s)=>{e.dispatch("FormatApply",{format:t,node:n,vars:s})},AE=(e,t,n,s)=>{e.dispatch("FormatRemove",{format:t,node:n,vars:s})},x$=(e,t)=>e.dispatch("BeforeSetContent",t),TE=(e,t)=>e.dispatch("SetContent",t),R$=(e,t)=>e.dispatch("BeforeGetContent",t),NE=(e,t)=>e.dispatch("GetContent",t),O$=(e,t)=>{e.dispatch("AutocompleterStart",t)},D$=(e,t)=>{e.dispatch("AutocompleterUpdate",t)},Tm=(e,t)=>{e.dispatch("AutocompleterUpdateActiveRange",t)},P$=e=>{e.dispatch("AutocompleterEnd")},B$=(e,t,n)=>e.dispatch("PastePreProcess",{content:t,internal:n}),L$=(e,t,n)=>e.dispatch("PastePostProcess",{node:t,internal:n}),kE=(e,t)=>e.dispatch("PastePlainTextToggle",{state:t}),I$=(e,t)=>e.dispatch("EditableRootStateChange",{state:t}),ne={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:e=>e.shiftKey||e.ctrlKey||e.altKey||ne.metaKeyPressed(e),metaKeyPressed:e=>Ve.os.isMacOS()||Ve.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey},yr="data-mce-selected",$$="table,img,figure.image,hr,video,span.mce-preview-object,details",xE=Math.abs,Ul=Math.round,Nm={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},M$=e=>e.type==="longpress"||e.type.indexOf("touch")===0,RE=(e,t)=>{const n=t.dom,s=t.getDoc(),o=document,r=t.getBody();let i,c,l,d,p,h,g,v,E,C,S,T,k,N,R,H,K;const ee=J=>j(J)&&($y(J)||n.is(J,"figure.image")),I=J=>Bs(J)||n.hasClass(J,"mce-preview-object"),D=(J,ke)=>{if(M$(J)){const Oe=J.touches[0];return ee(J.target)&&!_E(Oe.clientX,Oe.clientY,ke)}else return ee(J.target)&&!_E(J.clientX,J.clientY,ke)},F=J=>{const ke=J.target;D(J,t.selection.getRng())&&!J.isDefaultPrevented()&&t.selection.select(ke)},ie=J=>n.hasClass(J,"mce-preview-object")&&j(J.firstElementChild)?[J,J.firstElementChild]:n.is(J,"figure.image")?[J.querySelector("img")]:[J],de=J=>{const ke=vC(t);return!ke||J.getAttribute("data-mce-resize")==="false"||J===t.getBody()?!1:n.hasClass(J,"mce-preview-object")&&j(J.firstElementChild)?us(A.fromDom(J.firstElementChild),ke):us(A.fromDom(J),ke)},Ne=(J,ke)=>{if(I(ke))return J.create("img",{src:Ve.transparentSrc});if(Ps(ke)){const wt=kt(d.name,"n")?on:go,Ke=ke.cloneNode(!0);return wt(J.select("tr",Ke)).each(Et=>{const Fn=J.select("td,th",Et);J.setStyle(Et,"height",null),U(Fn,_s=>J.setStyle(_s,"height",null))}),Ke}else return ke.cloneNode(!0)},Re=(J,ke,Oe)=>{if(j(Oe)){const wt=ie(J);U(wt,Ke=>{Ke.style[ke]||!t.schema.isValid(Ke.nodeName.toLowerCase(),ke)?n.setStyle(Ke,ke,Oe):n.setAttrib(Ke,ke,""+Oe)})}},ze=(J,ke,Oe)=>{Re(J,"width",ke),Re(J,"height",Oe)},Ge=J=>{let ke,Oe,wt,Ke,Et;ke=J.screenX-h,Oe=J.screenY-g,N=ke*d[2]+C,R=Oe*d[3]+S,N=N<5?5:N,R=R<5?5:R,(ee(i)||I(i))&&oL(t)!==!1?wt=!ne.modifierPressed(J):wt=ne.modifierPressed(J),wt&&(xE(ke)>xE(Oe)?(R=Ul(N*T),N=Ul(R/T)):(N=Ul(R/T),R=Ul(N*T))),ze(c,N,R),Ke=d.startPos.x+ke,Et=d.startPos.y+Oe,Ke=Ke>0?Ke:0,Et=Et>0?Et:0,n.setStyles(l,{left:Ke,top:Et,display:"block"}),l.innerHTML=N+" &times; "+R,d[2]<0&&c.clientWidth<=N&&n.setStyle(c,"left",v+(C-N)),d[3]<0&&c.clientHeight<=R&&n.setStyle(c,"top",E+(S-R)),ke=r.scrollWidth-H,Oe=r.scrollHeight-K,ke+Oe!==0&&n.setStyles(l,{left:Ke-ke,top:Et-Oe}),k||(S$(t,i,C,S,"corner-"+d.name),k=!0)},ft=()=>{const J=k;k=!1,J&&(Re(i,"width",N),Re(i,"height",R)),n.unbind(s,"mousemove",Ge),n.unbind(s,"mouseup",ft),o!==s&&(n.unbind(o,"mousemove",Ge),n.unbind(o,"mouseup",ft)),n.remove(c),n.remove(l),n.remove(p),It(i),J&&(w$(t,i,N,R,"corner-"+d.name),n.setAttrib(i,"style",n.getAttrib(i,"style"))),t.nodeChanged()},It=J=>{Q();const ke=n.getPos(J,r),Oe=ke.x,wt=ke.y,Ke=J.getBoundingClientRect(),Et=Ke.width||Ke.right-Ke.left,Fn=Ke.height||Ke.bottom-Ke.top;i!==J&&(Z(),i=J,N=R=0);const _s=t.dispatch("ObjectSelected",{target:J});de(J)&&!_s.isDefaultPrevented()?ot(Nm,(Zt,pn)=>{const Un=Hn=>{const me=ie(i)[0];h=Hn.screenX,g=Hn.screenY,C=me.clientWidth,S=me.clientHeight,T=S/C,d=Zt,d.name=pn,d.startPos={x:Et*Zt[0]+Oe,y:Fn*Zt[1]+wt},H=r.scrollWidth,K=r.scrollHeight,p=n.add(r,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(p,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),c=Ne(n,i),n.addClass(c,"mce-clonedresizable"),n.setAttrib(c,"data-mce-bogus","all"),c.contentEditable="false",n.setStyles(c,{left:Oe,top:wt,margin:0}),ze(c,Et,Fn),c.removeAttribute(yr),r.appendChild(c),n.bind(s,"mousemove",Ge),n.bind(s,"mouseup",ft),o!==s&&(n.bind(o,"mousemove",Ge),n.bind(o,"mouseup",ft)),l=n.add(r,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},C+" &times; "+S)};let hn=n.get("mceResizeHandle"+pn);hn&&n.remove(hn),hn=n.add(r,"div",{id:"mceResizeHandle"+pn,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+pn+"-resize; margin:0; padding:0"}),n.bind(hn,"mousedown",Hn=>{Hn.stopImmediatePropagation(),Hn.preventDefault(),Un(Hn)}),Zt.elm=hn,n.setStyles(hn,{left:Et*Zt[0]+Oe-hn.offsetWidth/2,top:Fn*Zt[1]+wt-hn.offsetHeight/2})}):Z(!1)},et=yl(It,0),Z=(J=!0)=>{et.cancel(),Q(),i&&J&&i.removeAttribute(yr),ot(Nm,(ke,Oe)=>{const wt=n.get("mceResizeHandle"+Oe);wt&&(n.unbind(wt),n.remove(wt))})},ue=(J,ke)=>n.isChildOf(J,ke),Me=J=>{if(k||t.removed||t.composing)return;const ke=J.type==="mousedown"?J.target:e.getNode(),Oe=Xr(A.fromDom(ke),$$).map(Ke=>Ke.dom).filter(Ke=>n.isEditable(Ke.parentElement)||Ke.nodeName==="IMG"&&n.isEditable(Ke)).getOrUndefined(),wt=j(Oe)?n.getAttrib(Oe,yr,"1"):"1";if(U(n.select(`img[${yr}],hr[${yr}]`),Ke=>{Ke.removeAttribute(yr)}),j(Oe)&&ue(Oe,r)&&t.hasFocus()){pe();const Ke=e.getStart(!0);if(ue(Ke,Oe)&&ue(e.getEnd(!0),Oe)){n.setAttrib(Oe,yr,wt),et.throttle(Oe);return}}Z()},Q=()=>{ot(Nm,J=>{J.elm&&(n.unbind(J.elm),delete J.elm)})},pe=()=>{try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return t.on("init",()=>{pe(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Me),t.on("keyup compositionend",J=>{i&&i.nodeName==="TABLE"&&Me(J)}),t.on("hide blur",Z),t.on("contextmenu longpress",F,!0)}),t.on("remove",Q),{isResizable:de,showResizeRect:It,hideResizeRect:Z,updateResizeRect:Me,destroy:()=>{et.cancel(),i=c=p=null}}},F$=(e,t)=>{t.fold(n=>{e.setStartBefore(n.dom)},(n,s)=>{e.setStart(n.dom,s)},n=>{e.setStartAfter(n.dom)})},U$=(e,t)=>{t.fold(n=>{e.setEndBefore(n.dom)},(n,s)=>{e.setEnd(n.dom,s)},n=>{e.setEndAfter(n.dom)})},OE=(e,t,n)=>{const s=e.document.createRange();return F$(s,t),U$(s,n),s},km=(e,t,n,s,o)=>{const r=e.document.createRange();return r.setStart(t.dom,n),r.setEnd(s.dom,o),r},Za=Ls.generate([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),DE=(e,t,n)=>t(A.fromDom(n.startContainer),n.startOffset,A.fromDom(n.endContainer),n.endOffset),H$=(e,t)=>t.match({domRange:n=>({ltr:te(n),rtl:b.none}),relative:(n,s)=>({ltr:Ns(()=>OE(e,n,s)),rtl:Ns(()=>b.some(OE(e,s,n)))}),exact:(n,s,o,r)=>({ltr:Ns(()=>km(e,n,s,o,r)),rtl:Ns(()=>b.some(km(e,o,r,n,s)))})}),z$=(e,t)=>{const n=t.ltr();return n.collapsed?t.rtl().filter(o=>o.collapsed===!1).map(o=>Za.rtl(A.fromDom(o.endContainer),o.endOffset,A.fromDom(o.startContainer),o.startOffset)).getOrThunk(()=>DE(e,Za.ltr,n)):DE(e,Za.ltr,n)},V$=(e,t)=>{const n=H$(e,t);return z$(e,n)};Za.ltr,Za.rtl;const PE={create:(e,t,n,s)=>({start:e,soffset:t,finish:n,foffset:s})},W$=(e,t,n)=>{var s;return b.from((s=e.caretPositionFromPoint)===null||s===void 0?void 0:s.call(e,t,n)).bind(o=>{if(o.offsetNode===null)return b.none();const r=e.createRange();return r.setStart(o.offsetNode,o.offset),r.collapse(),b.some(r)})},j$=(e,t,n)=>{var s;return b.from((s=e.caretRangeFromPoint)===null||s===void 0?void 0:s.call(e,t,n))},q$=(e,t,n)=>e.caretPositionFromPoint?W$(e,t,n):e.caretRangeFromPoint?j$(e,t,n):b.none(),K$=(e,t,n)=>{const s=e.document;return q$(s,t,n).map(o=>PE.create(A.fromDom(o.startContainer),o.startOffset,A.fromDom(o.endContainer),o.endOffset))},xm=Ls.generate([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),G$=(e,t,n,s)=>e.fold(t,n,s),Y$=e=>e.fold(St,St,St),X$=xm.before,Z$=xm.on,Q$=xm.after,so={before:X$,on:Z$,after:Q$,cata:G$,getStart:Y$},Hl=Ls.generate([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),J$=e=>Hl.exact(e.start,e.soffset,e.finish,e.foffset),eM=e=>e.match({domRange:t=>A.fromDom(t.startContainer),relative:(t,n)=>so.getStart(t),exact:(t,n,s,o)=>t}),tM=Hl.domRange,nM=Hl.relative,sM=Hl.exact,oM=e=>{const t=eM(e);return ga(t)},rM=PE.create,gi={domRange:tM,relative:nM,exact:sM,exactFromRange:J$,getWin:oM,range:rM},zl=(e,t)=>{const n=He(e);return n==="input"?so.after(e):Ze(["br","img"],n)?t===0?so.before(e):so.after(e):so.on(e,t)},iM=(e,t)=>{const n=e.fold(so.before,zl,so.after),s=t.fold(so.before,zl,so.after);return gi.relative(n,s)},BE=(e,t,n,s)=>{const o=zl(e,t),r=zl(n,s);return gi.relative(o,r)},aM=e=>e.match({domRange:t=>{const n=A.fromDom(t.startContainer),s=A.fromDom(t.endContainer);return BE(n,t.startOffset,s,t.endOffset)},relative:iM,exact:BE}),Rm=(e,t)=>{const s=document.createDocumentFragment();return U(e,o=>{s.appendChild(o.dom)}),A.fromDom(s)},cM=e=>{const t=gi.getWin(e).dom,n=(o,r,i,c)=>km(t,o,r,i,c),s=aM(e);return V$(t,s).match({ltr:n,rtl:n})},lM=(e,t,n)=>K$(e,t,n),LE=(e,t,n)=>{const s=ga(A.fromDom(n));return lM(s.dom,e,t).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined()},Om=(e,t)=>j(e)&&j(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset,uM=(e,t,n)=>{let s=e;for(;s&&s!==t;){if(n(s))return s;s=s.parentNode}return null},IE=(e,t,n)=>uM(e,t,n)!==null,fM=(e,t,n)=>IE(e,t,s=>s.nodeName===n),dM=(e,t)=>xn(e)&&!IE(e,t,On),$E=(e,t,n)=>{const s=t.parentNode;if(s){const o=new Pt(t,e.getParent(s,e.isBlock)||e.getRoot());let r;for(;r=o[n?"prev":"next"]();)if(ht(r))return!0}return!1},mM=(e,t)=>{var n;return((n=e.previousSibling)===null||n===void 0?void 0:n.nodeName)===t},pM=(e,t)=>{let n=t;for(;n&&n!==e;){if(rt(n))return!0;n=n.parentNode}return!1},Dm=(e,t,n,s,o)=>{const r=e.getRoot(),i=e.schema.getNonEmptyElements(),c=o.parentNode;let l,d;if(!c)return b.none();const p=e.getParent(c,e.isBlock)||r;if(s&&ht(o)&&t&&e.isEmpty(p))return b.some(L(c,e.nodeIndex(o)));const h=new Pt(o,p);for(;d=h[s?"prev":"next"]();){if(e.getContentEditableParent(d)==="false"||dM(d,r))return b.none();if(q(d)&&d.data.length>0)return fM(d,r,"A")?b.none():b.some(L(d,s?d.data.length:0));if(e.isBlock(d)||i[d.nodeName.toLowerCase()])return b.none();l=d}return Eo(l)?b.none():n&&l?b.some(L(l,0)):b.none()},ME=(e,t,n,s)=>{const o=e.getRoot();let r,i=!1,c=n?s.startContainer:s.endContainer,l=n?s.startOffset:s.endOffset;const d=fe(c)&&l===c.childNodes.length,p=e.schema.getNonEmptyElements();let h=n;if(xn(c))return b.none();if(fe(c)&&l>c.childNodes.length-1&&(h=!1),_a(c)&&(c=o,l=0),c===o){if(h&&(r=c.childNodes[l>0?l-1:0],r&&(xn(r)||p[r.nodeName]||Ps(r))))return b.none();if(c.hasChildNodes()){if(l=Math.min(!h&&l>0?l-1:l,c.childNodes.length-1),c=c.childNodes[l],l=q(c)&&d?c.data.length:0,!t&&c===o.lastChild&&Ps(c)||pM(o,c)||xn(c)||hd(c))return b.none();if(c.hasChildNodes()&&!Ps(c)){r=c;const g=new Pt(c,o);do{if(rt(r)||xn(r)){i=!1;break}if(q(r)&&r.data.length>0){l=h?0:r.data.length,c=r,i=!0;break}if(p[r.nodeName.toLowerCase()]&&!QD(r)){l=e.nodeIndex(r),c=r.parentNode,h||l++,i=!0;break}}while(r=h?g.next():g.prev())}}}return t&&(q(c)&&l===0&&Dm(e,d,t,!0,c).each(g=>{c=g.container(),l=g.offset(),i=!0}),fe(c)&&(r=c.childNodes[l],r||(r=c.childNodes[l-1]),r&&ht(r)&&!mM(r,"A")&&!$E(e,r,!1)&&!$E(e,r,!0)&&Dm(e,d,t,!0,r).each(g=>{c=g.container(),l=g.offset(),i=!0}))),h&&!t&&q(c)&&l===c.data.length&&Dm(e,d,t,!1,c).each(g=>{c=g.container(),l=g.offset(),i=!0}),i&&c?b.some(L(c,l)):b.none()},Vl=(e,t)=>{const n=t.collapsed,s=t.cloneRange(),o=L.fromRangeStart(t);return ME(e,n,!0,s).each(r=>{(!n||!L.isAbove(o,r))&&s.setStart(r.container(),r.offset())}),n||ME(e,n,!1,s).each(r=>{s.setEnd(r.container(),r.offset())}),n&&s.collapse(!0),Om(t,s)?b.none():b.some(s)},Wl=(e,t)=>e.splitText(t),jl=e=>{let t=e.startContainer,n=e.startOffset,s=e.endContainer,o=e.endOffset;if(t===s&&q(t)){if(n>0&&n<t.data.length)if(s=Wl(t,n),t=s.previousSibling,o>n){o=o-n;const r=Wl(s,o).previousSibling;t=s=r,o=r.data.length,n=0}else o=0}else if(q(t)&&n>0&&n<t.data.length&&(t=Wl(t,n),n=0),q(s)&&o>0&&o<s.data.length){const r=Wl(s,o).previousSibling;s=r,o=r.data.length}return{startContainer:t,startOffset:n,endContainer:s,endOffset:o}},vr=e=>({walk:(r,i)=>Ya(e,r,i),split:jl,expand:(r,i={type:"word"})=>{if(i.type==="word"){const c=br(e,r,[{inline:"span"}]),l=e.createRng();return l.setStart(c.startContainer,c.startOffset),l.setEnd(c.endContainer,c.endOffset),l}return r},normalize:r=>Vl(e,r).fold(tt,i=>(r.setStart(i.startContainer,i.startOffset),r.setEnd(i.endContainer,i.endOffset),!0))});vr.compareRanges=Om,vr.getCaretRangeFromPoint=LE,vr.getSelectedNode=Sl,vr.getNode=Ao;const hM=((e,t)=>{const n=(c,l)=>{if(!pt(l)&&!l.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+l);const d=c.dom;va(d)&&(d.style[e]=l+"px")},s=c=>{const l=t(c);if(l<=0||l===null){const d=Ds(c,e);return parseFloat(d)||0}return l},o=s,r=(c,l)=>Vt(l,(d,p)=>{const h=Ds(c,p),g=h===void 0?0:parseInt(h,10);return isNaN(g)?d:d+g},0);return{set:n,get:s,getOuter:o,aggregate:r,max:(c,l,d)=>{const p=r(c,d);return l>p?l-p:0}}})("height",e=>{const t=e.dom;return Yr(e)?t.getBoundingClientRect().height:t.offsetHeight}),gM=e=>hM.get(e),FE=()=>A.fromDom(document),UE=(e,t)=>e.view(t).fold(te([]),s=>{const o=e.owner(s),r=UE(e,o);return[s].concat(r)}),bM=(e,t)=>{const n=t.owner(e);return UE(t,n)};var yM=Object.freeze({__proto__:null,view:e=>{var t;return(e.dom===document?b.none():b.from((t=e.dom.defaultView)===null||t===void 0?void 0:t.frameElement)).map(A.fromDom)},owner:e=>bo(e)});const vM=e=>{const t=FE(),n=fd(t),s=bM(e,yM),o=ud(e),r=Ts(s,(i,c)=>{const l=ud(c);return{left:i.left+l.left,top:i.top+l.top}},{left:0,top:0});return Qr(r.left+o.left+n.left,r.top+o.top+n.top)},Pm=e=>He(e)==="textarea",CM=(e,t)=>e.dispatch("ScrollIntoView",t).isDefaultPrevented(),EM=(e,t)=>{e.dispatch("AfterScrollIntoView",t)},_M=(e,t)=>{const n=qt(e);if(n.length===0||Pm(e))return{element:e,offset:t};if(t<n.length&&!Pm(n[t]))return{element:n[t],offset:0};{const s=n[n.length-1];return Pm(s)?{element:e,offset:t}:He(s)==="img"?{element:s,offset:1}:rn(s)?{element:s,offset:Pa(s).length}:{element:s,offset:qt(s).length}}},HE=(e,t)=>{const n=MD(e),s=gM(e);return{element:e,bottom:n.top+s,height:s,pos:n,cleanup:t}},SM=(e,t)=>{const n=_M(e,t),s=A.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">'+Rt+"</span>");return fn(n.element,s),HE(s,()=>lt(s))},wM=e=>HE(A.fromDom(e),Se),zE=(e,t,n,s)=>{TM(e,(o,r)=>AM(e,t,n,s),n)},VE=(e,t,n,s,o)=>{const r={elm:s.element.dom,alignToTop:o};if(CM(e,r))return;const i=fd(t).top;n(e,t,i,s,o),EM(e,r)},AM=(e,t,n,s)=>{const o=A.fromDom(e.getBody()),r=A.fromDom(e.getDoc());ND(o);const i=SM(A.fromDom(n.startContainer),n.startOffset);VE(e,r,t,i,s),i.cleanup()},WE=(e,t,n,s)=>{const o=A.fromDom(e.getDoc());VE(e,o,n,wM(t),s)},TM=(e,t,n)=>{const s=n.startContainer,o=n.startOffset,r=n.endContainer,i=n.endOffset;t(A.fromDom(s),A.fromDom(r));const c=e.dom.createRng();c.setStart(s,o),c.setEnd(r,i),e.selection.setRng(n)},Bm=(e,t,n,s,o)=>{const r=t.pos;if(s)Ny(r.left,r.top,o);else{const i=r.top-n+t.height;Ny(-e.getBody().getBoundingClientRect().left,i,o)}},jE=(e,t,n,s,o,r)=>{const i=s+n,c=o.pos.top,l=o.bottom,d=l-c>=s;c<n?Bm(e,o,s,r!==!1,t):c>i?Bm(e,o,s,d?r!==!1:r===!0,t):l>i&&!d&&Bm(e,o,s,r===!0,t)},qE=(e,t,n,s,o)=>{const r=ga(t).dom.innerHeight;jE(e,t,n,r,s,o)},KE=(e,t,n,s,o)=>{const r=ga(t).dom.innerHeight;jE(e,t,n,r,s,o);const i=vM(s.element),c=Ry(window);i.top<c.y?ky(s.element,o!==!1):i.top>c.bottom&&ky(s.element,o===!0)},NM=(e,t,n)=>zE(e,qE,t,n),kM=(e,t,n)=>WE(e,t,qE,n),xM=(e,t,n)=>zE(e,KE,t,n),RM=(e,t,n)=>WE(e,t,KE,n),OM=(e,t,n)=>{(e.inline?kM:RM)(e,t,n)},Qa=(e,t,n)=>{(e.inline?NM:xM)(e,t,n)},GE=(e,t=!1)=>e.dom.focus({preventScroll:t}),YE=e=>{const t=vo(e).dom;return e.dom===t.activeElement},Lm=(e=FE())=>b.from(e.dom.activeElement).map(A.fromDom),DM=e=>Lm(vo(e)).filter(t=>e.dom.contains(t.dom)),XE=(e,t)=>{const n=rn(t)?Pa(t).length:qt(t).length+1;return e>n?n:e<0?0:e},PM=e=>gi.range(e.start,XE(e.soffset,e.start),e.finish,XE(e.foffset,e.finish)),ZE=(e,t)=>!ll(t.dom)&&(fs(e,t)||Qe(e,t)),QE=e=>t=>ZE(e,t.start)&&ZE(e,t.finish),BM=e=>e.inline||Ve.browser.isFirefox(),LM=e=>gi.range(A.fromDom(e.startContainer),e.startOffset,A.fromDom(e.endContainer),e.endOffset),IM=e=>{const t=e.getSelection();return(!t||t.rangeCount===0?b.none():b.from(t.getRangeAt(0))).map(LM)},$M=e=>{const t=ga(e);return IM(t.dom).filter(QE(e))},MM=(e,t)=>b.from(t).filter(QE(e)).map(PM),FM=e=>{const t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),b.some(t)}catch{return b.none()}},ql=e=>{const t=BM(e)?$M(A.fromDom(e.getBody())):b.none();e.bookmark=t.isSome()?t:e.bookmark},Im=e=>(e.bookmark?e.bookmark:b.none()).bind(n=>MM(A.fromDom(e.getBody()),n)).bind(FM),UM=e=>{Im(e).each(t=>e.selection.setRng(t))},JE={isEditorUIElement:e=>{const t=e.className.toString();return t.indexOf("tox-")!==-1||t.indexOf("mce-")!==-1}},HM=(e,t)=>(pt(t)||(t=0),setTimeout(e,t)),zM=(e,t)=>(pt(t)||(t=0),setInterval(e,t)),Bn={setEditorTimeout:(e,t,n)=>HM(()=>{e.removed||t()},n),setEditorInterval:(e,t,n)=>{const s=zM(()=>{e.removed?clearInterval(s):t()},n);return s}},VM=e=>e.type==="nodechange"&&e.selectionChange,WM=(e,t)=>{const n=()=>{t.throttle()};st.DOM.bind(document,"mouseup",n),e.on("remove",()=>{st.DOM.unbind(document,"mouseup",n)})},jM=(e,t)=>{e.on("mouseup touchend",n=>{t.throttle()})},qM=(e,t)=>{jM(e,t),e.on("keyup NodeChange AfterSetSelectionRange",n=>{VM(n)||ql(e)})},KM=e=>{const t=yl(()=>{ql(e)},0);e.on("init",()=>{e.inline&&WM(e,t),qM(e,t)}),e.on("remove",()=>{t.cancel()})};let bi;const $m=st.DOM,GM=e=>fe(e)&&JE.isEditorUIElement(e),Mm=e=>{const t=e.classList;return t!==void 0?t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"):!1},Kl=(e,t)=>{const n=mL(e);return $m.getParent(t,o=>GM(o)||(n?e.dom.is(o,n):!1))!==null},Fm=e=>{try{const t=vo(A.fromDom(e.getElement()));return Lm(t).fold(()=>document.body,n=>n.dom)}catch{return document.body}},YM=(e,t)=>{const n=t.editor;KM(n);const s=(o,r)=>{if(KL(o)&&o.inline!==!0){const i=A.fromDom(o.getContainer());r(i,"tox-edit-focus")}};n.on("focusin",()=>{const o=e.focusedEditor;Mm(Fm(n))&&s(n,Kr),o!==n&&(o&&o.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:o}),n.focus(!0))}),n.on("focusout",()=>{Bn.setEditorTimeout(n,()=>{const o=e.focusedEditor;(!Mm(Fm(n))||o!==n)&&s(n,pa),!Kl(n,Fm(n))&&o===n&&(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})}),bi||(bi=o=>{const r=e.activeEditor;r&&yy(o).each(i=>{const c=i;c.ownerDocument===document&&c!==document.body&&!Kl(r,c)&&e.focusedEditor===r&&(r.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)})},$m.bind(document,"focusin",bi))},XM=(e,t)=>{e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&bi&&($m.unbind(document,"focusin",bi),bi=null)},ZM=e=>{e.on("AddEditor",ae(YM,e)),e.on("RemoveEditor",ae(XM,e))},QM=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="true"),JM=(e,t)=>e.dom.getParent(t,n=>e.dom.getContentEditable(n)==="false")!==null,eF=e=>e.collapsed?b.from(Ao(e.startContainer,e.startOffset)).map(A.fromDom):b.none(),tF=(e,t)=>eF(t).bind(n=>D1(n)?b.some(n):fs(e,n)?b.none():b.some(e)),e_=(e,t)=>{tF(A.fromDom(e.getBody()),t).bind(n=>Xt(n.dom)).fold(()=>{e.selection.normalize()},n=>e.selection.setRng(n.toRange()))},Gl=e=>{if(e.setActive)try{e.setActive()}catch{e.focus()}else e.focus()},nF=e=>YE(e)||DM(e).isSome(),sF=e=>j(e.iframeElement)&&YE(A.fromDom(e.iframeElement)),oF=e=>{const t=e.getBody();return t&&nF(A.fromDom(t))},rF=e=>{const t=vo(A.fromDom(e.getElement()));return Lm(t).filter(n=>!Mm(n.dom)&&Kl(e,n.dom)).isSome()},yi=e=>e.inline?oF(e):sF(e),t_=e=>yi(e)||rF(e),iF=e=>{const t=e.selection,n=e.getBody();let s=t.getRng();e.quirks.refreshContentEditable();const o=i=>{Im(i).each(c=>{i.selection.setRng(c),s=c})};!yi(e)&&e.hasEditableRoot()&&o(e);const r=QM(e,t.getNode());if(r&&e.dom.isChildOf(r,n)){JM(e,r)||Gl(n),Gl(r),e.hasEditableRoot()||o(e),e_(e,s),Um(e);return}e.inline||(Ve.browser.isOpera()||Gl(n),e.getWin().focus()),(Ve.browser.isFirefox()||e.inline)&&(Gl(n),e_(e,s)),Um(e)},Um=e=>e.editorManager.setActive(e),aF=(e,t)=>{e.removed||(t?Um(e):iF(e))},n_=(e,t)=>t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer),s_=(e,t,n,s,o)=>{const r=n?t.startContainer:t.endContainer,i=n?t.startOffset:t.endOffset;return b.from(r).map(A.fromDom).map(c=>!s||!t.collapsed?Gr(c,o(c,i)).getOr(c):c).bind(c=>_n(c)?b.some(c):ds(c).filter(_n)).map(c=>c.dom).getOr(e)},o_=(e,t,n=!1)=>s_(e,t,!0,n,(s,o)=>Math.min(sd(s),o)),r_=(e,t,n=!1)=>s_(e,t,!1,n,(s,o)=>o>0?o-1:o),i_=(e,t)=>{const n=e;for(;e&&q(e)&&e.length===0;)e=t?e.nextSibling:e.previousSibling;return e||n},cF=(e,t)=>{if(!t)return e;let n=t.startContainer,s=t.endContainer;const o=t.startOffset,r=t.endOffset;let i=t.commonAncestorContainer;t.collapsed||(n===s&&r-o<2&&n.hasChildNodes()&&(i=n.childNodes[o]),q(n)&&q(s)&&(n.length===o?n=i_(n.nextSibling,!0):n=n.parentNode,r===0?s=i_(s.previousSibling,!1):s=s.parentNode,n&&n===s&&(i=n)));const c=q(i)?i.parentNode:i;return Js(c)?c:e},lF=(e,t,n,s)=>{const o=[],r=e.getRoot(),i=e.getParent(n||o_(r,t,t.collapsed),e.isBlock),c=e.getParent(s||r_(r,t,t.collapsed),e.isBlock);if(i&&i!==r&&o.push(i),i&&c&&i!==c){let l;const d=new Pt(i,r);for(;(l=d.next())&&l!==c;)e.isBlock(l)&&o.push(l)}return c&&i!==c&&c!==r&&o.push(c),o},uF=(e,t,n)=>b.from(t).bind(s=>b.from(s.parentNode).map(o=>{const r=e.nodeIndex(s),i=e.createRng();return i.setStart(o,r),i.setEnd(o,r+1),n&&(gm(e,i,s,!0),gm(e,i,s,!1)),i})),Hm=(e,t)=>Ue(t,n=>{const s=e.dispatch("GetSelectionRange",{range:n});return s.range!==n?s.range:n}),fF={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Yl=(e,t,n)=>{const s=n?"lastChild":"firstChild",o=n?"prev":"next";if(e[s])return e[s];if(e!==t){let r=e[o];if(r)return r;for(let i=e.parent;i&&i!==t;i=i.parent)if(r=i[o],r)return r}},dF=e=>{var t;const n=(t=e.value)!==null&&t!==void 0?t:"";if(!Jr(n))return!1;const s=e.parent;return!(s&&(s.name!=="span"||s.attr("style"))&&/^[ ]+$/.test(n))},a_=e=>{const t=e.name==="a"&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t};class tn{static create(t,n){const s=new tn(t,fF[t]||1);return n&&ot(n,(o,r)=>{s.attr(r,o)}),s}constructor(t,n){this.name=t,this.type=n,n===1&&(this.attributes=[],this.attributes.map={})}replace(t){const n=this;return t.parent&&t.remove(),n.insert(t,n),n.remove(),n}attr(t,n){const s=this;if(!G(t))return j(t)&&ot(t,(r,i)=>{s.attr(i,r)}),s;const o=s.attributes;if(o){if(n!==void 0){if(n===null){if(t in o.map){delete o.map[t];let r=o.length;for(;r--;)if(o[r].name===t)return o.splice(r,1),s}return s}if(t in o.map){let r=o.length;for(;r--;)if(o[r].name===t){o[r].value=n;break}}else o.push({name:t,value:n});return o.map[t]=n,s}return o.map[t]}}clone(){const t=this,n=new tn(t.name,t.type),s=t.attributes;if(s){const o=[];o.map={};for(let r=0,i=s.length;r<i;r++){const c=s[r];c.name!=="id"&&(o[o.length]={name:c.name,value:c.value},o.map[c.name]=c.value)}n.attributes=o}return n.value=t.value,n}wrap(t){const n=this;return n.parent&&(n.parent.insert(t,n),t.append(n)),n}unwrap(){const t=this;for(let n=t.firstChild;n;){const s=n.next;t.insert(n,t,!0),n=s}t.remove()}remove(){const t=this,n=t.parent,s=t.next,o=t.prev;return n&&(n.firstChild===t?(n.firstChild=s,s&&(s.prev=null)):o&&(o.next=s),n.lastChild===t?(n.lastChild=o,o&&(o.next=null)):s&&(s.prev=o),t.parent=t.next=t.prev=null),t}append(t){const n=this;t.parent&&t.remove();const s=n.lastChild;return s?(s.next=t,t.prev=s,n.lastChild=t):n.lastChild=n.firstChild=t,t.parent=n,t}insert(t,n,s){t.parent&&t.remove();const o=n.parent||this;return s?(n===o.firstChild?o.firstChild=t:n.prev&&(n.prev.next=t),t.prev=n.prev,t.next=n,n.prev=t):(n===o.lastChild?o.lastChild=t:n.next&&(n.next.prev=t),t.next=n.next,t.prev=n,n.next=t),t.parent=o,t}getAll(t){const n=this,s=[];for(let o=n.firstChild;o;o=Yl(o,n))o.name===t&&s.push(o);return s}children(){const t=this,n=[];for(let s=t.firstChild;s;s=s.next)n.push(s);return n}empty(){const t=this;if(t.firstChild){const n=[];for(let o=t.firstChild;o;o=Yl(o,t))n.push(o);let s=n.length;for(;s--;){const o=n[s];o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,n={},s){var o;const r=this;let i=r.firstChild;if(a_(r))return!1;if(i)do{if(i.type===1){if(i.attr("data-mce-bogus"))continue;if(t[i.name]||a_(i))return!1}if(i.type===8||i.type===3&&!dF(i)||i.type===3&&i.parent&&n[i.parent.name]&&Jr((o=i.value)!==null&&o!==void 0?o:"")||s&&s(i))return!1}while(i=Yl(i,r));return!0}walk(t){return Yl(this,null,t)}}const mF=X.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),c_=e=>G(e.nodeValue)&&e.nodeValue.includes(Rt),l_=e=>`${e.length===0?"":`${Ue(e,t=>`[${t}]`).join(",")},`}[data-mce-bogus="all"]`,pF=(e,t)=>t.querySelectorAll(l_(e)),u_=e=>document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,t=>c_(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),f_=e=>document.createTreeWalker(e,NodeFilter.SHOW_TEXT,t=>{if(c_(t)){const n=t.parentNode;return n&&Ae(mF,n.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}else return NodeFilter.FILTER_SKIP}),hF=e=>u_(e).nextNode()!==null,gF=e=>f_(e).nextNode()!==null,bF=(e,t)=>t.querySelector(l_(e))!==null,yF=(e,t)=>{U(pF(e,t),n=>{const s=A.fromDom(n);Sn(s,"data-mce-bogus")==="all"?lt(s):U(e,o=>{da(s,o)&&Mt(s,o)})})},d_=e=>{let t=e.nextNode();for(;t!==null;)t.nodeValue=null,t=e.nextNode()},vF=_t(d_,u_),CF=_t(d_,f_),m_=(e,t)=>{const n=[{condition:ae(bF,t),action:ae(yF,t)},{condition:hF,action:vF},{condition:gF,action:CF}];let s=e,o=!1;return U(n,({condition:r,action:i})=>{r(s)&&(o||(s=e.cloneNode(!0),o=!0),i(s))}),s},p_=e=>{const t=Kt(e,"[data-mce-bogus]");U(t,n=>{Sn(n,"data-mce-bogus")==="all"?lt(n):ur(n)?(fn(n,A.fromText(Ca)),lt(n)):Co(n)})},h_=e=>{const t=Kt(e,"input");U(t,n=>{Mt(n,"name")})},EF=(e,t)=>{const n=Yt(e),s=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s| |<br \\/>|)<\\/${n}>[\r
]*|<br \\/>[\r
]*)$`);return t.replace(s,"")},_F=(e,t)=>{const n=e.getDoc(),s=vo(A.fromDom(e.getBody())),o=A.fromTag("div",n);$t(o,"data-mce-bogus","all"),rl(o,{position:"fixed",left:"-9999999px",top:"0"}),al(o,t.innerHTML),p_(o),h_(o);const r=yD(s);At(r,o);const i=wn(o.dom.innerText);return lt(o),i},SF=(e,t,n)=>{let s;return t.format==="raw"?s=X.trim(wn(m_(n,e.serializer.getTempAttrs()).innerHTML)):t.format==="text"?s=_F(e,n):t.format==="tree"?s=e.serializer.serialize(n,t):s=EF(e,e.serializer.serialize(n,t)),t.format!=="text"&&!vl(A.fromDom(n))&&G(s)?X.trim(s):s},wF=(e,t)=>b.from(e.getBody()).fold(te(t.format==="tree"?new tn("body",11):""),n=>SF(e,t,n)),g_=X.makeMap,b_=e=>{const t=[];e=e||{};const n=e.indent,s=g_(e.indent_before||""),o=g_(e.indent_after||""),r=rr.getEncodeFunc(e.entity_encoding||"raw",e.entities),i=e.element_format!=="xhtml";return{start:(c,l,d)=>{if(n&&s[c]&&t.length>0){const p=t[t.length-1];p.length>0&&p!==`
`&&t.push(`
`)}if(t.push("<",c),l)for(let p=0,h=l.length;p<h;p++){const g=l[p];t.push(" ",g.name,'="',r(g.value,!0),'"')}if(!d||i?t[t.length]=">":t[t.length]=" />",d&&n&&o[c]&&t.length>0){const p=t[t.length-1];p.length>0&&p!==`
`&&t.push(`
`)}},end:c=>{let l;t.push("</",c,">"),n&&o[c]&&t.length>0&&(l=t[t.length-1],l.length>0&&l!==`
`&&t.push(`
`))},text:(c,l)=>{c.length>0&&(t[t.length]=l?c:r(c))},cdata:c=>{t.push("<![CDATA[",c,"]]>")},comment:c=>{t.push("<!--",c,"-->")},pi:(c,l)=>{l?t.push("<?",c," ",r(l),"?>"):t.push("<?",c,"?>"),n&&t.push(`
`)},doctype:c=>{t.push("<!DOCTYPE",c,">",n?`
`:"")},reset:()=>{t.length=0},getContent:()=>t.join("").replace(/\n$/,"")}},xo=(e={},t=_o())=>{const n=b_(e);return e.validate="validate"in e?e.validate:!0,{serialize:o=>{const r=e.validate,i={3:l=>{var d;n.text((d=l.value)!==null&&d!==void 0?d:"",l.raw)},8:l=>{var d;n.comment((d=l.value)!==null&&d!==void 0?d:"")},7:l=>{n.pi(l.name,l.value)},10:l=>{var d;n.doctype((d=l.value)!==null&&d!==void 0?d:"")},4:l=>{var d;n.cdata((d=l.value)!==null&&d!==void 0?d:"")},11:l=>{let d=l;if(d=d.firstChild)do c(d);while(d=d.next)}};n.reset();const c=l=>{var d;const p=i[l.type];if(p)p(l);else{const h=l.name,g=h in t.getVoidElements();let v=l.attributes;if(r&&v&&v.length>1){const E=[];E.map={};const C=t.getElementRule(l.name);if(C){for(let S=0,T=C.attributesOrder.length;S<T;S++){const k=C.attributesOrder[S];if(k in v.map){const N=v.map[k];E.map[k]=N,E.push({name:k,value:N})}}for(let S=0,T=v.length;S<T;S++){const k=v[S].name;if(!(k in E.map)){const N=v.map[k];E.map[k]=N,E.push({name:k,value:N})}}v=E}}if(n.start(h,v,g),nr(h))G(l.value)&&n.text(l.value,!0),n.end(h);else if(!g){let E=l.firstChild;if(E){(h==="pre"||h==="textarea")&&E.type===3&&((d=E.value)===null||d===void 0?void 0:d[0])===`
`&&n.text(`
`,!0);do c(E);while(E=E.next)}n.end(h)}}};return o.type===1&&!e.inner?c(o):o.type===3?i[3](o):i[11](o),n.getContent()}}},y_=new Set;U(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{y_.add(t)});const v_=new Set;U(["background-color"],t=>{v_.add(t)});const C_=["font","text-decoration","text-emphasis"],AF=(e,t)=>e.parseStyle(e.getAttrib(t,"style")),vi=(e,t)=>un(AF(e,t)),TF=e=>y_.has(e),NF=e=>v_.has(e),E_=(e,t)=>ut(vi(e,t),n=>TF(n)),kF=(e,t)=>E_(e,t)&&ut(vi(e,t),n=>NF(n)),xF=e=>ve(e,t=>ut(C_,n=>kt(t,n))),RF=(e,t,n)=>{const s=vi(e,t),o=vi(e,n),r=i=>{var c,l;const d=(c=e.getStyle(t,i))!==null&&c!==void 0?c:"",p=(l=e.getStyle(n,i))!==null&&l!==void 0?l:"";return ks(d)&&ks(p)&&d!==p};return ut(s,i=>{const c=l=>ut(l,d=>d===i);if(!c(o)&&c(C_)){const l=xF(o);return ut(l,r)}else return r(i)})},__=(e,t,n)=>b.from(n.container()).filter(q).exists(s=>{const o=e?0:-1;return t(s.data.charAt(n.offset()+o))}),zm=ae(__,!0,gr),Vm=ae(__,!1,gr),OF=e=>{const t=e.container();return q(t)&&(t.data.length===0||Cl(t.data)&&Xa.isBookmarkNode(t.parentNode))},Ro=(e,t)=>n=>rm(e?0:-1,n).filter(t).isSome(),S_=e=>$y(e)&&Ds(A.fromDom(e),"display")==="block",w_=e=>rt(e)&&!YD(e),DF=Ro(!0,S_),PF=Ro(!1,S_),Ja=Ro(!0,Bs),ec=Ro(!1,Bs),A_=Ro(!0,Ps),Wm=Ro(!1,Ps),Oo=Ro(!0,w_),Do=Ro(!1,w_),BF=e=>e.slice(0,-1),LF=(e,t,n)=>fs(t,e)?BF(hy(e,s=>n(s)||Qe(s,t))):[],T_=(e,t)=>LF(e,t,tt),oo=(e,t)=>[e].concat(T_(e,t)),jm=(e,t,n)=>YC(e,t,n,OF),IF=e=>t=>e.isBlock(He(t)),N_=(e,t,n)=>vt(oo(A.fromDom(t.container()),e),IF(n)),k_=(e,t,n,s)=>jm(e,t.dom,n).forall(o=>N_(t,n,s).fold(()=>!Is(o,n,t.dom),r=>!Is(o,n,t.dom)&&fs(r,A.fromDom(o.container())))),x_=(e,t,n,s)=>N_(t,n,s).fold(()=>jm(e,t.dom,n).forall(o=>!Is(o,n,t.dom)),o=>jm(e,o.dom,n).isNone()),qm=ae(x_,!1),R_=ae(x_,!0),$F=ae(k_,!1),MF=ae(k_,!0),FF=e=>Ol(e).exists(ur),Xl=(e,t,n,s)=>{const o=ve(oo(A.fromDom(n.container()),t),i=>s.isBlock(He(i))),r=on(o).getOr(t);return Rn(e,r.dom,n).filter(FF)},Km=(e,t,n)=>Ol(t).exists(ur)||Xl(!0,e,t,n).isSome(),Zl=(e,t,n)=>wI(t).exists(ur)||Xl(!1,e,t,n).isSome(),O_=ae(Xl,!1),UF=ae(Xl,!0),D_=e=>L.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd(),P_=(e,t,n)=>{const s=ve(oo(A.fromDom(t.container()),e),o=>n.isBlock(He(o)));return on(s).getOr(e)},B_=(e,t,n)=>D_(t)?Vm(t):Vm(t)||dn(P_(e,t,n).dom,t).exists(Vm),L_=(e,t,n)=>D_(t)?zm(t):zm(t)||cn(P_(e,t,n).dom,t).exists(zm),HF=e=>Ze(["pre","pre-wrap"],e),Gm=e=>Ol(e).bind(t=>Zo(t,_n)).exists(t=>HF(Ds(t,"white-space"))),zF=(e,t)=>dn(e.dom,t).isNone(),VF=(e,t)=>cn(e.dom,t).isNone(),WF=(e,t,n)=>zF(e,t)||VF(e,t)||qm(e,t,n)||R_(e,t,n)||Zl(e,t,n)||Km(e,t,n),jF=e=>j(e)&&rt(e)&&IC(e),I_=(e,t)=>n=>jF(new Pt(n,e)[t]()),qF=(e,t)=>{const n=cn(e.dom,t).getOr(t),s=I_(e.dom,"next");return t.isAtEnd()&&(s(t.container())||s(n.container()))},KF=(e,t)=>{const n=dn(e.dom,t).getOr(t),s=I_(e.dom,"prev");return t.isAtStart()&&(s(t.container())||s(n.container()))},$_=(e,t,n)=>Gm(t)?!1:WF(e,t,n)||B_(e,t,n)||L_(e,t,n),tc=(e,t,n)=>Gm(t)?!1:qm(e,t,n)||$F(e,t,n)||Zl(e,t,n)||B_(e,t,n)||KF(e,t),GF=e=>{const t=e.container(),n=e.offset();return q(t)&&n<t.data.length?L(t,n+1):e},nc=(e,t,n)=>Gm(t)?!1:R_(e,t,n)||MF(e,t,n)||Km(e,t,n)||L_(e,t,n)||qF(e,t),Ym=(e,t,n)=>tc(e,t,n)||nc(e,GF(t),n),M_=(e,t)=>Ll(e.charAt(t)),F_=(e,t)=>gr(e.charAt(t)),YF=e=>{const t=e.container();return q(t)&&Wt(t.data,xt)},XF=e=>{const t=e.split("");return Ue(t,(n,s)=>Ll(n)&&s>0&&s<t.length-1&&dm(t[s-1])&&dm(t[s+1])?" ":n).join("")},U_=(e,t,n,s)=>{const o=t.data,r=L(t,0);return!n&&M_(o,0)&&!Ym(e,r,s)?(t.data=" "+o.slice(1),!0):n&&F_(o,0)&&tc(e,r,s)?(t.data=xt+o.slice(1),!0):!1},ZF=e=>{const t=e.data,n=XF(t);return n!==t?(e.data=n,!0):!1},H_=(e,t,n,s)=>{const o=t.data,r=L(t,o.length-1);return!n&&M_(o,o.length-1)&&!Ym(e,r,s)?(t.data=o.slice(0,-1)+" ",!0):n&&F_(o,o.length-1)&&nc(e,r,s)?(t.data=o.slice(0,-1)+xt,!0):!1},QF=(e,t,n)=>{const s=t.container();if(!q(s))return b.none();if(YF(t)){const o=U_(e,s,!1,n)||ZF(s)||H_(e,s,!1,n);return qr(o,t)}else if(Ym(e,t,n)){const o=U_(e,s,!0,n)||H_(e,s,!0,n);return qr(o,t)}else return b.none()},JF=e=>{const t=A.fromDom(e.getBody());e.selection.isCollapsed()&&QF(t,L.fromRangeStart(e.selection.getRng()),e.schema).each(n=>{e.selection.setRng(n.toRange())})},z_=(e,t,n,s)=>{if(n===0)return;const o=A.fromDom(e),r=Zs(o,d=>s.isBlock(He(d))).getOr(o),i=e.data.slice(t,t+n),c=t+n>=e.data.length&&nc(r,L(e,e.data.length),s),l=t===0&&tc(r,L(e,0),s);e.replaceData(t,n,Ly(i,4,l,c))},Ql=(e,t,n)=>{const s=e.data.slice(t),o=s.length-OO(s).length;z_(e,t,o,n)},Xm=(e,t,n)=>{const s=e.data.slice(0,t),o=s.length-Db(s).length;z_(e,t-o,o,n)},Zm=(e,t,n,s,o=!0)=>{const r=Db(e.data).length,i=o?e:t,c=o?t:e;return o?i.appendData(c.data):i.insertData(0,c.data),lt(A.fromDom(c)),s&&Ql(i,r,n),i},eU=(e,t)=>{const n=e.container(),s=e.offset();return!L.isTextPosition(e)&&n===t.parentNode&&s>L.before(t).offset()},tU=(e,t)=>eU(t,e)?L(t.container(),t.offset()-1):t,nU=e=>q(e)?L(e,0):L.before(e),sU=e=>q(e)?L(e,e.data.length):L.after(e),V_=e=>gs(e.previousSibling)?b.some(sU(e.previousSibling)):e.previousSibling?Xn(e.previousSibling):b.none(),W_=e=>gs(e.nextSibling)?b.some(nU(e.nextSibling)):e.nextSibling?Xt(e.nextSibling):b.none(),oU=(e,t)=>b.from(t.previousSibling?t.previousSibling:t.parentNode).bind(n=>dn(e,L.before(n))).orThunk(()=>cn(e,L.after(t))),rU=(e,t)=>cn(e,L.after(t)).orThunk(()=>dn(e,L.before(t))),iU=(e,t)=>V_(t).orThunk(()=>W_(t)).orThunk(()=>oU(e,t)),aU=(e,t)=>W_(t).orThunk(()=>V_(t)).orThunk(()=>rU(e,t)),cU=(e,t,n)=>e?aU(t,n):iU(t,n),lU=(e,t,n)=>cU(e,t,n).map(ae(tU,n)),j_=(e,t,n)=>{n.fold(()=>{e.focus()},s=>{e.selection.setRng(s.toRange(),t)})},uU=e=>t=>t.dom===e,fU=(e,t)=>t&&Ae(e.schema.getBlockElements(),He(t)),dU=(e,t,n)=>{if(Gt(e,t)){const s=A.fromHtml('<br data-mce-bogus="1">');return n?U(qt(t),o=>{Am(o)||lt(o)}):Zr(t),At(t,s),b.some(L.before(s.dom))}else return b.none()},mU=(e,t,n,s)=>{const o=yo(e).filter(rn),r=ba(e).filter(rn);return lt(e),GO(o,r,t,(i,c,l)=>{const d=i.dom,p=c.dom,h=d.data.length;return Zm(d,p,n,s),l.container()===p?L(d,h):l}).orThunk(()=>(s&&(o.each(i=>Xm(i.dom,i.dom.length,n)),r.each(i=>Ql(i.dom,0,n))),t))},pU=(e,t)=>Ae(e.schema.getTextInlineElements(),He(t)),Cr=(e,t,n,s=!0,o=!1)=>{const r=lU(t,e.getBody(),n.dom),i=Zs(n,ae(fU,e),uU(e.getBody())),c=mU(n,r,e.schema,pU(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):i.bind(l=>dU(e.schema,l,o)).fold(()=>{s&&j_(e,t,c)},l=>{s&&j_(e,t,b.some(l))})},hU=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,gU=e=>hU.test(e),Er=(e,t)=>us(A.fromDom(t),sL(e))&&!sr(e.schema,t)&&e.dom.isEditable(t),q_=e=>{var t;return st.DOM.getStyle(e,"direction",!0)==="rtl"||gU((t=e.textContent)!==null&&t!==void 0?t:"")},bU=(e,t,n)=>ve(st.DOM.getParents(n.container(),"*",t),e),Po=(e,t,n)=>{const s=bU(e,t,n);return b.from(s[s.length-1])},yU=(e,t,n)=>{const s=No(t,e),o=No(n,e);return j(s)&&s===o},vU=e=>Ud(e)||Hd(e),Ln=(e,t)=>{const n=t.container(),s=t.offset();return e?wo(n)?q(n.nextSibling)?L(n.nextSibling,0):L.after(n):Ud(t)?L(n,s+1):t:wo(n)?q(n.previousSibling)?L(n.previousSibling,n.previousSibling.data.length):L.before(n):Hd(t)?L(n,s-1):t},K_=ae(Ln,!0),G_=ae(Ln,!1),Y_=(e,t)=>{const n=s=>s.stopImmediatePropagation();e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},CU=e=>{e.execCommand("delete")},Jl=e=>Y_(e,"Delete"),X_=e=>Y_(e,"ForwardDelete"),EU=e=>t=>jr(ds(t),e,Qe),_U=e=>xv(e)||si(e),eu=(e,t)=>fs(e,t)?Zo(t,_U,EU(e)):b.none(),Qm=(e,t=!0)=>{e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Z_=(e,t,n)=>jt(Xt(n),Xn(n),(s,o)=>{const r=Ln(!0,s),i=Ln(!1,o),c=Ln(!1,t);return e?cn(n,c).exists(l=>l.isEqual(i)&&t.isEqual(r)):dn(n,c).exists(l=>l.isEqual(r)&&t.isEqual(i))}).getOr(!0),Q_=e=>(nD(e)?yo(e):nd(e)).bind(Q_).orThunk(()=>b.some(e)),J_=(e,t,n,s=!0)=>{var o;t.deleteContents();const r=Q_(n).getOr(n),i=A.fromDom((o=e.dom.getParent(r.dom,e.dom.isBlock))!==null&&o!==void 0?o:n.dom);if(i.dom===e.getBody()?Qm(e,s):Gt(e.schema,i,{checkRootAsContent:!1})&&(So(i),s&&e.selection.setCursorLocation(i.dom,0)),!Qe(n,i)){const c=jr(ds(i),n)?[]:gD(i);U(c.concat(qt(n)),l=>{!Qe(l,i)&&!fs(l,i)&&Gt(e.schema,l)&&lt(l)})}},SU=e=>t=>Qe(e,t),Jm=e=>Kt(e,"td,th"),eS=(e,t)=>Ka(A.fromDom(e),t),wU=e=>jt(e.startTable,e.endTable,(t,n)=>{const s=Py(t,r=>Qe(r,n)),o=Py(n,r=>Qe(r,t));return!s&&!o?e:{...e,startTable:s?b.none():e.startTable,endTable:o?b.none():e.endTable,isSameTable:!1,isMultiTable:!1}}).getOr(e),AU=e=>wU(e),TU=(e,t)=>{const n=eS(e.startContainer,t),s=eS(e.endContainer,t),o=n.isSome(),r=s.isSome(),i=jt(n,s,Qe).getOr(!1);return AU({startTable:n,endTable:s,isStartInTable:o,isEndInTable:r,isSameTable:i,isMultiTable:!i&&o&&r})},ep=(e,t)=>({start:e,end:t}),NU=(e,t,n)=>({rng:e,table:t,cells:n}),sc=Ls.generate([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),tu=(e,t)=>Xr(A.fromDom(e),"td,th",t),tS=e=>!Qe(e.start,e.end),nS=(e,t)=>Ka(e.start,t).bind(n=>Ka(e.end,t).bind(s=>qr(Qe(n,s),n))),kU=(e,t)=>!tS(e)&&nS(e,t).exists(n=>{const s=n.dom.rows;return s.length===1&&s[0].cells.length===1}),xU=(e,t)=>{const n=tu(e.startContainer,t),s=tu(e.endContainer,t);return jt(n,s,ep)},RU=e=>t=>Ka(t,e).bind(n=>go(Jm(n)).map(s=>ep(t,s))),OU=e=>t=>Ka(t,e).bind(n=>on(Jm(n)).map(s=>ep(s,t))),tp=e=>t=>nS(t,e).map(n=>NU(t,n,Jm(n))),sS=(e,t,n,s)=>{if(n.collapsed||!e.forall(tS))return b.none();if(t.isSameTable){const o=e.bind(tp(s));return b.some({start:o,end:o})}else{const o=tu(n.startContainer,s),r=tu(n.endContainer,s),i=o.bind(RU(s)).bind(tp(s)),c=r.bind(OU(s)).bind(tp(s));return b.some({start:i,end:c})}},oS=(e,t)=>ho(e,n=>Qe(n,t)),np=e=>jt(oS(e.cells,e.rng.start),oS(e.cells,e.rng.end),(t,n)=>e.cells.slice(t,n+1)),DU=(e,t,n)=>e.exists(s=>kU(s,n)&&hm(s.start,t)),rS=(e,t)=>{const{startTable:n,endTable:s}=t,o=e.cloneRange();return n.each(r=>o.setStartAfter(r.dom)),s.each(r=>o.setEndBefore(r.dom)),o},PU=(e,t,n,s)=>sS(e,t,n,s).bind(({start:o,end:r})=>o.or(r)).bind(o=>{const{isSameTable:r}=t,i=np(o).getOr([]);if(r&&o.cells.length===i.length)return b.some(sc.fullTable(o.table));if(i.length>0){if(r)return b.some(sc.partialTable(i,b.none()));{const c=rS(n,t);return b.some(sc.partialTable(i,b.some({...t,rng:c})))}}else return b.none()}),BU=(e,t,n,s)=>sS(e,t,n,s).bind(({start:o,end:r})=>{const i=o.bind(np).getOr([]),c=r.bind(np).getOr([]);if(i.length>0&&c.length>0){const l=rS(n,t);return b.some(sc.multiTable(i,c,l))}else return b.none()}),LU=(e,t)=>{const n=SU(e),s=xU(t,n),o=TU(t,n);return DU(s,t,n)?s.map(r=>sc.singleCellTable(t,r.start)):o.isMultiTable?BU(s,o,t,n):PU(s,o,t,n)},iS=e=>U(e,t=>{Mt(t,"contenteditable"),So(t)}),IU=(e,t)=>b.from(e.dom.getParent(t,e.dom.isBlock)).map(A.fromDom),$U=(e,t,n)=>{n.each(s=>{t?lt(s):(So(s),e.selection.setCursorLocation(s.dom,0))})},sp=(e,t,n,s)=>{const o=n.cloneRange();s?(o.setStart(n.startContainer,n.startOffset),o.setEndAfter(t.dom.lastChild)):(o.setStartBefore(t.dom.firstChild),o.setEnd(n.endContainer,n.endOffset)),op(e,o,t,!1).each(r=>r())},aS=e=>{const t=mi(e),n=A.fromDom(e.selection.getNode());fl(n.dom)&&Gt(e.schema,n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&ut(t,s=>Qe(s,n))&&$t(n,"data-mce-selected","1")},cS=(e,t,n)=>b.some(()=>{const s=e.selection.getRng(),o=n.bind(({rng:r,isStartInTable:i})=>{const c=IU(e,i?r.endContainer:r.startContainer);r.deleteContents(),$U(e,i,c.filter(ae(Gt,e.schema)));const l=i?t[0]:t[t.length-1];return sp(e,l,s,i),Gt(e.schema,l)?b.none():b.some(i?t.slice(1):t.slice(0,-1))}).getOr(t);iS(o),aS(e)}),MU=(e,t,n,s)=>b.some(()=>{const o=e.selection.getRng(),r=t[0],i=n[n.length-1];sp(e,r,o,!0),sp(e,i,o,!1);const c=Gt(e.schema,r)?t:t.slice(1),l=Gt(e.schema,i)?n:n.slice(0,-1);iS(c.concat(l)),s.deleteContents(),aS(e)}),op=(e,t,n,s=!0)=>b.some(()=>{J_(e,t,n,s)}),FU=(e,t)=>b.some(()=>Cr(e,!1,t)),UU=(e,t,n)=>LU(t,n).bind(s=>s.fold(ae(op,e),ae(FU,e),ae(cS,e),ae(MU,e))),HU=(e,t)=>nu(e,t),zU=(e,t,n,s)=>rp(t,s).fold(()=>UU(e,t,n),o=>HU(e,o)),VU=(e,t,n)=>{const s=A.fromDom(e.getBody()),o=e.selection.getRng();return n.length!==0?cS(e,n,b.none()):zU(e,s,o,t)},lS=(e,t)=>vt(oo(t,e),Ba),rp=(e,t)=>vt(oo(t,e),nl("caption")),WU=(e,t,n,s,o)=>fi(n,e.getBody(),o).bind(r=>lS(t,A.fromDom(r.getNode())).bind(i=>Qe(i,s)?b.none():b.some(Se))),nu=(e,t)=>b.some(()=>{So(t),e.selection.setCursorLocation(t.dom,0)}),jU=(e,t,n,s)=>Xt(e.dom).bind(o=>Xn(e.dom).map(r=>t?n.isEqual(o)&&s.isEqual(r):n.isEqual(r)&&s.isEqual(o))).getOr(!0),qU=(e,t)=>nu(e,t),KU=(e,t,n)=>rp(e,A.fromDom(n.getNode())).fold(()=>b.some(Se),s=>qr(!Qe(s,t),Se)),GU=(e,t,n,s,o)=>fi(n,e.getBody(),o).fold(()=>b.some(Se),r=>jU(s,n,o,r)?qU(e,s):KU(t,s,r)),YU=(e,t,n,s)=>{const o=L.fromRangeStart(e.selection.getRng());return lS(n,s).bind(r=>Gt(e.schema,r,{checkRootAsContent:!1})?nu(e,r):WU(e,n,t,r,o))},XU=(e,t,n,s)=>{const o=L.fromRangeStart(e.selection.getRng());return Gt(e.schema,s)?nu(e,s):GU(e,n,t,s,o)},uS=(e,t)=>e?A_(t):Wm(t),ZU=(e,t)=>{const n=L.fromRangeStart(e.selection.getRng());return uS(t,n)||Rn(t,e.getBody(),n).exists(s=>uS(t,s))},QU=(e,t,n)=>{const s=A.fromDom(e.getBody());return rp(s,n).fold(()=>YU(e,t,s,n).orThunk(()=>qr(ZU(e,t),Se)),o=>XU(e,t,s,o))},ip=(e,t)=>{const n=A.fromDom(e.selection.getStart(!0)),s=mi(e);return e.selection.isCollapsed()&&s.length===0?QU(e,t,n):VU(e,n,s)},_r=(e,t)=>{let n=t;for(;n&&n!==e;){if(Yn(n)||rt(n))return n;n=n.parentNode}return null},JU=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],eH=X.each,ap=e=>{const t=e.dom,n=new Set(e.serializer.getTempAttrs()),s=(r,i)=>{if(r.nodeName!==i.nodeName||r.nodeType!==i.nodeType)return!1;const c=d=>{const p={};return eH(t.getAttribs(d),h=>{const g=h.nodeName.toLowerCase();g!=="style"&&!o(g)&&(p[g]=t.getAttrib(d,g))}),p},l=(d,p)=>{for(const h in d)if(Ae(d,h)){const g=p[h];if(qe(g)||d[h]!==g)return!1;delete p[h]}for(const h in p)if(Ae(p,h))return!1;return!0};return fe(r)&&fe(i)&&(!l(c(r),c(i))||!l(t.parseStyle(t.getAttrib(r,"style")),t.parseStyle(t.getAttrib(i,"style"))))?!1:!Dn(r)&&!Dn(i)},o=r=>ut(JU,i=>kt(r,i))||n.has(r);return{compare:s,isAttributeInternal:o}},fS=e=>["h1","h2","h3","h4","h5","h6"].includes(e.name),tH=e=>e.name==="summary",nH=(e,t)=>{let n=e;for(;n=n.walk();)t(n)},dS=(e,t,n,s)=>{const o=n.name;for(let r=0,i=e.length;r<i;r++){const c=e[r];if(c.name===o){const l=s.nodes[o];l?l.nodes.push(n):s.nodes[o]={filter:c,nodes:[n]}}}if(n.attributes)for(let r=0,i=t.length;r<i;r++){const c=t[r],l=c.name;if(l in n.attributes.map){const d=s.attributes[l];d?d.nodes.push(n):s.attributes[l]={filter:c,nodes:[n]}}}},sH=(e,t,n)=>{const s={nodes:{},attributes:{}};return n.firstChild&&nH(n,o=>{dS(e,t,o,s)}),s},mS=(e,t)=>{const n=(s,o)=>{ot(s,r=>{const i=En(r.nodes);U(r.filter.callbacks,c=>{for(let l=i.length-1;l>=0;l--){const d=i[l];(!(o?d.attr(r.filter.name)!==void 0:d.name===r.filter.name)||Fe(d.parent))&&i.splice(l,1)}i.length>0&&c(i,r.filter.name,t)})})};n(e.nodes,!1),n(e.attributes,!0)},pS=(e,t,n,s={})=>{const o=sH(e,t,n);mS(o,s)},cp=(e,t,n,s)=>{if((e.pad_empty_with_br||t.insert)&&n(s)){const r=new tn("br",1);t.insert&&r.attr("data-mce-bogus","1"),s.empty().append(r)}else s.empty().append(new tn("#text",3)).value=xt},oH=e=>{var t;return hS(e,"#text")&&((t=e==null?void 0:e.firstChild)===null||t===void 0?void 0:t.value)===xt},hS=(e,t)=>{const n=e==null?void 0:e.firstChild;return j(n)&&n===e.lastChild&&n.name===t},rH=(e,t)=>{const n=e.getElementRule(t.name);return(n==null?void 0:n.paddEmpty)===!0},oc=(e,t,n,s)=>s.isEmpty(t,n,o=>rH(e,o)),iH=(e,t)=>j(e)&&(t(e)||e.name==="br"),aH=e=>{let t;for(let n=e;n;n=n.parent){const s=n.attr("contenteditable");if(s==="false")break;s==="true"&&(t=n)}return b.from(t)},lp=(e,t,n=e.parent)=>{if(t.getSpecialElements()[e.name])e.empty().remove();else{const s=e.children();for(const o of s)n&&!t.isValidChild(n.name,o.name)&&lp(o,t,n);e.unwrap()}},up=(e,t,n,s=Se)=>{const o=t.getTextBlockElements(),r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),c=X.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,d=p=>p!==n&&!c[p.name];for(let p=0;p<e.length;p++){const h=e[p];let g,v,E;if(!h.parent||l.has(h))continue;if(o[h.name]&&h.parent.name==="li"){let S=h.next;for(;S&&o[S.name];){S.name="li",l.add(S),h.parent.insert(S,h.parent);S=S.next}h.unwrap();continue}const C=[h];for(g=h.parent;g&&!t.isValidChild(g.name,h.name)&&d(g);g=g.parent)C.push(g);if(g&&C.length>1)if(fp(t,h,g))lp(h,t);else{C.reverse(),v=C[0].clone(),s(v);let S=v;for(let T=0;T<C.length-1;T++){t.isValidChild(S.name,C[T].name)&&T>0?(E=C[T].clone(),s(E),S.append(E)):E=S;for(let k=C[T].firstChild;k&&k!==C[T+1];){const N=k.next;E.append(k),k=N}S=E}oc(t,r,i,v)?g.insert(h,C[0],!0):(g.insert(v,C[0],!0),g.insert(h,v)),g=C[0],(oc(t,r,i,g)||hS(g,"br"))&&g.empty().remove()}else if(h.parent){if(h.name==="li"){let S=h.prev;if(S&&(S.name==="ul"||S.name==="ol")){S.append(h);continue}if(S=h.next,S&&(S.name==="ul"||S.name==="ol")&&S.firstChild){S.insert(h,S.firstChild,!0);continue}const T=new tn("ul",1);s(T),h.wrap(T);continue}if(t.isValidChild(h.parent.name,"div")&&t.isValidChild("div",h.name)){const S=new tn("div",1);s(S),h.wrap(S)}else lp(h,t)}}},cH=(e,t)=>{let n=e;for(;n;){if(n.name===t)return!0;n=n.parent}return!1},fp=(e,t,n=t.parent)=>n?e.children[t.name]&&!e.isValidChild(n.name,t.name)||t.name==="a"&&cH(n,"a")?!0:tH(n)&&fS(t)?!((n==null?void 0:n.firstChild)===t&&(n==null?void 0:n.lastChild)===t):!1:!1,lH=(e,t,n,s)=>{const o=document.createRange();return o.setStart(e,t),o.setEnd(n,s),o},uH=e=>{const t=L.fromRangeStart(e),n=L.fromRangeEnd(e),s=e.commonAncestorContainer;return Rn(!1,s,n).map(o=>!Is(t,n,s)&&Is(t,o,s)?lH(t.container(),t.offset(),o.container(),o.offset()):e).getOr(e)},dp=e=>e.collapsed?e:uH(e),fH=e=>j(e.firstChild)&&e.firstChild===e.lastChild,dH=e=>e.name==="br"||e.value===xt,mH=(e,t)=>e.getBlockElements()[t.name]&&fH(t)&&dH(t.firstChild),pH=(e,t)=>{const n=e.getNonEmptyElements();return j(t)&&(t.isEmpty(n)||mH(e,t))},hH=(e,t)=>{let n=t.firstChild,s=t.lastChild;return n&&n.name==="meta"&&(n=n.next),s&&s.attr("id")==="mce_marker"&&(s=s.prev),pH(e,s)&&(s=s==null?void 0:s.prev),!n||n!==s?!1:n.name==="ul"||n.name==="ol"},gH=e=>{var t,n;const s=e.firstChild,o=e.lastChild;return s&&s.nodeName==="META"&&((t=s.parentNode)===null||t===void 0||t.removeChild(s)),o&&o.id==="mce_marker"&&((n=o.parentNode)===null||n===void 0||n.removeChild(o)),e},bH=(e,t,n)=>{const s=t.serialize(n),o=e.createFragment(s);return gH(o)},yH=e=>{var t;return ve((t=e==null?void 0:e.childNodes)!==null&&t!==void 0?t:[],n=>n.nodeName==="LI")},vH=e=>e.data===xt||ht(e),CH=e=>j(e==null?void 0:e.firstChild)&&e.firstChild===e.lastChild&&vH(e.firstChild),EH=e=>!e.firstChild||CH(e),_H=e=>e.length>0&&EH(e[e.length-1])?e.slice(0,-1):e,mp=(e,t)=>{const n=e.getParent(t,e.isBlock);return n&&n.nodeName==="LI"?n:null},SH=(e,t)=>!!mp(e,t),wH=(e,t)=>{const n=t.cloneRange(),s=t.cloneRange();return n.setStartBefore(e),s.setEndAfter(e),[n.cloneContents(),s.cloneContents()]},AH=(e,t)=>{const n=L.before(e),o=Ms(t).next(n);return o?o.toRange():null},gS=(e,t)=>{const n=L.after(e),o=Ms(t).prev(n);return o?o.toRange():null},TH=(e,t,n,s)=>{const o=wH(e,s),r=e.parentNode;return r&&(r.insertBefore(o[0],e),X.each(t,i=>{r.insertBefore(i,e)}),r.insertBefore(o[1],e),r.removeChild(e)),gS(t[t.length-1],n)},NH=(e,t,n)=>{const s=e.parentNode;return s&&X.each(t,o=>{s.insertBefore(o,e)}),AH(e,n)},kH=(e,t,n,s)=>(s.insertAfter(t.reverse(),e),gS(t[0],n)),xH=(e,t,n,s)=>{const o=bH(t,e,s),r=mp(t,n.startContainer),i=_H(yH(o.firstChild)),c=1,l=2,d=t.getRoot(),p=h=>{const g=L.fromRangeStart(n),v=Ms(t.getRoot()),E=h===c?v.prev(g):v.next(g),C=E==null?void 0:E.getNode();return C?mp(t,C)!==r:!0};return r?p(c)?NH(r,i,d):p(l)?kH(r,i,d,t):TH(r,i,d,n):null},RH=["pre"],OH=(e,t,n,s)=>{var o;const r=t.firstChild,i=t.lastChild,c=i.attr("data-mce-type")==="bookmark"?i.prev:i,l=r===c,d=Ze(RH,r.name);if(l&&d){const p=r.attr("contenteditable")!=="false",h=((o=e.getParent(n,e.isBlock))===null||o===void 0?void 0:o.nodeName.toLowerCase())===r.name,g=b.from(_r(s,n)).forall(Yn);return p&&h&&g}else return!1},pp=fl,DH=(e,t,n)=>{if(j(n)){const s=e.getParent(t.endContainer,pp);return n===s&&hm(A.fromDom(n),t)}else return!1},PH=(e,t,n)=>{var s;if(n.getAttribute("data-mce-bogus")==="all")(s=n.parentNode)===null||s===void 0||s.insertBefore(e.dom.createFragment(t),n);else{const o=n.firstChild,r=n.lastChild;!o||o===r&&o.nodeName==="BR"?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}},BH=(e,t,n)=>{b.from(e.getParent(t,"td,th")).map(A.fromDom).each(s=>L1(s,n))},LH=(e,t)=>{const n=e.schema.getTextInlineElements(),s=e.dom;if(t){const o=e.getBody(),r=ap(e),i="*[data-mce-fragment]",c=s.select(i);X.each(c,l=>{const d=g=>j(n[g.nodeName.toLowerCase()]),p=g=>g.childNodes.length===1;if((g=>!(E_(s,g)||kF(s,g)))(l)&&d(l)&&p(l)){const g=vi(s,l),v=(T,k)=>Gn(T,N=>Ze(k,N)),E=T=>p(l)&&s.is(T,i)&&d(T)&&(T.nodeName===l.nodeName&&v(g,vi(s,T))||E(T.children[0])),C=T=>j(T)&&T!==o&&(r.compare(l,T)||C(T.parentElement)),S=T=>j(T)&&T!==o&&s.is(T,i)&&(RF(s,l,T)||S(T.parentElement));(E(l.children[0])||C(l.parentElement)&&!S(l.parentElement))&&s.remove(l,!0)}})}},IH=e=>{let t=e;for(;t=t.walk();)t.type===1&&t.attr("data-mce-fragment","1")},$H=e=>{X.each(e.getElementsByTagName("*"),t=>{t.removeAttribute("data-mce-fragment")})},MH=e=>!!e.getAttribute("data-mce-fragment"),FH=(e,t)=>j(t)&&!e.schema.getVoidElements()[t.nodeName],UH=(e,t)=>{var n,s,o;let r;const i=e.dom,c=e.selection;if(!t)return;c.scrollIntoView(t);const l=_r(e.getBody(),t);if(l&&i.getContentEditable(l)==="false"){i.remove(t),c.select(l);return}let d=i.createRng();const p=t.previousSibling;if(q(p)){d.setStart(p,(s=(n=p.nodeValue)===null||n===void 0?void 0:n.length)!==null&&s!==void 0?s:0);const v=t.nextSibling;q(v)&&(p.appendData(v.data),(o=v.parentNode)===null||o===void 0||o.removeChild(v))}else d.setStartBefore(t),d.setEndBefore(t);const h=v=>{let E=L.fromRangeStart(v);return E=Ms(e.getBody()).next(E),E==null?void 0:E.toRange()},g=i.getParent(t,i.isBlock);if(i.remove(t),g&&i.isEmpty(g)){const v=pp(g);Zr(A.fromDom(g)),d.setStart(g,0),d.setEnd(g,0),!v&&!MH(g)&&(r=h(d))?(d=r,i.remove(g)):i.add(g,i.create("br",v?{}:{"data-mce-bogus":"1"}))}c.setRng(d)},HH=e=>{const t=e.dom,n=dp(e.selection.getRng());e.selection.setRng(n);const s=t.getParent(n.startContainer,pp);DH(t,n,s)?op(e,n,A.fromDom(s)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&q(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1)},zH=e=>{for(let t=e;t;t=t.walk())if(t.attr("id")==="mce_marker")return b.some(t);return b.none()},VH=(e,t,n)=>{var s;return ut(n.children(),fS)&&((s=e.getParent(t,e.isBlock))===null||s===void 0?void 0:s.nodeName)==="SUMMARY"},WH=(e,t,n)=>{var s,o;const r=e.selection,i=e.dom,c=e.parser,l=n.merge,d=xo({validate:!0},e.schema),p='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=wn(t)),t.indexOf("{$caret}")===-1&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,p);let h=r.getRng();const g=h.startContainer,v=e.getBody();g===v&&r.isCollapsed()&&i.isBlock(v.firstChild)&&FH(e,v.firstChild)&&i.isEmpty(v.firstChild)&&(h=i.createRng(),h.setStart(v.firstChild,0),h.setEnd(v.firstChild,0),r.setRng(h)),r.isCollapsed()||HH(e);const E=r.getNode(),C={context:E.nodeName.toLowerCase(),data:n.data,insert:!0},S=c.parse(t,C);if(n.paste===!0&&hH(e.schema,S)&&SH(i,E))return h=xH(d,i,r.getRng(),S),h&&r.setRng(h),t;n.paste===!0&&OH(i,S,E,e.getBody())&&((s=S.firstChild)===null||s===void 0||s.unwrap()),IH(S);let T=S.lastChild;if(T&&T.attr("id")==="mce_marker"){const k=T;for(T=T.prev;T;T=T.walk(!0))if(T.type===3||!i.isBlock(T.name)){T.parent&&e.schema.isValidChild(T.parent.name,"span")&&T.parent.insert(k,T,T.name==="br");break}}if(e._selectionOverrides.showBlockCaretContainer(E),!C.invalid&&!VH(i,E,S))t=d.serialize(S),PH(e,t,E);else{e.selection.setContent(p);let k=r.getNode(),N;const R=e.getBody();for(_a(k)?k=N=R:N=k;N&&N!==R;)k=N,N=N.parentNode;t=k===R?R.innerHTML:i.getOuterHTML(k);const H=c.parse(t),K=zH(H),ee=K.bind(aH).getOr(H);K.each(ie=>ie.replace(S));const I=S.children(),D=(o=S.parent)!==null&&o!==void 0?o:H;S.unwrap();const F=ve(I,ie=>fp(e.schema,ie,D));up(F,e.schema,ee),pS(c.getNodeFilters(),c.getAttributeFilters(),H),t=d.serialize(H),k===R?i.setHTML(R,t):i.setOuterHTML(k,t)}return LH(e,l),UH(e,i.get("mce_marker")),$H(e.getBody()),BH(i,r.getStart(),e.schema),bP(e.schema,e.getBody(),r.getStart()),t},su=e=>e instanceof tn,jH=e=>{yi(e)&&Xt(e.getBody()).each(t=>{const n=t.getNode(),s=Ps(n)?Xt(n).getOr(t):t;e.selection.setRng(s.toRange())})},hp=(e,t,n)=>{e.dom.setHTML(e.getBody(),t),n!==!0&&jH(e)},qH=(e,t,n,s)=>{if(n=wn(n),n.length===0||/^\s+$/.test(n)){const o='<br data-mce-bogus="1">';t.nodeName==="TABLE"?n="<tr><td>"+o+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+o+"</li>");const r=Yt(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),r.toLowerCase())?(n=o,n=e.dom.createHTML(r,Fa(e),n)):n||(n=o),hp(e,n,s.no_selection),{content:n,html:n}}else{s.format!=="raw"&&(n=xo({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));const o=vl(A.fromDom(t))?n:X.trim(n);return hp(e,o,s.no_selection),{content:o,html:o}}},KH=(e,t,n,s)=>{pS(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);const o=xo({validate:!1},e.schema).serialize(n),r=wn(vl(A.fromDom(t))?o:X.trim(o));return hp(e,r,s.no_selection),{content:n,html:r}},GH=(e,t,n)=>b.from(e.getBody()).map(s=>su(t)?KH(e,s,t,n):qH(e,s,t,n)).getOr({content:t,html:su(n.content)?"":n.content}),bS=e=>$e(e)?e:tt,YH=(e,t,n)=>{let s=e.dom;const o=bS(n);for(;s.parentNode;){s=s.parentNode;const r=A.fromDom(s),i=t(r);if(i.isSome())return i;if(o(r))break}return b.none()},gp=(e,t,n)=>{const s=t(e),o=bS(n);return s.orThunk(()=>o(e)?b.none():YH(e,t,o))},bp=Em,yS=(e,t,n)=>{const s=e.formatter.get(n);if(s)for(let o=0;o<s.length;o++){const r=s[o];if(Pn(r)&&r.inherit===!1&&e.dom.is(t,r.selector))return!0}return!1},yp=(e,t,n,s,o)=>{const r=e.dom.getRoot();if(t===r)return!1;const i=e.dom.getParent(t,c=>yS(e,c,n)?!0:c.parentNode===r||!!Us(e,c,n,s,!0));return!!Us(e,i,n,s,o)},ou=(e,t,n)=>Ot(n)&&bp(t,n.inline)||Fs(n)&&bp(t,n.block)?!0:Pn(n)?fe(t)&&e.is(t,n.selector):!1,vS=(e,t,n,s,o,r)=>{const i=n[s],c=s==="attributes";if($e(n.onmatch))return n.onmatch(t,n,s);if(i){if(Tb(i)){for(let l=0;l<i.length;l++)if(c?e.getAttrib(t,i[l]):$l(e,t,i[l]))return!0}else for(const l in i)if(Ae(i,l)){const d=c?e.getAttrib(t,l):$l(e,t,l),p=ko(i[l],r),h=Fe(d)||ua(d);if(h&&Fe(p))continue;if(o&&h&&!n.exact||(!o||n.exact)&&!bp(d,_m(p,l)))return!1}}return!0},Us=(e,t,n,s,o)=>{const r=e.formatter.get(n),i=e.dom;if(r&&fe(t))for(let c=0;c<r.length;c++){const l=r[c];if(ou(e.dom,t,l)&&vS(i,t,l,"attributes",o,s)&&vS(i,t,l,"styles",o,s)){const d=l.classes;if(d){for(let p=0;p<d.length;p++)if(!e.dom.hasClass(t,ko(d[p],s)))return}return l}}},vp=(e,t,n,s,o)=>{if(s)return yp(e,s,t,n,o);if(s=e.selection.getNode(),yp(e,s,t,n,o))return!0;const r=e.selection.getStart();return!!(r!==s&&yp(e,r,t,n,o))},XH=(e,t,n)=>{const s=[],o={},r=e.selection.getStart();return e.dom.getParent(r,i=>{for(let c=0;c<t.length;c++){const l=t[c];!o[l]&&Us(e,i,l,n)&&(o[l]=!0,s.push(l))}},e.dom.getRoot()),s},ZH=(e,t)=>{const n=o=>Qe(o,A.fromDom(e.getBody())),s=(o,r)=>Us(e,o.dom,r)?b.some(r):b.none();return b.from(e.selection.getStart(!0)).bind(o=>gp(A.fromDom(o),r=>zr(t,i=>s(r,i)),n)).getOrNull()},QH=(e,t)=>{const n=e.formatter.get(t),s=e.dom;if(n&&e.selection.isEditable()){const o=e.selection.getStart(),r=Ml(s,o);for(let i=n.length-1;i>=0;i--){const c=n[i];if(!Pn(c))return!0;for(let l=r.length-1;l>=0;l--)if(s.is(r[l],c.selector))return!0}}return!1},JH=(e,t,n)=>Vt(n,(s,o)=>{const r=t$(e,o);return e.formatter.matchNode(t,o,{},r)?s.concat([o]):s},[]),rc=Rt,ez=(e,t)=>e.importNode(t,!0),CS=e=>{if(e){const t=new Pt(e,e);for(let n=t.current();n;n=t.next())if(q(n))return n}return null},Cp=e=>{const t=A.fromTag("span");return Ys(t,{id:um,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&At(t,A.fromText(rc)),t},tz=e=>{const t=CS(e);return t&&t.data.charAt(0)===rc&&t.deleteData(0,1),t},Ep=(e,t,n)=>{const s=e.dom,o=e.selection;if(lE(t))Cr(e,!1,A.fromDom(t),n,!0);else{const r=o.getRng(),i=s.getParent(t,s.isBlock),c=r.startContainer,l=r.startOffset,d=r.endContainer,p=r.endOffset,h=tz(t);s.remove(t,!0),c===h&&l>0&&r.setStart(h,l-1),d===h&&p>0&&r.setEnd(h,p-1),i&&s.isEmpty(i)&&So(A.fromDom(i)),o.setRng(r)}},_p=(e,t,n)=>{const s=e.dom,o=e.selection;if(t)Ep(e,t,n);else if(t=hr(e.getBody(),o.getStart()),!t)for(;t=s.get(um);)Ep(e,t,n)},nz=(e,t,n)=>{var s,o;const r=e.dom,i=r.getParent(n,ae(vm,e.schema));i&&r.isEmpty(i)?(s=n.parentNode)===null||s===void 0||s.replaceChild(t,n):(B1(A.fromDom(n)),r.isEmpty(n)?(o=n.parentNode)===null||o===void 0||o.replaceChild(t,n):r.insertAfter(t,n))},ES=(e,t)=>(e.appendChild(t),t),_S=(e,t)=>{var n;const s=Ts(e,(r,i)=>ES(r,i.cloneNode(!1)),t),o=(n=s.ownerDocument)!==null&&n!==void 0?n:document;return ES(s,o.createTextNode(rc))},sz=(e,t,n,s,o,r)=>{const i=e.formatter,c=e.dom,l=ve(un(i.get()),h=>h!==s&&!Wt(h,"removeformat")),d=JH(e,n,l);if(ve(d,h=>!n$(e,h,s)).length>0){const h=n.cloneNode(!1);return c.add(t,h),i.remove(s,o,h,r),c.remove(h),b.some(h)}else return b.none()},SS=e=>kv(e,Pa(e).replace(new RegExp(`${xt}$`)," ")),wS=(e,t)=>{const n=()=>{t!==null&&!e.dom.isEmpty(t)&&yo(A.fromDom(t)).each(s=>{rn(s)?SS(s):id(s,o=>rn(o)).each(o=>{rn(o)&&SS(o)})})};e.once("input",s=>{s.data&&!gr(s.data)&&(s.isComposing?e.once("compositionend",()=>{n()}):n())})},oz=(e,t,n)=>{let s;const o=e.selection,r=e.formatter.get(t);if(!r)return;const i=o.getRng();let c=i.startOffset;const d=i.startContainer.nodeValue;s=hr(e.getBody(),o.getStart());const p=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(d&&c>0&&c<d.length&&p.test(d.charAt(c))&&p.test(d.charAt(c-1))){const h=o.getBookmark();i.collapse(!0);let g=br(e.dom,i,r);g=jl(g),e.formatter.apply(t,n,g),o.moveToBookmark(h)}else{let h=s?CS(s):null;(!s||(h==null?void 0:h.data)!==rc)&&(s=ez(e.getDoc(),Cp(!0).dom),h=s.firstChild,i.insertNode(s),c=1,wS(e,s)),e.formatter.apply(t,n,s),o.setCursorLocation(h,c)}},rz=(e,t,n,s)=>{const o=e.dom,r=e.selection;let i=!1;const c=e.formatter.get(t);if(!c)return;const l=r.getRng(),d=l.startContainer,p=l.startOffset;let h=d;q(d)&&(p!==d.data.length&&(i=!0),h=h.parentNode);const g=[];let v;for(;h;){if(Us(e,h,t,n,s)){v=h;break}h.nextSibling&&(i=!0),g.push(h),h=h.parentNode}if(v)if(i){const E=r.getBookmark();l.collapse(!0);let C=br(o,l,c,!0);C=jl(C),e.formatter.remove(t,n,C,s),r.moveToBookmark(E)}else{const E=hr(e.getBody(),v),C=j(E)?o.getParents(v.parentNode,dt,E):[],S=Cp(!1).dom;nz(e,S,E??v);const T=sz(e,S,v,t,n,s),k=_S([...g,...T.toArray(),...C],S);E&&Ep(e,E,j(E)),r.setCursorLocation(k,1),wS(e,S),o.isEmpty(v)&&o.remove(v)}},iz=(e,t,n)=>{const s=e.selection,o=e.getBody();_p(e,null,n),(t===8||t===46)&&s.isCollapsed()&&s.getStart().innerHTML===rc&&_p(e,hr(o,s.getStart()),!0),(t===37||t===39)&&_p(e,hr(o,s.getStart()),!0)},az=e=>q(e)&&Yf(e.data,xt),cz=e=>{e.on("mouseup keydown",t=>{iz(e,t.keyCode,az(e.selection.getRng().endContainer))})},AS=e=>{const t=Cp(!1),n=_S(e,t.dom);return{caretContainer:t,caretPosition:L(n,0)}},TS=(e,t)=>{const{caretContainer:n,caretPosition:s}=AS(t);return fn(A.fromDom(e),n),lt(A.fromDom(e)),s},lz=(e,t)=>{const{caretContainer:n,caretPosition:s}=AS(t);return e.insertNode(n.dom),s},NS=(e,t)=>{if(On(t.dom))return!1;const n=e.schema.getTextInlineElements();return Ae(n,He(t))&&!On(t.dom)&&!tr(t.dom)},ic={},kS=ms(["pre"]),uz=(e,t)=>{ic[e]||(ic[e]=[]),ic[e].push(t)},fz=(e,t)=>{Ae(ic,e)&&U(ic[e],n=>{n(t)})};uz("pre",e=>{const t=e.selection.getRng(),n=o=>r=>{const i=r.previousSibling;return kS(i)&&Ze(o,i)},s=(o,r)=>{const i=A.fromDom(r),c=bo(i).dom;lt(i),Jo(A.fromDom(o),[A.fromTag("br",c),A.fromTag("br",c),...qt(i)])};if(!t.collapsed){const o=e.selection.getSelectedBlocks(),r=ve(ve(o,kS),n(o));U(r,i=>{s(i.previousSibling,i)})}});const xS=["fontWeight","fontStyle","color","fontSize","fontFamily"],dz=e=>ye(e.styles)&&ut(un(e.styles),t=>Ze(xS,t)),mz=e=>vt(e,t=>Ot(t)&&t.inline==="span"&&dz(t)),RS=(e,t)=>{const n=e.get(t);return Te(n)?mz(n):b.none()},OS=(e,t)=>dn(t,L.fromRangeStart(e)).isNone(),DS=(e,t)=>cn(t,L.fromRangeEnd(e)).exists(n=>!ht(n.getNode())||cn(t,n).isSome())===!1,PS=e=>t=>JD(t)&&e.isEditable(t),pz=e=>{const t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(t.length===1)return OS(n,t[0])&&DS(n,t[0])?t:[];{const s=on(t).filter(i=>OS(n,i)).toArray(),o=go(t).filter(i=>DS(n,i)).toArray(),r=t.slice(1,-1);return s.concat(r).concat(o)}},hz=e=>ve(pz(e),PS(e.dom)),BS=e=>ve(e.getSelectedBlocks(),PS(e.dom)),Sp=X.each,wp=e=>fe(e)&&!Dn(e)&&!On(e)&&!tr(e),LS=(e,t)=>{for(let n=e;n;n=n[t]){if(q(n)&&ks(n.data))return e;if(fe(n)&&!Dn(n))return n}return e},IS=(e,t,n)=>{const s=ap(e),o=Js(t)&&e.dom.isEditable(t),r=Js(n)&&e.dom.isEditable(n);if(o&&r){const i=LS(t,"previousSibling"),c=LS(n,"nextSibling");if(s.compare(i,c)){for(let l=i.nextSibling;l&&l!==c;){const d=l;l=l.nextSibling,i.appendChild(d)}return e.dom.remove(c),X.each(X.grep(c.childNodes),l=>{i.appendChild(l)}),i}}return n},$S=(e,t,n,s)=>{var o;if(s&&t.merge_siblings!==!1){const r=(o=IS(e,iE(s),s))!==null&&o!==void 0?o:s;IS(e,r,iE(r,!0))}},gz=(e,t,n)=>{if(t.clear_child_styles){const s=t.links?"*:not(a)":"*";Sp(e.select(s,n),o=>{wp(o)&&e.isEditable(o)&&Sp(t.styles,(r,i)=>{e.setStyle(o,i,"")})})}},Ap=(e,t,n)=>{Sp(e.childNodes,s=>{wp(s)&&(t(s)&&n(s),s.hasChildNodes()&&Ap(s,t,n))})},bz=(e,t)=>{t.nodeName==="SPAN"&&e.getAttribs(t).length===0&&e.remove(t,!0)},MS=(e,t)=>n=>!!(n&&$l(e,n,t)),FS=(e,t,n)=>s=>{e.setStyle(s,t,n),s.getAttribute("style")===""&&s.removeAttribute("style"),bz(e,s)},Sr=Ls.generate([{keep:[]},{rename:["name"]},{removed:[]}]),yz=/^(src|href|style)$/,Tp=X.each,ru=Em,vz=e=>/^(TR|TH|TD)$/.test(e.nodeName),US=(e,t,n)=>e.isChildOf(t,n)&&t!==n&&!e.isBlock(n),HS=(e,t,n)=>{let s=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"];if(fe(s)){const r=s.childNodes.length-1;!n&&o&&o--,s=s.childNodes[o>r?r:o]}return q(s)&&n&&o>=s.data.length&&(s=new Pt(s,e.getBody()).next()||s),q(s)&&!n&&o===0&&(s=new Pt(s,e.getBody()).prev()||s),s},zS=(e,t)=>{const n=t?"firstChild":"lastChild",s=e[n];return vz(e)&&s?e.nodeName==="TR"&&s[n]||s:e},Np=(e,t,n,s)=>{var o;const r=e.create(n,s);return(o=t.parentNode)===null||o===void 0||o.insertBefore(r,t),r.appendChild(t),r},VS=(e,t,n,s,o)=>{const r=A.fromDom(t),i=A.fromDom(e.create(s,o)),c=n?by(r):gy(r);return Jo(i,c),n?(fn(r,i),cd(i,r)):(Qs(r,i),At(i,r)),i.dom},Cz=(e,t)=>t.links&&e.nodeName==="A",WS=(e,t,n)=>{const s=t.parentNode;let o;const r=e.dom,i=Yt(e);Fs(n)&&s===r.getRoot()&&(!n.list_block||!ru(t,n.list_block))&&U(En(t.childNodes),c=>{pi(e,i,c.nodeName.toLowerCase())?o?o.appendChild(c):(o=Np(r,c,i),r.setAttribs(o,Fa(e))):o=null}),!(r$(n)&&!ru(n.inline,t))&&r.remove(t,!0)},jS=(e,t,n)=>pt(e)?{name:t,value:null}:{name:e,value:ko(t,n)},qS=(e,t)=>{e.getAttrib(t,"style")===""&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},KS=(e,t,n,s,o)=>{let r=!1;Tp(n.styles,(i,c)=>{const{name:l,value:d}=jS(c,i,s),p=_m(d,l);(n.remove_similar||Be(d)||!fe(o)||ru($l(e,o,l),p))&&e.setStyle(t,l,""),r=!0}),r&&qS(e,t)},Ez=(e,t,n)=>{t==="removeformat"?U(BS(e.selection),s=>{U(xS,o=>e.dom.setStyle(s,o,"")),qS(e.dom,s)}):RS(e.formatter,t).each(s=>{U(BS(e.selection),o=>KS(e.dom,o,s,n,null))})},GS=(e,t,n,s,o)=>{const r=e.dom,i=ap(e),c=e.schema;if(Ot(t)&&Ed(c,t.inline)&&sr(c,s)&&s.parentElement===e.getBody())return WS(e,s,t),Sr.removed();if(!t.ceFalseOverride&&s&&r.getContentEditableParent(s)==="false"||s&&!ou(r,s,t)&&!Cz(s,t))return Sr.keep();const l=s,d=t.preserve_attributes;if(Ot(t)&&t.remove==="all"&&Te(d)){const p=ve(r.getAttribs(l),h=>Ze(d,h.name.toLowerCase()));if(r.removeAllAttribs(l),U(p,h=>r.setAttrib(l,h.name,h.value)),p.length>0)return Sr.rename("span")}if(t.remove!=="all"){KS(r,l,t,n,o),Tp(t.attributes,(h,g)=>{const{name:v,value:E}=jS(g,h,n);if(t.remove_similar||Be(E)||!fe(o)||ru(r.getAttrib(o,v),E)){if(v==="class"){const C=r.getAttrib(l,v);if(C){let S="";if(U(C.split(/\s+/),T=>{/mce\-\w+/.test(T)&&(S+=(S?" ":"")+T)}),S){r.setAttrib(l,v,S);return}}}if(yz.test(v)&&l.removeAttribute("data-mce-"+v),v==="style"&&ms(["li"])(l)&&r.getStyle(l,"list-style-type")==="none"){l.removeAttribute(v),r.setStyle(l,"list-style-type","none");return}v==="class"&&l.removeAttribute("className"),l.removeAttribute(v)}}),Tp(t.classes,h=>{h=ko(h,n),(!fe(o)||r.hasClass(o,h))&&r.removeClass(l,h)});const p=r.getAttribs(l);for(let h=0;h<p.length;h++){const g=p[h].nodeName;if(!i.isAttributeInternal(g))return Sr.keep()}}return t.remove!=="none"?(WS(e,l,t),Sr.removed()):Sr.keep()},_z=(e,t,n,s,o)=>{let r;return t.parentNode&&U(Ml(e.dom,t.parentNode).reverse(),i=>{if(!r&&fe(i)&&i.id!=="_start"&&i.id!=="_end"){const c=Us(e,i,n,s,o);c&&c.split!==!1&&(r=i)}}),r},Sz=(e,t,n,s)=>GS(e,t,n,s,s).fold(te(s),o=>(e.dom.createFragment().appendChild(s),e.dom.rename(s,o)),te(null)),wz=(e,t,n,s,o,r,i,c)=>{var l,d;let p,h;const g=e.dom;if(n){const v=n.parentNode;for(let E=s.parentNode;E&&E!==v;E=E.parentNode){let C=g.clone(E,!1);for(let S=0;S<t.length&&(C=Sz(e,t[S],c,C),C!==null);S++);C&&(p&&C.appendChild(p),h||(h=C),p=C)}(!i.mixed||!g.isBlock(n))&&(s=(l=g.split(n,s))!==null&&l!==void 0?l:s),p&&h&&((d=o.parentNode)===null||d===void 0||d.insertBefore(p,o),h.appendChild(o),Ot(i)&&$S(e,i,c,p))}return s},Az=(e,t,n,s,o)=>{const r=e.formatter.get(t),i=r[0],c=e.dom,l=e.selection,d=C=>{const S=_z(e,C,t,n,o);return wz(e,r,S,C,C,!0,i,n)},p=C=>Dn(C)&&fe(C)&&(C.id==="_start"||C.id==="_end"),h=C=>ut(r,S=>ac(e,S,n,C,C)),g=C=>{const S=En(C.childNodes),k=h(C)||ut(r,H=>ou(c,C,H)),N=C.parentNode;if(!k&&j(N)&&wm(i)&&h(N),i.deep&&S.length)for(let H=0;H<S.length;H++)g(S[H]);U(["underline","line-through","overline"],H=>{fe(C)&&e.dom.getStyle(C,"text-decoration")===H&&C.parentNode&&cE(c,C.parentNode)===H&&ac(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:H}},void 0,C)})},v=C=>{const S=c.get(C?"_start":"_end");if(S){let T=S[C?"firstChild":"lastChild"];return p(T)&&(T=T[C?"firstChild":"lastChild"]),q(T)&&T.data.length===0&&(T=C?S.previousSibling||S.nextSibling:S.nextSibling||S.previousSibling),c.remove(S,!0),T}else return null},E=C=>{let S,T,k=br(c,C,r,C.collapsed);if(i.split){if(k=jl(k),S=HS(e,k,!0),T=HS(e,k),S!==T){if(S=zS(S,!0),T=zS(T,!1),US(c,S,T)){const R=b.from(S.firstChild).getOr(S);d(VS(c,R,!0,"span",{id:"_start","data-mce-type":"bookmark"})),v(!0);return}if(US(c,T,S)){const R=b.from(T.lastChild).getOr(T);d(VS(c,R,!1,"span",{id:"_end","data-mce-type":"bookmark"})),v(!1);return}S=Np(c,S,"span",{id:"_start","data-mce-type":"bookmark"}),T=Np(c,T,"span",{id:"_end","data-mce-type":"bookmark"});const N=c.createRng();N.setStartAfter(S),N.setEndBefore(T),Ya(c,N,R=>{U(R,H=>{!Dn(H)&&!Dn(H.parentNode)&&d(H)})}),d(S),d(T),S=v(!0),T=v()}else S=T=d(S);k.startContainer=S.parentNode?S.parentNode:S,k.startOffset=c.nodeIndex(S),k.endContainer=T.parentNode?T.parentNode:T,k.endOffset=c.nodeIndex(T)+1}Ya(c,k,N=>{U(N,g)})};if(s){if(Ga(s)){const C=c.createRng();C.setStartBefore(s),C.setEndAfter(s),E(C)}else E(s);AE(e,t,s,n);return}!l.isCollapsed()||!Ot(i)||mi(e).length?(rE(e,()=>bm(e,E),C=>Ot(i)&&vp(e,t,n,C)),e.nodeChanged()):rz(e,t,n,o),Ez(e,t,n),AE(e,t,s,n)},YS=(e,t,n,s,o)=>{(s||e.selection.isEditable())&&Az(e,t,n,s,o)},ac=(e,t,n,s,o)=>GS(e,t,n,s,o).fold(tt,r=>(e.dom.rename(s,r),!0),dt),XS=X.each,Tz=(e,t,n,s)=>{const o=r=>{if(Js(r)&&fe(r.parentNode)&&e.isEditable(r)){const i=cE(e,r.parentNode);e.getStyle(r,"color")&&i?e.setStyle(r,"text-decoration",i):e.getStyle(r,"text-decoration")===i&&e.setStyle(r,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(X.walk(s,o,"childNodes"),o(s))},Nz=(e,t,n,s)=>{if(t.styles&&t.styles.backgroundColor){const o=MS(e,"fontSize");Ap(s,r=>o(r)&&e.isEditable(r),FS(e,"backgroundColor",ko(t.styles.backgroundColor,n)))}},kz=(e,t,n,s)=>{if(Ot(t)&&(t.inline==="sub"||t.inline==="sup")){const o=MS(e,"fontSize");Ap(s,i=>o(i)&&e.isEditable(i),FS(e,"fontSize",""));const r=ve(e.select(t.inline==="sup"?"sub":"sup",s),e.isEditable);e.remove(r,!0)}},xz=(e,t,n,s)=>{XS(t,o=>{Ot(o)&&XS(e.dom.select(o.inline,s),r=>{wp(r)&&ac(e,o,n,r,o.exact?r:null)}),gz(e.dom,o,s)})},Rz=(e,t,n,s,o)=>{const r=o.parentNode;Us(e,r,n,s)&&ac(e,t,s,o)||t.merge_with_parents&&r&&e.dom.getParent(r,i=>Us(e,i,n,s)?(ac(e,t,s,o),!0):!1)},iu=X.each,Oz=(e,t,n,s)=>{if(fL(e)&&Ot(t)&&n.parentNode){const o=av(e.schema),r=HD(A.fromDom(n),i=>On(i.dom));return Vr(o,s)&&eo(e.schema,n.parentNode,{skipBogus:!1,includeZwsp:!0})&&!r}else return!1},ZS=(e,t,n,s)=>{if(iu(n.styles,(o,r)=>{e.setStyle(t,r,ko(o,s))}),n.styles){const o=e.getAttrib(t,"style");o&&e.setAttrib(t,"data-mce-style",o)}},Dz=(e,t,n,s)=>{const o=e.formatter.get(t),r=o[0],i=!s&&e.selection.isCollapsed(),c=e.dom,l=e.selection,d=(E,C=r)=>{$e(C.onformat)&&C.onformat(E,C,n,s),ZS(c,E,C,n),iu(C.attributes,(S,T)=>{c.setAttrib(E,T,ko(S,n))}),iu(C.classes,S=>{const T=ko(S,n);c.hasClass(E,T)||c.addClass(E,T)})},p=(E,C)=>{let S=!1;return iu(E,T=>Pn(T)?c.getContentEditable(C)==="false"&&!T.ceFalseOverride||j(T.collapsed)&&T.collapsed!==i?!0:c.is(C,T.selector)&&!On(C)?(d(C,T),S=!0,!1):!0:!1),S},h=E=>{if(G(E)){const C=c.create(E);return d(C),C}else return null},g=(E,C,S)=>{const T=[];let k=!0;const N=r.inline||r.block,R=h(N),H=I=>s$(r)&&Us(e,I,t,n),K=(I,D,F)=>{const ie=o$(r)&&vm(e.schema,I)&&pi(e,D,N);return F&&ie},ee=(I,D,F,ie)=>{const de=I.nodeName.toLowerCase(),Ne=pi(e,N,de)&&pi(e,D,N),Re=!S&&q(I)&&Cl(I.data),ze=On(I),Ge=!Ot(r)||!E.isBlock(I);return(F||ie)&&Ne&&!Re&&!ze&&Ge};Ya(E,C,I=>{let D;const F=ie=>{let de=!1,Ne=k,Re=!1;const ze=ie.parentNode,Ge=ze.nodeName.toLowerCase(),ft=E.getContentEditable(ie);j(ft)&&(Ne=k,k=ft==="true",de=!0,Re=aE(e,ie));const It=k&&!de;if(ht(ie)&&!Oz(e,r,ie,Ge)){D=null,Fs(r)&&E.remove(ie);return}if(H(ie)){D=null;return}if(K(ie,Ge,It)){const et=E.rename(ie,N);d(et),T.push(et),D=null;return}if(Pn(r)){let et=p(o,ie);if(!et&&j(ze)&&wm(r)&&(et=p(o,ze)),!Ot(r)||et){D=null;return}}j(R)&&ee(ie,Ge,It,Re)?(D||(D=E.clone(R,!1),ze.insertBefore(D,ie),T.push(D)),Re&&de&&(k=Ne),D.appendChild(ie)):(D=null,U(En(ie.childNodes),F),de&&(k=Ne),D=null)};U(I,F)}),r.links===!0&&U(T,I=>{const D=F=>{F.nodeName==="A"&&d(F,r),U(En(F.childNodes),D)};D(I)}),U(T,I=>{const D=de=>{let Ne=0;return U(de.childNodes,Re=>{!JI(Re)&&!Dn(Re)&&Ne++}),Ne},F=de=>vt(de.childNodes,ym).filter(Re=>E.getContentEditable(Re)!=="false"&&ou(E,Re,r)).map(Re=>{const ze=E.clone(Re,!1);return d(ze),E.replace(ze,de,!0),E.remove(Re,!0),ze}).getOr(de),ie=D(I);if((T.length>1||!E.isBlock(I))&&ie===0){E.remove(I,!0);return}(Ot(r)||Fs(r)&&r.wrapper)&&(!r.exact&&ie===1&&(I=F(I)),xz(e,o,n,I),Rz(e,r,t,n,I),Nz(E,r,n,I),Tz(E,r,n,I),kz(E,r,n,I),$S(e,r,n,I))})},v=Ga(s)?s:l.getNode();if(c.getContentEditable(v)==="false"&&!aE(e,v)){s=v,p(o,s),wE(e,t,s,n);return}if(r){if(s)if(Ga(s)){if(!p(o,s)){const E=c.createRng();E.setStartBefore(s),E.setEndAfter(s),g(c,br(c,E,o),!0)}}else g(c,s,!0);else!i||!Ot(r)||mi(e).length?(l.setRng(dp(l.getRng())),rE(e,()=>{bm(e,(E,C)=>{const S=C?E:br(c,E,o);g(c,S,!1)})},dt),e.nodeChanged()):oz(e,t,n),RS(e.formatter,t).each(E=>{U(hz(e.selection),C=>ZS(c,C,E,n))});fz(t,e)}wE(e,t,s,n)},QS=(e,t,n,s)=>{(s||e.selection.isEditable())&&Dz(e,t,n,s)},JS=e=>Ae(e,"vars"),Pz=(e,t)=>{e.set({}),t.on("NodeChange",n=>{sw(t,n.element,e.get())}),t.on("FormatApply FormatRemove",n=>{const s=b.from(n.node).map(o=>Ga(o)?o:o.startContainer).bind(o=>fe(o)?b.some(o):b.from(o.parentElement)).getOrThunk(()=>ew(t));sw(t,s,e.get())})},ew=e=>e.selection.getStart(),tw=(e,t,n,s,o)=>na(t,c=>{const l=e.formatter.matchNode(c,n,o??{},s);return!qe(l)},c=>yS(e,c,n)?!0:s?!1:j(e.formatter.matchNode(c,n,o,!0))),nw=(e,t)=>{const n=t??ew(e);return ve(Ml(e.dom,n),s=>fe(s)&&!tr(s))},sw=(e,t,n)=>{const s=nw(e,t);ot(n,(o,r)=>{const i=c=>{const l=tw(e,s,r,c.similar,JS(c)?c.vars:void 0),d=l.isSome();if(c.state.get()!==d){c.state.set(d);const p=l.getOr(t);JS(c)?c.callback(d,{node:p,format:r,parents:s}):U(c.callbacks,h=>h(d,{node:p,format:r,parents:s}))}};U([o.withSimilar,o.withoutSimilar],i),U(o.withVars,i)})},Bz=(e,t,n,s,o,r)=>{const i=t.get();U(n.split(","),c=>{const l=ct(i,c).getOrThunk(()=>{const p={withSimilar:{state:Bt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Bt(!1),similar:!1,callbacks:[]},withVars:[]};return i[c]=p,p}),d=()=>{const p=nw(e);return tw(e,p,c,o,r).isSome()};if(qe(r)){const p=o?l.withSimilar:l.withoutSimilar;p.callbacks.push(s),p.callbacks.length===1&&p.state.set(d())}else l.withVars.push({state:Bt(d()),similar:o,vars:r,callback:s})}),t.set(i)},Lz=(e,t,n)=>{const s=e.get();U(t.split(","),o=>ct(s,o).each(r=>{s[o]={withSimilar:{...r.withSimilar,callbacks:ve(r.withSimilar.callbacks,i=>i!==n)},withoutSimilar:{...r.withoutSimilar,callbacks:ve(r.withoutSimilar.callbacks,i=>i!==n)},withVars:ve(r.withVars,i=>i.callback!==n)}})),e.set(s)},Iz=(e,t,n,s,o,r)=>(Bz(e,t,n,s,o,r),{unbind:()=>Lz(t,n,s)}),$z=(e,t,n,s)=>{const o=e.formatter.get(t);o&&(vp(e,t,n,s)&&(!("toggle"in o[0])||o[0].toggle)?YS(e,t,n,s):QS(e,t,n,s))},ow=X.explode,rw=()=>{const e={};return{addFilter:(o,r)=>{U(ow(o),i=>{Ae(e,i)||(e[i]={name:i,callbacks:[]}),e[i].callbacks.push(r)})},getFilters:()=>jf(e),removeFilter:(o,r)=>{U(ow(o),i=>{if(Ae(e,i))if(j(r)){const c=e[i],l=ve(c.callbacks,d=>d!==r);l.length>0?c.callbacks=l:delete e[i]}else delete e[i]})}}},Mz=(e,t)=>{U(t,n=>{e.attr(n,null)})},Fz=(e,t,n)=>{e.addNodeFilter("font",s=>{U(s,o=>{const r=t.parse(o.attr("style")),i=o.attr("color"),c=o.attr("face"),l=o.attr("size");i&&(r.color=i),c&&(r["font-family"]=c),l&&Qc(l).each(d=>{r["font-size"]=n[d-1]}),o.name="span",o.attr("style",t.serialize(r)),Mz(o,["color","face","size"])})})},Uz=(e,t,n)=>{e.addNodeFilter("strike",s=>{const o=t.type!=="html4";U(s,r=>{if(o)r.name="s";else{const i=n.parse(r.attr("style"));i["text-decoration"]="line-through",r.name="span",r.attr("style",n.serialize(i))}})})},Hz=(e,t,n)=>{var s;const o=Od();t.convert_fonts_to_spans&&Fz(e,o,X.explode((s=t.font_size_legacy_values)!==null&&s!==void 0?s:"")),Uz(e,n,o)},zz=(e,t,n)=>{t.inline_styles&&Hz(e,t,n)},Vz=e=>fetch(e).then(t=>t.ok?t.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${e} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})),Wz=e=>{const t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""},kp=e=>{const[t,...n]=e.split(","),s=n.join(","),o=/data:([^/]+\/[^;]+)(;.+)?/.exec(t);if(o){const r=o[2]===";base64",i=r?Wz(s):decodeURIComponent(s);return b.some({type:o[1],data:i,base64Encoded:r})}else return b.none()},iw=(e,t,n=!0)=>{let s=t;if(n)try{s=atob(t)}catch{return b.none()}const o=new Uint8Array(s.length);for(let r=0;r<o.length;r++)o[r]=s.charCodeAt(r);return b.some(new Blob([o],{type:e}))},jz=e=>new Promise((t,n)=>{kp(e).bind(({type:s,data:o,base64Encoded:r})=>iw(s,o,r)).fold(()=>n("Invalid data URI"),t)}),qz=e=>kt(e,"blob:")?Vz(e):kt(e,"data:")?jz(e):Promise.reject("Unknown URI format"),aw=e=>new Promise((t,n)=>{const s=new FileReader;s.onloadend=()=>{t(s.result)},s.onerror=()=>{var o;n((o=s.error)===null||o===void 0?void 0:o.message)},s.readAsDataURL(e)});let Kz=0;const Gz=e=>"blobid"+Kz++,cw=(e,t,n)=>kp(e).bind(({data:s,type:o,base64Encoded:r})=>{if(t&&!r)return b.none();{const i=r?s:btoa(s);return n(i,o)}}),lw=(e,t,n)=>{const s=e.create(Gz(),t,n);return e.add(s),s},uw=(e,t,n=!1)=>cw(t,n,(s,o)=>b.from(e.getByData(s,o)).orThunk(()=>iw(o,s).map(r=>lw(e,r,s)))),Yz=(e,t)=>{const n=()=>Promise.reject("Invalid data URI");if(kt(t,"blob:")){const s=e.getByUri(t);return j(s)?Promise.resolve(s):qz(t).then(o=>aw(o).then(r=>cw(r,!1,i=>b.some(lw(e,o,i))).getOrThunk(n)))}else return kt(t,"data:")?uw(e,t).fold(n,s=>Promise.resolve(s)):Promise.reject("Unknown image data format")},Xz=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,Zz=e=>b.from(e.match(Xz)).bind(t=>ra(t,1)).map(t=>kt(t,"www.")?t.substring(4):t),fw=(e,t)=>{b.from(e.attr("src")).bind(Zz).forall(n=>!Ze(t,n))&&e.attr("sandbox","")},xp=(e,t)=>kt(e,`${t}/`),Qz=e=>qe(e)?"iframe":xp(e,"image")?"img":xp(e,"video")?"video":xp(e,"audio")?"audio":"iframe",Jz=({type:e,src:t,width:n,height:s}={},o,r)=>{const i=Qz(e),c=new tn(i,1);return c.attr(i==="audio"?{src:t}:{src:t,width:n,height:s}),(i==="audio"||i==="video")&&c.attr("controls",""),i==="iframe"&&o&&fw(c,r),c},eV=e=>j(e.attr("data-mce-bogus")),tV=e=>e.attr("src")===Ve.transparentSrc||j(e.attr("data-mce-placeholder")),nV=(e,t)=>{const{blob_cache:n}=t;if(n){const s=o=>{const r=o.attr("src");tV(o)||eV(o)||Fe(r)||uw(n,r,!0).each(i=>{o.attr("src",i.blobUri())})};e.addAttributeFilter("src",o=>U(o,s))}},sV=(e,t)=>{var n,s;const o=e.schema;e.addAttributeFilter("href",l=>{let d=l.length;const p=g=>g.split(" ").filter(E=>E.length>0).concat(["noopener"]).sort().join(" "),h=g=>{const v=g?X.trim(g):"";return/\b(noopener)\b/g.test(v)?v:p(v)};if(!t.allow_unsafe_link_target)for(;d--;){const g=l[d];g.name==="a"&&g.attr("target")==="_blank"&&g.attr("rel",h(g.attr("rel")))}}),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",l=>{let d=l.length,p,h,g,v;for(;d--;)if(v=l[d],v.name==="a"&&v.firstChild&&!v.attr("href"))for(g=v.parent,p=v.lastChild;p&&g;)h=p.prev,g.insert(p,v),p=h}),t.fix_list_elements&&e.addNodeFilter("ul,ol",l=>{let d=l.length,p,h;for(;d--;)if(p=l[d],h=p.parent,h&&(h.name==="ul"||h.name==="ol"))if(p.prev&&p.prev.name==="li")p.prev.append(p);else{const g=new tn("li",1);g.attr("style","list-style-type: none"),p.wrap(g)}});const r=o.getValidClasses();t.validate&&r&&e.addAttributeFilter("class",l=>{var d;let p=l.length;for(;p--;){const h=l[p],g=(d=h.attr("class"))!==null&&d!==void 0?d:"",v=X.explode(g," ");let E="";for(let C=0;C<v.length;C++){const S=v[C];let T=!1,k=r["*"];k&&k[S]&&(T=!0),k=r[h.name],!T&&k&&k[S]&&(T=!0),T&&(E&&(E+=" "),E+=S)}E.length||(E=null),h.attr("class",E)}}),nV(e,t);const i=(n=t.sandbox_iframes)!==null&&n!==void 0?n:!1,c=Sb((s=t.sandbox_iframes_exclusions)!==null&&s!==void 0?s:[]);t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",l=>U(l,d=>{d.replace(Jz({type:d.attr("type"),src:d.name==="object"?d.attr("data"):d.attr("src"),width:d.attr("width"),height:d.attr("height")},i,c))})),i&&e.addNodeFilter("iframe",l=>U(l,d=>fw(d,c)))},{entries:dw,setPrototypeOf:mw,isFrozen:oV,getPrototypeOf:rV,getOwnPropertyDescriptor:iV}=Object;let{freeze:mn,seal:ys,create:aV}=Object,{apply:Rp,construct:Op}=typeof Reflect<"u"&&Reflect;Rp||(Rp=function(t,n,s){return t.apply(n,s)}),mn||(mn=function(t){return t}),ys||(ys=function(t){return t}),Op||(Op=function(t,n){return new t(...n)});const cV=Zn(Array.prototype.forEach),lV=Zn(Array.prototype.pop),cc=Zn(Array.prototype.push),au=Zn(String.prototype.toLowerCase),Dp=Zn(String.prototype.toString),uV=Zn(String.prototype.match),vs=Zn(String.prototype.replace),fV=Zn(String.prototype.indexOf),dV=Zn(String.prototype.trim),In=Zn(RegExp.prototype.test),lc=mV(TypeError);function Zn(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return Rp(e,t,s)}}function mV(e){return function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];return Op(e,n)}}function Je(e,t,n){var s;n=(s=n)!==null&&s!==void 0?s:au,mw&&mw(e,null);let o=t.length;for(;o--;){let r=t[o];if(typeof r=="string"){const i=n(r);i!==r&&(oV(t)||(t[o]=i),r=i)}e[r]=!0}return e}function Ci(e){const t=aV(null);for(const[n,s]of dw(e))t[n]=s;return t}function cu(e,t){for(;e!==null;){const s=iV(e,t);if(s){if(s.get)return Zn(s.get);if(typeof s.value=="function")return Zn(s.value)}e=rV(e)}function n(s){return console.warn("fallback value for",s),null}return n}const pw=mn(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Pp=mn(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Bp=mn(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),pV=mn(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Lp=mn(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),hV=mn(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),hw=mn(["#text"]),gw=mn(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Ip=mn(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),bw=mn(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),lu=mn(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),gV=ys(/\{\{[\w\W]*|[\w\W]*\}\}/gm),bV=ys(/<%[\w\W]*|[\w\W]*%>/gm),yV=ys(/\${[\w\W]*}/gm),vV=ys(/^data-[\-\w.\u00B7-\uFFFF]/),CV=ys(/^aria-[\-\w]+$/),yw=ys(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),EV=ys(/^(?:\w+script|data):/i),_V=ys(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),vw=ys(/^html$/i);var Cw=Object.freeze({__proto__:null,MUSTACHE_EXPR:gV,ERB_EXPR:bV,TMPLIT_EXPR:yV,DATA_ATTR:vV,ARIA_ATTR:CV,IS_ALLOWED_URI:yw,IS_SCRIPT_OR_DATA:EV,ATTR_WHITESPACE:_V,DOCTYPE_NAME:vw});const SV=()=>typeof window>"u"?null:window,wV=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let s=null;const o="data-tt-policy-suffix";n&&n.hasAttribute(o)&&(s=n.getAttribute(o));const r="dompurify"+(s?"#"+s:"");try{return t.createPolicy(r,{createHTML(i){return i},createScriptURL(i){return i}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function Ew(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:SV();const t=De=>Ew(De);if(t.version="3.0.5",t.removed=[],!e||!e.document||e.document.nodeType!==9)return t.isSupported=!1,t;const n=e.document,s=n.currentScript;let{document:o}=e;const{DocumentFragment:r,HTMLTemplateElement:i,Node:c,Element:l,NodeFilter:d,NamedNodeMap:p=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:g,trustedTypes:v}=e,E=l.prototype,C=cu(E,"cloneNode"),S=cu(E,"nextSibling"),T=cu(E,"childNodes"),k=cu(E,"parentNode");if(typeof i=="function"){const De=o.createElement("template");De.content&&De.content.ownerDocument&&(o=De.content.ownerDocument)}let N,R="";const{implementation:H,createNodeIterator:K,createDocumentFragment:ee,getElementsByTagName:I}=o,{importNode:D}=n;let F={};t.isSupported=typeof dw=="function"&&typeof k=="function"&&H&&H.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:ie,ERB_EXPR:de,TMPLIT_EXPR:Ne,DATA_ATTR:Re,ARIA_ATTR:ze,IS_SCRIPT_OR_DATA:Ge,ATTR_WHITESPACE:ft}=Cw;let{IS_ALLOWED_URI:It}=Cw,et=null;const Z=Je({},[...pw,...Pp,...Bp,...Lp,...hw]);let ue=null;const Me=Je({},[...gw,...Ip,...bw,...lu]);let Q=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),pe=null,xe=null,J=!0,ke=!0,Oe=!1,wt=!0,Ke=!1,Et=!1,Fn=!1,_s=!1,Zt=!1,pn=!1,Un=!1,hn=!0,Hn=!1;const me="user-content-";let Ie=!0,it=!1,mt={},Ct=null;const Dt=Je({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let bt=null;const yt=Je({},["audio","video","img","source","image","track"]);let Qt=null;const Jn=Je({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),es="http://www.w3.org/1998/Math/MathML",ts="http://www.w3.org/2000/svg",zn="http://www.w3.org/1999/xhtml";let Io=zn,Bi=!1,Li=null;const bg=Je({},[es,ts,zn],Dp);let ao;const cf=["application/xhtml+xml","text/html"],zk="text/html";let zt,Or=null;const Vk=o.createElement("form"),yg=function(B){return B instanceof RegExp||B instanceof Function},Ws=function(B){if(!(Or&&Or===B)){if((!B||typeof B!="object")&&(B={}),B=Ci(B),ao=cf.indexOf(B.PARSER_MEDIA_TYPE)===-1?ao=zk:ao=B.PARSER_MEDIA_TYPE,zt=ao==="application/xhtml+xml"?Dp:au,et="ALLOWED_TAGS"in B?Je({},B.ALLOWED_TAGS,zt):Z,ue="ALLOWED_ATTR"in B?Je({},B.ALLOWED_ATTR,zt):Me,Li="ALLOWED_NAMESPACES"in B?Je({},B.ALLOWED_NAMESPACES,Dp):bg,Qt="ADD_URI_SAFE_ATTR"in B?Je(Ci(Jn),B.ADD_URI_SAFE_ATTR,zt):Jn,bt="ADD_DATA_URI_TAGS"in B?Je(Ci(yt),B.ADD_DATA_URI_TAGS,zt):yt,Ct="FORBID_CONTENTS"in B?Je({},B.FORBID_CONTENTS,zt):Dt,pe="FORBID_TAGS"in B?Je({},B.FORBID_TAGS,zt):{},xe="FORBID_ATTR"in B?Je({},B.FORBID_ATTR,zt):{},mt="USE_PROFILES"in B?B.USE_PROFILES:!1,J=B.ALLOW_ARIA_ATTR!==!1,ke=B.ALLOW_DATA_ATTR!==!1,Oe=B.ALLOW_UNKNOWN_PROTOCOLS||!1,wt=B.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ke=B.SAFE_FOR_TEMPLATES||!1,Et=B.WHOLE_DOCUMENT||!1,Zt=B.RETURN_DOM||!1,pn=B.RETURN_DOM_FRAGMENT||!1,Un=B.RETURN_TRUSTED_TYPE||!1,_s=B.FORCE_BODY||!1,hn=B.SANITIZE_DOM!==!1,Hn=B.SANITIZE_NAMED_PROPS||!1,Ie=B.KEEP_CONTENT!==!1,it=B.IN_PLACE||!1,It=B.ALLOWED_URI_REGEXP||yw,Io=B.NAMESPACE||zn,Q=B.CUSTOM_ELEMENT_HANDLING||{},B.CUSTOM_ELEMENT_HANDLING&&yg(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&yg(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Q.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ke&&(ke=!1),pn&&(Zt=!0),mt&&(et=Je({},[...hw]),ue=[],mt.html===!0&&(Je(et,pw),Je(ue,gw)),mt.svg===!0&&(Je(et,Pp),Je(ue,Ip),Je(ue,lu)),mt.svgFilters===!0&&(Je(et,Bp),Je(ue,Ip),Je(ue,lu)),mt.mathMl===!0&&(Je(et,Lp),Je(ue,bw),Je(ue,lu))),B.ADD_TAGS&&(et===Z&&(et=Ci(et)),Je(et,B.ADD_TAGS,zt)),B.ADD_ATTR&&(ue===Me&&(ue=Ci(ue)),Je(ue,B.ADD_ATTR,zt)),B.ADD_URI_SAFE_ATTR&&Je(Qt,B.ADD_URI_SAFE_ATTR,zt),B.FORBID_CONTENTS&&(Ct===Dt&&(Ct=Ci(Ct)),Je(Ct,B.FORBID_CONTENTS,zt)),Ie&&(et["#text"]=!0),Et&&Je(et,["html","head","body"]),et.table&&(Je(et,["tbody"]),delete pe.tbody),B.TRUSTED_TYPES_POLICY){if(typeof B.TRUSTED_TYPES_POLICY.createHTML!="function")throw lc('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof B.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw lc('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=B.TRUSTED_TYPES_POLICY,R=N.createHTML("")}else N===void 0&&(N=wV(v,s)),N!==null&&typeof R=="string"&&(R=N.createHTML(""));mn&&mn(B),Or=B}},Rc=Je({},["mi","mo","mn","ms","mtext"]),O=Je({},["foreignobject","desc","title","annotation-xml"]),P=Je({},["title","style","font","a","script"]),Y=Je({},Pp);Je(Y,Bp),Je(Y,pV);const W=Je({},Lp);Je(W,hV);const be=function(B){let le=k(B);(!le||!le.tagName)&&(le={namespaceURI:Io,tagName:"template"});const Ce=au(B.tagName),gt=au(le.tagName);return Li[B.namespaceURI]?B.namespaceURI===ts?le.namespaceURI===zn?Ce==="svg":le.namespaceURI===es?Ce==="svg"&&(gt==="annotation-xml"||Rc[gt]):!!Y[Ce]:B.namespaceURI===es?le.namespaceURI===zn?Ce==="math":le.namespaceURI===ts?Ce==="math"&&O[gt]:!!W[Ce]:B.namespaceURI===zn?le.namespaceURI===ts&&!O[gt]||le.namespaceURI===es&&!Rc[gt]?!1:!W[Ce]&&(P[Ce]||!Y[Ce]):!!(ao==="application/xhtml+xml"&&Li[B.namespaceURI]):!1},Pe=function(B){cc(t.removed,{element:B});try{B.parentNode.removeChild(B)}catch{B.remove()}},at=function(B,le){try{cc(t.removed,{attribute:le.getAttributeNode(B),from:le})}catch{cc(t.removed,{attribute:null,from:le})}if(le.removeAttribute(B),B==="is"&&!ue[B])if(Zt||pn)try{Pe(le)}catch{}else try{le.setAttribute(B,"")}catch{}},ns=function(B){let le,Ce;if(_s)B="<remove></remove>"+B;else{const ss=uV(B,/^[\r\n\t ]+/);Ce=ss&&ss[0]}ao==="application/xhtml+xml"&&Io===zn&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");const gt=N?N.createHTML(B):B;if(Io===zn)try{le=new g().parseFromString(gt,ao)}catch{}if(!le||!le.documentElement){le=H.createDocument(Io,"template",null);try{le.documentElement.innerHTML=Bi?R:gt}catch{}}const Jt=le.body||le.documentElement;return B&&Ce&&Jt.insertBefore(o.createTextNode(Ce),Jt.childNodes[0]||null),Io===zn?I.call(le,Et?"html":"body")[0]:Et?le.documentElement:Jt},lf=function(B){return K.call(B.ownerDocument||B,B,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},HX=function(B){return B instanceof h&&(typeof B.nodeName!="string"||typeof B.textContent!="string"||typeof B.removeChild!="function"||!(B.attributes instanceof p)||typeof B.removeAttribute!="function"||typeof B.setAttribute!="function"||typeof B.namespaceURI!="string"||typeof B.insertBefore!="function"||typeof B.hasChildNodes!="function")},uf=function(B){return typeof c=="object"?B instanceof c:B&&typeof B=="object"&&typeof B.nodeType=="number"&&typeof B.nodeName=="string"},co=function(B,le,Ce){F[B]&&cV(F[B],gt=>{gt.call(t,le,Ce,Or)})},Wk=function(B){let le;if(co("beforeSanitizeElements",B,null),HX(B))return Pe(B),!0;const Ce=zt(B.nodeName);if(co("uponSanitizeElement",B,{tagName:Ce,allowedTags:et}),B.hasChildNodes()&&!uf(B.firstElementChild)&&(!uf(B.content)||!uf(B.content.firstElementChild))&&In(/<[/\w]/g,B.innerHTML)&&In(/<[/\w]/g,B.textContent))return Pe(B),!0;if(!et[Ce]||pe[Ce]){if(!pe[Ce]&&qk(Ce)&&(Q.tagNameCheck instanceof RegExp&&In(Q.tagNameCheck,Ce)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(Ce)))return!1;if(Ie&&!Ct[Ce]){const gt=k(B)||B.parentNode,Jt=T(B)||B.childNodes;if(Jt&&gt){const ss=Jt.length;for(let Nt=ss-1;Nt>=0;--Nt)gt.insertBefore(C(Jt[Nt],!0),S(B))}}return Pe(B),!0}return B instanceof l&&!be(B)||(Ce==="noscript"||Ce==="noembed"||Ce==="noframes")&&In(/<\/no(script|embed|frames)/i,B.innerHTML)?(Pe(B),!0):(Ke&&B.nodeType===3&&(le=B.textContent,le=vs(le,ie," "),le=vs(le,de," "),le=vs(le,Ne," "),B.textContent!==le&&(cc(t.removed,{element:B.cloneNode()}),B.textContent=le)),co("afterSanitizeElements",B,null),!1)},jk=function(B,le,Ce){if(hn&&(le==="id"||le==="name")&&(Ce in o||Ce in Vk))return!1;if(!(ke&&!xe[le]&&In(Re,le))){if(!(J&&In(ze,le))){if(!ue[le]||xe[le]){if(!(qk(B)&&(Q.tagNameCheck instanceof RegExp&&In(Q.tagNameCheck,B)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(B))&&(Q.attributeNameCheck instanceof RegExp&&In(Q.attributeNameCheck,le)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(le))||le==="is"&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&In(Q.tagNameCheck,Ce)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(Ce))))return!1}else if(!Qt[le]){if(!In(It,vs(Ce,ft,""))){if(!((le==="src"||le==="xlink:href"||le==="href")&&B!=="script"&&fV(Ce,"data:")===0&&bt[B])){if(!(Oe&&!In(Ge,vs(Ce,ft,"")))){if(Ce)return!1}}}}}}return!0},qk=function(B){return B.indexOf("-")>0},Kk=function(B){let le,Ce,gt,Jt;co("beforeSanitizeAttributes",B,null);const{attributes:ss}=B;if(!ss)return;const Nt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ue};for(Jt=ss.length;Jt--;){le=ss[Jt];const{name:os,namespaceURI:vg}=le;Ce=os==="value"?le.value:dV(le.value);const VX=Ce;if(gt=zt(os),Nt.attrName=gt,Nt.attrValue=Ce,Nt.keepAttr=!0,Nt.forceKeepAttr=void 0,co("uponSanitizeAttribute",B,Nt),Ce=Nt.attrValue,Nt.forceKeepAttr)continue;if(!Nt.keepAttr){at(os,B);continue}if(!wt&&In(/\/>/i,Ce)){at(os,B);continue}Ke&&(Ce=vs(Ce,ie," "),Ce=vs(Ce,de," "),Ce=vs(Ce,Ne," "));const Gk=zt(B.nodeName);if(!jk(Gk,gt,Ce)){at(os,B);continue}if(Hn&&(gt==="id"||gt==="name")&&(at(os,B),Ce=me+Ce),N&&typeof v=="object"&&typeof v.getAttributeType=="function"&&!vg)switch(v.getAttributeType(Gk,gt)){case"TrustedHTML":{Ce=N.createHTML(Ce);break}case"TrustedScriptURL":{Ce=N.createScriptURL(Ce);break}}if(Ce!==VX)try{vg?B.setAttributeNS(vg,os,Ce):B.setAttribute(os,Ce)}catch{at(os,B)}}co("afterSanitizeAttributes",B,null)},zX=function De(B){let le;const Ce=lf(B);for(co("beforeSanitizeShadowDOM",B,null);le=Ce.nextNode();)co("uponSanitizeShadowNode",le,null),!Wk(le)&&(le.content instanceof r&&De(le.content),Kk(le));co("afterSanitizeShadowDOM",B,null)};return t.sanitize=function(De){let B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},le,Ce,gt,Jt;if(Bi=!De,Bi&&(De="<!-->"),typeof De!="string"&&!uf(De))if(typeof De.toString=="function"){if(De=De.toString(),typeof De!="string")throw lc("dirty is not a string, aborting")}else throw lc("toString is not a function");if(!t.isSupported)return De;if(Fn||Ws(B),t.removed=[],typeof De=="string"&&(it=!1),it){if(De.nodeName){const os=zt(De.nodeName);if(!et[os]||pe[os])throw lc("root node is forbidden and cannot be sanitized in-place")}}else if(De instanceof c)le=ns("<!---->"),Ce=le.ownerDocument.importNode(De,!0),Ce.nodeType===1&&Ce.nodeName==="BODY"||Ce.nodeName==="HTML"?le=Ce:le.appendChild(Ce);else{if(!Zt&&!Ke&&!Et&&De.indexOf("<")===-1)return N&&Un?N.createHTML(De):De;if(le=ns(De),!le)return Zt?null:Un?R:""}le&&_s&&Pe(le.firstChild);const ss=lf(it?De:le);for(;gt=ss.nextNode();)Wk(gt)||(gt.content instanceof r&&zX(gt.content),Kk(gt));if(it)return De;if(Zt){if(pn)for(Jt=ee.call(le.ownerDocument);le.firstChild;)Jt.appendChild(le.firstChild);else Jt=le;return(ue.shadowroot||ue.shadowrootmode)&&(Jt=D.call(n,Jt,!0)),Jt}let Nt=Et?le.outerHTML:le.innerHTML;return Et&&et["!doctype"]&&le.ownerDocument&&le.ownerDocument.doctype&&le.ownerDocument.doctype.name&&In(vw,le.ownerDocument.doctype.name)&&(Nt="<!DOCTYPE "+le.ownerDocument.doctype.name+`>
`+Nt),Ke&&(Nt=vs(Nt,ie," "),Nt=vs(Nt,de," "),Nt=vs(Nt,Ne," ")),N&&Un?N.createHTML(Nt):Nt},t.setConfig=function(De){Ws(De),Fn=!0},t.clearConfig=function(){Or=null,Fn=!1},t.isValidAttribute=function(De,B,le){Or||Ws({});const Ce=zt(De),gt=zt(B);return jk(Ce,gt,le)},t.addHook=function(De,B){typeof B=="function"&&(F[De]=F[De]||[],cc(F[De],B))},t.removeHook=function(De){if(F[De])return lV(F[De])},t.removeHooks=function(De){F[De]&&(F[De]=[])},t.removeAllHooks=function(){F={}},t}var $p=Ew();const _w=X.each,AV=X.trim,TV=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],NV={ftp:21,http:80,https:443,mailto:25},kV=["img","video"],xV=(e,t)=>j(e)?!e:j(t)?!Ze(kV,t):!0,RV=e=>{try{return decodeURIComponent(e)}catch{return unescape(e)}},Sw=(e,t,n)=>{const s=RV(t).replace(/\s/g,"");return e.allow_script_urls?!1:/((java|vb)script|mhtml):/i.test(s)?!0:e.allow_html_data_urls?!1:/^data:image\//i.test(s)?xV(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(s):/^data:/i.test(s)};class Qn{static parseDataUri(t){let n;const s=decodeURIComponent(t).split(","),o=/data:([^;]+)/.exec(s[0]);return o&&(n=o[1]),{type:n,data:s[1]}}static isDomSafe(t,n,s={}){if(s.allow_script_urls)return!0;{const o=rr.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!Sw(s,o,n)}}static getDocumentBaseUrl(t){var n;let s;return t.protocol.indexOf("http")!==0&&t.protocol!=="file:"?s=(n=t.href)!==null&&n!==void 0?n:"":s=t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/")),s}constructor(t,n={}){this.path="",this.directory="",t=AV(t),this.settings=n;const s=n.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)){o.source=t;return}const r=t.indexOf("//")===0;if(t.indexOf("/")===0&&!r&&(t=(s&&s.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const c=s?s.path:new Qn(document.location.href).directory;if((s==null?void 0:s.protocol)==="")t="//mce_host"+o.toAbsPath(c,t);else{const l=/([^#?]*)([#?]?.*)/.exec(t);l&&(t=(s&&s.protocol||"http")+"://mce_host"+o.toAbsPath(c,l[1])+l[2])}}t=t.replace(/@@/g,"(mce_at)");const i=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);i&&_w(TV,(c,l)=>{let d=i[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),o[c]=d}),s&&(o.protocol||(o.protocol=s.protocol),o.userInfo||(o.userInfo=s.userInfo),!o.port&&o.host==="mce_host"&&(o.port=s.port),(!o.host||o.host==="mce_host")&&(o.host=s.host),o.source=""),r&&(o.protocol="")}setPath(t){const n=/^(.*?)\/?(\w+)?$/.exec(t);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(t){if(t==="./")return t;const n=new Qn(t,{base_uri:this});if(n.host!=="mce_host"&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&n.protocol!=="")return n.getURI();const s=this.getURI(),o=n.getURI();if(s===o||s.charAt(s.length-1)==="/"&&s.substr(0,s.length-1)===o)return s;let r=this.toRelPath(this.path,n.path);return n.query&&(r+="?"+n.query),n.anchor&&(r+="#"+n.anchor),r}toAbsolute(t,n){const s=new Qn(t,{base_uri:this});return s.getURI(n&&this.isSameOrigin(s))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const n=this.protocol?NV[this.protocol]:null;if(n&&(this.port||n)==(t.port||n))return!0}return!1}toRelPath(t,n){let s=0,o="",r,i;const c=t.substring(0,t.lastIndexOf("/")).split("/"),l=n.split("/");if(c.length>=l.length){for(r=0,i=c.length;r<i;r++)if(r>=l.length||c[r]!==l[r]){s=r+1;break}}if(c.length<l.length){for(r=0,i=l.length;r<i;r++)if(r>=c.length||c[r]!==l[r]){s=r+1;break}}if(s===1)return n;for(r=0,i=c.length-(s-1);r<i;r++)o+="../";for(r=s-1,i=l.length;r<i;r++)r!==s-1?o+="/"+l[r]:o+=l[r];return o}toAbsPath(t,n){let s=0;const o=/\/$/.test(n)?"/":"",r=t.split("/"),i=n.split("/"),c=[];_w(r,h=>{h&&c.push(h)});const l=[];for(let h=i.length-1;h>=0;h--)if(!(i[h].length===0||i[h]===".")){if(i[h]===".."){s++;continue}if(s>0){s--;continue}l.push(i[h])}const d=c.length-s;let p;return d<=0?p=oa(l).join("/"):p=c.slice(0,d).join("/")+"/"+oa(l).join("/"),p.indexOf("/")!==0&&(p="/"+p),o&&p.lastIndexOf("/")!==p.length-1&&(p+=o),p}getURI(t=!1){let n;return(!this.source||t)&&(n="",t||(this.protocol?n+=this.protocol+"://":n+="//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const OV=X.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Mp="data-mce-type";let ww=0;const Aw=(e,t,n,s,o)=>{var r,i,c,l;const d=t.validate,p=n.getSpecialElements();e.nodeType===Jc&&!t.allow_conditional_comments&&/^\[if/i.test((r=e.nodeValue)!==null&&r!==void 0?r:"")&&(e.nodeValue=" "+e.nodeValue);const h=(i=o==null?void 0:o.tagName)!==null&&i!==void 0?i:e.nodeName.toLowerCase();if(s!=="html"&&n.isValid(s)){j(o)&&(o.allowedTags[h]=!0);return}if(e.nodeType!==fa||h==="body")return;const g=A.fromDom(e),v=da(g,Mp),E=Sn(g,"data-mce-bogus");if(!v&&G(E)){E==="all"?lt(g):Co(g);return}const C=n.getElementRule(h);if(d&&!C){Ae(p,h)?lt(g):Co(g);return}else j(o)&&(o.allowedTags[h]=!0);if(d&&C&&!v){if(U((c=C.attributesForced)!==null&&c!==void 0?c:[],S=>{$t(g,S.name,S.value==="{$uid}"?`mce_${ww++}`:S.value)}),U((l=C.attributesDefault)!==null&&l!==void 0?l:[],S=>{da(g,S.name)||$t(g,S.name,S.value==="{$uid}"?`mce_${ww++}`:S.value)}),C.attributesRequired&&!ut(C.attributesRequired,S=>da(g,S))){Co(g);return}if(C.removeEmptyAttrs&&rD(g)){Co(g);return}C.outputName&&C.outputName!==h&&S1(g,C.outputName)}},DV=(e,t,n,s,o)=>{const r=e.tagName.toLowerCase(),{attrName:i,attrValue:c}=o;o.keepAttr=Tw(t,n,s,r,i,c),o.keepAttr?(o.allowedAttributes[i]=!0,kw(i,n)&&(o.attrValue=i),t.allow_svg_data_urls&&kt(c,"data:image/svg+xml")&&(o.forceKeepAttr=!0)):Nw(e,i)&&(o.forceKeepAttr=!0)},Tw=(e,t,n,s,o,r)=>n!=="html"&&!nr(s)?!0:!(o in OV&&Sw(e,r,s))&&(!e.validate||t.isValid(s,o)||kt(o,"data-")||kt(o,"aria-")),Nw=(e,t)=>e.hasAttribute(Mp)&&(t==="id"||t==="class"||t==="style"),kw=(e,t)=>e in t.getBoolAttrs(),PV=(e,t,n,s)=>{const{attributes:o}=e;for(let r=o.length-1;r>=0;r--){const i=o[r],c=i.name,l=i.value;!Tw(t,n,s,e.tagName.toLowerCase(),c,l)&&!Nw(e,c)?e.removeAttribute(c):kw(c,n)&&e.setAttribute(c,c)}},BV=(e,t,n)=>{const s=$p();return s.addHook("uponSanitizeElement",(o,r)=>{Aw(o,e,t,n.track(o),r)}),s.addHook("uponSanitizeAttribute",(o,r)=>{DV(o,e,t,n.current(),r)}),s},LV=(e,t)=>{const s={...{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]}};return s.PARSER_MEDIA_TYPE=t,e.allow_script_urls?s.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(s.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),s},IV=e=>{const t=Hy(e);if(t==="svg"){const n=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(o=>`xlink:${o}`),s={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:n};$p().sanitize(e,s)}else if(t==="math"){const n={IN_PLACE:!0,USE_PROFILES:{mathMl:!0}};$p().sanitize(e,n)}else throw new Error("Not a namespace element")},$V=(e,t)=>{const n=fP();if(e.sanitize){const s=BV(e,t,n);return{sanitizeHtmlElement:(r,i)=>{s.sanitize(r,LV(e,i)),s.removed=[],n.reset()},sanitizeNamespaceElement:IV}}else return{sanitizeHtmlElement:(r,i)=>{const c=document.createNodeIterator(r,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let l;for(;l=c.nextNode();){const d=n.track(l);Aw(l,e,t,d),fe(l)&&PV(l,e,t,d)}n.reset()},sanitizeNamespaceElement:Se}},xw=X.makeMap,Rw=X.extend,Ow=(e,t,n,s)=>{const o=e.name,r=o in n&&o!=="title"&&o!=="textarea"&&o!=="noscript",i=t.childNodes;for(let c=0,l=i.length;c<l;c++){const d=i[c],p=new tn(d.nodeName.toLowerCase(),d.nodeType);if(fe(d)){const h=d.attributes;for(let g=0,v=h.length;g<v;g++){const E=h[g];p.attr(E.name,E.value)}nr(p.name)&&(s(d),p.value=d.innerHTML)}else q(d)?(p.value=d.data,r&&(p.raw=!0)):(Eo(d)||XD(d)||ZD(d))&&(p.value=d.data);nr(p.name)||Ow(p,d,n,s),e.append(p)}},MV=(e,t,n)=>{const s=[];for(let o=e,r=o;o;r=o,o=o.walk()){const i=o;U(t,c=>c(i)),Fe(i.parent)&&i!==e?o=r:s.push(i)}for(let o=s.length-1;o>=0;o--){const r=s[o];U(n,i=>i(r))}},FV=(e,t,n,s)=>{const o=n.validate,r=t.getNonEmptyElements(),i=t.getWhitespaceElements(),c=Rw(xw("script,style,head,html,body,title,meta,param"),t.getBlockElements()),l=av(t),d=/[ \t\r\n]+/g,p=/^[ \t\r\n]+/,h=/[ \t\r\n]+$/,g=k=>{let N=k.parent;for(;j(N);){if(N.name in i)return!0;N=N.parent}return!1},v=k=>{let N=k;for(;j(N);){if(N.name in l)return oc(t,r,i,N);N=N.parent}return!1},E=k=>k.name in c||Sd(t,k)||nr(k.name)&&k.parent===e,C=(k,N)=>{const R=N?k.prev:k.next;return j(R)||Fe(k.parent)?!1:E(k.parent)&&(k.parent!==e||s.isRootContent===!0)};return[k=>{var N;if(k.type===3&&!g(k)){let R=(N=k.value)!==null&&N!==void 0?N:"";R=R.replace(d," "),(iH(k.prev,E)||C(k,!0))&&(R=R.replace(p,"")),R.length===0||R===" "&&k.prev&&k.prev.type===Jc&&k.next&&k.next.type===Jc?k.remove():k.value=R}},k=>{var N;if(k.type===1){const R=t.getElementRule(k.name);if(o&&R){const H=oc(t,r,i,k);R.paddInEmptyBlock&&H&&v(k)?cp(n,s,E,k):R.removeEmpty&&H?E(k)?k.remove():k.unwrap():R.paddEmpty&&(H||oH(k))&&cp(n,s,E,k)}}else if(k.type===3&&!g(k)){let R=(N=k.value)!==null&&N!==void 0?N:"";(k.next&&E(k.next)||C(k,!1))&&(R=R.replace(h,"")),R.length===0?k.remove():k.value=R}}]},UV=(e,t)=>{var n;const s=(n=t.forced_root_block)!==null&&n!==void 0?n:e.forced_root_block;return s===!1?"":s===!0?"p":s},Ei=(e={},t=_o())=>{const n=rw(),s=rw(),o={validate:!0,root_name:"body",sanitize:!0,...e},r=new DOMParser,i=$V(o,t),c=(N,R,H="html")=>{const K=H==="xhtml"?"application/xhtml+xml":"text/html",ee=Ae(t.getSpecialElements(),R.toLowerCase()),I=ee?`<${R}>${N}</${R}>`:N,D=()=>H==="xhtml"?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${I}</body></html>`:/^[\s]*<head/i.test(N)||/^[\s]*<html/i.test(N)||/^[\s]*<!DOCTYPE/i.test(N)?`<html>${I}</html>`:`<body>${I}</body>`,F=r.parseFromString(D(),K).body;return i.sanitizeHtmlElement(F,K),ee?F.firstChild:F},l=n.addFilter,d=n.getFilters,p=n.removeFilter,h=s.addFilter,g=s.getFilters,v=s.removeFilter,E=(N,R)=>{fp(t,N)&&R.push(N)},C=(N,R)=>{const H=G(R.attr(Mp)),K=R.type===1&&!Ae(N,R.name)&&!Sd(t,R)&&!nr(R.name);return R.type===3||K&&!H},S=(N,R)=>{const H=Rw(xw("script,style,head,html,body,title,meta,param"),t.getBlockElements()),K=/^[ \t\r\n]+/,ee=/[ \t\r\n]+$/;let I=N.firstChild,D=null;const F=ie=>{var de,Ne;ie&&(I=ie.firstChild,I&&I.type===3&&(I.value=(de=I.value)===null||de===void 0?void 0:de.replace(K,"")),I=ie.lastChild,I&&I.type===3&&(I.value=(Ne=I.value)===null||Ne===void 0?void 0:Ne.replace(ee,"")))};if(t.isValidChild(N.name,R.toLowerCase())){for(;I;){const ie=I.next;C(H,I)?(D||(D=new tn(R,1),D.attr(o.forced_root_block_attrs),N.insert(D,I)),D.append(I)):(F(D),D=null),I=ie}F(D)}},k={schema:t,addAttributeFilter:h,getAttributeFilters:g,removeAttributeFilter:v,addNodeFilter:l,getNodeFilters:d,removeNodeFilter:p,parse:(N,R={})=>{var H;const K=o.validate,ee=(H=R.context)!==null&&H!==void 0?H:o.root_name,I=c(N,ee,R.format);vd(t,I);const D=new tn(ee,11);Ow(D,I,t.getSpecialElements(),i.sanitizeNamespaceElement),I.innerHTML="";const[F,ie]=FV(D,t,o,R),de=[],Ne=K?ft=>E(ft,de):Se,Re={nodes:{},attributes:{}},ze=ft=>dS(d(),g(),ft,Re);if(MV(D,[F,ze],[ie,Ne]),de.reverse(),K&&de.length>0)if(R.context){const{pass:ft,fail:It}=po(de,et=>et.parent===D);up(It,t,D,ze),R.invalid=ft.length>0}else up(de,t,D,ze);const Ge=UV(o,R);return Ge&&(D.name==="body"||R.isRootContent)&&S(D,Ge),R.invalid||mS(Re,R),D}};return sV(k,o),zz(k,o,t),k},HV=e=>su(e)?xo({validate:!1}).serialize(e):e,Dw=(e,t,n)=>{const s=HV(e),o=t(s);if(o.isDefaultPrevented())return o;if(su(e))if(o.content!==s){const r=Ei({validate:!1,forced_root_block:!1,...n}).parse(o.content,{context:e.name});return{...o,content:r}}else return{...o,content:e};else return o},Pw=e=>({sanitize:TC(e),sandbox_iframes:kC(e),sandbox_iframes_exclusions:sm(e)}),Bw=(e,t)=>{if(t.no_events)return an.value(t);{const n=R$(e,t);return n.isDefaultPrevented()?an.error(NE(e,{content:"",...n}).content):an.value(n)}},Lw=(e,t,n)=>n.no_events?t:Dw(t,o=>NE(e,{...n,content:o}),Pw(e)).content,Fp=(e,t)=>{if(t.no_events)return an.value(t);{const n=Dw(t.content,s=>x$(e,{...t,content:s}),Pw(e));return n.isDefaultPrevented()?(TE(e,n),an.error(void 0)):an.value(n)}},Up=(e,t,n)=>{n.no_events||TE(e,{...n,content:t})},Hp=(e,t,n)=>({element:e,width:t,rows:n}),Iw=(e,t)=>({element:e,cells:t}),zV=(e,t)=>({x:e,y:t}),$w=(e,t)=>Xs(e,t).bind(Qc).getOr(1),VV=(e,t,n,s,o)=>{const r=$w(o,"rowspan"),i=$w(o,"colspan"),c=e.rows;for(let l=n;l<n+r;l++){c[l]||(c[l]=Iw(Tv(s),[]));for(let d=t;d<t+i;d++){const p=c[l].cells;p[d]=l===n&&d===t?o:cr(o)}}},WV=(e,t,n)=>{const s=e.rows;return!!(s[n]?s[n].cells:[])[t]},jV=(e,t,n)=>{for(;WV(e,t,n);)t++;return t},Mw=e=>Vt(e,(t,n)=>n.cells.length>t?n.cells.length:t,0),Fw=(e,t)=>{const n=e.rows;for(let s=0;s<n.length;s++){const o=n[s].cells;for(let r=0;r<o.length;r++)if(Qe(o[r],t))return b.some(zV(r,s))}return b.none()},Uw=(e,t,n,s,o)=>{const r=[],i=e.rows;for(let c=n;c<=o;c++){const l=i[c].cells,d=t<s?l.slice(t,s+1):l.slice(s,t+1);r.push(Iw(i[c].element,d))}return r},qV=(e,t,n)=>{const s=t.x,o=t.y,r=n.x,i=n.y,c=o<i?Uw(e,s,o,r,i):Uw(e,s,i,r,o);return Hp(e.element,Mw(c),c)},KV=(e,t)=>{const n=cr(e.element),s=A.fromTag("tbody");return Jo(s,t),At(n,s),n},GV=e=>Ue(e.rows,t=>{const n=Ue(t.cells,o=>{const r=Tv(o);return Mt(r,"colspan"),Mt(r,"rowspan"),r}),s=cr(t.element);return Jo(s,n),s}),YV=e=>{const t=Hp(cr(e),0,[]);return U(Kt(e,"tr"),(n,s)=>{U(Kt(n,"td,th"),(o,r)=>{VV(t,jV(t,r,s),s,n,o)})}),Hp(t.element,Mw(t.rows),t.rows)},XV=e=>KV(e,GV(e)),ZV=(e,t,n)=>Fw(e,t).bind(s=>Fw(e,n).map(o=>qV(e,s,o))),QV=e=>vt(e,t=>He(t)==="ul"||He(t)==="ol"),JV=(e,t)=>vt(e,n=>He(n)==="li"&&hm(n,t)).fold(te([]),n=>QV(e).map(s=>{const o=A.fromTag(He(s)),r=aa(ad(s),(i,c)=>kt(c,"list-style"));return rl(o,r),[A.fromTag("li"),o]}).getOr([])),eW=(e,t)=>{const n=Vt(t,(s,o)=>(At(o,s),o),e);return t.length>0?Rm([n]):n},tW=e=>si(e)?ds(e).filter(Fd).fold(te([]),t=>[e,t]):Fd(e)?[e]:[],nW=(e,t,n)=>{const s=A.fromDom(t.commonAncestorContainer),o=oo(s,e),r=ve(o,l=>n.isWrapper(He(l))),i=JV(o,t),c=r.concat(i.length?i:tW(s));return Ue(c,cr)},Hw=()=>Rm([]),sW=(e,t,n)=>eW(A.fromDom(t.cloneContents()),nW(e,t,n)),oW=(e,t)=>ya(t,"table",ae(Qe,e)),rW=(e,t)=>oW(e,t[0]).bind(n=>{const s=t[0],o=t[t.length-1],r=YV(n);return ZV(r,s,o).map(i=>Rm([XV(i)]))}).getOrThunk(Hw),iW=(e,t,n)=>t.length>0&&t[0].collapsed?Hw():sW(e,t[0],n),aW=(e,t,n)=>{const s=nE(t,e);return s.length>0?rW(e,s):iW(e,t,n)},uu=(e,t)=>t>=0&&t<e.length&&gr(e.charAt(t)),zw=e=>wn(e.innerText),cW=e=>e.map(t=>t.nodeName).getOr("div").toLowerCase(),lW=e=>b.from(e.selection.getRng()).map(t=>{var n;const s=b.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),o=e.getBody(),r=cW(s),i=A.fromDom(t.cloneContents());p_(i),h_(i);const c=e.dom.add(o,r,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},i.dom),l=zw(c),d=wn((n=c.textContent)!==null&&n!==void 0?n:"");if(e.dom.remove(c),uu(d,0)||uu(d,d.length-1)){const p=s.getOr(o),h=zw(p),g=h.indexOf(l);if(g===-1)return l;{const v=uu(h,g-1),E=uu(h,g+l.length);return(v?" ":"")+l+(E?" ":"")}}else return l}).getOr(""),uW=(e,t)=>{const n=e.selection.getRng(),s=e.dom.create("body"),o=e.selection.getSel(),r=Hm(e,mm(o)),i=t.contextual?aW(A.fromDom(e.getBody()),r,e.schema).dom:n.cloneContents();return i&&s.appendChild(i),e.selection.serializer.serialize(s,t)},fW=(e,t)=>{if(t.format==="text")return lW(e);{const n=uW(e,t);return t.format==="tree"?n:e.selection.isCollapsed()?"":n}},dW=(e,t)=>({...e,format:t,get:!0,selection:!0,getInner:!0}),mW=(e,t,n={})=>{const s=dW(n,t);return Bw(e,s).fold(St,o=>{const r=fW(e,o);return Lw(e,r,o)})},zp=0,Vw=1,Ww=2,pW=(e,t)=>{const n=e.length+t.length+2,s=new Array(n),o=new Array(n),r=(p,h,g)=>({start:p,end:h,diag:g}),i=(p,h,g,v,E)=>{const C=l(p,h,g,v);if(C===null||C.start===h&&C.diag===h-v||C.end===p&&C.diag===p-g){let S=p,T=g;for(;S<h||T<v;)S<h&&T<v&&e[S]===t[T]?(E.push([zp,e[S]]),++S,++T):h-p>v-g?(E.push([Ww,e[S]]),++S):(E.push([Vw,t[T]]),++T)}else{i(p,C.start,g,C.start-C.diag,E);for(let S=C.start;S<C.end;++S)E.push([zp,e[S]]);i(C.end,h,C.end-C.diag,v,E)}},c=(p,h,g,v)=>{let E=p;for(;E-h<v&&E<g&&e[E]===t[E-h];)++E;return r(p,E,h)},l=(p,h,g,v)=>{const E=h-p,C=v-g;if(E===0||C===0)return null;const S=E-C,T=C+E,k=(T%2===0?T:T+1)/2;s[1+k]=p,o[1+k]=h+1;let N,R,H,K,ee;for(N=0;N<=k;++N){for(R=-N;R<=N;R+=2){for(H=R+k,R===-N||R!==N&&s[H-1]<s[H+1]?s[H]=s[H+1]:s[H]=s[H-1]+1,K=s[H],ee=K-p+g-R;K<h&&ee<v&&e[K]===t[ee];)s[H]=++K,++ee;if(S%2!==0&&S-N<=R&&R<=S+N&&o[H-S]<=s[H])return c(o[H-S],R+p-g,h,v)}for(R=S-N;R<=S+N;R+=2){for(H=R+k-S,R===S-N||R!==S+N&&o[H+1]<=o[H-1]?o[H]=o[H+1]-1:o[H]=o[H-1],K=o[H]-1,ee=K-p+g-R;K>=p&&ee>=g&&e[K]===t[ee];)o[H]=K--,ee--;if(S%2===0&&-N<=R&&R<=N&&o[H]<=s[H+S])return c(o[H],R+p-g,h,v)}}return null},d=[];return i(0,e.length,0,t.length,d),d},jw=e=>fe(e)?e.outerHTML:q(e)?rr.encodeRaw(e.data,!1):Eo(e)?"<!--"+e.data+"-->":"",hW=e=>{let t;const n=document.createElement("div"),s=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)s.appendChild(t);return s},gW=(e,t,n)=>{const s=hW(t);if(e.hasChildNodes()&&n<e.childNodes.length){const o=e.childNodes[n];e.insertBefore(s,o)}else e.appendChild(s)},bW=(e,t)=>{if(e.hasChildNodes()&&t<e.childNodes.length){const n=e.childNodes[t];e.removeChild(n)}},yW=(e,t)=>{let n=0;U(e,s=>{s[0]===zp?n++:s[0]===Vw?(gW(t,s[1],n),n++):s[0]===Ww&&bW(t,n)})},vW=(e,t)=>ve(Ue(En(e.childNodes),_t(wn,jw)),n=>n.length>0),CW=(e,t)=>{const n=Ue(En(t.childNodes),jw);return yW(pW(n,e),t),t},EW=Ns(()=>document.implementation.createHTMLDocument("undo")),_W=e=>e.querySelector("iframe")!==null,SW=e=>({type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}),wW=e=>({type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}),fu=e=>{const t=e.serializer.getTempAttrs(),n=m_(e.getBody(),t);return _W(n)?SW(vW(n)):wW(wn(n.innerHTML))},Vp=(e,t,n)=>{const s=n?t.beforeBookmark:t.bookmark;t.type==="fragmented"?CW(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:j(s)&&ZC(s)?!s.isFakeCaret:!0}),s&&(e.selection.moveToBookmark(s),e.selection.scrollIntoView())},Wp=e=>e.type==="fragmented"?e.fragments.join(""):e.content,qw=e=>{const t=A.fromTag("body",EW());return al(t,Wp(e)),U(Kt(t,"*[data-mce-bogus]"),Co),Ay(t)},AW=(e,t)=>Wp(e)===Wp(t),TW=(e,t)=>qw(e)===qw(t),jp=(e,t)=>!e||!t?!1:AW(e,t)?!0:TW(e,t),qp=e=>e.get()===0,du=(e,t,n)=>{qp(n)&&(e.typing=t)},Kw=(e,t)=>{e.typing&&(du(e,!1,t),e.add())},NW=e=>{e.typing&&(e.typing=!1,e.add())},kW=(e,t,n)=>{qp(t)&&n.set(Zd(e.selection))},xW=(e,t,n,s,o,r,i)=>{const c=fu(e),l=X.extend(r||{},c);if(!qp(s)||e.removed)return null;const d=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:l,lastLevel:d,originalEvent:i}).isDefaultPrevented()||d&&jp(d,l))return null;t.data[n.get()]&&o.get().each(g=>{t.data[n.get()].beforeBookmark=g});const p=yL(e);if(p&&t.data.length>p){for(let g=0;g<t.data.length-1;g++)t.data[g]=t.data[g+1];t.data.length--,n.set(t.data.length)}l.bookmark=Zd(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(l),n.set(t.data.length-1);const h={level:l,lastLevel:d,originalEvent:i};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",h),e.dispatch("change",h)):e.dispatch("AddUndo",h),l},RW=(e,t,n)=>{t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")},OW=(e,t,n,s,o)=>{if(t.transact(s)){const r=t.data[n.get()].bookmark,i=t.data[n.get()-1];Vp(e,i,!0),t.transact(o)&&(t.data[n.get()-1].beforeBookmark=r)}},DW=(e,t,n)=>{let s;return t.get()<n.length-1&&(t.set(t.get()+1),s=n[t.get()],Vp(e,s,!1),e.setDirty(!0),e.dispatch("Redo",{level:s})),s},PW=(e,t,n,s)=>{let o;return t.typing&&(t.add(),t.typing=!1,du(t,!1,n)),s.get()>0&&(s.set(s.get()-1),o=t.data[s.get()],Vp(e,o,!0),e.setDirty(!0),e.dispatch("Undo",{level:o})),o},BW=e=>{e.clear(),e.add()},LW=(e,t,n)=>n.get()>0||t.typing&&t.data[0]&&!jp(fu(e),t.data[0]),IW=(e,t)=>t.get()<e.data.length-1&&!e.typing,$W=(e,t,n)=>(Kw(e,t),e.beforeChange(),e.ignore(n),e.add()),MW=(e,t)=>{try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}},FW=(e,t)=>{const n=e.dom,s=j(t)?t:e.getBody();U(n.select("table,a",s),o=>{switch(o.nodeName){case"TABLE":const r=wL(e),i=n.getAttrib(o,"border");(!i||i==="0")&&e.hasVisual?n.addClass(o,r):n.removeClass(o,r);break;case"A":if(!n.getAttrib(o,"href")){const c=n.getAttrib(o,"name")||o.id,l=SC(e);c&&e.hasVisual?n.addClass(o,l):n.removeClass(o,l)}break}}),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})},Gw=e=>({init:{bindEvents:Se},undoManager:{beforeChange:(t,n)=>kW(e,t,n),add:(t,n,s,o,r,i)=>xW(e,t,n,s,o,r,i),undo:(t,n,s)=>PW(e,t,n,s),redo:(t,n)=>DW(e,t,n),clear:(t,n)=>RW(e,t,n),reset:t=>BW(t),hasUndo:(t,n)=>LW(e,t,n),hasRedo:(t,n)=>IW(t,n),transact:(t,n,s)=>$W(t,n,s),ignore:(t,n)=>MW(t,n),extra:(t,n,s,o)=>OW(e,t,n,s,o)},formatter:{match:(t,n,s,o)=>vp(e,t,n,s,o),matchAll:(t,n)=>XH(e,t,n),matchNode:(t,n,s,o)=>Us(e,t,n,s,o),canApply:t=>QH(e,t),closest:t=>ZH(e,t),apply:(t,n,s)=>QS(e,t,n,s),remove:(t,n,s,o)=>YS(e,t,n,s,o),toggle:(t,n,s)=>$z(e,t,n,s),formatChanged:(t,n,s,o,r)=>Iz(e,t,n,s,o,r)},editor:{getContent:t=>wF(e,t),setContent:(t,n)=>GH(e,t,n),insertContent:(t,n)=>WH(e,t,n),addVisual:t=>FW(e,t)},selection:{getContent:(t,n)=>mW(e,t,n)},autocompleter:{addDecoration:Se,removeDecoration:Se},raw:{getModel:()=>b.none()}}),UW=e=>{const t=d=>ye(d)?d:{},{init:n,undoManager:s,formatter:o,editor:r,selection:i,autocompleter:c,raw:l}=e;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:s.beforeChange,add:s.add,undo:s.undo,redo:s.redo,clear:s.clear,reset:s.reset,hasUndo:s.hasUndo,hasRedo:s.hasRedo,transact:(d,p,h)=>s.transact(h),ignore:(d,p)=>s.ignore(p),extra:(d,p,h,g)=>s.extra(h,g)},formatter:{match:(d,p,h,g)=>o.match(d,t(p),g),matchAll:o.matchAll,matchNode:o.matchNode,canApply:d=>o.canApply(d),closest:d=>o.closest(d),apply:(d,p,h)=>o.apply(d,t(p)),remove:(d,p,h,g)=>o.remove(d,t(p)),toggle:(d,p,h)=>o.toggle(d,t(p)),formatChanged:(d,p,h,g,v)=>o.formatChanged(p,h,g,v)},editor:{getContent:d=>r.getContent(d),setContent:(d,p)=>({content:r.setContent(d,p),html:""}),insertContent:(d,p)=>(r.insertContent(d),""),addVisual:r.addVisual},selection:{getContent:(d,p)=>i.getContent(p)},autocompleter:{addDecoration:c.addDecoration,removeDecoration:c.removeDecoration},raw:{getModel:()=>b.some(l.getRawModel())}}},HW=()=>{const e=te(null),t=te("");return{init:{bindEvents:Se},undoManager:{beforeChange:Se,add:e,undo:e,redo:e,clear:Se,reset:Se,hasUndo:tt,hasRedo:tt,transact:e,ignore:Se,extra:Se},formatter:{match:tt,matchAll:te([]),matchNode:te(void 0),canApply:tt,closest:t,apply:Se,remove:Se,toggle:Se,formatChanged:te({unbind:Se})},editor:{getContent:t,setContent:te({content:"",html:""}),insertContent:te(""),addVisual:Se},selection:{getContent:t},autocompleter:{addDecoration:Se,removeDecoration:Se},raw:{getModel:te(b.none())}}},Hs=e=>Ae(e.plugins,"rtc"),zW=e=>ct(e.plugins,"rtc").bind(t=>b.from(t.setup)),VW=e=>{const t=e;return zW(e).fold(()=>(t.rtcInstance=Gw(e),b.none()),n=>(t.rtcInstance=HW(),b.some(()=>n().then(s=>(t.rtcInstance=UW(s),s.rtc.isRemote)))))},Kp=e=>e.rtcInstance?e.rtcInstance:Gw(e),Tt=e=>{const t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},WW=(e,t,n)=>{Tt(e).undoManager.beforeChange(t,n)},jW=(e,t,n,s,o,r,i)=>Tt(e).undoManager.add(t,n,s,o,r,i),qW=(e,t,n,s)=>Tt(e).undoManager.undo(t,n,s),KW=(e,t,n)=>Tt(e).undoManager.redo(t,n),GW=(e,t,n)=>{Tt(e).undoManager.clear(t,n)},YW=(e,t)=>{Tt(e).undoManager.reset(t)},XW=(e,t,n)=>Tt(e).undoManager.hasUndo(t,n),ZW=(e,t,n)=>Tt(e).undoManager.hasRedo(t,n),QW=(e,t,n,s)=>Tt(e).undoManager.transact(t,n,s),JW=(e,t,n)=>{Tt(e).undoManager.ignore(t,n)},e2=(e,t,n,s,o)=>{Tt(e).undoManager.extra(t,n,s,o)},t2=(e,t,n,s,o)=>Tt(e).formatter.match(t,n,s,o),n2=(e,t,n)=>Tt(e).formatter.matchAll(t,n),s2=(e,t,n,s,o)=>Tt(e).formatter.matchNode(t,n,s,o),o2=(e,t)=>Tt(e).formatter.canApply(t),r2=(e,t)=>Tt(e).formatter.closest(t),i2=(e,t,n,s)=>{Tt(e).formatter.apply(t,n,s)},a2=(e,t,n,s,o)=>{Tt(e).formatter.remove(t,n,s,o)},c2=(e,t,n,s)=>{Tt(e).formatter.toggle(t,n,s)},l2=(e,t,n,s,o,r)=>Tt(e).formatter.formatChanged(t,n,s,o,r),u2=(e,t)=>Kp(e).editor.getContent(t),f2=(e,t,n)=>Kp(e).editor.setContent(t,n),d2=(e,t,n)=>Kp(e).editor.insertContent(t,n),m2=(e,t,n)=>Tt(e).selection.getContent(t,n),p2=(e,t)=>Tt(e).editor.addVisual(t),Yw=e=>Tt(e).init.bindEvents(),h2=(e,t={})=>{const n=t.format?t.format:"html";return m2(e,n,t)},Xw=e=>e.dom.length===0?(lt(e),b.none()):b.some(e),g2=(e,t)=>e.filter(n=>Xa.isBookmarkNode(n.dom)).bind(t?ba:yo),b2=(e,t,n,s,o)=>{const r=e.dom,i=t.dom,c=s?r.length:i.length;s?(Zm(r,i,o,!1,!s),n.setStart(i,c)):(Zm(i,r,o,!1,!s),n.setEnd(i,c))},y2=(e,t,n)=>{ds(e).each(s=>{const o=e.dom;t&&tc(s,L(o,0),n)?Ql(o,0,n):!t&&nc(s,L(o,o.length),n)&&Xm(o,o.length,n)})},Zw=(e,t,n,s,o)=>{e.bind(r=>((s?Xm:Ql)(r.dom,s?r.dom.length:0,o),t.filter(rn).map(c=>b2(r,c,n,s,o)))).orThunk(()=>g2(t,s).or(t).filter(rn).map(i=>y2(i,s,o)))},v2=(e,t,n)=>{const s=b.from(t.firstChild).map(A.fromDom),o=b.from(t.lastChild).map(A.fromDom);e.deleteContents(),e.insertNode(t);const r=s.bind(yo).filter(rn).bind(Xw),i=o.bind(ba).filter(rn).bind(Xw);Zw(r,s,e,!0,n),Zw(i,o,e,!1,n),e.collapse(!1)},C2=(e,t)=>({format:"html",...e,set:!0,selection:!0,content:t}),E2=(e,t)=>{if(t.format!=="raw"){const n=e.selection.getRng(),s=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),o=s?{context:s.nodeName.toLowerCase()}:{},r=e.parser.parse(t.content,{forced_root_block:!1,...o,...t});return xo({validate:!1},e.schema).serialize(r)}else return t.content},_2=(e,t,n={})=>{const s=C2(n,t);Fp(e,s).each(o=>{const r=E2(e,o),i=e.selection.getRng();v2(i,i.createContextualFragment(r),e.schema),e.selection.setRng(i),Qa(e,i),Up(e,r,o)})},Qw=(e,t,n)=>{if(Ae(e,t)){const s=ve(e[t],o=>o!==n);s.length===0?delete e[t]:e[t]=s}};var S2=(e,t)=>{let n,s;const o=(c,l)=>vt(l,d=>e.is(d,c)),r=c=>e.getParents(c,void 0,e.getRoot()),i=()=>{n={},s={},t.on("NodeChange",c=>{const l=c.element,d=r(l),p={};ot(n,(h,g)=>{o(g,d).each(v=>{s[g]||(U(h,E=>{E(!0,{node:v,selector:g,parents:d})}),s[g]=h),p[g]=h})}),ot(s,(h,g)=>{p[g]||(delete s[g],U(h,v=>{v(!1,{node:l,selector:g,parents:d})}))})})};return{selectorChangedWithUnbind:(c,l)=>(n||i(),n[c]||(n[c]=[]),n[c].push(l),o(c,r(t.selection.getStart())).each(()=>{s[c]=n[c]}),{unbind:()=>{Qw(n,c,l),Qw(s,c,l)}})}};const Jw=e=>!!(e&&e.ownerDocument)&&fs(A.fromDom(e.ownerDocument),A.fromDom(e)),w2=e=>e?Jw(e.startContainer)&&Jw(e.endContainer):!1,eA=(e,t,n,s)=>{let o,r;const{selectorChangedWithUnbind:i}=S2(e,s),c=(Z,ue)=>{const Me=e.createRng();j(Z)&&j(ue)?(Me.setStart(Z,ue),Me.setEnd(Z,ue),R(Me),T(!1)):(gm(e,Me,s.getBody(),!0),R(Me))},l=Z=>h2(s,Z),d=(Z,ue)=>_2(s,Z,ue),p=Z=>o_(s.getBody(),N(),Z),h=Z=>r_(s.getBody(),N(),Z),g=(Z,ue)=>It.getBookmark(Z,ue),v=Z=>It.moveToBookmark(Z),E=(Z,ue)=>(uF(e,Z,ue).each(R),Z),C=()=>{const Z=N(),ue=k();return!Z||Z.item?!1:Z.compareEndPoints?Z.compareEndPoints("StartToEnd",Z)===0:!ue||Z.collapsed},S=()=>{const Z=N(),ue=s.getBody().querySelectorAll('[data-mce-selected="1"]');return ue.length>0?Gn(ue,Me=>e.isEditable(Me.parentElement)):n_(e,Z)},T=Z=>{const ue=N();ue.collapse(!!Z),R(ue)},k=()=>t.getSelection?t.getSelection():t.document.selection,N=()=>{let Z;const ue=(Q,pe,xe)=>{try{return pe.compareBoundaryPoints(Q,xe)}catch{return-1}},Me=t.document;if(j(s.bookmark)&&!yi(s)){const Q=Im(s);if(Q.isSome())return Q.map(pe=>Hm(s,[pe])[0]).getOr(Me.createRange())}try{const Q=k();Q&&!ll(Q.anchorNode)&&(Q.rangeCount>0?Z=Q.getRangeAt(0):Z=Me.createRange(),Z=Hm(s,[Z])[0])}catch{}if(Z||(Z=Me.createRange()),_a(Z.startContainer)&&Z.collapsed){const Q=e.getRoot();Z.setStart(Q,0),Z.setEnd(Q,0)}return o&&r&&(ue(Z.START_TO_START,Z,o)===0&&ue(Z.END_TO_END,Z,o)===0?Z=r:(o=null,r=null)),Z},R=(Z,ue)=>{if(!w2(Z))return;const Me=k();if(Z=s.dispatch("SetSelectionRange",{range:Z,forward:ue}).range,Me){r=Z;try{Me.removeAllRanges(),Me.addRange(Z)}catch{}ue===!1&&Me.extend&&(Me.collapse(Z.endContainer,Z.endOffset),Me.extend(Z.startContainer,Z.startOffset)),o=Me.rangeCount>0?Me.getRangeAt(0):null}if(!Z.collapsed&&Z.startContainer===Z.endContainer&&(Me!=null&&Me.setBaseAndExtent)&&Z.endOffset-Z.startOffset<2&&Z.startContainer.hasChildNodes()){const pe=Z.startContainer.childNodes[Z.startOffset];pe&&pe.nodeName==="IMG"&&(Me.setBaseAndExtent(Z.startContainer,Z.startOffset,Z.endContainer,Z.endOffset),(Me.anchorNode!==Z.startContainer||Me.focusNode!==Z.endContainer)&&Me.setBaseAndExtent(pe,0,pe,1))}s.dispatch("AfterSetSelectionRange",{range:Z,forward:ue})},H=Z=>(d(e.getOuterHTML(Z)),Z),K=()=>cF(s.getBody(),N()),ee=(Z,ue)=>lF(e,N(),Z,ue),I=()=>{const Z=k(),ue=Z==null?void 0:Z.anchorNode,Me=Z==null?void 0:Z.focusNode;if(!Z||!ue||!Me||ll(ue)||ll(Me))return!0;const Q=e.createRng(),pe=e.createRng();try{Q.setStart(ue,Z.anchorOffset),Q.collapse(!0),pe.setStart(Me,Z.focusOffset),pe.collapse(!0)}catch{return!0}return Q.compareBoundaryPoints(Q.START_TO_START,pe)<=0},ft={dom:e,win:t,serializer:n,editor:s,expand:(Z={type:"word"})=>R(vr(e).expand(N(),Z)),collapse:T,setCursorLocation:c,getContent:l,setContent:d,getBookmark:g,moveToBookmark:v,select:E,isCollapsed:C,isEditable:S,isForward:I,setNode:H,getNode:K,getSel:k,setRng:R,getRng:N,getStart:p,getEnd:h,getSelectedBlocks:ee,normalize:()=>{const Z=N(),ue=k();if(!qI(ue)&&Il(s)){const Me=Vl(e,Z);return Me.each(Q=>{R(Q,I())}),Me.getOr(Z)}return Z},selectorChanged:(Z,ue)=>(i(Z,ue),ft),selectorChangedWithUnbind:i,getScrollContainer:()=>{let Z,ue=e.getRoot();for(;ue&&ue.nodeName!=="BODY";){if(ue.scrollHeight>ue.clientHeight){Z=ue;break}ue=ue.parentNode}return Z},scrollIntoView:(Z,ue)=>{j(Z)?OM(s,Z,ue):Qa(s,N(),ue)},placeCaretAt:(Z,ue)=>R(LE(Z,ue,s.getDoc())),getBoundingClientRect:()=>{const Z=N();return Z.collapsed?L.fromRangeStart(Z).getClientRects()[0]:Z.getBoundingClientRect()},destroy:()=>{t=o=r=null,et.destroy()}},It=Xa(ft),et=RE(ft,s);return ft.bookmarkManager=It,ft.controlSelection=et,ft},A2=(e,t,n)=>{t.addNodeFilter("br",(s,o,r)=>{const i=X.extend({},n.getBlockElements()),c=n.getNonEmptyElements(),l=n.getWhitespaceElements();i.body=1;const d=p=>p.name in i||Sd(n,p);for(let p=0,h=s.length;p<h;p++){let g=s[p],v=g.parent;if(v&&d(v)&&g===v.lastChild){let E=g.prev;for(;E;){const C=E.name;if(C!=="span"||E.attr("data-mce-type")!=="bookmark"){C==="br"&&(g=null);break}E=E.prev}if(g&&(g.remove(),oc(n,c,l,v))){const C=n.getElementRule(v.name);C&&(C.removeEmpty?v.remove():C.paddEmpty&&cp(e,r,d,v))}}else{let E=g;for(;v&&v.firstChild===E&&v.lastChild===E&&(E=v,!i[v.name]);)v=v.parent;if(E===v){const C=new tn("#text",3);C.value=xt,g.replace(C)}}}})},T2=(e,t,n)=>{e.addAttributeFilter("data-mce-tabindex",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(o,null)}}),e.addAttributeFilter("src,href,style",(s,o)=>{const r="data-mce-"+o,i=t.url_converter,c=t.url_converter_scope;let l=s.length;for(;l--;){const d=s[l];let p=d.attr(r);p!==void 0?(d.attr(o,p.length>0?p:null),d.attr(r,null)):(p=d.attr(o),o==="style"?p=n.serializeStyle(n.parseStyle(p),d.name):i&&(p=i.call(c,p,o,d.name)),d.attr(o,p.length>0?p:null))}}),e.addAttributeFilter("class",s=>{let o=s.length;for(;o--;){const r=s[o];let i=r.attr("class");i&&(i=i.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),r.attr("class",i.length>0?i:null))}}),e.addAttributeFilter("data-mce-type",(s,o,r)=>{let i=s.length;for(;i--;){const c=s[i];c.attr("data-mce-type")==="bookmark"&&!r.cleanup&&(b.from(c.firstChild).exists(d=>{var p;return!Cl((p=d.value)!==null&&p!==void 0?p:"")})?c.unwrap():c.remove())}}),e.addNodeFilter("script,style",(s,o)=>{var r;const i=l=>l.replace(/(<!--\[CDATA\[|\]\]-->)/g,`
`).replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let c=s.length;for(;c--;){const l=s[c],d=l.firstChild,p=(r=d==null?void 0:d.value)!==null&&r!==void 0?r:"";if(o==="script"){const h=l.attr("type");h&&l.attr("type",h==="mce-no/type"?null:h.replace(/^mce\-/,"")),t.element_format==="xhtml"&&d&&p.length>0&&(d.value=`// <![CDATA[
`+i(p)+`
// ]]>`)}else t.element_format==="xhtml"&&d&&p.length>0&&(d.value=`<!--
`+i(p)+`
-->`)}}),e.addNodeFilter("#comment",s=>{let o=s.length;for(;o--;){const r=s[o],i=r.value;t.preserve_cdata&&(i==null?void 0:i.indexOf("[CDATA["))===0?(r.name="#cdata",r.type=4,r.value=n.decode(i.replace(/^\[CDATA\[|\]\]$/g,""))):(i==null?void 0:i.indexOf("mce:protected "))===0&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(i).substr(14))}}),e.addNodeFilter("xml:namespace,input",(s,o)=>{let r=s.length;for(;r--;){const i=s[r];i.type===7?i.remove():i.type===1&&o==="input"&&!i.attr("type")&&i.attr("type","text")}}),e.addAttributeFilter("data-mce-type",s=>{U(s,o=>{o.attr("data-mce-type")==="format-caret"&&(o.isEmpty(e.schema.getNonEmptyElements())?o.remove():o.unwrap())})}),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.remove_trailing_brs&&A2(t,e,e.schema)},N2=e=>{const t=s=>(s==null?void 0:s.name)==="br",n=e.lastChild;if(t(n)){const s=n.prev;t(s)&&(n.remove(),s.remove())}},k2=(e,t,n)=>{let s;const o=e.dom;let r=t.cloneNode(!0);const i=document.implementation;if(i.createHTMLDocument){const c=i.createHTMLDocument("");X.each(r.nodeName==="BODY"?r.childNodes:[r],l=>{c.body.appendChild(c.importNode(l,!0))}),r.nodeName!=="BODY"?r=c.body.firstChild:r=c.body,s=o.doc,o.doc=c}return y$(e,{...n,node:r}),s&&(o.doc=s),r},x2=(e,t)=>j(e)&&e.hasEventListeners("PreProcess")&&!t.no_events,R2=(e,t,n)=>x2(e,n)?k2(e,t,n):t,O2=(e,t,n)=>{X.inArray(t,n)===-1&&(e.addAttributeFilter(n,(s,o)=>{let r=s.length;for(;r--;)s[r].attr(o,null)}),t.push(n))},D2=(e,t,n)=>!t.no_events&&e?v$(e,{...t,content:n}).content:n,P2=(e,t,n)=>{const s=wn(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||vl(A.fromDom(t))?s:X.trim(s)},B2=(e,t,n)=>{const s=n.selection?{forced_root_block:!1,...n}:n,o=e.parse(t,s);return N2(o),o},L2=(e,t,n)=>xo(e,t).serialize(n),I2=(e,t,n,s,o)=>{const r=L2(t,n,s);return D2(e,o,r)},$2=(e,t)=>{const n=["data-mce-selected"],s={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...e},o=t&&t.dom?t.dom:st.DOM,r=t&&t.schema?t.schema:_o(s),i=Ei(s,r);T2(i,s,o);const c=(l,d={})=>{const p={format:"html",...d},h=R2(t,l,p),g=P2(o,h,p),v=B2(i,g,p);return p.format==="tree"?v:I2(t,s,r,v,p)};return{schema:r,addNodeFilter:i.addNodeFilter,addAttributeFilter:i.addAttributeFilter,serialize:c,addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:ae(O2,i,n),getTempAttrs:te(n),getNodeFilters:i.getNodeFilters,getAttributeFilters:i.getAttributeFilters,removeNodeFilter:i.removeNodeFilter,removeAttributeFilter:i.removeAttributeFilter}},tA=(e,t)=>{const n=$2(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},M2="html",F2=(e,t)=>({...e,format:t,get:!0,getInner:!0}),U2=(e,t={})=>{const n=t.format?t.format:M2,s=F2(t,n);return Bw(e,s).fold(St,o=>{const r=u2(e,o);return Lw(e,r,o)})},H2="html",z2=(e,t)=>({format:H2,...e,set:!0,content:t}),Gp=(e,t,n={})=>{const s=z2(n,t);return Fp(e,s).map(o=>{const r=f2(e,o.content,o);return Up(e,r.html,o),r.content}).getOr(t)},V2="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),W2=[],j2="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),nA=[],sA=(e,t)=>{const n=ve(t,s=>Ae(e,s));return Go(n)},q2=e=>{const t=sA(e,V2),n=e.forced_root_block;return(n===!1||n==="")&&t.push("forced_root_block (false only)"),Go(t)},K2=e=>sA(e,W2),oA=(e,t)=>{const n=X.makeMap(e.plugins," "),o=ve(t,r=>Ae(n,r));return Go(o)},G2=e=>oA(e,j2),Y2=e=>oA(e,nA.map(t=>t.name)),X2=(e,t)=>{const n=q2(e),s=G2(t),o=s.length>0,r=n.length>0,i=t.theme==="mobile";if(o||r||i){const c=`
- `,l=i?`

Themes:${c}mobile`:"",d=o?`

Plugins:${c}${s.join(c)}`:"",p=r?`

Options:${c}${n.join(c)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+l+d+p)}},Z2=e=>vt(nA,t=>t.name===e).fold(()=>e,t=>t.replacedWith?`${e}, replaced by ${t.replacedWith}`:e),Q2=(e,t)=>{const n=K2(e),s=Y2(t),o=s.length>0,r=n.length>0;if(o||r){const i=`
- `,c=o?`

Plugins:${i}${s.map(Z2).join(i)}`:"",l=r?`

Options:${i}${n.join(i)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+c+l)}},J2=(e,t)=>{X2(e,t),Q2(e,t)},mu=st.DOM,ej=e=>{mu.setStyle(e.id,"display",e.orgDisplay)},pu=e=>b.from(e).each(t=>t.destroy()),tj=e=>{const t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;const n=e.selection;if(n){const s=n.dom;t.selection=n.win=n.dom=s.doc=null}},nj=e=>{const t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),mu.unbind(t,"submit reset",e.formEventDelegate))},sj=e=>{if(!e.removed){const{_selectionOverrides:t,editorUpload:n}=e,s=e.getBody(),o=e.getElement();s&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&j(o==null?void 0:o.nextSibling)&&mu.remove(o.nextSibling),C$(e),e.editorManager.remove(e),!e.inline&&s&&ej(e),E$(e),mu.remove(e.getContainer()),pu(t),pu(n),e.destroy()}},oj=(e,t)=>{const{selection:n,dom:s}=e;if(!e.destroyed){if(!t&&!e.removed){e.remove();return}t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),pu(n),pu(s)),nj(e),tj(e),e.destroyed=!0}},hu=(()=>{const e={};return{add:(o,r)=>{e[o]=r},get:o=>e[o]?e[o]:{icons:{}},has:o=>Ae(e,o)}})(),_i=en.ModelManager,rA=(e,t)=>t.dom[e],iA=(e,t)=>parseInt(Ds(t,e),10),rj=ae(rA,"clientWidth"),ij=ae(rA,"clientHeight"),aj=ae(iA,"margin-top"),cj=ae(iA,"margin-left"),lj=e=>e.dom.getBoundingClientRect(),uj=(e,t,n)=>{const s=rj(e),o=ij(e);return t>=0&&n>=0&&t<=s&&n<=o},fj=(e,t,n,s)=>{const o=lj(t),r=e?o.left+t.dom.clientLeft+cj(t):0,i=e?o.top+t.dom.clientTop+aj(t):0,c=n-r,l=s-i;return{x:c,y:l}},dj=(e,t,n)=>{const s=A.fromDom(e.getBody()),o=e.inline?s:hD(s),r=fj(e.inline,o,t,n);return uj(o,r.x,r.y)},mj=e=>b.from(e).map(A.fromDom),pj=e=>{const t=e.inline?e.getBody():e.getContentAreaContainer();return mj(t).map(Yr).getOr(!1)};var hj=()=>{const e=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}};const aA=e=>{const t=[],n=()=>{const g=e.theme;return g&&g.getNotificationManagerImpl?g.getNotificationManagerImpl():hj()},s=()=>b.from(t[0]),o=(g,v)=>g.type===v.type&&g.text===v.text&&!g.progressBar&&!g.timeout&&!v.progressBar&&!v.timeout,r=()=>{s().each(g=>{g.reposition()})},i=g=>{t.push(g)},c=g=>{ho(t,v=>v===g).each(v=>{t.splice(v,1)})},l=(g,v=!0)=>e.removed||!pj(e)?{}:(v&&e.dispatch("BeforeOpenNotification",{notification:g}),vt(t,E=>o(n().getArgs(E),g)).getOrThunk(()=>{e.editorManager.setActive(e);const E=n().open(g,()=>{c(E)},()=>t_(e));return i(E),r(),e.dispatch("OpenNotification",{notification:{...E}}),E})),d=()=>{s().each(g=>{n().close(g),c(g),r()})},p=te(t);return(g=>{g.on("SkinLoaded",()=>{const v=iL(g);v&&l({text:v,type:"warning",timeout:0},!1),r()}),g.on("show ResizeEditor ResizeWindow NodeChange ToggleView FullscreenStateChanged",()=>{requestAnimationFrame(r)}),g.on("remove",()=>{U(t.slice(),v=>{n().close(v)})}),g.addShortcut("alt+F12","Focus to notification",()=>s().map(v=>A.fromDom(v.getEl())).each(v=>GE(v)))})(e),{open:l,close:d,getNotifications:p}},Si=en.PluginManager,wr=en.ThemeManager;var gj=()=>{const e=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}};const cA=e=>{let t=[];const n=()=>{const C=e.theme;return C&&C.getWindowManagerImpl?C.getWindowManagerImpl():gj()},s=(C,S)=>(...T)=>S?S.apply(C,T):void 0,o=C=>{e.dispatch("OpenWindow",{dialog:C})},r=C=>{e.dispatch("CloseWindow",{dialog:C})},i=C=>{t.push(C),o(C)},c=C=>{r(C),t=ve(t,S=>S!==C),t.length===0&&e.focus()},l=()=>b.from(t[t.length-1]),d=C=>{e.editorManager.setActive(e),ql(e),e.ui.show();const S=C();return i(S),S},p=(C,S)=>d(()=>n().open(C,S,c)),h=C=>d(()=>n().openUrl(C,c)),g=(C,S,T)=>{const k=n();k.alert(C,s(T||k,S))},v=(C,S,T)=>{const k=n();k.confirm(C,s(T||k,S))},E=()=>{l().each(C=>{n().close(C),c(C)})};return e.on("remove",()=>{U(t,C=>{n().close(C)})}),{open:p,openUrl:h,alert:g,confirm:v,close:E}},lA=(e,t)=>{e.notificationManager.open({type:"error",text:t})},gu=(e,t)=>{e._skinLoaded?lA(e,t):e.on("SkinLoaded",()=>{lA(e,t)})},bj=(e,t)=>{gu(e,hs.translate(["Failed to upload image: {0}",t]))},uc=(e,t,n)=>{SE(e,t,{message:n}),console.error(n)},fc=(e,t,n)=>n?`Failed to load ${e}: ${n} from url ${t}`:`Failed to load ${e} url: ${t}`,yj=(e,t,n)=>{uc(e,"PluginLoadError",fc("plugin",t,n))},vj=(e,t,n)=>{uc(e,"IconsLoadError",fc("icons",t,n))},Cj=(e,t,n)=>{uc(e,"LanguageLoadError",fc("language",t,n))},Ej=(e,t,n)=>{uc(e,"ThemeLoadError",fc("theme",t,n))},_j=(e,t,n)=>{uc(e,"ModelLoadError",fc("model",t,n))},Sj=(e,t,n)=>{const s=hs.translate(["Failed to initialize plugin: {0}",t]);SE(e,"PluginLoadError",{message:s}),bu(s,n),gu(e,s)},bu=(e,...t)=>{const n=window.console;n&&(n.error?n.error(e,...t):n.log(e,...t))},wj=e=>/^[a-z0-9\-]+$/i.test(e),Yp=e=>"content/"+e+"/content.css",Aj=e=>tinymce.Resource.has(Yp(e)),Tj=e=>uA(e,eL(e)),Nj=e=>uA(e,yC(e)),uA=(e,t)=>{const n=e.editorManager.baseURL+"/skins/content",o=`content${e.editorManager.suffix}.css`;return Ue(t,r=>Aj(r)?r:wj(r)&&!e.inline?`${n}/${r}/${o}`:e.documentBaseURI.toAbsolute(r))},kj=e=>{e.contentCSS=e.contentCSS.concat(Tj(e),Nj(e))},xj=e=>e?En(e.getElementsByTagName("img")):[],Rj=(e,t)=>{const n={};return{findAll:(o,r=dt)=>{const i=ve(xj(o),l=>{const d=l.src;return l.hasAttribute("data-mce-bogus")||l.hasAttribute("data-mce-placeholder")||!d||d===Ve.transparentSrc?!1:kt(d,"blob:")?!e.isUploaded(d)&&r(l):kt(d,"data:")?r(l):!1}),c=Ue(i,l=>{const d=l.src;if(Ae(n,d))return n[d].then(p=>G(p)?p:{image:l,blobInfo:p.blobInfo});{const p=Yz(t,d).then(h=>(delete n[d],{image:l,blobInfo:h})).catch(h=>(delete n[d],h));return n[d]=p,p}});return Promise.all(c)}}},fA=()=>{let n={};const s=(g,v)=>({status:g,resultUri:v}),o=g=>g in n;return{hasBlobUri:o,getResultUri:g=>{const v=n[g];return v?v.resultUri:null},isPending:g=>o(g)?n[g].status===1:!1,isUploaded:g=>o(g)?n[g].status===2:!1,markPending:g=>{n[g]=s(1,null)},markUploaded:(g,v)=>{n[g]=s(2,v)},removeFailed:g=>{delete n[g]},destroy:()=>{n={}}}};let Oj=0;const Dj=()=>{const e=()=>Math.round(Sv()*4294967295).toString(36);return"s"+new Date().getTime().toString(36)+e()+e()+e()},Pj=e=>e+Oj+++Dj(),Bj=()=>{let e=[];const t=h=>({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[h.toLowerCase()]||"dat",n=(h,g,v,E,C)=>{if(G(h))return s({id:h,name:E,filename:C,blob:g,base64:v});if(ye(h))return s(h);throw new Error("Unknown input type")},s=h=>{if(!h.blob||!h.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const g=h.id||Pj("blobid"),v=h.name||g,E=h.blob;return{id:te(g),name:te(v),filename:te(h.filename||v+"."+t(E.type)),blob:te(E),base64:te(h.base64),blobUri:te(h.blobUri||URL.createObjectURL(E)),uri:te(h.uri)}},o=h=>{i(h.id())||e.push(h)},r=h=>vt(e,h).getOrUndefined(),i=h=>r(g=>g.id()===h);return{create:n,add:o,get:i,getByUri:h=>r(g=>g.blobUri()===h),getByData:(h,g)=>r(v=>v.base64()===h&&v.blob().type===g),findFirst:r,removeByUri:h=>{e=ve(e,g=>g.blobUri()===h?(URL.revokeObjectURL(g.blobUri()),!1):!0)},destroy:()=>{U(e,h=>{URL.revokeObjectURL(h.blobUri())}),e=[]}}},Lj=(e,t)=>{const n={},s=(C,S)=>C?C.replace(/\/$/,"")+"/"+S.replace(/^\//,""):S,o=(C,S)=>new Promise((T,k)=>{const N=new XMLHttpRequest;N.open("POST",t.url),N.withCredentials=t.credentials,N.upload.onprogress=H=>{S(H.loaded/H.total*100)},N.onerror=()=>{k("Image upload failed due to a XHR Transport error. Code: "+N.status)},N.onload=()=>{if(N.status<200||N.status>=300){k("HTTP Error: "+N.status);return}const H=JSON.parse(N.responseText);if(!H||!G(H.location)){k("Invalid JSON: "+N.responseText);return}T(s(t.basePath,H.location))};const R=new FormData;R.append("file",C.blob(),C.filename()),N.send(R)}),r=$e(t.handler)?t.handler:o,i=()=>new Promise(C=>{C([])}),c=(C,S)=>({url:S,blobInfo:C,status:!0}),l=(C,S)=>({url:"",blobInfo:C,status:!1,error:S}),d=(C,S)=>{X.each(n[C],T=>{T(S)}),delete n[C]},p=(C,S,T)=>(e.markPending(C.blobUri()),new Promise(k=>{let N,R;try{const H=()=>{N&&(N.close(),R=Se)},K=I=>{H(),e.markUploaded(C.blobUri(),I),d(C.blobUri(),c(C,I)),k(c(C,I))},ee=I=>{H(),e.removeFailed(C.blobUri()),d(C.blobUri(),l(C,I)),k(l(C,I))};R=I=>{I<0||I>100||b.from(N).orThunk(()=>b.from(T).map(As)).each(D=>{N=D,D.progressBar.value(I)})},S(C,R).then(K,I=>{ee(G(I)?{message:I}:I)})}catch(H){k(l(C,H))}})),h=C=>C===o,g=C=>{const S=C.blobUri();return new Promise(T=>{n[S]=n[S]||[],n[S].push(T)})},v=(C,S)=>(C=X.grep(C,T=>!e.isUploaded(T.blobUri())),Promise.all(X.map(C,T=>e.isPending(T.blobUri())?g(T):p(T,r,S))));return{upload:(C,S)=>!t.url&&h(r)?i():v(C,S)}},dA=e=>()=>e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),mA=(e,t)=>Lj(t,{url:KB(e),basePath:GB(e),credentials:YB(e),handler:XB(e)}),Ij=e=>{const t=fA(),n=mA(e,t);return{upload:(s,o=!0)=>n.upload(s,o?dA(e):void 0)}},$j=(e,t)=>e.dom.isEmpty(t.dom)&&j(e.schema.getTextBlockElements()[He(t)]),Mj=e=>t=>{$j(e,t)&&At(t,A.fromHtml('<br data-mce-bogus="1" />'))},Fj=e=>{const t=Bj();let n,s;const o=fA(),r=[],i=N=>R=>e.selection?N(R):[],c=N=>N+(N.indexOf("?")===-1?"?":"&")+new Date().getTime(),l=(N,R,H)=>{let K=0;do K=N.indexOf(R,K),K!==-1&&(N=N.substring(0,K)+H+N.substr(K+R.length),K+=H.length-R.length+1);while(K!==-1);return N},d=(N,R,H)=>{const K=`src="${H}"${H===Ve.transparentSrc?' data-mce-placeholder="1"':""}`;return N=l(N,`src="${R}"`,K),N=l(N,'data-mce-src="'+R+'"','data-mce-src="'+H+'"'),N},p=(N,R)=>{U(e.undoManager.data,H=>{H.type==="fragmented"?H.fragments=Ue(H.fragments,K=>d(K,N,R)):H.content=d(H.content,N,R)})},h=(N,R)=>{const H=e.convertURL(R,"src");p(N.src,R),Ys(A.fromDom(N),{src:pC(e)?c(R):R,"data-mce-src":H})},g=()=>(n||(n=mA(e,o)),S().then(i(N=>{const R=Ue(N,H=>H.blobInfo);return n.upload(R,dA(e)).then(i(H=>{const K=[];let ee=!1;const I=Ue(H,(D,F)=>{const{blobInfo:ie,image:de}=N[F];let Ne=!1;return D.status&&jB(e)?(D.url&&!Wt(de.src,D.url)&&(ee=!0),t.removeByUri(de.src),Hs(e)||h(de,D.url)):D.error&&(D.error.remove&&(p(de.src,Ve.transparentSrc),K.push(de),Ne=!0),bj(e,D.error.message)),{element:de,status:D.status,uploadUri:D.url,blobInfo:ie,removed:Ne}});return K.length>0&&!Hs(e)?e.undoManager.transact(()=>{U(ld(K),D=>{const F=ds(D);lt(D),F.each(Mj(e)),t.removeByUri(D.dom.src)})}):ee&&e.undoManager.dispatchChange(),I}))}))),v=()=>mC(e)?g():Promise.resolve([]),E=N=>Gn(r,R=>R(N)),C=N=>{r.push(N)},S=()=>(s||(s=Rj(o,t)),s.findAll(e.getBody(),E).then(i(N=>{const R=ve(N,H=>G(H)?(gu(e,H),!1):H.uriType!=="blob");return Hs(e)||U(R,H=>{p(H.image.src,H.blobInfo.blobUri()),H.image.src=H.blobInfo.blobUri(),H.image.removeAttribute("data-mce-src")}),R}))),T=()=>{t.destroy(),o.destroy(),s=n=null},k=N=>N.replace(/src="(blob:[^"]+)"/g,(R,H)=>{const K=o.getResultUri(H);if(K)return'src="'+K+'"';let ee=t.getByUri(H);return ee||(ee=Vt(e.editorManager.get(),(I,D)=>I||D.editorUpload&&D.editorUpload.blobCache.getByUri(H),void 0)),ee?'src="data:'+ee.blob().type+";base64,"+ee.base64()+'"':R});return e.on("SetContent",()=>{mC(e)?v():S()}),e.on("RawSaveContent",N=>{N.content=k(N.content)}),e.on("GetContent",N=>{N.source_view||N.format==="raw"||N.format==="tree"||(N.content=k(N.content))}),e.on("PostRender",()=>{e.parser.addNodeFilter("img",N=>{U(N,R=>{const H=R.attr("src");if(!H||t.getByUri(H))return;const K=o.getResultUri(H);K&&R.attr("src",K)})})}),{blobCache:t,addFilter:C,uploadImages:g,uploadImagesAuto:v,scanForImages:S,destroy:T}},Uj=e=>{const t=e.dom,n=e.schema.type,s={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:o=>{t.setStyle(o,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const o={inline:"span",styles:{textDecoration:"line-through"},exact:!0},r={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return n!=="html4"?[i,o,r]:[o,i,r]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(o,r,i)=>fe(o)&&o.hasAttribute("href"),onformat:(o,r,i)=>{X.each(i,(c,l)=>{t.setAttrib(o,l,c)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":o=>{var r;return(r=o==null?void 0:o.customValue)!==null&&r!==void 0?r:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return X.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),o=>{s[o]={block:o,remove:"all"}}),s},pA={remove_similar:!0,inherit:!1},wi={selector:"td,th",...pA},Hj={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...wi},tablecellverticalalign:{styles:{"vertical-align":"%value"},...wi},tablecellbordercolor:{styles:{borderColor:"%value"},...wi},tablecellclass:{classes:["%value"],...wi},tableclass:{selector:"table",classes:["%value"],...pA},tablecellborderstyle:{styles:{borderStyle:"%value"},...wi},tablecellborderwidth:{styles:{borderWidth:"%value"},...wi}},zj=te(Hj),Vj=e=>{const t={},n=i=>j(i)?t[i]:t,s=i=>Ae(t,i),o=(i,c)=>{i&&(G(i)?(Te(c)||(c=[c]),U(c,l=>{qe(l.deep)&&(l.deep=!Pn(l)),qe(l.split)&&(l.split=!Pn(l)||Ot(l)),qe(l.remove)&&Pn(l)&&!Ot(l)&&(l.remove="none"),Pn(l)&&Ot(l)&&(l.mixed=!0,l.block_expand=!0),G(l.classes)&&(l.classes=l.classes.split(/\s+/))}),t[i]=c):ot(i,(l,d)=>{o(d,l)}))},r=i=>(i&&t[i]&&delete t[i],t);return o(Uj(e)),o(zj()),o(lL(e)),{get:n,has:s,register:o,unregister:r}},yu=X.each,$n=st.DOM,Xp=e=>j(e)&&ye(e),hA=(e,t)=>{const n=t&&t.schema||_o({}),s=(l,d)=>{d.classes.length>0&&$n.addClass(l,d.classes.join(" ")),$n.setAttribs(l,d.attrs)},o=l=>{const d=G(l)?{name:l,classes:[],attrs:{}}:l,p=$n.create(d.name);return s(p,d),p},r=(l,d)=>{const p=n.getElementRule(l.nodeName.toLowerCase()),h=p==null?void 0:p.parentsRequired;return h&&h.length?d&&Ze(h,d)?d:h[0]:!1},i=(l,d,p)=>{let h;const g=d[0],v=Xp(g)?g.name:void 0,E=r(l,v);if(E)v===E?(h=g,d=d.slice(1)):h=E;else if(g)h=g,d=d.slice(1);else if(!p)return l;const C=h?o(h):$n.create("div");C.appendChild(l),p&&X.each(p,T=>{const k=o(T);C.insertBefore(k,l)});const S=Xp(h)?h.siblings:void 0;return i(C,d,S)},c=$n.create("div");if(e.length>0){const l=e[0],d=o(l),p=Xp(l)?l.siblings:void 0;c.appendChild(i(d,e.slice(1),p))}return c},Wj=e=>{e=X.trim(e);let t="div";const n={name:t,classes:[],attrs:{},selector:e};return e!=="*"&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(s,o,r,i,c)=>{switch(o){case"#":n.attrs.id=r;break;case".":n.classes.push(r);break;case":":X.inArray("checked disabled enabled read-only required".split(" "),r)!==-1&&(n.attrs[r]=r);break}if(i==="["){const l=c.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=t||"div",n},jj=e=>G(e)?(e=e.split(/\s*,\s*/)[0],e=e.replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),X.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),t=>{const n=X.map(t.split(/(?:~\+|~|\+)/),Wj),s=n.pop();return n.length&&(s.siblings=n),s}).reverse()):[],qj=(e,t)=>{let n="",s=uL(e);if(s==="")return"";const o=g=>G(g)?g.replace(/%(\w+)/g,""):"",r=(g,v)=>$n.getStyle(v??e.getBody(),g,!0);if(G(t)){const g=e.formatter.get(t);if(!g)return"";t=g[0]}if("preview"in t){const g=t.preview;if(g===!1)return"";s=g||s}let i=t.block||t.inline||"span",c;const l=jj(t.selector);l.length>0?(l[0].name||(l[0].name=i),i=t.selector,c=hA(l,e)):c=hA([i],e);const d=$n.select(i,c)[0]||c.firstChild;yu(t.styles,(g,v)=>{const E=o(g);E&&$n.setStyle(d,v,E)}),yu(t.attributes,(g,v)=>{const E=o(g);E&&$n.setAttrib(d,v,E)}),yu(t.classes,g=>{const v=o(g);$n.hasClass(d,v)||$n.addClass(d,v)}),e.dispatch("PreviewFormats"),$n.setStyles(c,{position:"absolute",left:-65535}),e.getBody().appendChild(c);const p=r("fontSize"),h=/px$/.test(p)?parseInt(p,10):0;return yu(s.split(" "),g=>{let v=r(g,d);if(!(g==="background-color"&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(v)&&(v=r(g),wa(v).toLowerCase()==="#ffffff"))&&!(g==="color"&&wa(v).toLowerCase()==="#000000")){if(g==="font-size"&&/em|%$/.test(v)){if(h===0)return;v=parseFloat(v)/(/%$/.test(v)?100:1)*h+"px"}g==="border"&&v&&(n+="padding:0 2px;"),n+=g+":"+v+";"}}),e.dispatch("AfterPreviewFormats"),$n.remove(c),n},Kj=e=>{e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(let t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])},gA=e=>{const t=Vj(e),n=Bt({});return Kj(e),cz(e),Hs(e)||Pz(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:(s,o,r)=>{i2(e,s,o,r)},remove:(s,o,r,i)=>{a2(e,s,o,r,i)},toggle:(s,o,r)=>{c2(e,s,o,r)},match:(s,o,r,i)=>t2(e,s,o,r,i),closest:s=>r2(e,s),matchAll:(s,o)=>n2(e,s,o),matchNode:(s,o,r,i)=>s2(e,s,o,r,i),canApply:s=>o2(e,s),formatChanged:(s,o,r,i)=>l2(e,n,s,o,r,i),getCssText:ae(qj,e)}},bA=e=>{switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Gj=(e,t,n)=>{const s=Bt(!1),o=l=>{du(t,!1,n),t.add({},l)};e.on("init",()=>{t.add()}),e.on("BeforeExecCommand",l=>{const d=l.command;bA(d)||(Kw(t,n),t.beforeChange())}),e.on("ExecCommand",l=>{const d=l.command;bA(d)||o(l)}),e.on("ObjectResizeStart cut",()=>{t.beforeChange()}),e.on("SaveContent ObjectResized blur",o),e.on("dragend",o),e.on("keyup",l=>{const d=l.keyCode;if(l.isDefaultPrevented())return;const p=Ve.os.isMacOS()&&l.key==="Meta";(d>=33&&d<=36||d>=37&&d<=40||d===45||l.ctrlKey||p)&&(o(),e.nodeChanged()),(d===46||d===8)&&e.nodeChanged(),s.get()&&t.typing&&!jp(fu(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),s.set(!1),e.nodeChanged())}),e.on("keydown",l=>{const d=l.keyCode;if(l.isDefaultPrevented())return;if(d>=33&&d<=36||d>=37&&d<=40||d===45){t.typing&&o(l);return}const p=l.ctrlKey&&!l.altKey||l.metaKey;if((d<16||d>20)&&d!==224&&d!==91&&!t.typing&&!p){t.beforeChange(),du(t,!0,n),t.add({},l),s.set(!0);return}(Ve.os.isMacOS()?l.metaKey:l.ctrlKey&&!l.altKey)&&t.beforeChange()}),e.on("mousedown",l=>{t.typing&&o(l)});const r=l=>l.inputType==="insertReplacementText",i=l=>l.inputType==="insertText"&&l.data===null,c=l=>l.inputType==="insertFromPaste"||l.inputType==="insertFromDrop";e.on("input",l=>{l.inputType&&(r(l)||i(l)||c(l))&&o(l)}),e.on("AddUndo Undo Redo ClearUndos",l=>{l.isDefaultPrevented()||e.nodeChanged()})},Yj=e=>{e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")},yA=e=>{const t=to(),n=Bt(0),s=Bt(0),o={data:[],typing:!1,beforeChange:()=>{WW(e,n,t)},add:(r,i)=>jW(e,o,s,n,t,r,i),dispatchChange:()=>{e.setDirty(!0);const r=fu(e);r.bookmark=Zd(e.selection),e.dispatch("change",{level:r,lastLevel:ra(o.data,s.get()).getOrUndefined()})},undo:()=>qW(e,o,n,s),redo:()=>KW(e,s,o.data),clear:()=>{GW(e,o,s)},reset:()=>{YW(e,o)},hasUndo:()=>XW(e,o,s),hasRedo:()=>ZW(e,o,s),transact:r=>QW(e,o,n,r),ignore:r=>{JW(e,n,r)},extra:(r,i)=>{e2(e,o,s,r,i)}};return Hs(e)||Gj(e,o,n),Yj(e),o},Xj=[9,27,ne.HOME,ne.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ne.DOWN,ne.UP,ne.LEFT,ne.RIGHT].concat(Ve.browser.isFirefox()?[224]:[]),vA="data-mce-placeholder",CA=e=>e.type==="keydown"||e.type==="keyup",EA=e=>{const t=e.keyCode;return t===ne.BACKSPACE||t===ne.DELETE},Zj=e=>{if(CA(e)){const t=e.keyCode;return!EA(e)&&(ne.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||Ze(Xj,t))}else return!1},Qj=e=>CA(e)&&!(EA(e)||e.type==="keyup"&&e.keyCode===229),Jj=(e,t,n)=>{if(e.isEmpty(t,void 0,{skipBogus:!1,includeZwsp:!0})){const s=t.firstElementChild;return s?e.getStyle(t.firstElementChild,"padding-left")||e.getStyle(t.firstElementChild,"padding-right")?!1:n===s.nodeName.toLowerCase():!0}else return!1},e3=e=>{var t;const n=e.dom,s=Yt(e),o=(t=rL(e))!==null&&t!==void 0?t:"",r=(i,c)=>{if(Zj(i))return;const l=e.getBody(),d=Qj(i)?!1:Jj(n,l,s);(n.getAttrib(l,vA)!==""!==d||c)&&(n.setAttrib(l,vA,d?o:null),k$(e,d),e.on(d?"keydown":"keyup",r),e.off(d?"keyup":"keydown",r))};ks(o)&&e.on("init",i=>{r(i,!0),e.on("change SetContent ExecCommand",r),e.on("paste",c=>Bn.setEditorTimeout(e,()=>r(c)))})},t3=(e,t)=>({block:e,position:t}),n3=(e,t)=>({from:e,to:t}),Zp=(e,t)=>{const n=A.fromDom(e),s=A.fromDom(t.container());return eu(n,s).map(o=>t3(o,t))},s3=e=>!(fs(e.to.block,e.from.block)||fs(e.from.block,e.to.block)),o3=e=>!Qe(e.from.block,e.to.block),_A=(e,t)=>Zo(t,o=>Ba(o)||Yn(o.dom),o=>Qe(o,e)).filter(_n).getOr(e),r3=(e,t)=>{const n=A.fromDom(e);return Qe(_A(n,t.from.block),_A(n,t.to.block))},i3=e=>rt(e.from.block.dom)===!1&&rt(e.to.block.dom)===!1,a3=e=>{const t=n=>xv(n)||Cd(n.dom)||si(n);return t(e.from.block)&&t(e.to.block)},c3=(e,t,n,s)=>ht(s.position.getNode())&&!Gt(e,s.block)?di(!1,s.block.dom).bind(o=>o.isEqual(s.position)?Rn(n,t,o).bind(r=>Zp(t,r)):b.some(s)).getOr(s):s,l3=(e,t,n,s)=>{const o=Zp(t,L.fromRangeStart(s)),r=o.bind(i=>Rn(n,t,i.position).bind(c=>Zp(t,c).map(l=>c3(e,t,n,l))));return jt(o,r,n3).filter(i=>o3(i)&&r3(t,i)&&i3(i)&&a3(i)&&s3(i))},u3=(e,t,n,s)=>s.collapsed?l3(e,t,n,s):b.none(),f3=(e,t)=>{const n=qt(e);return ho(n,s=>t.isBlock(He(s))).fold(te(n),s=>n.slice(0,s))},SA=(e,t)=>{const n=f3(e,t);return U(n,lt),n},wA=(e,t,n)=>{const s=oo(n,t);return vt(s.reverse(),o=>Gt(e,o)).each(lt)},d3=(e,t)=>ve(gy(t),n=>!Gt(e,n)).length===0,m3=(e,t,n,s,o)=>{if(Gt(s,n))return So(n),Xt(n.dom);d3(s,o)&&Gt(s,t)&&fn(o,A.fromTag("br"));const r=dn(n.dom,L.before(o.dom));return U(SA(t,s),i=>{fn(o,i)}),wA(s,e,t),r},p3=(e,t)=>e.isInline(He(t)),h3=(e,t,n,s)=>{if(Gt(s,n)){if(Gt(s,t)){const i=Ts((c=>{const l=(d,p)=>td(d).fold(()=>p,h=>p3(s,h)?l(h,p.concat(cr(h))):p);return l(c,[])})(n),(c,l)=>(wy(c,l),l),oi());Zr(t),At(t,i)}return lt(n),Xt(t.dom)}const o=Xn(n.dom);return U(SA(t,s),r=>{At(n,r)}),wA(s,e,t),o},g3=(e,t)=>{const n=oo(t,e);return b.from(n[n.length-1])},b3=(e,t)=>fs(t,e)?g3(t,e):b.none(),AA=(e,t)=>{di(e,t.dom).bind(n=>b.from(n.getNode())).map(A.fromDom).filter(ur).each(lt)},TA=(e,t,n,s)=>(AA(!0,t),AA(!1,n),b3(t,n).fold(ae(h3,e,t,n,s),ae(m3,e,t,n,s))),NA=(e,t,n,s,o)=>t?TA(e,s,n,o):TA(e,n,s,o),Qp=(e,t)=>{const n=A.fromDom(e.getBody());return u3(e.schema,n.dom,t,e.selection.getRng()).map(o=>()=>{NA(n,t,o.from.block,o.to.block,e.schema).each(r=>{e.selection.setRng(r.toRange())})})},y3=(e,t,n)=>{const s=t.getRng();return jt(eu(e,A.fromDom(s.startContainer)),eu(e,A.fromDom(s.endContainer)),(o,r)=>Qe(o,r)?b.none():b.some(()=>{s.deleteContents(),NA(e,!0,o,r,n).each(i=>{t.setRng(i.toRange())})})).getOr(b.none())},kA=(e,t)=>{const n=A.fromDom(t),s=ae(Qe,e);return Zs(n,Ba,s).isSome()},v3=(e,t)=>kA(e,t.startContainer)||kA(e,t.endContainer),C3=(e,t)=>{const n=dn(e.dom,L.fromRangeStart(t)).isNone(),s=cn(e.dom,L.fromRangeEnd(t)).isNone();return!v3(e,t)&&n&&s},E3=e=>b.some(()=>{e.setContent(""),e.selection.setCursorLocation()}),_3=e=>{const t=A.fromDom(e.getBody()),n=e.selection.getRng();return C3(t,n)?E3(e):y3(t,e.selection,e.schema)},Jp=(e,t)=>e.selection.isCollapsed()?b.none():_3(e),ro=(e,t,n,s,o)=>b.from(t._selectionOverrides.showCaret(e,n,s,o)),S3=e=>{const t=e.ownerDocument.createRange();return t.selectNode(e),t},dc=(e,t)=>e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?b.none():b.some(S3(t)),w3=(e,t,n)=>{const s=im(1,e.getBody(),t),o=L.fromRangeStart(s),r=o.getNode();if(Ha(r))return ro(1,e,r,!o.isAtEnd(),!1);const i=o.getNode(!0);if(Ha(i))return ro(1,e,i,!1,!1);const c=_r(e.dom.getRoot(),o.getNode());return Ha(c)?ro(1,e,c,!1,n):b.none()},eh=(e,t,n)=>t.collapsed?w3(e,t,n).getOr(t):t,A3=e=>Oo(e)||Ja(e),T3=e=>Do(e)||ec(e),N3=(e,t)=>{q(t)&&t.data.length===0&&e.remove(t)},xA=(e,t,n,s,o,r)=>{ro(s,e,r.getNode(!o),o,!0).each(i=>{if(t.collapsed){const c=t.cloneRange();o?c.setEnd(i.startContainer,i.startOffset):c.setStart(i.endContainer,i.endOffset),c.deleteContents()}else t.deleteContents();e.selection.setRng(i)}),N3(e.dom,n)},k3=(e,t)=>{const n=e.selection.getRng();if(!q(n.commonAncestorContainer))return b.none();const s=t?Lt.Forwards:Lt.Backwards,o=Ms(e.getBody()),r=ae(am,t?o.next:o.prev),i=t?A3:T3,c=qa(s,e.getBody(),n),l=r(c),d=l&&Ln(t,l);if(!d||!Dl(c,d))return b.none();if(i(d))return b.some(()=>xA(e,n,c.getNode(),s,t,d));const p=r(d);return p&&i(p)&&Dl(d,p)?b.some(()=>xA(e,n,c.getNode(),s,t,p)):b.none()},th=(e,t)=>k3(e,t),nh=(e,t)=>{const n=e.getBody();return t?Xt(n).filter(Oo):Xn(n).filter(Do)},sh=e=>{const t=e.selection.getRng();return!t.collapsed&&(nh(e,!0).exists(n=>n.isEqual(L.fromRangeStart(t)))||nh(e,!1).exists(n=>n.isEqual(L.fromRangeEnd(t))))},x3=e=>j(e)&&(Ba(A.fromDom(e))||si(A.fromDom(e))),An=Ls.generate([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),R3=(e,t)=>{const n=t.getNode(!e),s=e?"after":"before";return fe(n)&&n.getAttribute("data-mce-caret")===s},O3=(e,t,n,s,o)=>{const r=i=>o.isInline(i.nodeName.toLowerCase())&&!Is(n,s,e);return HC(!t,n).fold(()=>HC(t,s).fold(tt,r),r)},RA=(e,t,n,s,o)=>{const r=o.getNode(!n);return eu(A.fromDom(t),A.fromDom(s.getNode())).map(i=>Gt(e,i)?An.remove(i.dom):An.moveToElement(r)).orThunk(()=>b.some(An.moveToElement(r)))},OA=(e,t,n,s)=>Rn(t,e,n).bind(o=>x3(o.getNode())||O3(e,t,n,o,s)?b.none():t&&rt(o.getNode())||!t&&rt(o.getNode(!0))?RA(s,e,t,n,o):t&&Do(n)||!t&&Oo(n)?b.some(An.moveToPosition(o)):b.none()),D3=(e,t)=>Fe(t)?b.none():e&&rt(t.nextSibling)?b.some(An.moveToElement(t.nextSibling)):!e&&rt(t.previousSibling)?b.some(An.moveToElement(t.previousSibling)):b.none(),P3=(e,t,n)=>n.fold(s=>b.some(An.remove(s)),s=>b.some(An.moveToElement(s)),s=>Is(t,s,e)?b.none():b.some(An.moveToPosition(s))),B3=(e,t,n,s)=>R3(t,n)?D3(t,n.getNode(!t)).orThunk(()=>OA(e,t,n,s)):OA(e,t,n,s).bind(o=>P3(e,n,o)),L3=(e,t,n,s)=>{const o=im(t?1:-1,e,n),r=L.fromRangeStart(o),i=A.fromDom(e);return!t&&Do(r)?b.some(An.remove(r.getNode(!0))):t&&Oo(r)?b.some(An.remove(r.getNode())):!t&&Oo(r)&&Zl(i,r,s)?O_(i,r,s).map(c=>An.remove(c.getNode())):t&&Do(r)&&Km(i,r,s)?UF(i,r,s).map(c=>An.remove(c.getNode())):B3(e,t,r,s)},I3=(e,t)=>n=>(e._selectionOverrides.hideFakeCaret(),Cr(e,t,A.fromDom(n)),!0),$3=(e,t)=>n=>{const s=t?L.before(n):L.after(n);return e.selection.setRng(s.toRange()),!0},M3=e=>t=>(e.selection.setRng(t.toRange()),!0),DA=(e,t)=>b.from(_r(e.getBody(),t)),F3=(e,t)=>{const n=e.selection.getNode();return DA(e,n).filter(rt).fold(()=>L3(e.getBody(),t,e.selection.getRng(),e.schema).map(s=>()=>s.fold(I3(e,t),$3(e,t),M3(e))),()=>b.some(Se))},U3=e=>{U(Kt(e,".mce-offscreen-selection"),lt)},H3=(e,t)=>{const n=e.selection.getNode();return rt(n)&&!fl(n)?DA(e,n.parentNode).filter(rt).fold(()=>b.some(()=>{U3(A.fromDom(e.getBody())),Cr(e,t,A.fromDom(e.selection.getNode())),Qm(e)}),()=>b.some(Se)):sh(e)?b.some(()=>{J_(e,e.selection.getRng(),A.fromDom(e.getBody()))}):b.none()},PA=e=>{const t=e.dom,n=e.selection,s=_r(e.getBody(),n.getNode());if(Yn(s)&&t.isBlock(s)&&t.isEmpty(s)){const o=t.create("br",{"data-mce-bogus":"1"});t.setHTML(s,""),s.appendChild(o),n.setRng(L.before(o).toRange())}return!0},oh=(e,t)=>e.selection.isCollapsed()?F3(e,t):H3(e,t),BA=e=>e.hasOwnProperty("text"),LA=e=>e.hasOwnProperty("marker"),IA=(e,t)=>{const n=(r,i)=>{if(q(r))return{text:r,offset:i};{const c=t(),l=r.childNodes;return i<l.length?(r.insertBefore(c,l[i]),{marker:c,before:!0}):(r.appendChild(c),{marker:c,before:!1})}},s=n(e.endContainer,e.endOffset);return{start:n(e.startContainer,e.startOffset),end:s}},$A=e=>{var t,n;const{start:s,end:o}=e,r=new window.Range;return BA(s)?r.setStart(s.text,s.offset):LA(s)&&(s.before?r.setStartBefore(s.marker):r.setStartAfter(s.marker),(t=s.marker.parentNode)===null||t===void 0||t.removeChild(s.marker)),BA(o)?r.setEnd(o.text,o.offset):LA(o)&&(o.before?r.setEndBefore(o.marker):r.setEndAfter(o.marker),(n=o.marker.parentNode)===null||n===void 0||n.removeChild(o.marker)),r},rh=(e,t)=>{var n;const s=e.dom,o=s.getParent(e.selection.getStart(),s.isBlock),r=s.getParent(e.selection.getEnd(),s.isBlock),i=e.getBody();if(((n=o==null?void 0:o.nodeName)===null||n===void 0?void 0:n.toLowerCase())==="div"&&o&&r&&o===i.firstChild&&r===i.lastChild&&!s.isEmpty(i)){const l=o.cloneNode(!1),d=()=>{if(t?X_(e):Jl(e),i.firstChild!==o){const p=IA(e.selection.getRng(),()=>document.createElement("span"));Array.from(i.childNodes).forEach(h=>l.appendChild(h)),i.appendChild(l),e.selection.setRng($A(p))}};return b.some(d)}return b.none()},z3=(e,t)=>{const n=L.fromRangeStart(e.selection.getRng());return Rn(t,e.getBody(),n).filter(s=>t?DF(s):PF(s)).bind(s=>rm(t?0:-1,s)).map(s=>()=>e.selection.select(s))},ih=(e,t)=>e.selection.isCollapsed()?z3(e,t):b.none(),Ai=q,MA=e=>Ai(e)&&e.data[0]===Rt,FA=e=>Ai(e)&&e.data[e.data.length-1]===Rt,UA=e=>{var t;return((t=e.ownerDocument)!==null&&t!==void 0?t:document).createTextNode(Rt)},V3=e=>{var t;if(Ai(e.previousSibling))return FA(e.previousSibling)||e.previousSibling.appendData(Rt),e.previousSibling;if(Ai(e))return MA(e)||e.insertData(0,Rt),e;{const n=UA(e);return(t=e.parentNode)===null||t===void 0||t.insertBefore(n,e),n}},W3=e=>{var t,n;if(Ai(e.nextSibling))return MA(e.nextSibling)||e.nextSibling.insertData(0,Rt),e.nextSibling;if(Ai(e))return FA(e)||e.appendData(Rt),e;{const s=UA(e);return e.nextSibling?(t=e.parentNode)===null||t===void 0||t.insertBefore(s,e.nextSibling):(n=e.parentNode)===null||n===void 0||n.appendChild(s),s}},vu=(e,t)=>e?V3(t):W3(t),j3=ae(vu,!0),q3=ae(vu,!1),HA=(e,t)=>q(e.container())?vu(t,e.container()):vu(t,e.getNode()),zA=(e,t)=>{const n=t.get();return n&&e.container()===n&&wo(n)},ah=(e,t)=>t.fold(n=>{mr(e.get());const s=j3(n);return e.set(s),b.some(L(s,s.length-1))},n=>Xt(n).map(s=>{if(zA(s,e)){const o=e.get();return L(o,1)}else{mr(e.get());const o=HA(s,!0);return e.set(o),L(o,1)}}),n=>Xn(n).map(s=>{if(zA(s,e)){const o=e.get();return L(o,o.length-1)}else{mr(e.get());const o=HA(s,!1);return e.set(o),L(o,o.length-1)}}),n=>{mr(e.get());const s=q3(n);return e.set(s),b.some(L(s,1))}),VA=(e,t)=>{for(let n=0;n<e.length;n++){const s=e[n].apply(null,t);if(s.isSome())return s}return b.none()},nn=Ls.generate([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),WA=(e,t)=>{const n=No(t,e);return n||e},K3=(e,t,n)=>{const s=K_(n),o=WA(t,s.container());return Po(e,o,s).fold(()=>cn(o,s).bind(ae(Po,e,o)).map(r=>nn.before(r)),b.none)},G3=(e,t)=>hr(e,t)===null,jA=(e,t,n)=>Po(e,t,n).filter(ae(G3,t)),Y3=(e,t,n)=>{const s=G_(n);return jA(e,t,s).bind(o=>dn(o,s).isNone()?b.some(nn.start(o)):b.none())},X3=(e,t,n)=>{const s=K_(n);return jA(e,t,s).bind(o=>cn(o,s).isNone()?b.some(nn.end(o)):b.none())},Z3=(e,t,n)=>{const s=G_(n),o=WA(t,s.container());return Po(e,o,s).fold(()=>dn(o,s).bind(ae(Po,e,o)).map(r=>nn.after(r)),b.none)},qA=e=>!q_(ch(e)),zs=(e,t,n)=>VA([K3,Y3,X3,Z3],[e,t,n]).filter(qA),ch=e=>e.fold(St,St,St,St),KA=e=>e.fold(te("before"),te("start"),te("end"),te("after")),Cu=e=>e.fold(nn.before,nn.before,nn.after,nn.after),lh=e=>e.fold(nn.start,nn.start,nn.end,nn.end),Q3=(e,t)=>KA(e)===KA(t)&&ch(e)===ch(t),J3=(e,t,n,s,o,r)=>jt(Po(t,n,s),Po(t,n,o),(i,c)=>i!==c&&yU(n,i,c)?nn.after(e?i:c):r).getOr(r),eq=(e,t)=>e.fold(dt,n=>!Q3(n,t)),tq=(e,t,n,s,o)=>{const r=Ln(e,o);return Rn(e,n,r).map(ae(Ln,e)).fold(()=>s.map(Cu),l=>zs(t,n,l).map(ae(J3,e,t,n,r,l)).filter(ae(eq,s))).filter(qA)},nq=(e,t)=>e?t.fold(_t(b.some,nn.start),b.none,_t(b.some,nn.after),b.none):t.fold(b.none,_t(b.some,nn.before),b.none,_t(b.some,nn.end)),sq=(e,t,n,s)=>{const o=Ln(e,s),r=zs(t,n,o);return zs(t,n,o).bind(ae(nq,e)).orThunk(()=>tq(e,t,n,r,s))},oq=e=>$e(e.selection.getSel().modify),GA=(e,t,n)=>{const s=e?1:-1;return t.setRng(L(n.container(),n.offset()+s).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},rq=(e,t)=>{const n=t.selection.getRng(),s=e?L.fromRangeEnd(n):L.fromRangeStart(n);return oq(t)?e&&Ud(s)?GA(!0,t.selection,s):!e&&Hd(s)?GA(!1,t.selection,s):!1:!1};var Vs;(function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"})(Vs||(Vs={}));const Eu=(e,t)=>e===Lt.Backwards?oa(t):t,iq=(e,t,n)=>e===Lt.Forwards?t.next(n):t.prev(n),aq=(e,t,n,s)=>ht(s.getNode(t===Lt.Forwards))?Vs.Br:Is(n,s)===!1?Vs.Block:Vs.Wrap,YA=(e,t,n,s)=>{const o=Ms(n);let r=s;const i=[];for(;r;){const c=iq(t,o,r);if(!c)break;if(ht(c.getNode(!1)))return t===Lt.Forwards?{positions:Eu(t,i).concat([c]),breakType:Vs.Br,breakAt:b.some(c)}:{positions:Eu(t,i),breakType:Vs.Br,breakAt:b.some(c)};if(!c.isVisible()){r=c;continue}if(e(r,c)){const l=aq(n,t,r,c);return{positions:Eu(t,i),breakType:l,breakAt:b.some(c)}}i.push(c),r=c}return{positions:Eu(t,i),breakType:Vs.Eol,breakAt:b.none()}},XA=(e,t,n,s)=>t(n,s).breakAt.map(o=>{const r=t(n,o).positions;return e===Lt.Backwards?r.concat(o):[o].concat(r)}).getOr([]),uh=(e,t)=>Vt(e,(n,s)=>n.fold(()=>b.some(s),o=>jt(on(o.getClientRects()),on(s.getClientRects()),(r,i)=>{const c=Math.abs(t-r.left);return Math.abs(t-i.left)<=c?s:o}).or(n)),b.none()),_u=(e,t)=>on(t.getClientRects()).bind(n=>uh(e,n.left)),mc=ae(YA,L.isAbove,-1),pc=ae(YA,L.isBelow,1),ZA=ae(XA,-1,mc),QA=ae(XA,1,pc),JA=(e,t)=>mc(e,t).breakAt.isNone(),e0=(e,t)=>pc(e,t).breakAt.isNone(),cq=e=>Xt(e).map(t=>[t].concat(pc(e,t).positions)).getOr([]),lq=e=>Xn(e).map(t=>mc(e,t).positions.concat(t)).getOr([]),uq=(e,t)=>_u(ZA(e,t),t),fq=(e,t)=>_u(QA(e,t),t),dq=rt,t0=(e,t)=>Math.abs(e.left-t),n0=(e,t)=>Math.abs(e.right-t),mq=e=>Vr(e,"node"),s0=(e,t)=>Zc(e,(n,s)=>{const o=Math.min(t0(n,t),n0(n,t)),r=Math.min(t0(s,t),n0(s,t));return r===o&&mq(s)&&dq(s.node)||r<o?s:n}),pq=e=>{const t=n=>Ue(n,s=>{const o=fr(s);return o.node=e,o});if(fe(e))return t(e.getClientRects());if(q(e)){const n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}else return[]},o0=e=>sn(e,pq);var hc;(function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"})(hc||(hc={}));const hq=(e,t,n,s)=>{let o=s;for(;o=Va(o,e,Mv,t);)if(n(o))return},r0=(e,t,n,s,o,r)=>{let i=0;const c=[],l=h=>{let g=o0([h]);e===-1&&(g=g.reverse());for(let v=0;v<g.length;v++){const E=g[v];if(!n(E,d)){if(c.length>0&&t(E,Yo(c))&&i++,E.line=i,o(E))return!0;c.push(E)}}return!1},d=Yo(r.getClientRects());if(!d)return c;const p=r.getNode();return p&&(l(p),hq(e,s,l,p)),c},gq=(e,t)=>t.line>e,bq=(e,t)=>t.line===e,yq=ae(r0,hc.Up,La,Ia),vq=ae(r0,hc.Down,Ia,La),i0=e=>Yo(e.getClientRects()),Cq=(e,t,n,s)=>{const o=Ms(t);let r,i,c,l;const d=[];let p=0;e===1?(r=o.next,i=Ia,c=La,l=L.after(s)):(r=o.prev,i=La,c=Ia,l=L.before(s));const h=i0(l);do{if(!l.isVisible())continue;const g=i0(l);if(c(g,h))continue;d.length>0&&i(g,Yo(d))&&p++;const v=fr(g);if(v.position=l,v.line=p,n(v))return d;d.push(v)}while(l=r(l));return d},a0=e=>t=>gq(e,t),fh=e=>t=>bq(e,t),io=(e,t)=>{e.selection.setRng(t),Qa(e,e.selection.getRng())},dh=(e,t,n)=>b.some(eh(e,t,n)),c0=(e,t,n,s,o,r)=>{const i=t===Lt.Forwards,c=Ms(e.getBody()),l=ae(am,i?c.next:c.prev),d=i?s:o;if(!n.collapsed){const E=Sl(n);if(r(E))return ro(t,e,E,t===Lt.Backwards,!1);if(sh(e)){const C=n.cloneRange();return C.collapse(t===Lt.Backwards),b.from(C)}}const p=qa(t,e.getBody(),n);if(d(p))return dc(e,p.getNode(!i));let h=l(p);const g=Ov(n);if(h)h=Ln(i,h);else return g?b.some(n):b.none();if(d(h))return ro(t,e,h.getNode(!i),i,!1);const v=l(h);return v&&d(v)&&Dl(h,v)?ro(t,e,v.getNode(!i),i,!1):g?dh(e,h.toRange(),!1):b.none()},l0=(e,t,n,s,o,r)=>{const i=qa(t,e.getBody(),n),c=Yo(i.getClientRects()),l=t===hc.Down,d=e.getBody();if(!c)return b.none();if(sh(e)){const S=l?L.fromRangeEnd(n):L.fromRangeStart(n);return(l?fq:uq)(d,S).orThunk(()=>b.from(S)).map(k=>k.toRange())}const h=(l?vq:yq)(d,a0(1),i),g=ve(h,fh(1)),v=c.left,E=s0(g,v);if(E&&r(E.node)){const S=Math.abs(v-E.left),T=Math.abs(v-E.right);return ro(t,e,E.node,S<T,!1)}let C;if(s(i)?C=i.getNode():o(i)?C=i.getNode(!0):C=Sl(n),C){const S=Cq(t,d,a0(1),C);let T=s0(ve(S,fh(1)),v);if(T||(T=Yo(ve(S,fh(0))),T))return dh(e,T.position.toRange(),!1)}return g.length===0?mh(e,l).filter(l?o:s).map(S=>eh(e,S.toRange(),!1)):b.none()},mh=(e,t)=>{const n=e.selection.getRng(),s=t?L.fromRangeEnd(n):L.fromRangeStart(n),o=_I(s.container(),e.getBody());if(t){const r=pc(o,s);return go(r.positions)}else{const r=mc(o,s);return on(r.positions)}},u0=(e,t,n)=>mh(e,t).filter(n).exists(s=>(e.selection.setRng(s.toRange()),!0)),Su=(e,t)=>{const n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},f0=(e,t)=>{e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},d0=(e,t,n)=>ah(t,n).map(s=>(Su(e,s),n)),Eq=(e,t,n)=>{const s=L.fromRangeStart(e);if(e.collapsed)return s;{const o=L.fromRangeEnd(e);return n?dn(t,o).getOr(o):cn(t,s).getOr(s)}},_q=(e,t,n)=>{const s=e.getBody(),o=Eq(e.selection.getRng(),s,n),r=ae(Er,e);return sq(n,r,s,o).bind(c=>d0(e,t,c))},Sq=(e,t,n)=>{const s=Ue(Kt(A.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),i=>i.dom),o=ve(s,e),r=ve(n,e);U(Gc(o,r),ae(f0,!1)),U(Gc(r,o),ae(f0,!0))},wq=(e,t)=>{const n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){const s=L.fromRangeStart(e.selection.getRng());L.isTextPosition(s)&&!vU(s)&&(Su(e,uI(n,s)),t.set(null))}},Aq=(e,t,n,s)=>{if(t.selection.isCollapsed()){const o=ve(s,e);U(o,r=>{const i=L.fromRangeStart(t.selection.getRng());zs(e,t.getBody(),i).bind(c=>d0(t,n,c))})}},m0=(e,t,n)=>Ua(e)?_q(e,t,n).isSome():!1,p0=(e,t,n)=>Ua(t)?rq(e,t):!1,Tq=e=>{const t=Bt(null),n=ae(Er,e);return e.on("NodeChange",s=>{Ua(e)&&(Sq(n,e.dom,s.parents),wq(e,t),Aq(n,e,t,s.parents))}),t},Nq=ae(p0,!0),kq=ae(p0,!1),wu=(e,t,n)=>{if(Ua(e)){const s=mh(e,t).getOrThunk(()=>{const o=e.selection.getRng();return t?L.fromRangeEnd(o):L.fromRangeStart(o)});return zs(ae(Er,e),e.getBody(),s).exists(o=>{const r=Cu(o);return ah(n,r).exists(i=>(Su(e,i),!0))})}else return!1},xq=(e,t)=>{const n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n},Rq=e=>jt(Xt(e),Xn(e),(t,n)=>{const s=Ln(!0,t),o=Ln(!1,n);return cn(e,s).forall(r=>r.isEqual(o))}).getOr(!0),h0=(e,t)=>n=>ah(t,n).map(s=>()=>Su(e,s)),g0=(e,t,n,s)=>{const o=e.getBody(),r=ae(Er,e);e.undoManager.ignore(()=>{e.selection.setRng(xq(n,s)),Jl(e),zs(r,o,L.fromRangeStart(e.selection.getRng())).map(lh).bind(h0(e,t)).each(Cn)}),e.nodeChanged()},Oq=(e,t)=>{const n=No(t,e);return n||e},Dq=(e,t,n,s)=>{const o=Oq(e.getBody(),s.container()),r=ae(Er,e),i=zs(r,o,s);return i.bind(l=>n?l.fold(te(b.some(lh(l))),b.none,te(b.some(Cu(l))),b.none):l.fold(b.none,te(b.some(Cu(l))),b.none,te(b.some(lh(l))))).map(h0(e,t)).getOrThunk(()=>{const l=fi(n,o,s),d=l.bind(p=>zs(r,o,p));return jt(i,d,()=>Po(r,o,s).bind(p=>Rq(p)?b.some(()=>{Cr(e,n,A.fromDom(p))}):b.none())).getOrThunk(()=>d.bind(()=>l.map(p=>()=>{n?g0(e,t,s,p):g0(e,t,p,s)})))})},ph=(e,t,n)=>{if(e.selection.isCollapsed()&&Ua(e)){const s=L.fromRangeStart(e.selection.getRng());return Dq(e,t,n,s)}return b.none()},Pq=e=>sd(e)>1,b0=(e,t)=>{const n=A.fromDom(e.getBody()),s=A.fromDom(e.selection.getStart()),o=oo(s,n);return ho(o,t).fold(te(o),r=>o.slice(0,r))},Bq=e=>sd(e)===1,Lq=e=>b0(e,t=>e.schema.isBlock(He(t))||Pq(t)),Iq=e=>b0(e,t=>e.schema.isBlock(He(t))),y0=(e,t)=>{const n=ae(NS,e);return sn(t,s=>n(s)?[s.dom]:[])},v0=e=>{const t=Iq(e);return y0(e,t)},$q=(e,t,n,s)=>{const o=y0(t,s);if(o.length===0)Cr(t,e,n);else{const r=TS(n.dom,o);t.selection.setRng(r.toRange())}},Mq=(e,t)=>{const n=ve(Lq(e),Bq);return go(n).bind(s=>{const o=L.fromRangeStart(e.selection.getRng());return Z_(t,o,s.dom)&&!Am(s)?b.some(()=>$q(t,e,s,n)):b.none()})},Fq=(e,t)=>{const n=t.parentElement;return ht(t)&&!Be(n)&&e.dom.isEmpty(n)},Uq=e=>Am(A.fromDom(e)),C0=(e,t)=>{const n=e.selection.getStart(),s=Fq(e,n)||Uq(n)?TS(n,t):lz(e.selection.getRng(),t);e.selection.setRng(s.toRange())},Hq=(e,t)=>{const n=Gc(t,v0(e));n.length>0&&C0(e,n)},E0=e=>q(e.startContainer),zq=e=>e.startOffset===0&&E0(e),Vq=(e,t)=>{const n=t.startContainer.parentElement;return!Be(n)&&NS(e,A.fromDom(n))},Wq=e=>{const t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!Be(t)&&!Be(n)&&t.isEqualNode(n)},jq=e=>{const t=e.endContainer;return e.endOffset===(q(t)?t.length:t.childNodes.length)},qq=e=>Wq(e)&&jq(e),Kq=e=>!e.endContainer.isEqualNode(e.commonAncestorContainer),Gq=e=>qq(e)||Kq(e),Yq=e=>{const t=e.selection.getRng();return zq(t)&&Vq(e,t)&&Gq(t)},Xq=e=>{if(Yq(e)){const t=v0(e);return b.some(()=>{Jl(e),Hq(e,t)})}else return b.none()},hh=(e,t)=>e.selection.isCollapsed()?Mq(e,t):Xq(e),Zq=(e,t)=>Dy(e,n=>On(n.dom),n=>t.isBlock(He(n))),Qq=e=>Zq(A.fromDom(e.selection.getStart()),e.schema),Jq=e=>{const t=e.selection.getRng();return t.collapsed&&(E0(t)||e.dom.isEmpty(t.startContainer))&&!Qq(e)},gc=e=>(Jq(e)&&C0(e,[]),!0),gh=(e,t,n)=>j(n)?b.some(()=>{e._selectionOverrides.hideFakeCaret(),Cr(e,t,A.fromDom(n))}):b.none(),eK=(e,t)=>{const n=t?Ja:ec,s=t?Lt.Forwards:Lt.Backwards,o=qa(s,e.getBody(),e.selection.getRng());return n(o)?gh(e,t,o.getNode(!t)):b.from(Ln(t,o)).filter(r=>n(r)&&Dl(o,r)).bind(r=>gh(e,t,r.getNode(!t)))},tK=(e,t)=>{const n=e.selection.getNode();return Bs(n)?gh(e,t,n):b.none()},bh=(e,t)=>e.selection.isCollapsed()?eK(e,t):tK(e,t),nK=e=>Zo(e,t=>Yn(t.dom)||rt(t.dom)).exists(t=>Yn(t.dom)),yh=e=>Qc(e??"").getOr(0),_0=(e,t)=>{const n=e||O1(t)?"margin":"padding",s=Ds(t,"direction")==="rtl"?"-right":"-left";return n+s},sK=(e,t,n,s,o,r)=>{const i=_0(n,A.fromDom(r)),c=yh(e.getStyle(r,i));if(t==="outdent"){const l=Math.max(0,c-s);e.setStyle(r,i,l?l+o:"")}else{const l=c+s+o;e.setStyle(r,i,l)}},oK=(e,t)=>Gn(t,n=>{const s=_0(bC(e),n),o=il(n,s).map(yh).getOr(0);return e.dom.getContentEditable(n.dom)!=="false"&&o>0}),S0=e=>{const t=A0(e);return!e.mode.isReadOnly()&&(t.length>1||oK(e,t))},w0=e=>Fd(e)||si(e),rK=e=>ds(e).exists(w0),A0=e=>ve(ld(e.selection.getSelectedBlocks()),t=>!w0(t)&&!rK(t)&&nK(t)),T0=(e,t)=>{var n,s;const{dom:o}=e,r=JB(e),i=(s=(n=/[a-z%]+$/i.exec(r))===null||n===void 0?void 0:n[0])!==null&&s!==void 0?s:"px",c=yh(r),l=bC(e);U(A0(e),d=>{sK(o,t,l,c,i,d.dom)})},iK=e=>T0(e,"indent"),N0=e=>T0(e,"outdent"),k0=e=>{if(e.selection.isCollapsed()&&S0(e)){const t=e.dom,n=e.selection.getRng(),s=L.fromRangeStart(n),o=t.getParent(n.startContainer,t.isBlock);if(o!==null&&qm(A.fromDom(o),s,e.schema))return b.some(()=>N0(e))}return b.none()},x0=(e,t,n)=>zr([k0,oh,th,(s,o)=>ph(s,t,o),Qp,ip,ih,bh,Jp,hh,rh],s=>s(e,n)).filter(s=>e.selection.isEditable()),aK=(e,t)=>{x0(e,t,!1).fold(()=>{e.selection.isEditable()&&(Jl(e),Qm(e))},Cn)},cK=(e,t)=>{x0(e,t,!0).fold(()=>{e.selection.isEditable()&&X_(e)},Cn)},lK=(e,t)=>{e.addCommand("delete",()=>{aK(e,t)}),e.addCommand("forwardDelete",()=>{cK(e,t)})},R0=5,uK=400,O0=e=>e.touches===void 0||e.touches.length!==1?b.none():b.some(e.touches[0]),fK=(e,t)=>{const n=Math.abs(e.clientX-t.x),s=Math.abs(e.clientY-t.y);return n>R0||s>R0},dK=e=>{const t=to(),n=Bt(!1),s=$d(o=>{e.dispatch("longpress",{...o,type:"longpress"}),n.set(!0)},uK);e.on("touchstart",o=>{O0(o).each(r=>{s.cancel();const i={x:r.clientX,y:r.clientY,target:o.target};s.throttle(o),n.set(!1),t.set(i)})},!0),e.on("touchmove",o=>{s.cancel(),O0(o).each(r=>{t.on(i=>{fK(r,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))})})},!0),e.on("touchend touchcancel",o=>{s.cancel(),o.type!=="touchcancel"&&t.get().filter(r=>r.target.isEqualNode(o.target)).each(()=>{n.get()?o.preventDefault():e.dispatch("tap",{...o,type:"tap"})})},!0)},vh=(e,t)=>Ae(e,t.nodeName),mK=(e,t)=>q(t)?!0:fe(t)?!vh(e.getBlockElements(),t)&&!Dn(t)&&!sr(e,t)&&!bd(t):!1,pK=(e,t,n)=>ut(T_(A.fromDom(n),A.fromDom(t)),s=>vh(e,s.dom)),hK=(e,t)=>{if(q(t)){if(t.data.length===0)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||vh(e,t.nextSibling)||bd(t.nextSibling)}return!1},Ch=e=>e.dom.create(Yt(e),Fa(e)),gK=e=>{const t=e.dom,n=e.selection,s=e.schema,o=s.getBlockElements(),r=n.getStart(),i=e.getBody();let c,l,d=null;const p=Yt(e);if(!r||!fe(r))return;const h=i.nodeName.toLowerCase();if(!s.isValidChild(h,p.toLowerCase())||pK(o,i,r))return;if(i.firstChild===i.lastChild&&ht(i.firstChild)){c=Ch(e),c.appendChild(oi().dom),i.replaceChild(c,i.firstChild),e.selection.setCursorLocation(c,0),e.nodeChanged();return}let g=i.firstChild;for(;g;)if(fe(g)&&gP(s,g),mK(s,g)){if(hK(o,g)){l=g,g=g.nextSibling,t.remove(l);continue}if(!c){if(!d&&e.hasFocus()&&(d=IA(e.selection.getRng(),()=>document.createElement("span"))),!g.parentNode){g=null;break}c=Ch(e),i.insertBefore(c,g)}l=g,g=g.nextSibling,c.appendChild(l)}else c=null,g=g.nextSibling;d&&(e.selection.setRng($A(d)),e.nodeChanged())},D0=(e,t,n)=>{const s=A.fromDom(Ch(e)),o=oi();At(s,o),n(t,s);const r=document.createRange();return r.setStartBefore(o.dom),r.setEndBefore(o.dom),r},bK=e=>{e.on("NodeChange",()=>gK(e))},P0=e=>t=>(" "+t.attr("class")+" ").indexOf(e)!==-1,yK=(e,t,n)=>function(s){const o=arguments,r=o[o.length-2],i=r>0?t.charAt(r-1):"";if(i==='"')return s;if(i===">"){const c=t.lastIndexOf("<",r);if(c!==-1&&t.substring(c,r).indexOf('contenteditable="false"')!==-1)return s}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(o[0])+'">'+e.dom.encode(typeof o[1]=="string"?o[1]:o[0])+"</span>"},vK=(e,t,n)=>{let s=t.length,o=n.content;if(n.format!=="raw"){for(;s--;)o=o.replace(t[s],yK(e,o,AC(e)));n.content=o}},CK=(e,t)=>Gn(e,n=>{const s=t.match(n);return s!==null&&s[0].length===t.length}),EK=e=>{const t="contenteditable",n=" "+X.trim(WL(e))+" ",s=" "+X.trim(AC(e))+" ",o=P0(n),r=P0(s),i=jL(e);i.length>0&&e.on("BeforeSetContent",c=>{vK(e,i,c)}),e.parser.addAttributeFilter("class",c=>{let l=c.length;for(;l--;){const d=c[l];o(d)?d.attr(t,"true"):r(d)&&d.attr(t,"false")}}),e.serializer.addAttributeFilter(t,c=>{let l=c.length;for(;l--;){const d=c[l];if(!o(d)&&!r(d))continue;const p=d.attr("data-mce-content");i.length>0&&p?CK(i,p)?(d.name="#text",d.type=3,d.raw=!0,d.value=p):d.remove():d.attr(t,null)}})},_K=e=>ol(A.fromDom(e.getBody()),"*[data-mce-caret]").map(t=>t.dom).getOrNull(),B0=(e,t)=>{t.hasAttribute("data-mce-caret")&&(zd(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},SK=(e,t)=>{const n=_K(e);if(n){if(t.type==="compositionstart"){t.preventDefault(),t.stopPropagation(),B0(e,n);return}Rv(n)&&(B0(e,n),e.undoManager.add())}},wK=e=>{e.on("keyup compositionstart",ae(SK,e))},L0=rt,AK=(e,t,n)=>c0(t,e,n,Oo,Do,L0),TK=(e,t,n)=>l0(t,e,n,r=>Oo(r)||A_(r),r=>Do(r)||Wm(r),L0),NK=e=>{const t=e.dom.create(Yt(e));return t.innerHTML='<br data-mce-bogus="1">',t},I0=(e,t,n)=>{const s=Ms(e.getBody()),o=ae(am,t===1?s.next:s.prev);if(n.collapsed){const r=e.dom.getParent(n.startContainer,"PRE");if(!r)return;if(!o(L.fromRangeStart(n))){const c=A.fromDom(NK(e));t===1?Qs(A.fromDom(r),c):fn(A.fromDom(r),c),e.selection.select(c.dom,!0),e.selection.collapse()}}},kK=(e,t)=>{const n=t?Lt.Forwards:Lt.Backwards,s=e.selection.getRng();return AK(n,e,s).orThunk(()=>(I0(e,n,s),b.none()))},xK=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return TK(n,e,s).orThunk(()=>(I0(e,n,s),b.none()))},RK=(e,t)=>{const n=t?e.getEnd(!0):e.getStart(!0);return q_(n)?!t:t},$0=(e,t)=>kK(e,RK(e.selection,t)).exists(n=>(io(e,n),!0)),M0=(e,t)=>xK(e,t).exists(n=>(io(e,n),!0)),F0=(e,t)=>u0(e,t,t?Do:Oo),Au=(e,t)=>nh(e,!t).map(n=>{const s=n.toRange(),o=e.selection.getRng();return t?s.setStart(o.startContainer,o.startOffset):s.setEnd(o.endContainer,o.endOffset),s}).exists(n=>(io(e,n),!0)),OK=e=>Ze(["figcaption"],He(e)),DK=(e,t,n)=>{const s=ae(Qe,t);return Zo(A.fromDom(e.container()),o=>n.isBlock(He(o)),s).filter(OK)},PK=(e,t,n)=>t?e0(e.dom,n):JA(e.dom,n),BK=(e,t)=>{const n=A.fromDom(e.getBody()),s=L.fromRangeStart(e.selection.getRng());return DK(s,n,e.schema).exists(()=>{if(PK(n,t,s)){const r=D0(e,n,t?At:cd);return e.selection.setRng(r),!0}else return!1})},U0=(e,t)=>e.selection.isCollapsed()?BK(e,t):!1,LK=(e,t,n)=>{const s=e.selection.getRng(),o=L.fromRangeStart(s);return e.getBody().firstChild===t&&JA(n,o)?(e.execCommand("InsertNewBlockBefore"),!0):!1},IK=(e,t)=>{const n=e.selection.getRng(),s=L.fromRangeStart(n);return e.getBody().lastChild===t&&e0(t,s)?(e.execCommand("InsertNewBlockAfter"),!0):!1},$K=(e,t)=>t?b.from(e.dom.getParent(e.selection.getNode(),"details")).map(n=>IK(e,n)).getOr(!1):b.from(e.dom.getParent(e.selection.getNode(),"summary")).bind(n=>b.from(e.dom.getParent(n,"details")).map(s=>LK(e,s,n))).getOr(!1),H0=(e,t)=>$K(e,t),z0={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},MK=e=>Ue(e,t=>({...z0,...t})),FK=e=>Ue(e,t=>({...z0,...t})),V0=(e,t)=>t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey,UK=(e,t)=>sn(MK(e),n=>V0(n,t)?[n]:[]),HK=(e,t)=>sn(FK(e),n=>V0(n,t)?[n]:[]),Ee=(e,...t)=>()=>e.apply(null,t),bc=(e,t)=>vt(UK(e,t),n=>n.action()),W0=(e,t)=>zr(HK(e,t),n=>n.action()),j0=(e,t)=>{const n=t?Lt.Forwards:Lt.Backwards,s=e.selection.getRng();return c0(e,n,s,Ja,ec,Bs).exists(o=>(io(e,o),!0))},q0=(e,t)=>{const n=t?1:-1,s=e.selection.getRng();return l0(e,n,s,Ja,ec,Bs).exists(o=>(io(e,o),!0))},K0=(e,t)=>u0(e,t,t?ec:Ja),G0=Ls.generate([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),yc={...G0,none:e=>G0.none(e)},zK=(e,t)=>Y0(e,t,dt),Y0=(e,t,n)=>sn(qt(e),s=>us(s,t)?n(s)?[s]:[]:Y0(s,t,n)),VK=(e,t,n=tt)=>{if(n(t))return b.none();if(Ze(e,He(t)))return b.some(t);const s=o=>us(o,"table")||n(o);return ya(t,e.join(","),s)},WK=(e,t)=>VK(["td","th"],e,t),jK=e=>zK(e,"th,td"),X0=(e,t)=>Xr(e,"table",t),Eh=(e,t,n,s,o=dt)=>{const r=s===1;if(!r&&n<=0)return yc.first(e[0]);if(r&&n>=e.length-1)return yc.last(e[e.length-1]);{const i=n+s,c=e[i];return o(c)?yc.middle(t,c):Eh(e,t,i,s,o)}},Z0=(e,t)=>X0(e,t).bind(n=>{const s=jK(n);return ho(s,r=>Qe(e,r)).map(r=>({index:r,all:s}))}),qK=(e,t,n)=>Z0(e,n).fold(()=>yc.none(e),o=>Eh(o.all,e,o.index,1,t)),KK=(e,t,n)=>Z0(e,n).fold(()=>yc.none(),o=>Eh(o.all,e,o.index,-1,t)),GK=e=>w1(e).filter(t=>t.trim().length!==0||t.indexOf(xt)>-1).isSome(),YK=e=>tl(e)&&Sn(e,"contenteditable")==="false",XK=["img","br"],ZK=e=>GK(e)||Ze(XK,He(e))||YK(e),QK=e=>id(e,ZK),JK=(e,t)=>({left:e.left-t,top:e.top-t,right:e.right+t*2,bottom:e.bottom+t*2,width:e.width+t,height:e.height+t}),e4=(e,t)=>sn(t,n=>{const s=JK(fr(n.getBoundingClientRect()),-1);return[{x:s.left,y:e(s),cell:n},{x:s.right,y:e(s),cell:n}]}),t4=(e,t,n)=>Vt(e,(s,o)=>s.fold(()=>b.some(o),r=>{const i=Math.sqrt(Math.abs(r.x-t)+Math.abs(r.y-n)),c=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return b.some(c<i?o:r)}),b.none()),Q0=(e,t,n,s,o)=>{const r=Kt(A.fromDom(n),"td,th,caption").map(c=>c.dom),i=ve(e4(e,r),c=>t(c,o));return t4(i,s,o).map(c=>c.cell)},n4=e=>e.bottom,s4=e=>e.top,o4=(e,t)=>e.y<t,r4=(e,t)=>e.y>t,i4=ae(Q0,n4,o4),a4=ae(Q0,s4,r4),c4=(e,t)=>on(t.getClientRects()).bind(n=>i4(e,n.left,n.top)).bind(n=>_u(lq(n),t)),l4=(e,t)=>go(t.getClientRects()).bind(n=>a4(e,n.left,n.top)).bind(n=>_u(cq(n),t)),u4=(e,t,n)=>n.breakAt.exists(s=>e(t,s).breakAt.isSome()),f4=e=>e.breakType===Vs.Wrap&&e.positions.length===0,d4=e=>e.breakType===Vs.Br&&e.positions.length===1,J0=(e,t,n)=>{const s=e(t,n);return f4(s)||!ht(n.getNode())&&d4(s)?!u4(e,t,s):s.breakAt.isNone()},m4=ae(J0,mc),p4=ae(J0,pc),h4=(e,t,n)=>{const s=L.fromRangeStart(t);return di(!e,n).exists(o=>o.isEqual(s))},g4=(e,t,n,s)=>{const o=e.selection.getRng(),r=t?1:-1;return LC()&&h4(t,o,n)?(ro(r,e,n,!t,!1).each(i=>{io(e,i)}),!0):!1},b4=(e,t,n)=>c4(t,n).orThunk(()=>on(n.getClientRects()).bind(s=>uh(ZA(e,L.before(t)),s.left))).getOr(L.before(t)),y4=(e,t,n)=>l4(t,n).orThunk(()=>on(n.getClientRects()).bind(s=>uh(QA(e,L.after(t)),s.left))).getOr(L.after(t)),eT=(e,t)=>{const n=t.getNode(e);return Ps(n)?b.some(n):b.none()},v4=(e,t,n)=>{t.undoManager.transact(()=>{const s=e?Qs:fn,o=D0(t,A.fromDom(n),s);io(t,o)})},tT=(e,t,n)=>{const s=eT(!!t,n),o=t===!1;s.fold(()=>io(e,n.toRange()),r=>di(o,e.getBody()).filter(i=>i.isEqual(n)).fold(()=>io(e,n.toRange()),i=>v4(t,e,r)))},C4=(e,t,n,s)=>{const o=e.selection.getRng(),r=L.fromRangeStart(o),i=e.getBody();if(!t&&m4(s,r)){const c=b4(i,n,r);return tT(e,t,c),!0}else if(t&&p4(s,r)){const c=y4(i,n,r);return tT(e,t,c),!0}else return!1},nT=(e,t,n)=>b.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind(s=>b.from(e.dom.getParent(s,"table")).map(o=>n(e,t,o,s))).getOr(!1),sT=(e,t)=>nT(e,t,g4),_h=(e,t)=>nT(e,t,C4),E4=e=>{const t=gi.exact(e,0,e,0);return cM(t)},oT=(e,t,n)=>n.fold(b.none,b.none,(s,o)=>QK(o).map(r=>E4(r)),s=>(e.execCommand("mceTableInsertRowAfter"),rT(e,t,s))),rT=(e,t,n)=>oT(e,t,qK(n,Qo)),_4=(e,t,n)=>oT(e,t,KK(n,Qo)),iT=(e,t)=>{const n=["table","li","dl"],s=A.fromDom(e.getBody()),o=c=>{const l=He(c);return Qe(c,s)||Ze(n,l)},r=e.selection.getRng(),i=A.fromDom(t?r.endContainer:r.startContainer);return WK(i,o).map(c=>(X0(c,o).each(p=>{e.model.table.clearSelectedCells(p.dom)}),e.selection.collapse(!t),(t?rT:_4)(e,o,c).each(p=>{e.selection.setRng(p)}),!0)).getOr(!1)},S4=(e,t,n)=>{const s=Ve.os.isMacOS()||Ve.os.isiOS();bc([{keyCode:ne.RIGHT,action:Ee($0,e,!0)},{keyCode:ne.LEFT,action:Ee($0,e,!1)},{keyCode:ne.UP,action:Ee(M0,e,!1)},{keyCode:ne.DOWN,action:Ee(M0,e,!0)},...s?[{keyCode:ne.UP,action:Ee(Au,e,!1),metaKey:!0,shiftKey:!0},{keyCode:ne.DOWN,action:Ee(Au,e,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ne.RIGHT,action:Ee(sT,e,!0)},{keyCode:ne.LEFT,action:Ee(sT,e,!1)},{keyCode:ne.UP,action:Ee(_h,e,!1)},{keyCode:ne.DOWN,action:Ee(_h,e,!0)},{keyCode:ne.UP,action:Ee(_h,e,!1)},{keyCode:ne.UP,action:Ee(H0,e,!1)},{keyCode:ne.DOWN,action:Ee(H0,e,!0)},{keyCode:ne.RIGHT,action:Ee(j0,e,!0)},{keyCode:ne.LEFT,action:Ee(j0,e,!1)},{keyCode:ne.UP,action:Ee(q0,e,!1)},{keyCode:ne.DOWN,action:Ee(q0,e,!0)},{keyCode:ne.RIGHT,action:Ee(m0,e,t,!0)},{keyCode:ne.LEFT,action:Ee(m0,e,t,!1)},{keyCode:ne.RIGHT,ctrlKey:!s,altKey:s,action:Ee(Nq,e,t)},{keyCode:ne.LEFT,ctrlKey:!s,altKey:s,action:Ee(kq,e,t)},{keyCode:ne.UP,action:Ee(U0,e,!1)},{keyCode:ne.DOWN,action:Ee(U0,e,!0)}],n).each(o=>{n.preventDefault()})},w4=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||S4(e,t,n)})},Cs=(e,t)=>({container:e,offset:t}),Tu=st.DOM,Nu=e=>t=>e===t?-1:0,A4=e=>t=>e.isBlock(t)||Ze(["BR","IMG","HR","INPUT"],t.nodeName)||e.getContentEditable(t)==="false",Sh=(e,t,n)=>{if(q(e)&&t>=0)return b.some(Cs(e,t));{const s=lr(Tu);return b.from(s.backwards(e,t,Nu(e),n)).map(o=>Cs(o.container,o.container.data.length))}},T4=(e,t,n)=>{if(q(e)&&t>=e.length)return b.some(Cs(e,t));{const s=lr(Tu);return b.from(s.forwards(e,t,Nu(e),n)).map(o=>Cs(o.container,0))}},wh=(e,t,n)=>{if(!q(e))return b.none();const s=e.data;if(t>=0&&t<=s.length)return b.some(Cs(e,t));{const o=lr(Tu);return b.from(o.backwards(e,t,Nu(e),n)).bind(r=>{const i=r.container.data;return wh(r.container,t+i.length,n)})}},aT=(e,t,n)=>{if(!q(e))return b.none();const s=e.data;if(t<=s.length)return b.some(Cs(e,t));{const o=lr(Tu);return b.from(o.forwards(e,t,Nu(e),n)).bind(r=>aT(r.container,t-s.length,n))}},Ah=(e,t,n,s,o)=>{const r=lr(e,A4(e));return b.from(r.backwards(t,n,s,o))},N4=e=>e.collapsed&&q(e.startContainer),k4=e=>wn(e.toString().replace(/\u00A0/g," ")),cT=e=>e!==""&&`  \f
\r	\v`.indexOf(e)!==-1,x4=(e,t)=>e.substring(t.length),R4=(e,t,n,s=!1)=>{let o;const r=n.charAt(0);for(o=t-1;o>=0;o--){const i=e.charAt(o);if(!s&&cT(i))return b.none();if(r===i&&Wt(e,n,o,t))break}return b.some(o)},Th=(e,t,n,s=!1)=>{if(!N4(t))return b.none();const o={text:"",offset:0},r=(c,l,d)=>(o.text=d+o.text,o.offset+=l,R4(o.text,o.offset,n,s).getOr(l)),i=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return Ah(e,t.startContainer,t.startOffset,r,i).bind(c=>{const l=t.cloneRange();if(l.setStart(c.container,c.offset),l.setEnd(t.endContainer,t.endOffset),l.collapsed)return b.none();const d=k4(l);return d.lastIndexOf(n)!==0?b.none():b.some({text:x4(d,n),range:l,trigger:n})})},O4=e=>e.nodeType===oy,D4=e=>e.nodeType===fa,lT=e=>{if(O4(e))return Cs(e,e.data.length);{const t=e.childNodes;return t.length>0?lT(t[t.length-1]):Cs(e,t.length)}},uT=(e,t)=>{const n=e.childNodes;return n.length>0&&t<n.length?uT(n[t],0):n.length>0&&D4(e)&&n.length===t?lT(n[n.length-1]):Cs(e,t)},P4=(e,t)=>{var n;const s=(n=e.getParent(t.container,e.isBlock))!==null&&n!==void 0?n:e.getRoot();return Ah(e,t.container,t.offset,(o,r)=>r===0?-1:r,s).filter(o=>{const r=o.container.data.charAt(o.offset-1);return!cT(r)}).isSome()},B4=e=>t=>{const n=uT(t.startContainer,t.startOffset);return!P4(e,n)},L4=(e,t,n)=>zr(n.triggers,s=>Th(e,t,s)),I4=(e,t)=>{const n=t(),s=e.selection.getRng();return L4(e.dom,s,n).bind(o=>fT(e,t,o))},fT=(e,t,n,s={})=>{var o;const r=t(),c=(o=e.selection.getRng().startContainer.nodeValue)!==null&&o!==void 0?o:"",l=ve(r.lookupByTrigger(n.trigger),p=>n.text.length>=p.minChars&&p.matches.getOrThunk(()=>B4(e.dom))(n.range,c,n.text));if(l.length===0)return b.none();const d=Promise.all(Ue(l,p=>p.fetch(n.text,p.maxResults,s).then(g=>({matchText:n.text,items:g,columns:p.columns,onAction:p.onAction,highlightOn:p.highlightOn}))));return b.some({lookupData:d,context:n})};var Es;(function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"})(Es||(Es={}));const Nh=(e,t,n)=>e.stype===Es.Error?t(e.serror):n(e.svalue),$4=e=>{const t=[],n=[];return U(e,s=>{Nh(s,o=>n.push(o),o=>t.push(o))}),{values:t,errors:n}},M4=(e,t)=>e.stype===Es.Error?{stype:Es.Error,serror:t(e.serror)}:e,F4=(e,t)=>e.stype===Es.Value?{stype:Es.Value,svalue:t(e.svalue)}:e,U4=(e,t)=>e.stype===Es.Value?t(e.svalue):e,H4=(e,t)=>e.stype===Es.Error?t(e.serror):e,dT=e=>({stype:Es.Value,svalue:e}),mT=e=>({stype:Es.Error,serror:e}),Ft={fromResult:e=>e.fold(mT,dT),toResult:e=>Nh(e,an.error,an.value),svalue:dT,partition:$4,serror:mT,bind:U4,bindError:H4,map:F4,mapError:M4,fold:Nh},kh=e=>ye(e)&&un(e).length>100?" removed due to size":JSON.stringify(e,null,2),z4=e=>{const t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:te("... (only showing first ten failures)")}]):e;return Ue(t,n=>"Failed path: ("+n.path.join(" > ")+`)
`+n.getErrorInfo())},ku=(e,t)=>Ft.serror([{path:e,getErrorInfo:t}]),V4=(e,t,n)=>ku(e,()=>'Could not find valid *required* value for "'+t+'" in '+kh(n)),W4=(e,t)=>ku(e,()=>'Choice schema did not contain choice key: "'+t+'"'),j4=(e,t,n)=>ku(e,()=>'The chosen schema: "'+n+'" did not exist in branches: '+kh(t)),q4=(e,t)=>ku(e,te(t)),K4=(e,t,n,s)=>ct(n,s).fold(()=>j4(e,n,s),r=>r.extract(e.concat(["branch: "+s]),t)),G4=(e,t)=>({extract:(o,r)=>ct(r,e).fold(()=>W4(o,e),c=>K4(o,r,t,c)),toString:()=>"chooseOn("+e+"). Possible values: "+un(t)}),Y4=(e,t)=>t,X4=(e,t)=>je(e)&&je(t)?xu(e,t):t,pT=e=>(...t)=>{if(t.length===0)throw new Error("Can't merge zero objects");const n={};for(let s=0;s<t.length;s++){const o=t[s];for(const r in o)Ae(o,r)&&(n[r]=e(n[r],o[r]))}return n},xu=pT(X4),hT=pT(Y4),gT=()=>({tag:"required",process:{}}),Z4=e=>({tag:"defaultedThunk",process:e}),bT=e=>Z4(te(e)),Q4=()=>({tag:"option",process:{}}),J4=(e,t)=>e.length>0?Ft.svalue(xu(t,hT.apply(void 0,e))):Ft.svalue(t),yT=e=>_t(Ft.serror,sa)(e),e5={consolidateObj:(e,t)=>{const n=Ft.partition(e);return n.errors.length>0?yT(n.errors):J4(n.values,t)},consolidateArr:e=>{const t=Ft.partition(e);return t.errors.length>0?yT(t.errors):Ft.svalue(t.values)}},t5=(e,t,n,s)=>({tag:"field",key:e,newKey:t,presence:n,prop:s}),n5=(e,t)=>({tag:"custom",newKey:e,instantiator:t}),vT=(e,t,n)=>{switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},xh=e=>{const t=(s,o)=>Ft.bindError(e(o),r=>q4(s,r)),n=te("val");return{extract:t,toString:n}},s5=xh(Ft.svalue),o5=(e,t,n,s)=>ct(t,n).fold(()=>V4(e,n,t),s),CT=(e,t,n,s)=>{const o=ct(e,t).getOrThunk(()=>n(e));return s(o)},r5=(e,t,n)=>n(ct(e,t)),i5=(e,t,n,s)=>{const o=ct(e,t).map(r=>r===!0?n(e):r);return s(o)},a5=(e,t,n,s,o)=>{const r=c=>o.extract(t.concat([s]),c),i=c=>c.fold(()=>Ft.svalue(b.none()),l=>{const d=o.extract(t.concat([s]),l);return Ft.map(d,b.some)});switch(e.tag){case"required":return o5(t,n,s,r);case"defaultedThunk":return CT(n,s,e.process,r);case"option":return r5(n,s,i);case"defaultedOptionThunk":return i5(n,s,e.process,i);case"mergeWithThunk":return CT(n,s,te({}),c=>{const l=xu(e.process(n),c);return r(l)})}},c5=(e,t,n)=>{const s={},o=[];for(const r of n)vT(r,(i,c,l,d)=>{const p=a5(l,e,t,i,d);Ft.fold(p,h=>{o.push(...h)},h=>{s[c]=h})},(i,c)=>{s[i]=c(t)});return o.length>0?Ft.serror(o):Ft.svalue(s)},Rh=e=>({extract:(s,o)=>c5(s,o,e),toString:()=>`obj{
`+Ue(e,o=>vT(o,(r,i,c,l)=>r+" -> "+l.toString(),(r,i)=>"state("+r+")")).join(`
`)+"}"}),ET=e=>({extract:(s,o)=>{const r=Ue(o,(i,c)=>e.extract(s.concat(["["+c+"]"]),i));return e5.consolidateArr(r)},toString:()=>"array("+e.toString()+")"}),l5=e=>xh(t=>e(t).fold(Ft.serror,Ft.svalue)),u5=(e,t,n)=>{const s=t.extract([e],n);return Ft.mapError(s,o=>({input:n,errors:o}))},f5=(e,t,n)=>Ft.toResult(u5(e,t,n)),d5=e=>`Errors: 
`+z4(e.errors).join(`
`)+`

Input object: `+kh(e.input),_T=(e,t)=>G4(e,ia(t,Rh)),m5=te(s5),Ru=(e,t)=>xh(n=>{const s=typeof n;return e(n)?Ft.svalue(n):Ft.serror(`Expected type: ${t} but got: ${s}`)}),p5=Ru(pt,"number"),Ou=Ru(G,"string"),h5=Ru(nt,"boolean"),Oh=Ru($e,"function"),vc=t5,ST=n5,g5=e=>l5(t=>Ze(e,t)?an.value(t):an.error(`Unsupported value: "${t}", choose one of "${e.join(", ")}".`)),wT=(e,t)=>vc(e,e,gT(),t),AT=e=>wT(e,Ou),TT=e=>wT(e,Oh),b5=(e,t)=>vc(e,e,gT(),ET(t)),Dh=(e,t)=>vc(e,e,Q4(),t),Du=e=>Dh(e,Ou),y5=e=>Dh(e,Oh),v5=(e,t)=>vc(e,e,bT(t),m5()),Ti=(e,t,n)=>vc(e,e,bT(t),n),NT=(e,t)=>Ti(e,t,p5),C5=(e,t)=>Ti(e,t,Ou),kT=(e,t,n)=>Ti(e,t,g5(n)),Ph=(e,t)=>Ti(e,t,h5),Bh=(e,t)=>Ti(e,t,Oh),E5=(e,t,n)=>Ti(e,t,ET(n)),_5=AT("type"),S5=TT("fetch"),Lh=TT("onAction"),w5=Bh("onSetup",()=>Se),A5=Du("text"),T5=Du("icon"),N5=Du("tooltip"),k5=Du("label"),x5=Ph("active",!1),R5=Ph("enabled",!0),xT=Ph("primary",!1),O5=e=>v5("columns",e),Cc=e=>C5("type",e),D5=Rh([_5,AT("trigger"),NT("minChars",1),O5(1),NT("maxResults",10),y5("matches"),S5,Lh,E5("highlightOn",[],Ou)]),P5=e=>f5("Autocompleter",D5,e),Ih=[R5,N5,T5,A5,w5],RT=[x5].concat(Ih),B5=[Bh("predicate",tt),kT("scope","node",["node","editor"]),kT("position","selection",["node","selection","line"])],L5=Ih.concat([Cc("contextformbutton"),xT,Lh,ST("original",St)]),I5=RT.concat([Cc("contextformbutton"),xT,Lh,ST("original",St)]),$5=Ih.concat([Cc("contextformbutton")]),M5=RT.concat([Cc("contextformtogglebutton")]),F5=_T("type",{contextformbutton:L5,contextformtogglebutton:I5});Rh([Cc("contextform"),Bh("initValue",te("")),k5,b5("commands",F5),Dh("launch",_T("type",{contextformbutton:$5,contextformtogglebutton:M5}))].concat(B5));const U5=e=>{const t=e.ui.registry.getAll().popups,n=ia(t,i=>P5(i).fold(c=>{throw new Error(d5(c))},St)),s=Ab(Yc(n,i=>i.trigger)),o=jf(n);return{dataset:n,triggers:s,lookupByTrigger:i=>ve(o,c=>c.trigger===i)}},H5=(e,t)=>{const n=$d(t.load,50);e.on("input",s=>{s.inputType==="insertCompositionText"&&!e.composing||n.throttle()}),e.on("keydown",s=>{const o=s.which;o===8?n.throttle():o===27?(n.cancel(),t.cancelIfNecessary()):(o===38||o===40)&&n.cancel()},!0),e.on("remove",n.cancel)},z5=e=>{const t=to(),n=Bt(!1),s=t.isSet,o=()=>{s()&&(P$(e),n.set(!1),t.clear())},r=h=>{s()||t.set({trigger:h.trigger,matchLength:h.text.length})},i=Ns(()=>U5(e)),c=h=>t.get().map(g=>Th(e.dom,e.selection.getRng(),g.trigger,!0).bind(v=>fT(e,i,v,h))).getOrThunk(()=>I4(e,i)),l=h=>{c(h).fold(o,g=>{r(g.context),g.lookupData.then(v=>{t.get().map(E=>{const C=g.context;E.trigger===C.trigger&&(t.set({...E,matchLength:C.text.length}),n.get()?(Tm(e,{range:C.range}),D$(e,{lookupData:v})):(n.set(!0),Tm(e,{range:C.range}),O$(e,{lookupData:v})))})})})},d=(h,g)=>{const v=h.compareBoundaryPoints(window.Range.START_TO_START,g),E=h.compareBoundaryPoints(window.Range.END_TO_END,g);return v>=0&&E<=0},p=()=>t.get().bind(({trigger:h})=>{const g=e.selection.getRng();return Th(e.dom,g,h,n.get()).filter(({range:v})=>d(g,v)).map(({range:v})=>v)});e.addCommand("mceAutocompleterReload",(h,g)=>{const v=ye(g)?g.fetchOptions:{};l(v)}),e.addCommand("mceAutocompleterClose",o),e.addCommand("mceAutocompleterRefreshActiveRange",()=>{p().each(h=>{Tm(e,{range:h})})}),e.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",()=>p().isSome()),H5(e,{cancelIfNecessary:o,load:l})},V5=xs().browser.isSafari(),OT=e=>So(A.fromDom(e)),DT=(e,t)=>{var n;return e.startOffset===0&&e.endOffset===((n=t.textContent)===null||n===void 0?void 0:n.length)},Pu=(e,t)=>b.from(e.getParent(t.container(),"details")),PT=(e,t)=>Pu(e,t).isSome(),W5=(e,t)=>{const n=b.from(e.getParent(t.startContainer,"details")),s=b.from(e.getParent(t.endContainer,"details"));if(n.isSome()||s.isSome()){const o=n.bind(r=>b.from(e.select("summary",r)[0]));return b.some({startSummary:o,startDetails:n,endDetails:s})}else return b.none()},j5=(e,t)=>Xt(t).exists(n=>n.isEqual(e)),q5=(e,t)=>Xn(t).exists(n=>ht(n.getNode())&&dn(t,n).exists(s=>s.isEqual(e))||n.isEqual(e)),K5=(e,t)=>t.startSummary.exists(n=>j5(e,n)),G5=(e,t)=>t.startSummary.exists(n=>q5(e,n)),Y5=(e,t)=>t.startDetails.exists(n=>dn(n,e).forall(s=>t.startSummary.exists(o=>!o.contains(e.container())&&o.contains(s.container())))),X5=(e,t,n)=>n.startDetails.exists(s=>cn(e,t).forall(o=>!s.contains(o.container()))),BT=(e,t)=>{const n=t.getNode();qe(n)||e.selection.setCursorLocation(n,t.offset())},LT=(e,t,n)=>{const s=e.dom.getParent(t.container(),"details");if(s&&!s.open){const o=e.dom.select("summary",s)[0];o&&(n?Xt(o):Xn(o)).each(i=>BT(e,i))}else BT(e,t)},Z5=(e,t)=>{const n=l=>l.contains(e.startContainer),s=l=>l.contains(e.endContainer),o=t.startSummary.exists(n),r=t.startSummary.exists(s),i=t.startDetails.forall(l=>t.endDetails.forall(d=>l!==d));return(o||r)&&!(o&&r)||i},IT=(e,t,n)=>{const{dom:s,selection:o}=e,r=e.getBody();if(n==="character"){const i=L.fromRangeStart(o.getRng()),c=s.getParent(i.container(),s.isBlock),l=Pu(s,i),d=c&&s.isEmpty(c),p=Be(c==null?void 0:c.previousSibling),h=Be(c==null?void 0:c.nextSibling);return d&&(t?h:p)&&fi(!t,r,i).exists(E=>PT(s,E)&&!ey(l,Pu(s,E)))?!0:fi(t,r,i).fold(tt,g=>{const v=Pu(s,g);if(PT(s,g)&&!ey(l,v)){if(t||LT(e,g,!1),c&&d){if(t&&p)return!0;if(!t&&h)return!0;LT(e,g,t),e.dom.remove(c)}return!0}else return!1})}else return!1},Q5=(e,t,n,s)=>{const r=e.selection.getRng(),i=L.fromRangeStart(r),c=e.getBody();return s==="selection"?Z5(r,t):n?G5(i,t)||X5(c,i,t):K5(i,t)||Y5(i,t)},J5=(e,t,n)=>W5(e.dom,e.selection.getRng()).fold(()=>IT(e,t,n),s=>Q5(e,s,t,n)||IT(e,t,n)),e8=(e,t,n)=>{const s=e.selection,o=s.getNode(),r=s.getRng(),i=L.fromRangeStart(r);return eP(o)?(n==="selection"&&DT(r,o)||Z_(t,i,o)?OT(o):e.undoManager.transact(()=>{const c=s.getSel();let{anchorNode:l,anchorOffset:d,focusNode:p,focusOffset:h}=c??{};const g=()=>{j(l)&&j(d)&&j(p)&&j(h)&&(c==null||c.setBaseAndExtent(l,d,p,h))},v=()=>{l=c==null?void 0:c.anchorNode,d=c==null?void 0:c.anchorOffset,p=c==null?void 0:c.focusNode,h=c==null?void 0:c.focusOffset},E=(S,T)=>{U(S.childNodes,k=>{Ga(k)&&T.appendChild(k)})},C=e.dom.create("span",{"data-mce-bogus":"1"});E(o,C),o.appendChild(C),g(),(n==="word"||n==="line")&&(c==null||c.modify("extend",t?"right":"left",n)),!s.isCollapsed()&&DT(s.getRng(),C)?OT(o):(e.execCommand(t?"ForwardDelete":"Delete"),v(),E(C,o),g()),e.dom.remove(C)}),!0):!1},Ar=(e,t,n)=>J5(e,t,n)||V5&&e8(e,t,n)?b.some(Se):b.none(),$T=e=>(t,n,s={})=>{const o=t.getBody(),r={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:o,currentTarget:o,eventPhase:Event.AT_TARGET,originalTarget:o,explicitOriginalTarget:o,isTrusted:!1,srcElement:o,cancelable:!1,preventDefault:Se,inputType:n},i=dv(new InputEvent(e));return t.dispatch(e,{...i,...r,...s})},Ec=$T("input"),Bu=$T("beforeinput"),MT=xs(),FT=MT.os,UT=FT.isMacOS()||FT.isiOS(),t8=MT.browser.isFirefox(),n8=(e,t,n)=>{const s=n.keyCode===ne.BACKSPACE?"deleteContentBackward":"deleteContentForward",o=e.selection.isCollapsed(),r=o?"character":"selection",i=c=>o?c?"word":"line":"selection";W0([{keyCode:ne.BACKSPACE,action:Ee(k0,e)},{keyCode:ne.BACKSPACE,action:Ee(oh,e,!1)},{keyCode:ne.DELETE,action:Ee(oh,e,!0)},{keyCode:ne.BACKSPACE,action:Ee(th,e,!1)},{keyCode:ne.DELETE,action:Ee(th,e,!0)},{keyCode:ne.BACKSPACE,action:Ee(ph,e,t,!1)},{keyCode:ne.DELETE,action:Ee(ph,e,t,!0)},{keyCode:ne.BACKSPACE,action:Ee(ip,e,!1)},{keyCode:ne.DELETE,action:Ee(ip,e,!0)},{keyCode:ne.BACKSPACE,action:Ee(Ar,e,!1,r)},{keyCode:ne.DELETE,action:Ee(Ar,e,!0,r)},...UT?[{keyCode:ne.BACKSPACE,altKey:!0,action:Ee(Ar,e,!1,i(!0))},{keyCode:ne.DELETE,altKey:!0,action:Ee(Ar,e,!0,i(!0))},{keyCode:ne.BACKSPACE,metaKey:!0,action:Ee(Ar,e,!1,i(!1))}]:[{keyCode:ne.BACKSPACE,ctrlKey:!0,action:Ee(Ar,e,!1,i(!0))},{keyCode:ne.DELETE,ctrlKey:!0,action:Ee(Ar,e,!0,i(!0))}],{keyCode:ne.BACKSPACE,action:Ee(ih,e,!1)},{keyCode:ne.DELETE,action:Ee(ih,e,!0)},{keyCode:ne.BACKSPACE,action:Ee(bh,e,!1)},{keyCode:ne.DELETE,action:Ee(bh,e,!0)},{keyCode:ne.BACKSPACE,action:Ee(Jp,e,!1)},{keyCode:ne.DELETE,action:Ee(Jp,e,!0)},{keyCode:ne.BACKSPACE,action:Ee(Qp,e,!1)},{keyCode:ne.DELETE,action:Ee(Qp,e,!0)},{keyCode:ne.BACKSPACE,action:Ee(hh,e,!1)},{keyCode:ne.DELETE,action:Ee(hh,e,!0)},{keyCode:ne.BACKSPACE,action:Ee(rh,e,!1)},{keyCode:ne.DELETE,action:Ee(rh,e,!0)}],n).filter(c=>e.selection.isEditable()).each(c=>{n.preventDefault(),Bu(e,s).isDefaultPrevented()||(c(),Ec(e,s))})},s8=(e,t,n)=>bc([{keyCode:ne.BACKSPACE,action:Ee(PA,e)},{keyCode:ne.DELETE,action:Ee(PA,e)},...UT?[{keyCode:ne.BACKSPACE,altKey:!0,action:Ee(gc,e)},{keyCode:ne.DELETE,altKey:!0,action:Ee(gc,e)},...n?[{keyCode:t8?224:91,action:Ee(gc,e)}]:[]]:[{keyCode:ne.BACKSPACE,ctrlKey:!0,action:Ee(gc,e)},{keyCode:ne.DELETE,ctrlKey:!0,action:Ee(gc,e)}]],t),o8=(e,t)=>{let n=!1;e.on("keydown",s=>{n=s.keyCode===ne.BACKSPACE,s.isDefaultPrevented()||n8(e,t,s)}),e.on("keyup",s=>{s.isDefaultPrevented()||s8(e,s,n),n=!1})},r8=e=>{for(;e;){if(fe(e)||q(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null},Ni=(e,t)=>{const n=e.dom,s=e.schema.getMoveCaretBeforeOnEnterElements();if(!t)return;if(/^(LI|DT|DD)$/.test(t.nodeName)){const r=r8(t.firstChild);r&&/^(UL|OL|DL)$/.test(r.nodeName)&&t.insertBefore(n.doc.createTextNode(xt),t.firstChild)}const o=n.createRng();if(t.normalize(),t.hasChildNodes()){const r=new Pt(t,t);let i=t,c;for(;c=r.current();){if(q(c)){o.setStart(c,0),o.setEnd(c,0);break}if(s[c.nodeName.toLowerCase()]){o.setStartBefore(c),o.setEndBefore(c);break}i=c,c=r.next()}c||(o.setStart(i,0),o.setEnd(i,0))}else ht(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)):(o.setStart(t,0),o.setEnd(t,0));e.selection.setRng(o),Qa(e,o)},_c=(e,t)=>{const n=e.getRoot();let s,o=t;for(;o!==n&&o&&e.getContentEditable(o)!=="false";){if(e.getContentEditable(o)==="true"){s=o;break}o=o.parentNode}return o!==n?s:n},$h=e=>b.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock)),i8=e=>$h(e).fold(te(""),t=>t.nodeName.toUpperCase()),a8=e=>$h(e).filter(t=>si(A.fromDom(t))).isSome(),Mh=e=>{e.innerHTML='<br data-mce-bogus="1">'},c8=(e,t,n)=>{const s=e.dom;b.from(n.style).map(s.parseStyle).each(l=>{const p={...ad(A.fromDom(t)),...l};s.setStyles(t,p)});const o=b.from(n.class).map(l=>l.split(/\s+/)),r=b.from(t.className).map(l=>ve(l.split(/\s+/),d=>d!==""));jt(o,r,(l,d)=>{const p=ve(d,g=>!Ze(l,g)),h=[...l,...p];s.setAttrib(t,"class",h.join(" "))});const i=["style","class"],c=aa(n,(l,d)=>!Ze(i,d));s.setAttribs(t,c)},Sc=(e,t)=>{if(Yt(e).toLowerCase()===t.tagName.toLowerCase()){const s=Fa(e);c8(e,t,s)}},HT=(e,t,n,s,o=!0,r,i)=>{const c=e.dom,l=e.schema,d=Yt(e),p=n?n.nodeName.toUpperCase():"";let h=t;const g=l.getTextInlineElements();let v;r||p==="TABLE"||p==="HR"?v=c.create(r||d,i||{}):v=n.cloneNode(!1);let E=v;if(!o)c.setAttrib(v,"style",null),c.setAttrib(v,"class",null);else do if(g[h.nodeName]){if(On(h)||Dn(h))continue;const C=h.cloneNode(!1);c.setAttrib(C,"id",""),v.hasChildNodes()?(C.appendChild(v.firstChild),v.appendChild(C)):(E=C,v.appendChild(C))}while((h=h.parentNode)&&h!==s);return Sc(e,v),Mh(E),v},l8=(e,t)=>e.dom.getParent(t,hd),u8=(e,t,n)=>{let s=t;for(;s&&s!==e&&Be(s.nextSibling);){const o=s.parentElement;if(!o||!n(o))return hd(o);s=o}return!1},f8=(e,t,n)=>!t&&n.nodeName.toLowerCase()===Yt(e)&&e.dom.isEmpty(n)&&u8(e.getBody(),n,s=>Ae(e.schema.getTextBlockElements(),s.nodeName.toLowerCase())),d8=(e,t,n)=>{var s,o,r;const i=t(Yt(e)),c=l8(e,n);c&&(e.dom.insertAfter(i,c),Ni(e,i),((r=(o=(s=n.parentElement)===null||s===void 0?void 0:s.childNodes)===null||o===void 0?void 0:o.length)!==null&&r!==void 0?r:0)>1&&e.dom.remove(n))},m8=(e,t)=>e.firstChild&&e.firstChild.nodeName===t,p8=e=>{var t;return((t=e.parentNode)===null||t===void 0?void 0:t.firstChild)===e},zT=(e,t)=>{const n=e==null?void 0:e.parentNode;return j(n)&&n.nodeName===t},VT=e=>j(e)&&/^(OL|UL|LI)$/.test(e.nodeName),Fh=e=>j(e)&&/^(LI|DT|DD)$/.test(e.nodeName),h8=e=>VT(e)&&VT(e.parentNode),Lu=e=>{const t=e.parentNode;return Fh(t)?t:e},Iu=(e,t,n)=>{let s=e[n?"firstChild":"lastChild"];for(;s&&!fe(s);)s=s[n?"nextSibling":"previousSibling"];return s===t},WT=e=>Vt(Yc(ad(A.fromDom(e)),(t,n)=>`${n}: ${t};`),(t,n)=>t+n,""),g8=(e,t,n,s,o)=>{const r=e.dom,i=e.selection.getRng(),c=n.parentNode;if(n===e.getBody()||!c)return;h8(n)&&(o="LI");const l=Fh(s)?WT(s):void 0;let d=Fh(s)&&l?t(o,{style:WT(s)}):t(o);if(Iu(n,s,!0)&&Iu(n,s,!1))if(zT(n,"LI")){const p=Lu(n);r.insertAfter(d,p),p8(n)?r.remove(p):r.remove(n)}else r.replace(d,n);else if(Iu(n,s,!0))zT(n,"LI")?(r.insertAfter(d,Lu(n)),d.appendChild(r.doc.createTextNode(" ")),d.appendChild(n)):c.insertBefore(d,n),r.remove(s);else if(Iu(n,s,!1))r.insertAfter(d,Lu(n)),r.remove(s);else{n=Lu(n);const p=i.cloneRange();p.setStartAfter(s),p.setEndAfter(n);const h=p.extractContents();if(o==="LI"&&m8(h,"LI")){const g=ve(Ue(d.children,A.fromDom),ls(nl("br")));d=h.firstChild,r.insertAfter(h,n),U(g,v=>cd(A.fromDom(d),v)),l&&d.setAttribute("style",l)}else r.insertAfter(h,n),r.insertAfter(d,n);r.remove(s)}Ni(e,d)},b8=e=>{U(Oy(A.fromDom(e),rn),t=>{const n=t.dom;n.nodeValue=wn(n.data)})},y8=(e,t)=>{const n=e.dom.getParent(t,"ol,ul,dl");return n!==null&&e.dom.getContentEditableParent(n)==="false"},v8=(e,t)=>t&&t.nodeName==="A"&&e.isEmpty(t),Uh=(e,t)=>e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t,Hh=(e,t)=>j(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&e.getContentEditable(t)!=="false",C8=(e,t,n)=>{var s;const o=[];if(!n)return;let r=n;for(;r=r.firstChild;){if(e.isBlock(r))return;fe(r)&&!t[r.nodeName.toLowerCase()]&&o.push(r)}let i=o.length;for(;i--;)r=o[i],(!r.hasChildNodes()||r.firstChild===r.lastChild&&((s=r.firstChild)===null||s===void 0?void 0:s.nodeValue)===""||v8(e,r))&&e.remove(r)},zh=(e,t,n)=>q(t)?e?n===1&&t.data.charAt(n-1)===Rt?0:n:n===t.data.length-1&&t.data.charAt(n)===Rt?t.data.length:n:n,E8=e=>{const t=e.cloneRange();return t.setStart(e.startContainer,zh(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,zh(!1,e.endContainer,e.endOffset)),t},_8=e=>{let t=e;do q(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild;while(t)},S8=(e,t,n,s,o)=>{var r,i;const c=e.dom,l=(r=_c(c,s))!==null&&r!==void 0?r:c.getRoot();let d=c.getParent(s,c.isBlock);if(!d||!Hh(c,d)){if(d=d||l,!d.hasChildNodes()){const v=c.create(t);return Sc(e,v),d.appendChild(v),n.setStart(v,0),n.setEnd(v,0),v}let p=s;for(;p&&p.parentNode!==d;)p=p.parentNode;let h;for(;p&&!c.isBlock(p);)h=p,p=p.previousSibling;const g=(i=h==null?void 0:h.parentElement)===null||i===void 0?void 0:i.nodeName;if(h&&g&&e.schema.isValidChild(g,t.toLowerCase())){const v=h.parentNode,E=c.create(t);for(Sc(e,E),v.insertBefore(E,h),p=h;p&&!c.isBlock(p);){const C=p.nextSibling;E.appendChild(p),p=C}n.setStart(s,o),n.setEnd(s,o)}}return s},w8=(e,t)=>{t.normalize();const n=t.lastChild;(!n||fe(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")},A8=(e,t)=>{const n=WB(e);return Fe(t)?!1:G(n)?Ze(X.explode(n),t.nodeName.toLowerCase()):n},jT={insert:(e,t)=>{let n,s,o,r,i=!1;const c=e.dom,l=e.schema,d=l.getNonEmptyElements(),p=e.selection.getRng(),h=Yt(e),g=A.fromDom(p.startContainer),v=Gr(g,p.startOffset),E=v.exists(F=>tl(F)&&!Qo(F)),C=p.collapsed&&E,S=(F,ie)=>HT(e,n,K,H,VB(e),F,ie),T=F=>{const ie=zh(F,n,s);if(q(n)&&(F?ie>0:ie<n.data.length))return!1;if((n.parentNode===K||n===K)&&i&&!F||F&&fe(n)&&n===K.firstChild)return!0;if(Uh(n,"TABLE")||Uh(n,"HR"))return i&&!F||!i&&F;const de=new Pt(n,K);q(n)&&(F&&ie===0?de.prev():!F&&ie===n.data.length&&de.next());let Ne;for(;Ne=de.current();){if(fe(Ne)){if(!Ne.getAttribute("data-mce-bogus")){const Re=Ne.nodeName.toLowerCase();if(d[Re]&&Re!=="br")return!1}}else if(q(Ne)&&!Jr(Ne.data))return!1;F?de.prev():de.next()}return!0},k=()=>{let F;return/^(H[1-6]|PRE|FIGURE)$/.test(o)&&ee!=="HGROUP"?F=S(h):F=S(),A8(e,r)&&Hh(c,r)&&c.isEmpty(K,void 0,{includeZwsp:!0})?F=c.split(r,K):c.insertAfter(F,K),Ni(e,F),F};Vl(c,p).each(F=>{p.setStart(F.startContainer,F.startOffset),p.setEnd(F.endContainer,F.endOffset)}),n=p.startContainer,s=p.startOffset;const N=!!(t&&t.shiftKey),R=!!(t&&t.ctrlKey);fe(n)&&n.hasChildNodes()&&!C&&(i=s>n.childNodes.length-1,n=n.childNodes[Math.min(s,n.childNodes.length-1)]||n,i&&q(n)?s=n.data.length:s=0);const H=_c(c,n);if(!H||y8(e,n))return;N||(n=S8(e,h,p,n,s));let K=c.getParent(n,c.isBlock)||c.getRoot();r=j(K==null?void 0:K.parentNode)?c.getParent(K.parentNode,c.isBlock):null,o=K?K.nodeName.toUpperCase():"";const ee=r?r.nodeName.toUpperCase():"";if(ee==="LI"&&!R){const F=r;K=F,r=F.parentNode,o=ee}if(fe(r)&&f8(e,N,K))return d8(e,S,K);if(/^(LI|DT|DD)$/.test(o)&&fe(r)&&c.isEmpty(K)){g8(e,S,r,K,h);return}if(!C&&(K===e.getBody()||!Hh(c,K)))return;const I=K.parentNode;let D;if(C)D=S(h),v.fold(()=>{At(g,A.fromDom(D))},F=>{fn(F,A.fromDom(D))}),e.selection.setCursorLocation(D,0);else if(ii(K))D=zd(K),c.isEmpty(K)&&Mh(K),Sc(e,D),Ni(e,D);else if(T(!1))D=k();else if(T(!0)&&I){const F=L.fromRangeStart(p),ie=Wm(F),de=A.fromDom(K),Re=Zl(de,F,e.schema)?O_(de,F,e.schema).bind(Ge=>b.from(Ge.getNode())):b.none();D=I.insertBefore(S(),K);const ze=Uh(K,"HR")||ie?D:Re.getOr(K);Ni(e,ze)}else{const F=E8(p).cloneRange();F.setEndAfter(K);const ie=F.extractContents();b8(ie),_8(ie),D=ie.firstChild,c.insertAfter(ie,K),C8(c,d,D),w8(c,K),c.isEmpty(K)&&Mh(K),D.normalize(),c.isEmpty(D)?(c.remove(D),k()):(Sc(e,D),Ni(e,D))}c.setAttrib(D,"id",""),e.dispatch("NewBlock",{newBlock:D})},fakeEventName:"insertParagraph"},T8=(e,t,n)=>{const s=new Pt(t,n);let o;const r=e.getNonEmptyElements();for(;o=s.next();)if(r[o.nodeName.toLowerCase()]||q(o)&&o.length>0)return!0;return!1},qT=(e,t,n)=>{const s=e.dom.createRng();n?(s.setStartBefore(t),s.setEndBefore(t)):(s.setStartAfter(t),s.setEndAfter(t)),e.selection.setRng(s),Qa(e,s)},N8=(e,t)=>{const n=e.selection,s=e.dom,o=n.getRng();let r,i=!1;Vl(s,o).each(v=>{o.setStart(v.startContainer,v.startOffset),o.setEnd(v.endContainer,v.endOffset)});let c=o.startOffset,l=o.startContainer;if(fe(l)&&l.hasChildNodes()){const v=c>l.childNodes.length-1;l=l.childNodes[Math.min(c,l.childNodes.length-1)]||l,v&&q(l)?c=l.data.length:c=0}let d=s.getParent(l,s.isBlock);const p=d&&d.parentNode?s.getParent(d.parentNode,s.isBlock):null,h=p?p.nodeName.toUpperCase():"",g=!!(t&&t.ctrlKey);h==="LI"&&!g&&(d=p),q(l)&&c>=l.data.length&&(T8(e.schema,l,d||s.getRoot())||(r=s.create("br"),o.insertNode(r),o.setStartAfter(r),o.setEndAfter(r),i=!0)),r=s.create("br"),Gd(s,o,r),qT(e,r,i),e.undoManager.add()},k8=(e,t)=>{const n=A.fromTag("br");fn(A.fromDom(t),n),e.undoManager.add()},x8=(e,t)=>{O8(e.getBody(),t)||Qs(A.fromDom(t),A.fromTag("br"));const n=A.fromTag("br");Qs(A.fromDom(t),n),qT(e,n.dom,!1),e.undoManager.add()},R8=e=>ht(e.getNode()),O8=(e,t)=>R8(L.after(t))?!0:cn(e,L.after(t)).map(n=>ht(n.getNode())).getOr(!1),KT=e=>e&&e.nodeName==="A"&&"href"in e,D8=e=>e.fold(tt,KT,KT,tt),P8=e=>{const t=ae(Er,e),n=L.fromRangeStart(e.selection.getRng());return zs(t,e.getBody(),n).filter(D8)},B8=(e,t)=>{t.fold(Se,ae(k8,e),ae(x8,e),Se)},GT={insert:(e,t)=>{const n=P8(e);n.isSome()?n.each(ae(B8,e)):N8(e,t)},fakeEventName:"insertLineBreak"},YT=(e,t)=>$h(e).filter(n=>t.length>0&&us(A.fromDom(n),t)).isSome(),L8=e=>YT(e,HB(e)),I8=e=>YT(e,zB(e)),Tn=Ls.generate([{br:[]},{block:[]},{none:[]}]),$8=(e,t)=>I8(e),XT=e=>(t,n)=>a8(t)===e,ZT=(e,t)=>(n,s)=>i8(n)===e.toUpperCase()===t,M8=e=>{const t=_c(e.dom,e.selection.getStart());return Fe(t)},wc=e=>ZT("pre",e),F8=()=>ZT("summary",!0),$u=e=>(t,n)=>FB(t)===e,U8=(e,t)=>L8(e),Mu=(e,t)=>t,H8=e=>{const t=Yt(e),n=_c(e.dom,e.selection.getStart());return j(n)&&e.schema.isValidChild(n.nodeName,t)},z8=e=>{const t=e.selection.getRng(),n=A.fromDom(t.startContainer),o=Gr(n,t.startOffset).map(r=>tl(r)&&!Qo(r));return t.collapsed&&o.getOr(!0)},Mn=(e,t)=>(n,s)=>Vt(e,(r,i)=>r&&i(n,s),!0)?b.some(t):b.none(),V8=(e,t)=>VA([Mn([$8],Tn.none()),Mn([wc(!0),M8],Tn.none()),Mn([F8()],Tn.br()),Mn([wc(!0),$u(!1),Mu],Tn.br()),Mn([wc(!0),$u(!1)],Tn.block()),Mn([wc(!0),$u(!0),Mu],Tn.block()),Mn([wc(!0),$u(!0)],Tn.br()),Mn([XT(!0),Mu],Tn.br()),Mn([XT(!0)],Tn.block()),Mn([U8],Tn.br()),Mn([Mu],Tn.br()),Mn([H8],Tn.block()),Mn([z8],Tn.block())],[e,!!(t&&t.shiftKey)]).getOr(Tn.none()),Fu=(e,t,n)=>{t.selection.isCollapsed()||CU(t),!(j(n)&&Bu(t,e.fakeEventName).isDefaultPrevented())&&(e.insert(t,n),j(n)&&Ec(t,e.fakeEventName))},QT=(e,t)=>{const n=()=>Fu(GT,e,t),s=()=>Fu(jT,e,t),o=V8(e,t);switch(UB(e)){case"linebreak":o.fold(n,n,Se);break;case"block":o.fold(s,s,Se);break;case"invert":o.fold(s,n,Se);break;default:o.fold(n,s,Se);break}},JT=xs(),W8=JT.os.isiOS()&&JT.browser.isSafari(),eN=(e,t)=>{t.isDefaultPrevented()||(t.preventDefault(),NW(e.undoManager),e.undoManager.transact(()=>{QT(e,t)}))},j8=e=>{if(!e.collapsed)return!1;const t=e.startContainer;if(q(t)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,s=t.data.charAt(e.startOffset-1);return n.test(s)}else return!1},q8=e=>{let t=b.none();const n=o=>{t=b.some(o.selection.getBookmark()),o.undoManager.add()},s=(o,r)=>{o.undoManager.undo(),t.fold(Se,i=>o.selection.moveToBookmark(i)),eN(o,r),t=b.none()};e.on("keydown",o=>{o.keyCode===ne.ENTER&&(W8&&j8(e.selection.getRng())?n(e):eN(e,o))}),e.on("keyup",o=>{o.keyCode===ne.ENTER&&t.each(()=>s(e,o))})},K8=(e,t,n)=>{const s=Ve.os.isMacOS()||Ve.os.isiOS();bc([{keyCode:ne.END,action:Ee(F0,e,!0)},{keyCode:ne.HOME,action:Ee(F0,e,!1)},...s?[]:[{keyCode:ne.HOME,action:Ee(Au,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ne.END,action:Ee(Au,e,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ne.END,action:Ee(K0,e,!0)},{keyCode:ne.HOME,action:Ee(K0,e,!1)},{keyCode:ne.END,action:Ee(wu,e,!0,t)},{keyCode:ne.HOME,action:Ee(wu,e,!1,t)}],n).each(o=>{n.preventDefault()})},G8=(e,t)=>{e.on("keydown",n=>{n.isDefaultPrevented()||K8(e,t,n)})},Y8=e=>{e.on("input",t=>{t.isComposing||JF(e)})},X8=xs(),Z8=(e,t,n)=>{bc([{keyCode:ne.PAGE_UP,action:Ee(wu,e,!1,t)},{keyCode:ne.PAGE_DOWN,action:Ee(wu,e,!0,t)}],n)},tN=e=>e.stopImmediatePropagation(),nN=e=>e.keyCode===ne.PAGE_UP||e.keyCode===ne.PAGE_DOWN,sN=(e,t,n)=>{n&&!e.get()?t.on("NodeChange",tN,!0):!n&&e.get()&&t.off("NodeChange",tN),e.set(n)},Q8=(e,t)=>{if(X8.os.isMacOS())return;const n=Bt(!1);e.on("keydown",s=>{nN(s)&&sN(n,e,!0)}),e.on("keyup",s=>{s.isDefaultPrevented()||Z8(e,t,s),nN(s)&&n.get()&&(sN(n,e,!1),e.nodeChanged())})},J8=e=>{e.on("beforeinput",t=>{(!e.selection.isEditable()||ut(t.getTargetRanges(),n=>!n_(e.dom,n)))&&t.preventDefault()})},oN=(e,t)=>{const n=t.container(),s=t.offset();return q(n)?(n.insertData(s,e),b.some(L(n,s+e.length))):Ol(t).map(o=>{const r=A.fromText(e);return t.isAtEnd()?Qs(o,r):fn(o,r),L(r.dom,e.length)})},rN=ae(oN,xt),iN=ae(oN," "),e6=(e,t,n)=>$_(e,t,n)?rN(t):iN(t),t6=e=>t=>t.fold(n=>dn(e.dom,L.before(n)),n=>Xt(n),n=>Xn(n),n=>cn(e.dom,L.after(n))),n6=(e,t,n)=>s=>$_(e,s,n)?rN(t):iN(t),aN=e=>t=>{e.selection.setRng(t.toRange()),e.nodeChanged()},s6=(e,t)=>e.isEditable(e.getParent(t,"summary")),o6=e=>{const t=L.fromRangeStart(e.selection.getRng()),n=A.fromDom(e.getBody());if(e.selection.isCollapsed()){const s=ae(Er,e),o=L.fromRangeStart(e.selection.getRng());return zs(s,e.getBody(),o).bind(t6(n)).map(r=>()=>n6(n,t,e.schema)(r).each(aN(e)))}else return b.none()},r6=e=>{const t=()=>{const n=A.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete");const s=L.fromRangeStart(e.selection.getRng());e6(n,s,e.schema).each(aN(e))};return qr(Ve.browser.isFirefox()&&e.selection.isEditable()&&s6(e.dom,e.selection.getRng().startContainer),t)},i6=(e,t)=>{W0([{keyCode:ne.SPACEBAR,action:Ee(o6,e)},{keyCode:ne.SPACEBAR,action:Ee(r6,e)}],t).each(n=>{t.preventDefault(),Bu(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),Ec(e,"insertText",{data:" "}))})},a6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||i6(e,t)})},c6=e=>JL(e)?[{keyCode:ne.TAB,action:Ee(iT,e,!0)},{keyCode:ne.TAB,shiftKey:!0,action:Ee(iT,e,!1)}]:[],l6=(e,t)=>{bc([...c6(e)],t).each(n=>{t.preventDefault()})},u6=e=>{e.on("keydown",t=>{t.isDefaultPrevented()||l6(e,t)})},f6=e=>{if(e.addShortcut("Meta+P","","mcePrint"),z5(e),Hs(e))return Bt(null);{const t=Tq(e);return J8(e),wK(e),w4(e,t),o8(e,t),q8(e),a6(e),Y8(e),u6(e),G8(e,t),Q8(e,t),t}};class d6{constructor(t){this.lastPath=[],this.editor=t;let n;const s=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",o=>{const r=t.selection.getRng(),i={startContainer:r.startContainer,startOffset:r.startOffset,endContainer:r.endContainer,endOffset:r.endOffset};(o.type==="nodechange"||!Om(i,n))&&t.dispatch("SelectionChange"),n=i}),t.on("contextmenu",()=>{ql(t),t.dispatch("SelectionChange")}),t.on("SelectionChange",()=>{const o=t.selection.getStart(!0);o&&Il(t)&&!s.isSameElementPath(o)&&t.dom.isChildOf(o,t.getBody())&&t.nodeChanged({selectionChange:!0})}),t.on("mouseup",o=>{!o.isDefaultPrevented()&&Il(t)&&(t.selection.getNode().nodeName==="IMG"?Bn.setEditorTimeout(t,()=>{t.nodeChanged()}):t.nodeChanged())})}nodeChanged(t={}){const n=this.editor.selection;let s;if(this.editor.initialized&&n&&!vL(this.editor)&&!this.editor.mode.isReadOnly()){const o=this.editor.getBody();s=n.getStart(!0)||o,(s.ownerDocument!==this.editor.getDoc()||!this.editor.dom.isChildOf(s,o))&&(s=o);const r=[];this.editor.dom.getParent(s,i=>i===o?!0:(r.push(i),!1)),this.editor.dispatch("NodeChange",{...t,element:s,parents:r})}}isSameElementPath(t){let n;const s=this.editor,o=oa(s.dom.getParents(t,dt,s.getBody()));if(o.length===this.lastPath.length){for(n=o.length;n>=0&&o[n]===this.lastPath[n];n--);if(n===-1)return this.lastPath=o,!0}return this.lastPath=o,!1}}const cN=Da("image"),m6=e=>{const t=e;return b.from(t[cN])},p6=(e,t)=>{const n=e;n[cN]=t},Vh=Da("event"),h6=e=>{const t=e;return b.from(t[Vh])},Uu=e=>t=>{const n=t;n[Vh]=e},g6=(e,t)=>Uu(t)(e),lN=Uu(0),b6=Uu(2),y6=Uu(1),v6=(e=>t=>{const n=t;return b.from(n[Vh]).exists(s=>s===e)})(0),C6=()=>Object.freeze({length:0,item:e=>null}),Wh=Da("mode"),E6=e=>{const t=e;return b.from(t[Wh])},Hu=e=>t=>{const n=t;n[Wh]=e},uN=(e,t)=>Hu(t)(e),fN=Hu(0),jh=Hu(2),_6=Hu(1),dN=e=>t=>{const n=t;return b.from(n[Wh]).exists(s=>s===e)},ki=dN(0),mN=dN(1),S6=(e,t)=>({...t,get length(){return t.length},add:(n,s)=>{if(ki(e))if(G(n)){if(!qe(s))return t.add(n,s)}else return t.add(n);return null},remove:n=>{ki(e)&&t.remove(n)},clear:()=>{ki(e)&&t.clear()}}),w6=["none","copy","link","move"],A6=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],qh=()=>{const e=new window.DataTransfer;let t="move",n="all";const s={get dropEffect(){return t},set dropEffect(o){Ze(w6,o)&&(t=o)},get effectAllowed(){return n},set effectAllowed(o){v6(s)&&Ze(A6,o)&&(n=o)},get items(){return S6(s,e.items)},get files(){return mN(s)?C6():e.files},get types(){return e.types},setDragImage:(o,r,i)=>{ki(s)&&(p6(s,{image:o,x:r,y:i}),e.setDragImage(o,r,i))},getData:o=>mN(s)?"":e.getData(o),setData:(o,r)=>{ki(s)&&e.setData(o,r)},clearData:o=>{ki(s)&&e.clearData(o)}};return fN(s),s},T6=e=>{const t=qh(),n=E6(e);return jh(e),lN(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,m6(e).each(s=>t.setDragImage(s.image,s.x,s.y)),U(e.types,s=>{s!=="Files"&&t.setData(s,e.getData(s))}),U(e.files,s=>t.items.add(s)),h6(e).each(s=>{g6(t,s)}),n.each(s=>{uN(e,s),uN(t,s)}),t},N6=e=>{const t=e.getData("text/html");return t===""?b.none():b.some(t)},pN=(e,t)=>e.setData("text/html",t),hN="x-tinymce/html",zu=te(hN),Kh="<!-- "+hN+" -->",k6=e=>Kh+e,x6=e=>e.replace(Kh,""),gN=e=>e.indexOf(Kh)!==-1,R6=e=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e),O6=(e,t)=>{let n="<"+e;const s=Yc(t,(o,r)=>r+'="'+rr.encodeAllRaw(o)+'"');return s.length&&(n+=" "+s.join(" ")),n+">"},D6=(e,t,n)=>{const s=e.split(/\n\n/),o=O6(t,n),r="</"+t+">",i=Ue(s,l=>l.split(/\n/).join("<br />")),c=l=>o+l+r;return i.length===1?i[0]:Ue(i,c).join("")},bN="%MCEPASTEBIN%",P6=(e,t)=>{const{dom:n,selection:s}=e,o=e.getBody();t.set(s.getRng());const r=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},bN);Ve.browser.isFirefox()&&n.setStyle(r,"left",n.getStyle(o,"direction",!0)==="rtl"?65535:-65535),n.bind(r,"beforedeactivate focusin focusout",i=>{i.stopPropagation()}),r.focus(),s.select(r,!0)},B6=(e,t)=>{const n=e.dom;if(Gh(e)){let s;const o=t.get();for(;s=Gh(e);)n.remove(s),n.unbind(s);o&&e.selection.setRng(o)}t.set(null)},Gh=e=>e.dom.get("mcepastebin"),L6=e=>j(e)&&e.id==="mcepastebin",I6=e=>{const t=e.dom,n=(i,c)=>{i.appendChild(c),t.remove(c,!0)},[s,...o]=ve(e.getBody().childNodes,L6);U(o,i=>{n(s,i)});const r=t.select("div[id=mcepastebin]",s);for(let i=r.length-1;i>=0;i--){const c=t.create("div");s.insertBefore(c,r[i]),n(c,r[i])}return s?s.innerHTML:""},yN=e=>e===bN,$6=e=>{const t=Bt(null);return{create:()=>P6(e,t),remove:()=>B6(e,t),getEl:()=>Gh(e),getHtml:()=>I6(e),getLastRng:t.get}},vN=(e,t)=>(X.each(t,n=>{Xe(n,RegExp)?e=e.replace(n,""):e=e.replace(n[0],n[1])}),e),M6=e=>{const t=_o(),n=Ei({},t);let s="";const o=t.getVoidElements(),r=X.makeMap("script noscript style textarea video audio iframe object"," "),i=t.getBlockElements(),c=l=>{const d=l.name,p=l;if(d==="br"){s+=`
`;return}if(d!=="wbr"){if(o[d]&&(s+=" "),r[d]){s+=" ";return}if(l.type===3&&(s+=l.value),!(l.name in t.getVoidElements())){let h=l.firstChild;if(h)do c(h);while(h=h.next)}i[d]&&p.next&&(s+=`
`,d==="p"&&(s+=`
`))}};return e=vN(e,[/<!\[[^\]]+\]>/g]),c(n.parse(e)),s},CN=e=>(e=vN(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/ig,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(n,s,o)=>!s&&!o?" ":xt],/<br class="Apple-interchange-newline">/g,/<br>$/i]),e),F6=e=>{let t=0;return()=>e+t++},U6=e=>{const t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return X.hasOwn(n,t)?"image/"+n[t]:"image/"+t},H6=(e,t)=>{const n=Ei({sanitize:TC(e),sandbox_iframes:kC(e),sandbox_iframes_exclusions:sm(e),convert_unsafe_embeds:nI(e)},e.schema);n.addNodeFilter("meta",o=>{X.each(o,r=>{r.remove()})});const s=n.parse(t,{forced_root_block:!1,isRootContent:!0});return xo({validate:!0},e.schema).serialize(s)},EN=(e,t)=>({content:e,cancelled:t}),z6=(e,t,n)=>{const s=e.dom.create("div",{style:"display:none"},t),o=L$(e,s,n);return EN(o.node.innerHTML,o.isDefaultPrevented())},V6=(e,t,n)=>{const s=B$(e,t,n),o=H6(e,s.content);return e.hasEventListeners("PastePostProcess")&&!s.isDefaultPrevented()?z6(e,o,n):EN(o,s.isDefaultPrevented())},W6=(e,t,n)=>V6(e,t,n),Yh=(e,t)=>(e.insertContent(t,{merge:$L(e),paste:!0}),!0),Xh=e=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e),j6=(e,t)=>Xh(t)&&ut(NC(e),n=>Yf(t.toLowerCase(),`.${n.toLowerCase()}`)),q6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.insertContent('<img src="'+t+'">')}),!0),K6=(e,t,n)=>(e.undoManager.extra(()=>{n(e,t)},()=>{e.execCommand("mceInsertLink",!1,t)}),!0),G6=(e,t,n)=>!e.selection.isCollapsed()&&Xh(t)?K6(e,t,n):!1,Y6=(e,t,n)=>j6(e,t)?q6(e,t,n):!1,X6=(e,t)=>{X.each([G6,Y6,Yh],n=>!n(e,t,Yh))},Z6=(e,t,n)=>{n||!ML(e)?Yh(e,t):X6(e,t)},Q6=F6("mceclip"),J6=e=>{const t=qh();return pN(t,e),jh(t),t},_N=(e,t,n,s,o)=>{const r=W6(e,t,n);if(!r.cancelled){const i=r.content,c=()=>Z6(e,i,s);o?Bu(e,"insertFromPaste",{dataTransfer:J6(i)}).isDefaultPrevented()||(c(),Ec(e,"insertFromPaste")):c()}},Vu=(e,t,n,s)=>{const o=n||gN(t);_N(e,x6(t),o,!1,s)},Zh=(e,t,n)=>{const s=e.dom.encode(t).replace(/\r\n/g,`
`),o=Ly(s,UL(e)),r=D6(o,Yt(e),Fa(e));_N(e,r,!1,!0,n)},SN=e=>{const t={};if(e&&e.types)for(let n=0;n<e.types.length;n++){const s=e.types[n];try{t[s]=e.getData(s)}catch{t[s]=""}}return t},Bo=(e,t)=>t in e&&e[t].length>0,wN=e=>Bo(e,"text/html")||Bo(e,"text/plain"),e9=(e,t)=>{const n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return j(n)?e.dom.encode(n[1]):void 0},t9=(e,t,n,s)=>{const o=Q6(),r=pC(e)&&j(n.name),i=r?e9(e,n.name):o,c=r?n.name:void 0,l=t.create(o,n,s,i,c);return t.add(l),l},n9=(e,t)=>{kp(t.uri).each(({data:n,type:s,base64Encoded:o})=>{const r=o?n:btoa(n),i=t.file,c=e.editorUpload.blobCache,l=c.getByData(r,s),d=l??t9(e,c,i,r);Vu(e,`<img src="${d.blobUri()}">`,!1,!0)})},s9=e=>e.type==="paste",o9=e=>Promise.all(Ue(e,t=>aw(t).then(n=>({file:t,uri:n})))),r9=e=>{const t=NC(e);return n=>kt(n.type,"image/")&&ut(t,s=>U6(s)===n.type)},i9=(e,t)=>{const n=t.items?sn(En(t.items),o=>o.kind==="file"?[o.getAsFile()]:[]):[],s=t.files?En(t.files):[];return ve(n.length>0?n:s,r9(e))},AN=(e,t,n)=>{const s=s9(t)?t.clipboardData:t.dataTransfer;if(xl(e)&&s){const o=i9(e,s);if(o.length>0)return t.preventDefault(),o9(o).then(r=>{n&&e.selection.setRng(n),U(r,i=>{n9(e,i)})}),!0}return!1},a9=e=>{var t,n;return Ve.os.isAndroid()&&((n=(t=e.clipboardData)===null||t===void 0?void 0:t.items)===null||n===void 0?void 0:n.length)===0},c9=e=>ne.metaKeyPressed(e)&&e.keyCode===86||e.shiftKey&&e.keyCode===45,Qh=(e,t,n,s,o)=>{let r=CN(n);const i=Bo(t,zu())||gN(n),c=!i&&R6(r),l=Xh(r);(yN(r)||!r.length||c&&!l)&&(s=!0),(s||l)&&(Bo(t,"text/plain")&&c?r=t["text/plain"]:r=M6(r)),!yN(r)&&(s?Zh(e,r,o):Vu(e,r,i,o))},l9=(e,t,n)=>{let s;const o=()=>t.getLastRng()||e.selection.getRng();e.on("keydown",r=>{c9(r)&&!r.isDefaultPrevented()&&(s=r.shiftKey&&r.keyCode===86)}),e.on("paste",r=>{if(r.isDefaultPrevented()||a9(r))return;const i=n.get()==="text"||s;s=!1;const c=SN(r.clipboardData);!wN(c)&&AN(e,r,o())||(Bo(c,"text/html")?(r.preventDefault(),Qh(e,c,c["text/html"],i,!0)):Bo(c,"text/plain")&&Bo(c,"text/uri-list")?(r.preventDefault(),Qh(e,c,c["text/plain"],i,!0)):(t.create(),Bn.setEditorTimeout(e,()=>{const l=t.getHtml();t.remove(),Qh(e,c,l,i,!1)},0)))})},u9=e=>{const t=o=>kt(o,"webkit-fake-url"),n=o=>kt(o,"data:"),s=o=>{var r;return((r=o.data)===null||r===void 0?void 0:r.paste)===!0};e.parser.addNodeFilter("img",(o,r,i)=>{if(!xl(e)&&s(i))for(const c of o){const l=c.attr("src");G(l)&&!c.attr("data-mce-object")&&l!==Ve.transparentSrc&&(t(l)||!HL(e)&&n(l))&&c.remove()}})},f9=(e,t,n)=>{l9(e,t,n),u9(e)},d9=(e,t)=>{t.get()==="text"?(t.set("html"),kE(e,!1)):(t.set("text"),kE(e,!0)),e.focus()},m9=(e,t)=>{e.addCommand("mceTogglePlainTextPaste",()=>{d9(e,t)}),e.addCommand("mceInsertClipboardContent",(n,s)=>{s.html&&Vu(e,s.html,s.internal,!1),s.text&&Zh(e,s.text,!1)})},p9=(e,t,n)=>{if(e)try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(zu(),t),!0}catch{return!1}else return!1},TN=(e,t,n,s)=>{p9(e.clipboardData,t.html,t.text)?(e.preventDefault(),s()):n(t.html,s)},NN=e=>(t,n)=>{const{dom:s,selection:o}=e,r=s.create("div",{contenteditable:"false","data-mce-bogus":"all"}),i=s.create("div",{contenteditable:"true"},t);s.setStyles(r,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),r.appendChild(i),s.add(e.getBody(),r);const c=o.getRng();i.focus();const l=s.createRng();l.selectNodeContents(i),o.setRng(l),Bn.setEditorTimeout(e,()=>{o.setRng(c),s.remove(r),n()},0)},kN=e=>({html:k6(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}),h9=e=>!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody()),xN=e=>!e.selection.isCollapsed()||h9(e),g9=e=>t=>{!t.isDefaultPrevented()&&xN(e)&&e.selection.isEditable()&&TN(t,kN(e),NN(e),()=>{if(Ve.browser.isChromium()||Ve.browser.isFirefox()){const n=e.selection.getRng();Bn.setEditorTimeout(e,()=>{e.selection.setRng(n),e.execCommand("Delete")},0)}else e.execCommand("Delete")})},b9=e=>t=>{!t.isDefaultPrevented()&&xN(e)&&TN(t,kN(e),NN(e),Se)},y9=e=>{e.on("cut",g9(e)),e.on("copy",b9(e))},RN=(e,t)=>{var n,s;return vr.getCaretRangeFromPoint((n=t.clientX)!==null&&n!==void 0?n:0,(s=t.clientY)!==null&&s!==void 0?s:0,e.getDoc())},v9=e=>{const t=e["text/plain"];return t?t.indexOf("file://")===0:!1},ON=(e,t)=>{e.focus(),t&&e.selection.setRng(t)},C9=e=>ut(e.files,t=>/^image\//.test(t.type)),E9=(e,t,n,s)=>{const o=e.getParent(n,i=>sr(t,i));if(!Be(e.getParent(n,"summary")))return!0;if(o&&Ae(s,"text/html")){const i=new DOMParser().parseFromString(s["text/html"],"text/html").body;return!Be(i.querySelector(o.nodeName.toLowerCase()))}else return!1},_9=e=>{e.on("input",t=>{const n=s=>Be(s.querySelector("summary"));if(t.inputType==="deleteByDrag"){const s=ve(e.dom.select("details"),n);U(s,o=>{ht(o.firstChild)&&o.firstChild.remove();const r=e.dom.create("summary");r.appendChild(oi().dom),o.prepend(r)})}})},S9=(e,t)=>{OL(e)&&e.on("dragend dragover draggesture dragdrop drop drag",n=>{n.preventDefault(),n.stopPropagation()}),xl(e)||e.on("drop",n=>{const s=n.dataTransfer;s&&C9(s)&&n.preventDefault()}),e.on("drop",n=>{if(n.isDefaultPrevented())return;const s=RN(e,n);if(Fe(s))return;const o=SN(n.dataTransfer),r=Bo(o,zu());if((!wN(o)||v9(o))&&AN(e,n,s))return;const i=o[zu()],c=i||o["text/html"]||o["text/plain"],l=E9(e.dom,e.schema,s.startContainer,o),d=t.get();d&&!l||c&&(n.preventDefault(),Bn.setEditorTimeout(e,()=>{e.undoManager.transact(()=>{(i||d&&l)&&e.execCommand("Delete"),ON(e,s);const p=CN(c);o["text/html"]?Vu(e,p,r,!0):Zh(e,p,!0)})}))}),e.on("dragstart",n=>{t.set(!0)}),e.on("dragover dragend",n=>{xl(e)&&!t.get()&&(n.preventDefault(),ON(e,RN(e,n))),n.type==="dragend"&&t.set(!1)}),_9(e)},w9=e=>{const t=o=>r=>{o(e,r)},n=DL(e);$e(n)&&e.on("PastePreProcess",t(n));const s=PL(e);$e(s)&&e.on("PastePostProcess",t(s))},A9=(e,t)=>{e.on("PastePreProcess",n=>{n.content=t(e,n.content,n.internal)})},T9=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,DN=e=>X.trim(e).replace(T9,wa).toLowerCase(),N9=(e,t,n)=>{const s=LL(e);if(n||s==="all"||!IL(e))return t;const o=s?s.split(/[, ]/):[];if(o&&s!=="none"){const r=e.dom,i=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(c,l,d,p)=>{const h=r.parseStyle(r.decode(d)),g={};for(let E=0;E<o.length;E++){const C=h[o[E]];let S=C,T=r.getStyle(i,o[E],!0);/color/.test(o[E])&&(S=DN(S),T=DN(T)),T!==S&&(g[o[E]]=C)}const v=r.serializeStyle(g,"span");return v?l+' style="'+v+'"'+p:l+p})}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(r,i,c,l)=>i+' style="'+c+'"'+l),t},k9=e=>{(Ve.browser.isChromium()||Ve.browser.isSafari())&&A9(e,N9)},x9=e=>{const t=Bt(!1),n=Bt(FL(e)?"text":"html"),s=$6(e);k9(e),m9(e,n),w9(e),e.addQueryStateHandler("mceTogglePlainTextPaste",()=>n.get()==="text"),e.on("PreInit",()=>{y9(e),S9(e,t),f9(e,s,n)})},R9=e=>{e.on("click",t=>{e.dom.getParent(t.target,"details")&&t.preventDefault()})},O9=e=>{e.parser.addNodeFilter("details",t=>{const n=eI(e);U(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})}),e.serializer.addNodeFilter("details",t=>{const n=tI(e);U(t,s=>{n==="expanded"?s.attr("open","open"):n==="collapsed"&&s.attr("open",null)})})},D9=e=>{R9(e),O9(e)},P9=ht,PN=q,B9=e=>rt(e.dom),L9=e=>Yn(e.dom),BN=e=>t=>Qe(A.fromDom(e),t),I9=(e,t,n)=>Zo(A.fromDom(e),s=>L9(s)||n.isBlock(He(s)),BN(t)).getOr(A.fromDom(t)).dom,LN=(e,t)=>Zo(A.fromDom(e),B9,BN(t)),IN=(e,t,n)=>{const s=new Pt(e,t),o=n?s.next.bind(s):s.prev.bind(s);let r=e;for(let i=n?e:o();i&&!P9(i);i=o())gs(i)&&(r=i);return r},$9=(e,t,n)=>{const o=L.fromRangeStart(e).getNode(),r=I9(o,t,n),i=IN(o,r,!1),c=IN(o,r,!0),l=document.createRange();return LN(i,r).fold(()=>{PN(i)?l.setStart(i,0):l.setStartBefore(i)},d=>l.setStartBefore(d.dom)),LN(c,r).fold(()=>{PN(c)?l.setEnd(c,c.data.length):l.setEndAfter(c)},d=>l.setEndAfter(d.dom)),l},M9=e=>{const t=$9(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(dp(t))},F9=e=>{e.on("mousedown",t=>{t.detail>=3&&(t.preventDefault(),M9(e))})};var xi;(function(e){e.Before="before",e.After="after"})(xi||(xi={}));const U9=(e,t)=>Math.abs(e.left-t),H9=(e,t)=>Math.abs(e.right-t),z9=(e,t)=>e>=t.top&&e<=t.bottom,V9=(e,t)=>e.top<t.bottom&&e.bottom>t.top,W9=(e,t)=>{const n=W1(e,t)/Math.min(e.height,t.height);return V9(e,t)&&n>.5},j9=(e,t)=>{const n=ve(e,s=>z9(t,s));return V1(n).fold(()=>[[],e],s=>{const{pass:o,fail:r}=po(e,i=>W9(i,s));return[o,r]})},q9=(e,t)=>({node:e.node,position:U9(e,t)<H9(e,t)?xi.Before:xi.After}),K9=(e,t,n)=>t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t)),Jh=(e,t,n,s)=>{const o=h=>gs(h.node)?b.some(h):fe(h.node)?Jh(En(h.node.childNodes),t,n,!1):b.none(),r=(h,g,v)=>o(g).filter(E=>Math.abs(v(h,t,n)-v(E,t,n))<2&&q(E.node)),i=(h,g)=>{const v=Go(h,(E,C)=>g(E,t,n)-g(C,t,n));return zr(v,o).map(E=>s&&!q(E.node)&&v.length>1?r(E,v[1],g).getOr(E):E)},[c,l]=j9(o0(e),n),{pass:d,fail:p}=po(l,h=>h.top<n);return i(c,K9).orThunk(()=>i(p,Bv)).orThunk(()=>i(d,Bv))},G9=(e,t,n,s)=>{const o=(r,i)=>{const c=d=>fe(d)&&d.classList.contains("mce-drag-container"),l=ve(r.dom.childNodes,ls(c));return i.fold(()=>Jh(l,n,s,!0),d=>{const p=ve(l,h=>h!==d.dom);return Jh(p,n,s,!0)}).orThunk(()=>(Qe(r,e)?b.none():sl(r)).bind(p=>o(p,b.some(r))))};return o(t,b.none())},Y9=(e,t,n)=>{const s=A.fromDom(e),o=bo(s),i=A.fromPoint(o,t,n).filter(c=>fs(s,c)).getOr(s);return G9(s,i,t,n)},$N=(e,t,n)=>Y9(e,t,n).filter(s=>za(s.node)).map(s=>q9(s,t)),MN=e=>{var t,n;const s=e.getBoundingClientRect(),o=e.ownerDocument,r=o.documentElement,i=o.defaultView;return{top:s.top+((t=i==null?void 0:i.scrollY)!==null&&t!==void 0?t:0)-r.clientTop,left:s.left+((n=i==null?void 0:i.scrollX)!==null&&n!==void 0?n:0)-r.clientLeft}},X9=e=>e.inline?MN(e.getBody()):{left:0,top:0},Z9=e=>{const t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}},Q9=e=>{const t=e.getBody(),n=e.getDoc().documentElement,s={left:t.scrollLeft,top:t.scrollTop},o={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?s:o},J9=(e,t)=>{if(t.target.ownerDocument!==e.getDoc()){const n=MN(e.getContentAreaContainer()),s=Q9(e);return{left:t.pageX-n.left+s.left,top:t.pageY-n.top+s.top}}return{left:t.pageX,top:t.pageY}},e7=(e,t,n)=>({pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}),t7=(e,t)=>e7(X9(e),Z9(e),J9(e,t)),FN=e=>({target:e,srcElement:e}),n7=(e,t,n,s)=>({...t,dataTransfer:s,type:e,...FN(n)}),s7=(e,t,n)=>{const s=qo("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:s,initEvent:s,preventDefault:Se,stopImmediatePropagation:Se,stopPropagation:Se,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:s,initMouseEvent:s,getModifierState:s,dataTransfer:n,...FN(t)}},o7=(e,t)=>{const n=T6(e);return t==="dragstart"?(lN(n),fN(n)):t==="drop"?(b6(n),jh(n)):(y6(n),_6(n)),n},r7=(e,t,n,s)=>{const o=o7(n,e);return qe(s)?s7(e,t,o):n7(e,s,t,o)},Wu=32,i7=100,ju=8,qu=16,UN=rt,a7=K1(UN,Yn),c7=(e,t,n)=>UN(n)&&n!==t&&e.isEditable(n.parentElement),l7=(e,t,n)=>Fe(t)||t===n||e.dom.isChildOf(t,n)?!1:e.dom.isEditable(t),u7=(e,t,n,s)=>{const o=e.dom,r=t.cloneNode(!0);o.setStyles(r,{width:n,height:s}),o.setAttrib(r,"data-mce-selected",null);const i=o.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return o.setStyles(i,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:s}),o.setStyles(r,{margin:0,boxSizing:"border-box"}),i.appendChild(r),i},f7=(e,t)=>{e.parentNode!==t&&t.appendChild(e)},Ku=(e,t)=>n=>()=>{const s=e==="left"?n.scrollX:n.scrollY;n.scroll({[e]:s+t,behavior:"smooth"})},HN=Ku("left",-Wu),zN=Ku("left",Wu),VN=Ku("top",-Wu),WN=Ku("top",Wu),d7=(e,t,n,s,o,r,i,c,l,d,p,h)=>{let g=0,v=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>o&&(g=t.pageX+n-o),t.pageY+s>r&&(v=t.pageY+s-r),e.style.width=n-g+"px",e.style.height=s-v+"px";const E=l.clientHeight,C=l.clientWidth,S=i+l.getBoundingClientRect().top,T=c+l.getBoundingClientRect().left;p.on(k=>{k.intervalId.clear(),k.dragging&&h&&(i+ju>=E?k.intervalId.set(WN(d)):i-ju<=0?k.intervalId.set(VN(d)):c+ju>=C?k.intervalId.set(zN(d)):c-ju<=0?k.intervalId.set(HN(d)):S+qu>=window.innerHeight?k.intervalId.set(WN(window)):S-qu<=0?k.intervalId.set(VN(window)):T+qu>=window.innerWidth?k.intervalId.set(zN(window)):T-qu<=0&&k.intervalId.set(HN(window)))})},jN=e=>{e&&e.parentNode&&e.parentNode.removeChild(e)},m7=(e,t)=>{const n=e.getParent(t.parentNode,e.isBlock);jN(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&So(A.fromDom(n))},p7=e=>e.button===0,h7=(e,t)=>({pageX:t.pageX-e.relX,pageY:t.pageY+5}),g7=(e,t)=>n=>{if(p7(n)){const s=vt(t.dom.getParents(n.target),a7).getOr(null);if(j(s)&&c7(t.dom,t.getBody(),s)){const o=t.dom.getPos(s),r=t.getBody(),i=t.getDoc().documentElement;e.set({element:s,dataTransfer:qh(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?r.scrollWidth:i.offsetWidth)-2,maxY:(t.inline?r.scrollHeight:i.offsetHeight)-2,relX:n.pageX-o.x,relY:n.pageY-o.y,width:s.offsetWidth,height:s.offsetHeight,ghost:u7(t,s,s.offsetWidth,s.offsetHeight),intervalId:lP(i7)})}}},b7=(e,t,n)=>{e._selectionOverrides.hideFakeCaret(),$N(e.getBody(),t,n).fold(()=>e.selection.placeCaretAt(t,n),s=>{const o=e._selectionOverrides.showCaret(1,s.node,s.position===xi.Before,!1);o?e.selection.setRng(o):e.selection.placeCaretAt(t,n)})},Ac=(e,t,n,s,o)=>{t==="dragstart"&&pN(s,e.dom.getOuterHTML(n));const r=r7(t,n,s,o);return e.dispatch(t,r)},y7=(e,t)=>{const n=yl((o,r)=>b7(t,o,r),0);t.on("remove",n.cancel);const s=e;return o=>e.on(r=>{const i=Math.max(Math.abs(o.screenX-r.screenX),Math.abs(o.screenY-r.screenY));if(!r.dragging&&i>10){const c=Ac(t,"dragstart",r.element,r.dataTransfer,o);if(j(c.dataTransfer)&&(r.dataTransfer=c.dataTransfer),c.isDefaultPrevented())return;r.dragging=!0,t.focus()}if(r.dragging){const c=o.currentTarget===t.getDoc().documentElement,l=h7(r,t7(t,o));f7(r.ghost,t.getBody()),d7(r.ghost,l,r.width,r.height,r.maxX,r.maxY,o.clientY,o.clientX,t.getContentAreaContainer(),t.getWin(),s,c),n.throttle(o.clientX,o.clientY)}})},v7=e=>{const t=e.getSel();if(j(t)){const s=t.getRangeAt(0).startContainer;return q(s)?s.parentNode:s}else return null},C7=(e,t)=>n=>{e.on(s=>{var o;if(s.intervalId.clear(),s.dragging){if(l7(t,v7(t.selection),s.element)){const r=(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))!==null&&o!==void 0?o:t.getBody();Ac(t,"drop",r,s.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact(()=>{m7(t.dom,s.element),N6(s.dataTransfer).each(c=>t.insertContent(c)),t._selectionOverrides.hideFakeCaret()})}Ac(t,"dragend",t.getBody(),s.dataTransfer,n)}}),KN(e)},qN=(e,t,n)=>{e.on(s=>{s.intervalId.clear(),s.dragging&&n.fold(()=>Ac(t,"dragend",s.element,s.dataTransfer),o=>Ac(t,"dragend",s.element,s.dataTransfer,o))}),KN(e)},E7=(e,t)=>n=>qN(e,t,b.some(n)),KN=e=>{e.on(t=>{t.intervalId.clear(),jN(t.ghost)}),e.clear()},_7=e=>{const t=to(),n=st.DOM,s=document,o=g7(t,e),r=y7(t,e),i=C7(t,e),c=E7(t,e);e.on("mousedown",o),e.on("mousemove",r),e.on("mouseup",i),n.bind(s,"mousemove",r),n.bind(s,"mouseup",c),e.on("remove",()=>{n.unbind(s,"mousemove",r),n.unbind(s,"mouseup",c)}),e.on("keydown",l=>{l.keyCode===ne.ESC&&qN(t,e,b.none())})},S7=e=>{const t=o=>{if(!o.isDefaultPrevented()){const r=o.dataTransfer;r&&(Ze(r.types,"Files")||r.files.length>0)&&(o.preventDefault(),o.type==="drop"&&gu(e,"Dropped file type is not supported"))}},n=o=>{Kl(e,o.target)&&t(o)},s=()=>{const o=st.DOM,r=e.dom,i=document,c=e.inline?e.getBody():e.getDoc(),l=["drop","dragover"];U(l,d=>{o.bind(i,d,n),r.bind(c,d,t)}),e.on("remove",()=>{U(l,d=>{o.unbind(i,d,n),r.unbind(c,d,t)})})};e.on("init",()=>{Bn.setEditorTimeout(e,s,0)})},w7=e=>{_7(e),_L(e)&&S7(e)},A7=e=>{const t=yl(()=>{if(!e.removed&&e.getBody().contains(document.activeElement)){const n=e.selection.getRng();if(n.collapsed){const s=eh(e,n,!1);e.selection.setRng(s)}}},0);e.on("focus",()=>{t.throttle()}),e.on("blur",()=>{t.cancel()})},T7=e=>{e.on("init",()=>{e.on("focusin",t=>{const n=t.target;if(Bs(n)){const s=_r(e.getBody(),n),o=rt(s)?s:n;e.selection.getNode()!==o&&dc(e,o).each(r=>e.selection.setRng(r))}})})},Tc=rt,GN=(e,t)=>_r(e.getBody(),t),N7=e=>{const t=e.selection,n=e.dom,s=e.getBody(),o=gI(e,s,n.isBlock,()=>yi(e)),r="sel-"+n.uniqueId(),i="data-mce-selected";let c;const l=ee=>j(ee)&&n.hasClass(ee,"mce-offscreen-selection"),d=ee=>ee!==s&&(Tc(ee)||Bs(ee))&&n.isChildOf(ee,s)&&n.isEditable(ee.parentNode),p=ee=>{ee&&t.setRng(ee)},h=(ee,I,D,F=!0)=>e.dispatch("ShowCaret",{target:I,direction:ee,before:D}).isDefaultPrevented()?null:(F&&t.scrollIntoView(I,ee===-1),o.show(D,I)),g=ee=>{ee.hasAttribute("data-mce-caret")&&(zd(ee),t.scrollIntoView(ee))},v=()=>{e.on("click",I=>{n.isEditable(I.target)||(I.preventDefault(),e.focus())}),e.on("blur NewBlock",R),e.on("ResizeWindow FullscreenStateChanged",o.reposition),e.on("tap",I=>{const D=I.target,F=GN(e,D);Tc(F)?(I.preventDefault(),dc(e,F).each(N)):d(D)&&dc(e,D).each(N)},!0),e.on("mousedown",I=>{const D=I.target;if(D!==s&&D.nodeName!=="HTML"&&!n.isChildOf(D,s)||!dj(e,I.clientX,I.clientY))return;R(),K();const F=GN(e,D);Tc(F)?(I.preventDefault(),dc(e,F).each(N)):$N(s,I.clientX,I.clientY).each(ie=>{I.preventDefault();const de=h(1,ie.node,ie.position===xi.Before,!1);p(de),Js(F)?F.focus():e.getBody().focus()})}),e.on("keypress",I=>{ne.modifierPressed(I)||Tc(t.getNode())&&I.preventDefault()}),e.on("GetSelectionRange",I=>{let D=I.range;if(c){if(!c.parentNode){c=null;return}D=D.cloneRange(),D.selectNode(c),I.range=D}}),e.on("SetSelectionRange",I=>{I.range=S(I.range);const D=N(I.range,I.forward);D&&(I.range=D)});const ee=I=>fe(I)&&I.id==="mcepastebin";e.on("AfterSetSelectionRange",I=>{const D=I.range,F=D.startContainer.parentElement;!C(D)&&!ee(F)&&K(),l(F)||R()}),w7(e),A7(e),T7(e)},E=ee=>xn(ee)||El(ee)||_l(ee),C=ee=>E(ee.startContainer)||E(ee.endContainer),S=ee=>{const I=e.schema.getVoidElements(),D=n.createRng(),F=ee.startContainer,ie=ee.startOffset,de=ee.endContainer,Ne=ee.endOffset;return Ae(I,F.nodeName.toLowerCase())?ie===0?D.setStartBefore(F):D.setStartAfter(F):D.setStart(F,ie),Ae(I,de.nodeName.toLowerCase())?Ne===0?D.setEndBefore(de):D.setEndAfter(de):D.setEnd(de,Ne),D},T=(ee,I)=>{const D=A.fromDom(e.getBody()),F=e.getDoc(),ie=ol(D,"#"+r).getOrThunk(()=>{const Re=A.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',F);return $t(Re,"id",r),At(D,Re),Re}),de=n.createRng();Zr(ie),Jo(ie,[A.fromText(xt,F),A.fromDom(I),A.fromText(xt,F)]),de.setStart(ie.dom.firstChild,1),de.setEnd(ie.dom.lastChild,0),rl(ie,{top:n.getPos(ee,e.getBody()).y+"px"}),GE(ie);const Ne=t.getSel();return Ne&&(Ne.removeAllRanges(),Ne.addRange(de)),de},k=ee=>{const I=ee.cloneNode(!0),D=e.dispatch("ObjectSelected",{target:ee,targetClone:I});if(D.isDefaultPrevented())return null;const F=T(ee,D.targetClone),ie=A.fromDom(ee);return U(Kt(A.fromDom(e.getBody()),`*[${i}]`),de=>{Qe(ie,de)||Mt(de,i)}),n.getAttrib(ee,i)||ee.setAttribute(i,"1"),c=ee,K(),F},N=(ee,I)=>{if(!ee)return null;if(ee.collapsed){if(!C(ee)){const de=I?1:-1,Ne=qa(de,s,ee),Re=Ne.getNode(!I);if(j(Re)){if(za(Re))return h(de,Re,I?!Ne.isAtEnd():!1,!1);if(wo(Re)&&rt(Re.nextSibling)){const Ge=n.createRng();return Ge.setStart(Re,0),Ge.setEnd(Re,0),Ge}}const ze=Ne.getNode(I);if(j(ze)){if(za(ze))return h(de,ze,I?!1:!Ne.isAtEnd(),!1);if(wo(ze)&&rt(ze.previousSibling)){const Ge=n.createRng();return Ge.setStart(ze,1),Ge.setEnd(ze,1),Ge}}}return null}let D=ee.startContainer,F=ee.startOffset;const ie=ee.endOffset;if(q(D)&&F===0&&Tc(D.parentNode)&&(D=D.parentNode,F=n.nodeIndex(D),D=D.parentNode),!fe(D))return null;if(ie===F+1&&D===ee.endContainer){const de=D.childNodes[F];if(d(de))return k(de)}return null},R=()=>{c&&c.removeAttribute(i),ol(A.fromDom(e.getBody()),"#"+r).each(lt),c=null},H=()=>{o.destroy(),c=null},K=()=>{o.hide()};return Hs(e)||v(),{showCaret:h,showBlockCaretContainer:g,hideFakeCaret:K,destroy:H}},k7=(e,t)=>{let n=t;for(let s=e.previousSibling;q(s);s=s.previousSibling)n+=s.data.length;return n},YN=(e,t,n,s,o)=>{if(q(n)&&(s<0||s>n.data.length))return[];const r=o&&q(n)?[k7(n,s)]:[s];let i=n;for(;i!==t&&i.parentNode;)r.push(e.nodeIndex(i,o)),i=i.parentNode;return i===t?r.reverse():[]},eg=(e,t,n,s,o,r,i=!1)=>{const c=YN(e,t,n,s,i),l=YN(e,t,o,r,i);return{start:c,end:l}},XN=(e,t)=>{const n=t.slice(),s=n.pop();return pt(s)?Vt(n,(r,i)=>r.bind(c=>b.from(c.childNodes[i])),b.some(e)).bind(r=>q(r)&&(s<0||s>r.data.length)?b.none():b.some({node:r,offset:s})):b.none()},ZN=(e,t)=>XN(e,t.start).bind(({node:n,offset:s})=>XN(e,t.end).map(({node:o,offset:r})=>{const i=document.createRange();return i.setStart(n,s),i.setEnd(o,r),i})),x7=(e,t,n,s=!1)=>eg(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,s),Ri=(e,t,n)=>{if(t&&e.isEmpty(t)&&!n(t)){const s=t.parentNode;e.remove(t,q(t.firstChild)&&Jr(t.firstChild.data)),Ri(e,s,n)}},Gu=(e,t,n,s=!0)=>{const o=t.startContainer.parentNode,r=t.endContainer.parentNode;t.deleteContents(),s&&!n(t.startContainer)&&(q(t.startContainer)&&t.startContainer.data.length===0&&e.remove(t.startContainer),q(t.endContainer)&&t.endContainer.data.length===0&&e.remove(t.endContainer),Ri(e,o,n),o!==r&&Ri(e,r,n))},Yu=(e,t)=>b.from(e.dom.getParent(t.startContainer,e.dom.isBlock)),tg=(e,t,n)=>{const s=e.dynamicPatternsLookup({text:n,block:t});return{...e,blockPatterns:iC(s).concat(e.blockPatterns),inlinePatterns:aC(s).concat(e.inlinePatterns)}},ng=(e,t,n,s)=>{const o=e.createRng();return o.setStart(t,0),o.setEnd(n,s),o.toString()},QN=(e,t)=>e.create("span",{"data-mce-type":"bookmark",id:t}),Xu=(e,t)=>{const n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},JN=(e,t,n)=>{const s=ZN(e.getRoot(),n).getOrDie("Unable to resolve path range"),o=s.startContainer,r=s.endContainer,i=s.endOffset===0?r:r.splitText(s.endOffset),c=s.startOffset===0?o:o.splitText(s.startOffset),l=c.parentNode,d=i.parentNode;return{prefix:t,end:d.insertBefore(QN(e,t+"-end"),i),start:l.insertBefore(QN(e,t+"-start"),c)}},ek=(e,t,n)=>{Ri(e,e.get(t.prefix+"-end"),n),Ri(e,e.get(t.prefix+"-start"),n)},sg=e=>e.start.length===0,R7=e=>(t,n)=>{const o=t.data.substring(0,n),r=o.lastIndexOf(e.charAt(e.length-1)),i=o.lastIndexOf(e);return i!==-1?i+e.length:r!==-1?r+1:-1},tk=(e,t,n,s)=>{const o=t.start;return Ah(e,s.container,s.offset,R7(o),n).bind(i=>{var c,l;const d=(l=(c=n.textContent)===null||c===void 0?void 0:c.indexOf(o))!==null&&l!==void 0?l:-1;if(d!==-1&&i.offset>=d+o.length){const h=e.createRng();return h.setStart(i.container,i.offset-o.length),h.setEnd(i.container,i.offset),b.some(h)}else{const h=i.offset-o.length;return wh(i.container,h,n).map(g=>{const v=e.createRng();return v.setStart(g.container,g.offset),v.setEnd(i.container,i.offset),v}).filter(g=>g.toString()===o).orThunk(()=>tk(e,t,n,Cs(i.container,0)))}})},O7=(e,t,n,s,o,r=!1)=>{if(t.start.length===0&&!r){const i=e.createRng();return i.setStart(n,s),i.setEnd(n,s),b.some(i)}return Sh(n,s,o).bind(i=>tk(e,t,o,i).bind(l=>{var d;if(r){if(l.endContainer===i.container&&l.endOffset===i.offset)return b.none();if(i.offset===0&&((d=l.endContainer.textContent)===null||d===void 0?void 0:d.length)===l.endOffset)return b.none()}return b.some(l)}))},D7=(e,t,n,s)=>{const o=e.dom,r=o.getRoot(),i=n.pattern,c=n.position.container,l=n.position.offset;return wh(c,l-n.pattern.end.length,t).bind(d=>{const p=eg(o,r,d.container,d.offset,c,l,s);if(sg(i))return b.some({matches:[{pattern:i,startRng:p,endRng:p}],position:d});{const h=Zu(e,n.remainingPatterns,d.container,d.offset,t,s),g=h.getOr({matches:[],position:d}),v=g.position;return O7(o,i,v.container,v.offset,t,h.isNone()).map(C=>{const S=x7(o,r,C,s);return{matches:g.matches.concat([{pattern:i,startRng:S,endRng:p}]),position:Cs(C.startContainer,C.startOffset)}})}})},Zu=(e,t,n,s,o,r)=>{const i=e.dom;return Sh(n,s,i.getRoot()).bind(c=>{const l=ng(i,o,n,s);for(let d=0;d<t.length;d++){const p=t[d];if(!Yf(l,p.end))continue;const h=t.slice();h.splice(d,1);const g=D7(e,o,{pattern:p,remainingPatterns:h,position:c},r);if(g.isNone()&&s>0)return Zu(e,t,n,s-1,o,r);if(g.isSome())return g}return b.none()})},nk=(e,t,n)=>{e.selection.setRng(n),t.type==="inline-format"?U(t.format,s=>{e.formatter.apply(s)}):e.execCommand(t.cmd,!1,t.value)},P7=(e,t,n,s)=>{const o=Xu(e.dom,n);Gu(e.dom,o,s),nk(e,t,o)},B7=(e,t,n,s,o)=>{const r=e.dom,i=Xu(r,s),c=Xu(r,n);Gu(r,c,o),Gu(r,i,o);const l={prefix:n.prefix,start:n.end,end:s.start},d=Xu(r,l);nk(e,t,d)},L7=(e,t)=>{const n=Da("mce_textpattern"),s=Ts(t,(o,r)=>{const i=JN(e,n+`_end${o.length}`,r.endRng);return o.concat([{...r,endMarker:i}])},[]);return Ts(s,(o,r)=>{const i=s.length-o.length-1,c=sg(r.pattern)?r.endMarker:JN(e,n+`_start${i}`,r.startRng);return o.concat([{...r,startMarker:c}])},[])},I7=e=>Go(e,(t,n)=>n.end.length-t.end.length),$7=(e,t)=>{const n=Gn(e,s=>ut(t,o=>s.pattern.start===o.pattern.start&&s.pattern.end===o.pattern.end));return e.length===t.length?n?e:t:e.length>t.length?e:t},sk=(e,t,n,s,o,r)=>{const i=Zu(e,o.inlinePatterns,n,s,t,r).fold(()=>[],l=>l.matches),c=Zu(e,I7(o.inlinePatterns),n,s,t,r).fold(()=>[],l=>l.matches);return $7(i,c)},ok=(e,t)=>{if(t.length===0)return;const n=e.dom,s=e.selection.getBookmark(),o=L7(n,t);U(o,r=>{const i=n.getParent(r.startMarker.start,n.isBlock),c=l=>l===i;sg(r.pattern)?P7(e,r.pattern,r.endMarker,c):B7(e,r.pattern,r.startMarker,r.endMarker,c),ek(n,r.endMarker,c),ek(n,r.startMarker,c)}),e.selection.moveToBookmark(s)},rk=(e,t,n)=>T4(t,0,t).map(s=>{const o=s.container;return aT(o,n.start.length,t).each(r=>{const i=e.createRng();i.setStart(o,0),i.setEnd(r.container,r.offset),Gu(e,i,c=>c===t)}),o}),ik=e=>(t,n)=>{const s=t.dom,o=n.pattern,r=ZN(s.getRoot(),n.range).getOrDie("Unable to resolve path range"),i=(c,l)=>{const d=l.get(c);return Te(d)&&on(d).exists(p=>Ae(p,"block"))};return Yu(t,r).each(c=>{o.type==="block-format"?i(o.format,t.formatter)&&t.undoManager.transact(()=>{e(t.dom,c,o),t.formatter.apply(o.format)}):o.type==="block-command"&&t.undoManager.transact(()=>{e(t.dom,c,o),t.execCommand(o.cmd,!1,o.value)})}),!0},M7=e=>Go(e,(t,n)=>n.start.length-t.start.length),ak=e=>(t,n)=>{const s=M7(t),o=n.replace(xt," ");return vt(s,r=>e(r,n,o))},ck=(e,t)=>(n,s,o,r,i)=>{var c;i===void 0&&(i=(c=s.textContent)!==null&&c!==void 0?c:"");const l=n.dom,d=Yt(n);return l.is(s,d)?e(o.blockPatterns,i).map(p=>t&&X.trim(i).length===p.start.length?[]:[{pattern:p,range:eg(l,l.getRoot(),s,0,s,0,r)}]).getOr([]):[]},F7=e=>/^\s[^\s]/.test(e),U7=ik((e,t,n)=>{rk(e,t,n).each(s=>{const o=A.fromDom(s),r=Pa(o);F7(r)&&kv(o,r.slice(1))})}),H7=ak((e,t,n)=>t.indexOf(e.start)===0||n.indexOf(e.start)===0),z7=ck(H7,!0),V7=(e,t)=>{const n=e.selection.getRng();return Yu(e,n).map(s=>{var o;const r=Math.max(0,n.startOffset),i=tg(t,s,(o=s.textContent)!==null&&o!==void 0?o:""),c=sk(e,s,n.startContainer,r,i,!0),l=z7(e,s,i,!0);return{inlineMatches:c,blockMatches:l}}).filter(({inlineMatches:s,blockMatches:o})=>o.length>0||s.length>0)},W7=(e,t)=>{if(t.length===0)return;const n=e.selection.getBookmark();U(t,s=>U7(e,s)),e.selection.moveToBookmark(n)},j7=ik(rk),q7=ak((e,t,n)=>t===e.start||n===e.start),K7=ck(q7,!1),G7=(e,t)=>{const n=e.selection.getRng();return Yu(e,n).map(s=>{const o=Math.max(0,n.startOffset),r=ng(e.dom,s,n.startContainer,o),i=tg(t,s,r);return K7(e,s,i,!1,r)}).filter(s=>s.length>0)},Y7=(e,t)=>{U(t,n=>j7(e,n))},X7=(e,t)=>V7(e,t).fold(tt,({inlineMatches:n,blockMatches:s})=>(e.undoManager.add(),e.undoManager.extra(()=>{e.execCommand("mceInsertNewLine")},()=>{I1(e),ok(e,n),W7(e,s);const o=e.selection.getRng(),r=Sh(o.startContainer,o.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),r.each(i=>{const c=i.container;c.data.charAt(i.offset-1)===Ca&&(c.deleteData(i.offset-1,1),Ri(e.dom,c.parentNode,l=>l===e.dom.getRoot()))})}),!0)),Z7=(e,t)=>{const n=e.selection.getRng();Yu(e,n).map(s=>{const o=Math.max(0,n.startOffset-1),r=ng(e.dom,s,n.startContainer,o),i=tg(t,s,r),c=sk(e,s,n.startContainer,o,i,!1);c.length>0&&e.undoManager.transact(()=>{ok(e,c)})})},Q7=(e,t)=>G7(e,t).fold(tt,n=>(e.undoManager.transact(()=>{Y7(e,n)}),!0)),lk=(e,t,n)=>{for(let s=0;s<e.length;s++)if(n(e[s],t))return!0;return!1},J7=(e,t)=>lk(e,t,(n,s)=>n===s.keyCode&&!ne.modifierPressed(s)),eG=(e,t)=>lk(e,t,(n,s)=>n.charCodeAt(0)===s.charCode),tG=e=>{const t=[",",".",";",":","!","?"],n=[32],s=()=>xB(zL(e).filter(i=>i.type==="inline-command"||i.type==="block-command"?e.queryCommandSupported(i.cmd):!0),VL(e)),o=()=>YL(e);e.on("keydown",i=>{if(i.keyCode===13&&!ne.modifierPressed(i)&&e.selection.isCollapsed()){const c=Qd(s(),"enter");(c.inlinePatterns.length>0||c.blockPatterns.length>0||o())&&X7(e,c)&&i.preventDefault()}},!0),e.on("keydown",i=>{if(i.keyCode===32&&e.selection.isCollapsed()){const c=Qd(s(),"space");(c.blockPatterns.length>0||o())&&Q7(e,c)&&i.preventDefault()}},!0);const r=()=>{if(e.selection.isCollapsed()){const i=Qd(s(),"space");(i.inlinePatterns.length>0||o())&&Z7(e,i)}};e.on("keyup",i=>{J7(n,i)&&r()}),e.on("keypress",i=>{eG(t,i)&&Bn.setEditorTimeout(e,r)})},nG=e=>{tG(e)},sG=e=>{const t=X.each,n=ne.BACKSPACE,s=ne.DELETE,o=e.dom,r=e.selection,i=e.parser,c=Ve.browser,l=c.isFirefox(),d=c.isChromium()||c.isSafari(),p=Ve.deviceType.isiPhone()||Ve.deviceType.isiPad(),h=Ve.os.isMacOS()||Ve.os.isiOS(),g=(Q,pe)=>{try{e.getDoc().execCommand(Q,!1,String(pe))}catch{}},v=Q=>Q.isDefaultPrevented(),E=()=>{const Q=xe=>{const J=o.create("body"),ke=xe.cloneContents();return J.appendChild(ke),r.serializer.serialize(J,{format:"html"})},pe=xe=>{const J=Q(xe),ke=o.createRng();ke.selectNode(e.getBody());const Oe=Q(ke);return J===Oe};e.on("keydown",xe=>{const J=xe.keyCode;if(!v(xe)&&(J===s||J===n)&&e.selection.isEditable()){const ke=e.selection.isCollapsed(),Oe=e.getBody();if(ke&&!eo(e.schema,Oe)||!ke&&!pe(e.selection.getRng()))return;xe.preventDefault(),e.setContent(""),Oe.firstChild&&o.isBlock(Oe.firstChild)?e.selection.setCursorLocation(Oe.firstChild,0):e.selection.setCursorLocation(Oe,0),e.nodeChanged()}})},C=()=>{e.shortcuts.add("meta+a",null,"SelectAll")},S=()=>{e.inline||o.bind(e.getDoc(),"mousedown mouseup",Q=>{let pe;if(Q.target===e.getDoc().documentElement)if(pe=r.getRng(),e.getBody().focus(),Q.type==="mousedown"){if(xn(pe.startContainer))return;r.placeCaretAt(Q.clientX,Q.clientY)}else r.setRng(pe)})},T=()=>{e.on("keydown",Q=>{if(!v(Q)&&Q.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(r.isCollapsed()&&r.getRng().startOffset===0){const pe=r.getNode(),xe=pe.previousSibling;if(pe.nodeName==="HR"){o.remove(pe),Q.preventDefault();return}xe&&xe.nodeName&&xe.nodeName.toLowerCase()==="hr"&&(o.remove(xe),Q.preventDefault())}}})},k=()=>{Range.prototype.getClientRects||e.on("mousedown",Q=>{if(!v(Q)&&Q.target.nodeName==="HTML"){const pe=e.getBody();pe.blur(),Bn.setEditorTimeout(e,()=>{pe.focus()})}})},N=()=>{const Q=SC(e);e.on("click",pe=>{const xe=pe.target;/^(IMG|HR)$/.test(xe.nodeName)&&o.isEditable(xe)&&(pe.preventDefault(),e.selection.select(xe),e.nodeChanged()),xe.nodeName==="A"&&o.hasClass(xe,Q)&&xe.childNodes.length===0&&o.isEditable(xe.parentNode)&&(pe.preventDefault(),r.select(xe))})},R=()=>{const Q=()=>{const xe=o.getAttribs(r.getStart().cloneNode(!1));return()=>{const J=r.getStart();J!==e.getBody()&&(o.setAttrib(J,"style",null),t(xe,ke=>{J.setAttributeNode(ke.cloneNode(!0))}))}},pe=()=>!r.isCollapsed()&&o.getParent(r.getStart(),o.isBlock)!==o.getParent(r.getEnd(),o.isBlock);e.on("keypress",xe=>{let J;return!v(xe)&&(xe.keyCode===8||xe.keyCode===46)&&pe()?(J=Q(),e.getDoc().execCommand("delete",!1),J(),xe.preventDefault(),!1):!0}),o.bind(e.getDoc(),"cut",xe=>{if(!v(xe)&&pe()){const J=Q();Bn.setEditorTimeout(e,()=>{J()})}})},H=()=>{e.on("keydown",Q=>{if(!v(Q)&&Q.keyCode===n&&r.isCollapsed()&&r.getRng().startOffset===0){const pe=r.getNode().previousSibling;if(pe&&pe.nodeName&&pe.nodeName.toLowerCase()==="table")return Q.preventDefault(),!1}return!0})},K=()=>{e.on("keydown",Q=>{if(v(Q)||Q.keyCode!==ne.BACKSPACE)return;let pe=r.getRng();const xe=pe.startContainer,J=pe.startOffset,ke=o.getRoot();let Oe=xe;if(!(!pe.collapsed||J!==0)){for(;Oe.parentNode&&Oe.parentNode.firstChild===Oe&&Oe.parentNode!==ke;)Oe=Oe.parentNode;Oe.nodeName==="BLOCKQUOTE"&&(e.formatter.toggle("blockquote",void 0,Oe),pe=o.createRng(),pe.setStart(xe,0),pe.setEnd(xe,0),r.setRng(pe))}})},ee=()=>{const Q=()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),vC(e)||g("enableObjectResizing",!1)};EC(e)||e.on("BeforeExecCommand mousedown",Q)},I=()=>{const Q=()=>{t(o.select("a:not([data-mce-block])"),pe=>{var xe;let J=pe.parentNode;const ke=o.getRoot();if((J==null?void 0:J.lastChild)===pe){for(;J&&!o.isBlock(J);){if(((xe=J.parentNode)===null||xe===void 0?void 0:xe.lastChild)!==J||J===ke)return;J=J.parentNode}o.add(J,"br",{"data-mce-bogus":1})}})};e.on("SetContent ExecCommand",pe=>{(pe.type==="setcontent"||pe.command==="mceInsertLink")&&Q()})},D=()=>{e.on("init",()=>{g("DefaultParagraphSeparator",Yt(e))})},F=Q=>{const pe=Q.getBody(),xe=Q.selection.getRng();return xe.startContainer===xe.endContainer&&xe.startContainer===pe&&xe.startOffset===0&&xe.endOffset===pe.childNodes.length},ie=()=>{e.on("keyup focusin mouseup",Q=>{!ne.modifierPressed(Q)&&!F(e)&&r.normalize()},!0)},de=()=>{e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},Ne=()=>{e.inline||e.on("keydown",()=>{document.activeElement===document.body&&e.getWin().focus()})},Re=()=>{e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",Q=>{let pe;Q.target.nodeName==="HTML"&&(pe=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(pe),e.selection.normalize(),e.nodeChanged())}))},ze=()=>{h&&e.on("keydown",Q=>{ne.metaKeyPressed(Q)&&!Q.shiftKey&&(Q.keyCode===37||Q.keyCode===39)&&(Q.preventDefault(),e.selection.getSel().modify("move",Q.keyCode===37?"backward":"forward","lineboundary"))})},Ge=()=>{e.on("click",Q=>{let pe=Q.target;do if(pe.tagName==="A"){Q.preventDefault();return}while(pe=pe.parentNode)}),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},ft=()=>{e.on("init",()=>{e.dom.bind(e.getBody(),"submit",Q=>{Q.preventDefault()})})},It=()=>{i.addNodeFilter("br",Q=>{let pe=Q.length;for(;pe--;)Q[pe].attr("class")==="Apple-interchange-newline"&&Q[pe].remove()})},et=Se,Z=()=>{if(!l||e.removed)return!1;const Q=e.selection.getSel();return!Q||!Q.rangeCount||Q.rangeCount===0},ue=()=>{d&&(S(),N(),ft(),C(),p&&(Ne(),Re(),Ge())),l&&(k(),ee(),de(),ze())},Me=()=>{K(),E(),Ve.windowsPhone||ie(),d&&(S(),N(),D(),ft(),H(),It(),p?(Ne(),Re(),Ge()):C()),l&&(T(),k(),R(),ee(),I(),de(),ze(),H())};return Hs(e)?ue():Me(),{refreshContentEditable:et,isHidden:Z}},oG=e=>e.toLowerCase()==="gpl",rG=e=>e.length>=64&&e.length<=255,iG=e=>oG(e)||rG(e)?"VALID":"INVALID",aG=e=>{const t=sI(e);!G(oI(e))&&(qe(t)||iG(t)==="INVALID")&&console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")},og=st.DOM,cG=(e,t)=>{const n=A.fromDom(e.getBody()),s=rd(vo(n)),o=A.fromTag("style");$t(o,"type","text/css"),At(o,A.fromText(t)),At(s,o),e.on("remove",()=>{lt(o)})},lG=e=>e.inline?e.getElement().nodeName.toLowerCase():void 0,rg=e=>aa(e,t=>qe(t)===!1),uk=e=>{const t=e.options.get,n=e.editorUpload.blobCache;return rg({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:lG(e),sandbox_iframes:t("sandbox_iframes"),sandbox_iframes_exclusions:sm(e),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},fk=e=>{const t=e.options.get;return rg({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},uG=e=>{const t=e.options.get;return{...uk(e),...fk(e),...rg({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")})}},fG=e=>{const t=Ei(uk(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(n,s)=>{const o=e.dom,r="data-mce-"+s;let i=n.length;for(;i--;){const c=n[i];let l=c.attr(s);if(l&&!c.attr(r)){if(l.indexOf("data:")===0||l.indexOf("blob:")===0)continue;s==="style"?(l=o.serializeStyle(o.parseStyle(l),c.name),l.length||(l=null),c.attr(r,l),c.attr(s,l)):s==="tabindex"?(c.attr(r,l),c.attr(s,null)):c.attr(r,e.convertURL(l,s,c.name))}}}),t.addNodeFilter("script",n=>{let s=n.length;for(;s--;){const o=n[s],r=o.attr("type")||"no/type";r.indexOf("mce-")!==0&&o.attr("type","mce-"+r)}}),qL(e)&&t.addNodeFilter("#cdata",n=>{var s;let o=n.length;for(;o--;){const r=n[o];r.type=8,r.name="#comment",r.value="[CDATA["+e.dom.encode((s=r.value)!==null&&s!==void 0?s:"")+"]]"}}),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",n=>{let s=n.length;const o=e.schema.getNonEmptyElements();for(;s--;){const r=n[s];r.isEmpty(o)&&r.getAll("br").length===0&&r.append(new tn("br",1))}}),t},dG=e=>{const t=kL(e);t&&Bn.setEditorTimeout(e,()=>{let n;t===!0?n=e:n=e.editorManager.get(t),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())},100)},mG=e=>{const t=e.dom.getRoot();!e.inline&&(!Il(e)||e.selection.getStart(!0)===t)&&Xt(t).each(n=>{const s=n.getNode(),o=Ps(s)?Xt(s).getOr(n):n;e.selection.setRng(o.toRange())})},pG=e=>{e.bindPendingEventDelegates(),e.initialized=!0,N$(e),e.focus(!0),mG(e),e.nodeChanged({initial:!0});const t=TL(e);$e(t)&&t.call(e,e),dG(e)},ig=e=>e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader,hG=(e,t,n)=>{const{pass:s,fail:o}=po(t,c=>tinymce.Resource.has(Yp(c))),i=[...s.map(c=>{const l=tinymce.Resource.get(Yp(c));return G(l)?Promise.resolve(ig(e).loadRawCss(c,l)):Promise.resolve()}),ig(e).loadAll(o)];return e.inline?i:i.concat([e.ui.styleSheetLoader.loadAll(n)])},dk=e=>{const t=ig(e),n=yC(e),s=e.contentCSS,o=()=>{t.unloadAll(s),e.inline||e.ui.styleSheetLoader.unloadAll(n)},r=()=>{e.removed?o():e.on("remove",o)};if(e.contentStyles.length>0){let l="";X.each(e.contentStyles,d=>{l+=d+`\r
`}),e.dom.addStyle(l)}const i=Promise.all(hG(e,s,n)).then(r).catch(r),c=tL(e);return c&&cG(e,c),i},gG=e=>{const t=e.getDoc(),n=e.getBody();A$(e),xL(e)||(t.body.spellcheck=!1,og.setAttrib(n,"spellcheck","false")),e.quirks=sG(e),T$(e);const s=nL(e);s!==void 0&&(n.dir=s);const o=RL(e);o&&e.on("BeforeSetContent",r=>{X.each(o,i=>{r.content=r.content.replace(i,c=>"<!--mce:protected "+escape(c)+"-->")})}),e.on("SetContent",()=>{e.addVisual(e.getBody())}),e.on("compositionstart compositionend",r=>{e.composing=r.type==="compositionstart"})},bG=e=>{Hs(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})},ag=e=>{e.removed!==!0&&(bG(e),pG(e))},yG=e=>{let t=!1;const n=setTimeout(()=>{t||e.setProgressState(!0)},500);return()=>{clearTimeout(n),t=!0,e.setProgressState(!1)}},mk=e=>{const t=e.getElement();let n=e.getDoc();e.inline&&(og.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);const s=e.getBody();s.disabled=!0,e.readonly=EC(e),e._editableRoot=CL(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&og.getStyle(s,"position",!0)==="static"&&(s.style.position="relative"),s.contentEditable="true"),s.disabled=!1,e.editorUpload=Fj(e),e.schema=_o(fk(e)),e.dom=st(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:ZB(e),referrerPolicy:em(e),onSetAttrib:i=>{e.dispatch("SetAttrib",i)}}),e.parser=fG(e),e.serializer=tA(uG(e),e),e.selection=eA(e.dom,e.getWin(),e.serializer,e),e.annotator=EE(e),e.formatter=gA(e),e.undoManager=yA(e),e._nodeChangeDispatcher=new d6(e),e._selectionOverrides=N7(e),dK(e),D9(e),EK(e),Hs(e)||(F9(e),nG(e));const o=f6(e);lK(e,o),bK(e),e3(e),x9(e);const r=VW(e);gG(e),aG(e),r.fold(()=>{const i=yG(e);dk(e).then(()=>{ag(e),i()})},i=>{e.setProgressState(!0),dk(e).then(()=>{i().then(c=>{e.setProgressState(!1),ag(e),Yw(e)},c=>{e.notificationManager.open({type:"error",text:String(c)}),ag(e),Yw(e)})})})},vG=dt,CG=(e,t,n)=>LD(e,t,vG,n),cg=st.DOM,EG=(e,t,n,s)=>{const o=A.fromTag("iframe");return s.each(r=>$t(o,"tabindex",r)),Ys(o,n),Ys(o,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),Kr(o,"tox-edit-area__iframe"),o},_G=e=>{let t=IB(e)+"<html><head>";fC(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=$B(e),s=MB(e),o=e.translate(wC(e));return dC(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+dC(e)+'" />'),t+=`</head><body id="${n}" class="mce-content-body ${s}" data-id="${e.id}" aria-label="${o}"><br></body></html>`,t},SG=(e,t)=>{const n=Ve.browser.isFirefox()?wC(e):"Rich Text Area",s=e.translate(n),o=Xs(A.fromDom(e.getElement()),"tabindex").bind(Qc),r=EG(e.id,s,LB(e),o).dom;r.onload=()=>{r.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=r,e.iframeHTML=_G(e),cg.add(t.iframeContainer,r)},wG=e=>{const t=e.iframeElement,n=()=>{e.contentDocument=t.contentDocument,mk(e)};if(GL(e)||Ve.browser.isFirefox()){const s=e.getDoc();s.open(),s.write(e.iframeHTML),s.close(),n()}else{const s=CG(A.fromDom(t),"load",()=>{s.unbind(),n()});t.srcdoc=e.iframeHTML}},AG=(e,t)=>{SG(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=cg.isHidden(t.editorContainer)),e.getElement().style.display="none",cg.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,wG(e)},pk=st.DOM,TG=(e,t,n)=>{const s=Si.get(n),o=Si.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=X.trim(n),s&&X.inArray(t,n)===-1){if(e.plugins[n])return;try{const r=s(e,o)||{};e.plugins[n]=r,$e(r.init)&&(r.init(e,o),t.push(n))}catch(r){Sj(e,n,r)}}},NG=e=>e.replace(/^\-/,""),kG=e=>{const t=[];U(kl(e),n=>{TG(e,t,NG(n))})},xG=e=>{const t=X.trim(hC(e)),n=e.ui.registry.getAll().icons,s={...hu.get("default").icons,...hu.get(t).icons};ot(s,(o,r)=>{Ae(n,r)||e.ui.registry.addIcon(r,o)})},RG=e=>{const t=ci(e);if(G(t)){const n=wr.get(t);e.theme=n(e,wr.urls[t])||{},$e(e.theme.init)&&e.theme.init(e,wr.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},OG=e=>{const t=tm(e),n=_i.get(t);e.model=n(e,_i.urls[t])},DG=e=>{const t=e.theme.renderUI;return t?t():gk(e)},PG=e=>{const t=e.getElement(),s=ci(e)(e,t);return s.editorContainer.nodeType&&(s.editorContainer.id=s.editorContainer.id||e.id+"_parent"),s.iframeContainer&&s.iframeContainer.nodeType&&(s.iframeContainer.id=s.iframeContainer.id||e.id+"_iframecontainer"),s.height=s.iframeHeight?s.iframeHeight:t.offsetHeight,s},hk=(e,t)=>({editorContainer:e,iframeContainer:t,api:{}}),BG=e=>{const t=pk.create("div");return pk.insertAfter(t,e),hk(t,t)},gk=e=>{const t=e.getElement();return e.inline?hk(null):BG(t)},LG=e=>{const t=e.getElement();return e.orgDisplay=t.style.display,G(ci(e))?DG(e):$e(ci(e))?PG(e):gk(e)},IG=(e,t)=>{const n={show:b.from(t.show).getOr(Se),hide:b.from(t.hide).getOr(Se),isEnabled:b.from(t.isEnabled).getOr(dt),setEnabled:s=>{e.mode.isReadOnly()||b.from(t.setEnabled).each(o=>o(s))}};e.ui={...e.ui,...n}},$G=async e=>{e.dispatch("ScriptsLoaded"),xG(e),RG(e),OG(e),kG(e);const t=await LG(e);IG(e,b.from(t.api).getOr({})),e.editorContainer=t.editorContainer,kj(e),e.inline?mk(e):AG(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer})},Tr=st.DOM,bk=e=>e.charAt(0)==="-",MG=(e,t)=>{const n=gC(t),s=QB(t);if(!hs.hasCode(n)&&n!=="en"){const o=ks(s)?s:`${t.editorManager.baseURL}/langs/${n}.js`;e.add(o).catch(()=>{Cj(t,o,n)})}},FG=(e,t)=>{const n=ci(e);if(G(n)&&!bk(n)&&!Ae(wr.urls,n)){const s=aL(e),o=s?e.documentBaseURI.toAbsolute(s):`themes/${n}/theme${t}.js`;wr.load(n,o).catch(()=>{Ej(e,o,n)})}},UG=(e,t)=>{const n=tm(e);if(n!=="plugin"&&!Ae(_i.urls,n)){const s=cL(e),o=G(s)?e.documentBaseURI.toAbsolute(s):`models/${n}/model${t}.js`;_i.load(n,o).catch(()=>{_j(e,o,n)})}},HG=e=>b.from(qB(e)).filter(ks).map(t=>({url:t,name:b.none()})),yk=(e,t,n)=>b.from(t).filter(s=>ks(s)&&!hu.has(s)).map(s=>({url:`${e.editorManager.baseURL}/icons/${s}/icons${n}.js`,name:b.some(s)})),zG=(e,t,n)=>{const s=yk(t,"default",n),o=HG(t).orThunk(()=>yk(t,hC(t),""));U(KO([s,o]),r=>{e.add(r.url).catch(()=>{vj(t,r.url,r.name.getOrUndefined())})})},VG=(e,t)=>{const n=(s,o)=>{Si.load(s,o).catch(()=>{yj(e,o,s)})};ot(EL(e),(s,o)=>{n(o,s),e.options.set("plugins",kl(e).concat(o))}),U(kl(e),s=>{s=X.trim(s),s&&!Si.urls[s]&&!bk(s)&&n(s,`plugins/${s}/plugin${t}.js`)})},WG=e=>{const t=ci(e);return!G(t)||j(wr.get(t))},jG=e=>{const t=tm(e);return j(_i.get(t))},qG=(e,t)=>{const n=no.ScriptLoader,s=()=>{!e.removed&&WG(e)&&jG(e)&&$G(e)};FG(e,t),UG(e,t),MG(n,e),zG(n,e,t),VG(e,t),n.loadQueue().then(s,s)},KG=(e,t)=>Gy.forElement(e,{contentCssCors:_C(t),referrerPolicy:em(t)}),GG=e=>{const t=e.id;hs.setCode(gC(e));const n=()=>{Tr.unbind(window,"ready",n),e.render()};if(!ir.Event.domLoaded){Tr.bind(window,"ready",n);return}if(!e.getElement())return;const s=A.fromDom(e.getElement()),o=ay(s);e.on("remove",()=>{Kc(s.dom.attributes,i=>Mt(s,i.name)),Ys(s,o)}),e.ui.styleSheetLoader=KG(s,e),nm(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const r=e.getElement().form||Tr.getParent(t,"form");r&&(e.formElement=r,pL(e)&&!md(e.getElement())&&(Tr.insertAfter(Tr.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},Tr.bind(r,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),hL(e)&&!r.submit.nodeType&&!r.submit.length&&!r._mceOldSubmit&&(r._mceOldSubmit=r.submit,r.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),r._mceOldSubmit(r)))),e.windowManager=cA(e),e.notificationManager=aA(e),QL(e)&&e.on("GetContent",i=>{i.save&&(i.content=Tr.encode(i.content))}),gL(e)&&e.on("submit",()=>{e.initialized&&e.save()}),bL(e)&&(e._beforeUnload=()=>{e.initialized&&!e.destroyed&&!e.isHidden()&&e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),qG(e,e.suffix)},YG=(e,t)=>{e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),I$(e,t))},XG=e=>e._editableRoot,ZG=(e,t)=>({sections:te(e),options:te(t)}),vk=xs().deviceType,Ck=vk.isPhone(),QG=vk.isTablet(),Nc=e=>{if(Fe(e))return[];{const t=Te(e)?e:e.split(/[ ,]/),n=Ue(t,Wr);return ve(n,ks)}},JG=(e,t)=>{const n=vO(t,(s,o)=>Ze(e,o));return ZG(n.t,n.f)},eY=(e,t,n={})=>{const s=e.sections(),o=ct(s,t).getOr({});return X.extend({},n,o)},lg=(e,t)=>Ae(e.sections(),t),tY=(e,t)=>lg(e,t)?e.sections()[t]:{},nY=(e,t)=>({...{table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:ct(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1},...t?{menubar:!1}:{}}),sY=(e,t)=>{var n;const s=(n=t.external_plugins)!==null&&n!==void 0?n:{};return e&&e.external_plugins?X.extend({},e.external_plugins,s):s},oY=(e,t)=>[...Nc(e),...Nc(t)],rY=(e,t,n,s)=>e&&lg(t,"mobile")?s:n,iY=(e,t,n,s)=>{const o=Nc(n.forced_plugins),r=Nc(s.plugins),i=tY(t,"mobile"),c=i.plugins?Nc(i.plugins):r,l=rY(e,t,r,c),d=oY(o,l);return X.extend(s,{forced_plugins:o,plugins:d})},aY=(e,t)=>e&&lg(t,"mobile"),cY=(e,t,n,s,o)=>{var r;const i=e?{mobile:nY((r=o.mobile)!==null&&r!==void 0?r:{},t)}:{},c=JG(["mobile"],xu(i,o)),l=X.extend(n,s,c.options(),aY(e,c)?eY(c,"mobile"):{},{external_plugins:sY(s,c.options())});return iY(e,c,s,l)},lY=(e,t)=>{const n=hT(t);return cY(Ck||QG,Ck,n,e,n)},uY=(e,t)=>p2(e,t),fY=e=>{const t=(s,o)=>{e.formatter.toggle(s,o),e.nodeChanged()},n=s=>()=>{U("left,center,right,justify".split(","),o=>{s!==o&&e.formatter.remove("align"+o)}),s!=="none"&&t("align"+s)};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})},dY=e=>{const t=n=>()=>{const s=e.selection,o=s.isCollapsed()?[e.dom.getParent(s.getNode(),e.dom.isBlock)]:s.getSelectedBlocks();return ut(o,r=>j(e.formatter.matchNode(r,n)))};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")},mY=e=>{fY(e),dY(e)},pY=e=>{e.editorCommands.addCommands({"Cut,Copy,Paste":t=>{const n=e.getDoc();let s;try{n.execCommand(t)}catch{s=!0}if(t==="paste"&&!n.queryCommandEnabled(t)&&(s=!0),s||!n.queryCommandSupported(t)){let o=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ve.os.isMacOS()||Ve.os.isiOS())&&(o=o.replace(/Ctrl\+/g,"⌘+")),e.notificationManager.open({text:o,type:"error"})}}})},hY=(e,t,n,s)=>{const o=A.fromDom(e.getRoot());return tc(o,L.fromRangeStart(t),s)?n=n.replace(/^ /,"&nbsp;"):n=n.replace(/^&nbsp;/," "),nc(o,L.fromRangeEnd(t),s)?n=n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n=n.replace(/&nbsp;(<br( \/)?>)?$/," "),n},gY=e=>{if(typeof e!="string"){const t=X.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}},bY=(e,t)=>{const n=e.selection,s=e.dom;return/^ | $/.test(t)?hY(s,n.getRng(),t,e.schema):t},Qu=(e,t)=>{if(e.selection.isEditable()){const{content:n,details:s}=gY(t);Fp(e,{...s,content:bY(e,n),format:"html",set:!1,selection:!0}).each(o=>{const r=d2(e,o.content,s);Up(e,r,o),e.addVisual()})}},yY=e=>{e.editorCommands.addCommands({mceCleanup:()=>{const t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:(t,n,s)=>{Qu(e,e.dom.createHTML("img",{src:s}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(t,n,s)=>{Qu(e,e.dom.encode(s))},insertHTML:(t,n,s)=>{Qu(e,s)},mceInsertContent:(t,n,s)=>{Qu(e,s)},mceSetContent:(t,n,s)=>{e.setContent(s)},mceReplaceContent:(t,n,s)=>{e.execCommand("mceInsertContent",!1,s.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent(BL(e))}})},vY={"font-size":"size","font-family":"face"},CY=nl("font"),EY=(e,t,n)=>{const s=r=>il(r,e).orThunk(()=>CY(r)?ct(vY,e).bind(i=>Xs(r,i)):b.none()),o=r=>Qe(A.fromDom(t),r);return gp(A.fromDom(n),r=>s(r),o)},_Y=e=>e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),SY=(e,t)=>b.from(st.DOM.getStyle(t,e,!0)),Ek=e=>(t,n)=>b.from(n).map(A.fromDom).filter(_n).bind(s=>EY(e,t,s.dom).or(SY(e,s.dom))).getOr(""),wY=Ek("font-size"),AY=_t(_Y,Ek("font-family")),TY=e=>Xt(e.getBody()).bind(t=>{const n=t.container();return b.from(q(n)?n.parentNode:n)}),NY=e=>b.from(e.selection.getRng()).bind(t=>{const n=e.getBody();return t.startContainer===n&&t.startOffset===0?b.none():b.from(e.selection.getStart(!0))}),kY=(e,t)=>NY(e).orThunk(ae(TY,e)).map(A.fromDom).filter(_n).bind(t),ug=(e,t)=>kY(e,vn(b.some,t)),_k=(e,t)=>{if(/^[0-9.]+$/.test(t)){const n=parseInt(t,10);if(n>=1&&n<=7){const s=XL(e),o=ZL(e);return o.length>0?o[n-1]||t:s[n-1]||t}else return t}else return t},xY=e=>{const t=e.split(/\s*,\s*/);return Ue(t,n=>n.indexOf(" ")!==-1&&!(kt(n,'"')||kt(n,"'"))?`'${n}'`:n).join(",")},RY=(e,t)=>{const n=_k(e,t);e.formatter.toggle("fontname",{value:xY(n)}),e.nodeChanged()},OY=e=>ug(e,t=>AY(e.getBody(),t.dom)).getOr(""),DY=(e,t)=>{e.formatter.toggle("fontsize",{value:_k(e,t)}),e.nodeChanged()},PY=e=>ug(e,t=>wY(e.getBody(),t.dom)).getOr(""),BY=e=>ug(e,t=>{const n=A.fromDom(e.getBody()),s=gp(t,r=>il(r,"line-height"),ae(Qe,n)),o=()=>{const r=parseFloat(Ds(t,"line-height")),i=parseFloat(Ds(t,"font-size"));return String(r/i)};return s.getOrThunk(o)}).getOr(""),LY=(e,t)=>{e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()},IY=e=>{const t=(n,s)=>{e.formatter.toggle(n,s),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>{t(n)},"ForeColor,HiliteColor":(n,s,o)=>{t(n,{value:o})},BackColor:(n,s,o)=>{t("hilitecolor",{value:o})},FontName:(n,s,o)=>{RY(e,o)},FontSize:(n,s,o)=>{DY(e,o)},LineHeight:(n,s,o)=>{LY(e,o)},Lang:(n,s,o)=>{var r;t(n,{value:o.code,customValue:(r=o.customCode)!==null&&r!==void 0?r:null})},RemoveFormat:n=>{e.formatter.remove(n)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(n,s,o)=>{t(G(o)?o:"p")},mceToggleFormat:(n,s,o)=>{t(o)}})},$Y=e=>{const t=n=>e.formatter.match(n);e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":n=>t(n),mceBlockQuote:()=>t("blockquote")},"state"),e.editorCommands.addQueryValueHandler("FontName",()=>OY(e)),e.editorCommands.addQueryValueHandler("FontSize",()=>PY(e)),e.editorCommands.addQueryValueHandler("LineHeight",()=>BY(e))},MY=e=>{IY(e),$Y(e)},FY=e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})},UY=e=>{e.editorCommands.addCommands({Indent:()=>{iK(e)},Outdent:()=>{N0(e)}}),e.editorCommands.addCommands({Outdent:()=>S0(e)},"state")},HY=e=>{const t=(n,s,o)=>{const r=G(o)?{href:o}:o,i=e.dom.getParent(e.selection.getNode(),"a");ye(r)&&G(r.href)&&(r.href=r.href.replace(/ /g,"%20"),(!i||!r.href)&&e.formatter.remove("link"),r.href&&e.formatter.apply("link",r,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isEditable()){if(e.selection.isCollapsed()){const n=e.dom.getParent(e.selection.getStart(),"a");n&&e.dom.remove(n,!0);return}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})},zY=(e,t,n,s)=>{const o=e.dom,r=c=>o.isBlock(c)&&c.parentElement===n,i=r(t)?t:o.getParent(s,r,n);return b.from(i).map(A.fromDom)},Sk=(e,t)=>{const n=e.dom,s=e.selection.getRng(),o=t?e.selection.getStart():e.selection.getEnd(),r=t?s.startContainer:s.endContainer,i=_c(n,r);if(!i||!i.isContentEditable)return;const c=t?fn:Qs,l=Yt(e);zY(e,o,i,r).each(d=>{const p=HT(e,r,d.dom,i,!1,l);c(d,A.fromDom(p)),e.selection.setCursorLocation(p,0),e.dispatch("NewBlock",{newBlock:p}),Ec(e,"insertParagraph")})},VY=e=>Sk(e,!0),WY=e=>Sk(e,!1),jY=e=>{e.editorCommands.addCommands({InsertNewBlockBefore:()=>{VY(e)},InsertNewBlockAfter:()=>{WY(e)}})},qY=e=>{e.editorCommands.addCommands({insertParagraph:()=>{Fu(jT,e)},mceInsertNewLine:(t,n,s)=>{QT(e,s)},InsertLineBreak:(t,n,s)=>{Fu(GT,e)}})},KY=e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(t,n,s)=>{let o=0;e.dom.getParent(e.selection.getNode(),r=>fe(r)&&o++===s?(e.selection.select(r),!1):!0,e.getBody())},mceSelectNode:(t,n,s)=>{e.selection.select(s)},selectAll:()=>{const t=e.dom.getParent(e.selection.getStart(),Yn);if(t){const n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})},GY=e=>{e.editorCommands.addCommands({mceRemoveNode:(t,n,s)=>{const o=s??e.selection.getNode();if(o!==e.getBody()){const r=e.selection.getBookmark();e.dom.remove(o,!0),e.selection.moveToBookmark(r)}},mcePrint:()=>{e.getWin().print()},mceFocus:(t,n,s)=>{aF(e,s===!0)},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})},YY=e=>{mY(e),pY(e),FY(e),KY(e),yY(e),HY(e),UY(e),jY(e),qY(e),MY(e),GY(e)},XY=["toggleview"],wk=e=>Ze(XY,e.toLowerCase());class Ak{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,n=!1,s,o){const r=this.editor,i=t.toLowerCase(),c=o==null?void 0:o.skip_focus;if(r.removed||(i!=="mcefocus"&&(!/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(i)&&!c?r.focus():UM(r)),r.dispatch("BeforeExecCommand",{command:t,ui:n,value:s}).isDefaultPrevented()))return!1;const d=this.commands.exec[i];return $e(d)?(d(i,n,s),r.dispatch("ExecCommand",{command:t,ui:n,value:s}),!0):!1}queryCommandState(t){if(!wk(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=t.toLowerCase(),s=this.commands.state[n];return $e(s)?s(n):!1}queryCommandValue(t){if(!wk(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=t.toLowerCase(),s=this.commands.value[n];return $e(s)?s(n):""}addCommands(t,n="exec"){const s=this.commands;ot(t,(o,r)=>{U(r.toLowerCase().split(","),i=>{s[n][i]=o})})}addCommand(t,n,s){const o=t.toLowerCase();this.commands.exec[o]=(r,i,c)=>n.call(s??this.editor,i,c)}queryCommandSupported(t){const n=t.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(t,n,s){this.commands.state[t.toLowerCase()]=()=>n.call(s??this.editor)}addQueryValueHandler(t,n,s){this.commands.value[t.toLowerCase()]=()=>n.call(s??this.editor)}}const Nr="data-mce-contenteditable",ZY=(e,t,n)=>{ed(e,t)&&!n?pa(e,t):n&&Kr(e,t)},fg=(e,t,n)=>{try{e.getDoc().execCommand(t,!1,String(n))}catch{}},Ju=(e,t)=>{e.dom.contentEditable=t?"true":"false"},QY=e=>{U(Kt(e,'*[contenteditable="true"]'),t=>{$t(t,Nr,"true"),Ju(t,!1)})},JY=e=>{U(Kt(e,`*[${Nr}="true"]`),t=>{Mt(t,Nr),Ju(t,!0)})},eX=e=>{b.from(e.selection.getNode()).each(t=>{t.removeAttribute("data-mce-selected")})},tX=e=>{e.selection.setRng(e.selection.getRng())},nX=(e,t)=>{const n=A.fromDom(e.getBody());ZY(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),eX(e),e.readonly=!0,Ju(n,!1),QY(n)):(e.readonly=!1,e.hasEditableRoot()&&Ju(n,!0),JY(n),fg(e,"StyleWithCSS",!1),fg(e,"enableInlineTableEditing",!1),fg(e,"enableObjectResizing",!1),t_(e)&&e.focus(),tX(e),e.nodeChanged())},kr=e=>e.readonly,Tk=e=>{e.parser.addAttributeFilter("contenteditable",t=>{kr(e)&&U(t,n=>{n.attr(Nr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),e.serializer.addAttributeFilter(Nr,t=>{kr(e)&&U(t,n=>{n.attr("contenteditable",n.attr(Nr))})}),e.serializer.addTempAttr(Nr)},sX=e=>{e.serializer?Tk(e):e.on("PreInit",()=>{Tk(e)})},oX=e=>e.type==="click",rX=["copy"],iX=e=>Ze(rX,e.type),aX=(e,t)=>Xr(t,"a",s=>Qe(s,A.fromDom(e.getBody()))).bind(s=>Xs(s,"href")),cX=(e,t)=>{if(oX(t)&&!ne.metaKeyPressed(t)){const n=A.fromDom(t.target);aX(e,n).each(s=>{if(t.preventDefault(),/^#/.test(s)){const o=e.dom.select(`${s},[name="${Ob(s,"#")}"]`);o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(s,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}else iX(t)&&e.dispatch(t.type,t)},lX=e=>{e.on("ShowCaret",t=>{kr(e)&&t.preventDefault()}),e.on("ObjectSelected",t=>{kr(e)&&t.preventDefault()})},uX=X.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class dg{static isNative(t){return!!uX[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||tt}fire(t,n){return this.dispatch(t,n)}dispatch(t,n){const s=t.toLowerCase(),o=Dd(s,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);const r=this.bindings[s];if(r)for(let i=0,c=r.length;i<c;i++){const l=r[i];if(!l.removed){if(l.once&&this.off(s,l.func),o.isImmediatePropagationStopped())return o;if(l.func.call(this.scope,o)===!1)return o.preventDefault(),o}}return o}on(t,n,s,o){if(n===!1&&(n=tt),n){const r={func:n,removed:!1};o&&X.extend(r,o);const i=t.toLowerCase().split(" ");let c=i.length;for(;c--;){const l=i[c];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),s?d=[r,...d]:d=[...d,r],this.bindings[l]=d}}return this}off(t,n){if(t){const s=t.toLowerCase().split(" ");let o=s.length;for(;o--;){const r=s[o];let i=this.bindings[r];if(!r)return ot(this.bindings,(c,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(i){if(!n)i.length=0;else{const c=po(i,l=>l.func===n);i=c.fail,this.bindings[r]=i,U(c.pass,l=>{l.removed=!0})}i.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else ot(this.bindings,(s,o)=>{this.toggleEvent(o,!1)}),this.bindings={};return this}once(t,n,s){return this.on(t,n,s,{once:!0})}has(t){t=t.toLowerCase();const n=this.bindings[t];return!(!n||n.length===0)}}const kc=e=>(e._eventDispatcher||(e._eventDispatcher=new dg({scope:e,toggleEvent:(t,n)=>{dg.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher),mg={fire(e,t,n){return this.dispatch(e,t,n)},dispatch(e,t,n){const s=this;if(s.removed&&e!=="remove"&&e!=="detach")return Dd(e.toLowerCase(),t??{},s);const o=kc(s).dispatch(e,t);if(n!==!1&&s.parent){let r=s.parent();for(;r&&!o.isPropagationStopped();)r.dispatch(e,o,!1),r=r.parent?r.parent():void 0}return o},on(e,t,n){return kc(this).on(e,t,n)},off(e,t){return kc(this).off(e,t)},once(e,t){return kc(this).once(e,t)},hasEventListeners(e){return kc(this).has(e)}},ef=st.DOM;let xr;const tf=(e,t)=>{if(t==="selectionchange")return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;const n=CC(e);return n?(e.eventRoot||(e.eventRoot=ef.select(n)[0]),e.eventRoot):e.getBody()},fX=e=>!e.hidden&&!kr(e),Nk=(e,t,n)=>{fX(e)?e.dispatch(t,n):kr(e)&&cX(e,n)},kk=(e,t)=>{if(e.delegates||(e.delegates={}),e.delegates[t]||e.removed)return;const n=tf(e,t);if(CC(e)){if(xr||(xr={},e.editorManager.on("removeEditor",()=>{e.editorManager.activeEditor||xr&&(ot(xr,(o,r)=>{e.dom.unbind(tf(e,r))}),xr=null)})),xr[t])return;const s=o=>{const r=o.target,i=e.editorManager.get();let c=i.length;for(;c--;){const l=i[c].getBody();(l===r||ef.isChildOf(r,l))&&Nk(i[c],t,o)}};xr[t]=s,ef.bind(n,t,s)}else{const s=o=>{Nk(e,t,o)};ef.bind(n,t,s),e.delegates[t]=s}},xk={...mg,bindPendingEventDelegates(){const e=this;X.each(e._pendingNativeEvents,t=>{kk(e,t)})},toggleNativeEvent(e,t){const n=this;e==="focus"||e==="blur"||n.removed||(t?n.initialized?kk(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(tf(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents(){const e=this,t=e.getBody(),n=e.dom;e.delegates&&(ot(e.delegates,(s,o)=>{e.dom.unbind(tf(e,o),o,s)}),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}},dX=e=>G(e)?{value:e.split(/[ ,]/),valid:!0}:yn(e,G)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},mX=e=>{const t=(()=>{switch(e){case"array":return Te;case"boolean":return nt;case"function":return $e;case"number":return pt;case"object":return ye;case"string":return G;case"string[]":return dX;case"object[]":return n=>yn(n,ye);case"regexp":return n=>Xe(n,RegExp);default:return dt}})();return n=>pg(n,t,`The value must be a ${e}.`)},pX=e=>G(e.processor),Rk=(e,t)=>{const n=ua(t.message)?"":`. ${t.message}`;return e+n},Ok=e=>e.valid,pg=(e,t,n="")=>{const s=t(e);return nt(s)?s?{value:e,valid:!0}:{valid:!1,message:n}:s},hX=(e,t,n)=>{if(!qe(t)){const s=pg(t,n);if(Ok(s))return s.value;console.error(Rk(`Invalid default value passed for the "${e}" option`,s))}},gX=(e,t,n=t)=>{const s={},o={},r=(v,E,C)=>{const S=pg(E,C);return Ok(S)?(o[v]=S.value,!0):(console.warn(Rk(`Invalid value passed for the ${v} option`,S)),!1)},i=(v,E)=>{const C=pX(E)?mX(E.processor):E.processor,S=hX(v,E.default,C);s[v]={...E,default:S,processor:C},ct(o,v).orThunk(()=>ct(t,v)).each(k=>r(v,k,C))},c=v=>Ae(s,v);return{register:i,isRegistered:c,get:v=>ct(o,v).orThunk(()=>ct(s,v).map(E=>E.default)).getOrUndefined(),set:(v,E)=>{if(c(v)){const C=s[v];return C.immutable?(console.error(`"${v}" is an immutable option and cannot be updated`),!1):r(v,E,C.processor)}else return console.warn(`"${v}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:v=>{const E=c(v);return E&&delete o[v],E},isSet:v=>Ae(o,v),debug:()=>{try{console.log(JSON.parse(JSON.stringify(n,(v,E)=>nt(E)||pt(E)||G(E)||Be(E)||Te(E)||je(E)?E:Object.prototype.toString.call(E))))}catch(v){console.error(v)}}}},bX=["design","readonly"],Dk=(e,t,n,s)=>{const o=n[t.get()],r=n[s];try{r.activate()}catch(i){console.error(`problem while activating editor mode ${s}:`,i);return}o.deactivate(),o.editorReadOnly!==r.editorReadOnly&&nX(e,r.editorReadOnly),t.set(s),_$(e,s)},yX=(e,t,n,s)=>{if(s!==n.get()){if(!Ae(t,s))throw new Error(`Editor mode '${s}' is invalid`);e.initialized?Dk(e,n,t,s):e.on("init",()=>Dk(e,n,t,s))}},vX=(e,t,n)=>{if(Ze(bX,t))throw new Error(`Cannot override default mode ${t}`);return{...e,[t]:{...n,deactivate:()=>{try{n.deactivate()}catch(s){console.error(`problem while deactivating editor mode ${t}:`,s)}}}}},CX=e=>{const t=Bt("design"),n=Bt({design:{activate:Se,deactivate:Se,editorReadOnly:!1},readonly:{activate:Se,deactivate:Se,editorReadOnly:!0}});return sX(e),lX(e),{isReadOnly:()=>kr(e),set:s=>yX(e,n.get(),t,s),get:()=>t.get(),register:(s,o)=>{n.set(vX(n.get(),s,o))}}},hg=X.each,gg=X.explode,EX={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Pk=X.makeMap("alt,ctrl,shift,meta,access"),_X=e=>e in Pk,SX=e=>{const t={},n=Ve.os.isMacOS()||Ve.os.isiOS();hg(gg(e.toLowerCase(),"+"),r=>{_X(r)?t[r]=!0:/^[0-9]{2,}$/.test(r)?t.keyCode=parseInt(r,10):(t.charCode=r.charCodeAt(0),t.keyCode=EX[r]||r.toUpperCase().charCodeAt(0))});const s=[t.keyCode];let o;for(o in Pk)t[o]?s.push(o):t[o]=!1;return t.id=s.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t};class Bk{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const n=this;t.on("keyup keypress keydown",s=>{(n.hasModifier(s)||n.isFunctionKey(s))&&!s.isDefaultPrevented()&&(hg(n.shortcuts,o=>{n.matchShortcut(s,o)&&(n.pendingPatterns=o.subpatterns.slice(0),s.type==="keydown"&&n.executeShortcutAction(o))}),n.matchShortcut(s,n.pendingPatterns[0])&&(n.pendingPatterns.length===1&&s.type==="keydown"&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(t,n,s,o){const r=this,i=r.normalizeCommandFunc(s);return hg(gg(X.trim(t)),c=>{const l=r.createShortcut(c,n,i,o);r.shortcuts[l.id]=l}),!0}remove(t){const n=this.createShortcut(t);return this.shortcuts[n.id]?(delete this.shortcuts[n.id],!0):!1}normalizeCommandFunc(t){const n=this,s=t;return typeof s=="string"?()=>{n.editor.execCommand(s,!1,null)}:X.isArray(s)?()=>{n.editor.execCommand(s[0],s[1],s[2])}:s}createShortcut(t,n,s,o){const r=X.map(gg(t,">"),SX);return r[r.length-1]=X.extend(r[r.length-1],{func:s,scope:o||this.editor}),X.extend(r[0],{desc:this.editor.translate(n),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return t.type==="keydown"&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,n){return!n||n.ctrl!==t.ctrlKey||n.meta!==t.metaKey||n.alt!==t.altKey||n.shift!==t.shiftKey?!1:t.keyCode===n.keyCode||t.charCode&&t.charCode===n.charCode?(t.preventDefault(),!0):!1}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const wX=()=>{const e={},t={},n={},s={},o={},r={},i={},c={},l=(p,h)=>(g,v)=>{p[g.toLowerCase()]={...v,type:h}},d=(p,h)=>s[p.toLowerCase()]=h;return{addButton:l(e,"button"),addGroupToolbarButton:l(e,"grouptoolbarbutton"),addToggleButton:l(e,"togglebutton"),addMenuButton:l(e,"menubutton"),addSplitButton:l(e,"splitbutton"),addMenuItem:l(t,"menuitem"),addNestedMenuItem:l(t,"nestedmenuitem"),addToggleMenuItem:l(t,"togglemenuitem"),addAutocompleter:l(n,"autocompleter"),addContextMenu:l(o,"contextmenu"),addContextToolbar:l(r,"contexttoolbar"),addContextForm:l(r,"contextform"),addSidebar:l(i,"sidebar"),addView:l(c,"views"),addIcon:d,getAll:()=>({buttons:e,menuItems:t,icons:s,popups:n,contextMenus:o,contextToolbars:r,sidebars:i,views:c})}},AX=()=>{const e=wX();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},Rr=st.DOM,Lk=X.extend,TX=X.each;class nf{constructor(t,n,s){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=s,this.documentBaseUrl=s.documentBaseURL,Lk(this,xk);const o=this;this.id=t,this.hidden=!1;const r=lY(s.defaultOptions,n);this.options=gX(o,r,n),BB(o);const i=this.options.get;i("deprecation_warnings")&&J2(n,r);const c=i("suffix");c&&(s.suffix=c),this.suffix=s.suffix;const l=i("base_url");l&&s._setBaseUrl(l),this.baseUri=s.baseURI;const d=em(o);d&&(no.ScriptLoader._setReferrerPolicy(d),st.DOM.styleSheetLoader._setReferrerPolicy(d));const p=_C(o);j(p)&&st.DOM.styleSheetLoader._setContentCssCors(p),en.languageLoad=i("language_load"),en.baseURL=s.baseURL,this.setDirty(!1),this.documentBaseURI=new Qn(fC(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=nm(o),this.hasVisual=SL(o),this.shortcuts=new Bk(this),this.editorCommands=new Ak(this),YY(this);const h=i("cache_suffix");h&&(Ve.cacheSuffix=h.replace(/^[\?\&]+/,"")),this.ui={registry:AX(),styleSheetLoader:void 0,show:Se,hide:Se,setEnabled:Se,isEnabled:dt},this.mode=CX(o),s.dispatch("SetupEditor",{editor:this});const g=AL(o);$e(g)&&g.call(o,o)}render(){GG(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return yi(this)}translate(t){return hs.translate(t)}getParam(t,n,s){const o=this.options;return o.isRegistered(t)||(j(s)?o.register(t,{processor:s,default:n}):o.register(t,{processor:dt,default:n})),!o.isSet(t)&&!qe(n)?n:o.get(t)}hasPlugin(t,n){return Ze(kl(this),t)?n?Si.get(t)!==void 0:!0:!1}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,n,s){this.editorCommands.addCommand(t,n,s)}addQueryStateHandler(t,n,s){this.editorCommands.addQueryStateHandler(t,n,s)}addQueryValueHandler(t,n,s){this.editorCommands.addQueryValueHandler(t,n,s)}addShortcut(t,n,s,o){this.shortcuts.add(t,n,s,o)}execCommand(t,n,s,o){return this.editorCommands.execCommand(t,n,s,o)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(Rr.show(t.getContainer()),Rr.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(Rr.hide(t.getContainer()),Rr.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,n){this.dispatch("ProgressState",{state:t,time:n})}load(t={}){const n=this,s=n.getElement();if(n.removed)return"";if(s){const o={...t,load:!0},r=md(s)?s.value:s.innerHTML,i=n.setContent(r,o);return o.no_events||n.dispatch("LoadContent",{...o,element:s}),i}else return""}save(t={}){const n=this;let s=n.getElement();if(!s||!n.initialized||n.removed)return"";const o={...t,save:!0,element:s};let r=n.getContent(o);const i={...o,content:r};if(i.no_events||n.dispatch("SaveContent",i),i.format==="raw"&&n.dispatch("RawSaveContent",i),r=i.content,md(s))s.value=r;else{(t.is_removing||!n.inline)&&(s.innerHTML=r);const c=Rr.getParent(n.id,"form");c&&TX(c.elements,l=>l.name===n.id?(l.value=r,!1):!0)}return i.element=o.element=s=null,i.set_dirty!==!1&&n.setDirty(!1),r}setContent(t,n){return Gp(this,t,n)}getContent(t){return U2(this,t)}insertContent(t,n){n&&(t=Lk({content:t},n)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){t===void 0?Gp(this,this.startContent,{format:"raw"}):Gp(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const n=!this.isNotDirty;this.isNotDirty=!t,t&&t!==n&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||Rr.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=Rr.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const n=t.iframeElement;n&&(t.contentWindow=n.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const n=t.getWin();n&&(t.contentDocument=n.document)}return t.contentDocument}getBody(){var t,n;const s=this.getDoc();return(n=(t=this.bodyElement)!==null&&t!==void 0?t:s==null?void 0:s.body)!==null&&n!==void 0?n:null}convertURL(t,n,s){const o=this,r=o.options.get,i=NL(o);if($e(i))return i.call(o,t,s,!0,n);if(!r("convert_urls")||s==="link"||ye(s)&&s.nodeName==="LINK"||t.indexOf("file:")===0||t.length===0)return t;const c=new Qn(t);return c.protocol!=="http"&&c.protocol!=="https"&&c.protocol!==""?t:r("relative_urls")?o.documentBaseURI.toRelative(t):(t=o.documentBaseURI.toAbsolute(t,r("remove_script_host")),t)}addVisual(t){uY(this,t)}setEditableRoot(t){YG(this,t)}hasEditableRoot(){return XG(this)}remove(){sj(this)}destroy(t){oj(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Oi=st.DOM,sf=X.each;let Ik=!1,of,ln=[];const rf=e=>{const t=e.type;sf(Lo.get(),n=>{switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e);break}})},$k=e=>{if(e!==Ik){const t=st.DOM;e?(t.bind(window,"resize",rf),t.bind(window,"scroll",rf)):(t.unbind(window,"resize",rf),t.unbind(window,"scroll",rf)),Ik=e}},Mk=e=>{const t=ln;return ln=ve(ln,n=>e!==n),Lo.activeEditor===e&&(Lo.activeEditor=ln.length>0?ln[0]:null),Lo.focusedEditor===e&&(Lo.focusedEditor=null),t.length!==ln.length},NX=e=>{e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(Mk(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)},kX=document.compatMode!=="CSS1Compat",Lo={...mg,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"3.0",releaseDate:"2024-08-07",i18n:hs,activeEditor:null,focusedEditor:null,setup(){const e=this;let t="",n="",s=Qn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(s)&&(s=s.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(s)||(s+="/"));const o=window.tinymce||window.tinyMCEPreInit;if(o)t=o.base||o.baseURL,n=o.suffix;else{const r=document.getElementsByTagName("script");for(let i=0;i<r.length;i++){const c=r[i].src||"";if(c==="")continue;const l=c.substring(c.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(c)){l.indexOf(".min")!==-1&&(n=".min"),t=c.substring(0,c.lastIndexOf("/"));break}}if(!t&&document.currentScript){const i=document.currentScript.src;i.indexOf(".min")!==-1&&(n=".min"),t=i.substring(0,i.lastIndexOf("/"))}}e.baseURL=new Qn(s).toAbsolute(t),e.documentBaseURL=s,e.baseURI=new Qn(e.baseURL),e.suffix=n,ZM(e)},overrideDefaults(e){const t=e.base_url;t&&this._setBaseUrl(t);const n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;const s=e.plugin_base_urls;s!==void 0&&ot(s,(o,r)=>{en.PluginManager.urls[r]=o})},init(e){const t=this;let n;const s=X.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),o=(p,h)=>p.inline&&h.tagName.toLowerCase()in s,r=p=>{let h=p.id;return h||(h=ct(p,"name").filter(g=>!Oi.get(g)).getOrThunk(Oi.uniqueId),p.setAttribute("id",h)),h},i=p=>{const h=e[p];if(h)return h.apply(t,[])},c=p=>Ve.browser.isIE()||Ve.browser.isEdge()?(bu("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/7/support/#supportedwebbrowsers"),[]):kX?(bu("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):G(p.selector)?Oi.select(p.selector):j(p.target)?[p.target]:[];let l=p=>{n=p};const d=()=>{let p=0;const h=[];let g;const v=(E,C,S)=>{const T=new nf(E,C,t);h.push(T),T.on("init",()=>{++p===g.length&&l(h)}),T.targetElm=T.targetElm||S,T.render()};Oi.unbind(window,"ready",d),i("onpageload"),g=Sb(c(e)),X.each(g,E=>{NX(t.get(E.id))}),g=X.grep(g,E=>!t.get(E.id)),g.length===0?l([]):sf(g,E=>{o(e,E)?bu("Could not initialize inline editor on invalid inline target element",E):v(r(E),e,E)})};return Oi.bind(window,"ready",d),new Promise(p=>{n?p(n):l=h=>{p(h)}})},get(e){return arguments.length===0?ln.slice(0):G(e)?vt(ln,t=>t.id===e).getOr(null):pt(e)&&ln[e]?ln[e]:null},add(e){const t=this,n=t.get(e.id);return n===e||(n===null&&ln.push(e),$k(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),of||(of=s=>{const o=t.dispatch("BeforeUnload");if(o.returnValue)return s.preventDefault(),s.returnValue=o.returnValue,o.returnValue},window.addEventListener("beforeunload",of))),e},createEditor(e,t){return this.add(new nf(e,t,this))},remove(e){const t=this;let n;if(!e){for(let s=ln.length-1;s>=0;s--)t.remove(ln[s]);return}if(G(e)){sf(Oi.select(e),s=>{n=t.get(s.id),n&&t.remove(n)});return}return n=e,Be(t.get(n.id))?null:(Mk(n)&&t.dispatch("RemoveEditor",{editor:n}),ln.length===0&&window.removeEventListener("beforeunload",of),n.remove(),$k(ln.length>0),n)},execCommand(e,t,n){var s;const o=this,r=ye(n)?(s=n.id)!==null&&s!==void 0?s:n.index:n;switch(e){case"mceAddEditor":{if(!o.get(r)){const i=n.options;new nf(r,i,o).render()}return!0}case"mceRemoveEditor":{const i=o.get(r);return i&&i.remove(),!0}case"mceToggleEditor":{const i=o.get(r);return i?(i.isHidden()?i.show():i.hide(),!0):(o.execCommand("mceAddEditor",!1,n),!0)}}return o.activeEditor?o.activeEditor.execCommand(e,t,n):!1},triggerSave:()=>{sf(ln,e=>{e.save()})},addI18n:(e,t)=>{hs.add(e,t)},translate:e=>hs.translate(e),setActive(e){const t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl(e){this.baseURL=new Qn(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Qn(this.baseURL)}};Lo.setup();const xX=(()=>{const e=to(),t=r=>({items:r,types:un(r),getType:i=>ct(r,i).getOrUndefined()}),n=r=>{e.set(r)},s=()=>e.get().getOrUndefined(),o=e.clear;return{FakeClipboardItem:t,write:n,read:s,clear:o}})(),Fk=Math.min,Di=Math.max,af=Math.round,Uk=(e,t,n)=>{let s=t.x,o=t.y;const r=e.w,i=e.h,c=t.w,l=t.h,d=(n||"").split("");return d[0]==="b"&&(o+=l),d[1]==="r"&&(s+=c),d[0]==="c"&&(o+=af(l/2)),d[1]==="c"&&(s+=af(c/2)),d[3]==="b"&&(o-=i),d[4]==="r"&&(s-=r),d[3]==="c"&&(o-=af(i/2)),d[4]==="c"&&(s-=af(r/2)),Pi(s,o,r,i)},RX=(e,t,n,s)=>{for(let o=0;o<s.length;o++){const r=Uk(e,t,s[o]);if(r.x>=n.x&&r.x+r.w<=n.w+n.x&&r.y>=n.y&&r.y+r.h<=n.h+n.y)return s[o]}return null},OX=(e,t,n)=>Pi(e.x-t,e.y-n,e.w+t*2,e.h+n*2),DX=(e,t)=>{const n=Di(e.x,t.x),s=Di(e.y,t.y),o=Fk(e.x+e.w,t.x+t.w),r=Fk(e.y+e.h,t.y+t.h);return o-n<0||r-s<0?null:Pi(n,s,o-n,r-s)},PX=(e,t,n)=>{let s=e.x,o=e.y,r=e.x+e.w,i=e.y+e.h;const c=t.x+t.w,l=t.y+t.h,d=Di(0,t.x-s),p=Di(0,t.y-o),h=Di(0,r-c),g=Di(0,i-l);return s+=d,o+=p,n&&(r+=d,i+=p,s-=h,o-=g),r-=h,i-=g,Pi(s,o,r-s,i-o)},Pi=(e,t,n,s)=>({x:e,y:t,w:n,h:s}),BX={inflate:OX,relativePosition:Uk,findBestRelativePosition:RX,intersect:DX,clamp:PX,create:Pi,fromClientRect:e=>Pi(e.left,e.top,e.width,e.height)},LX=(e,t,n=1e3)=>{let s=!1,o=null;const r=d=>(...p)=>{s||(s=!0,o!==null&&(clearTimeout(o),o=null),d.apply(null,p))},i=r(e),c=r(t);return{start:(...d)=>{!s&&o===null&&(o=setTimeout(()=>c.apply(null,d),n))},resolve:i,reject:c}},IX=(()=>{const e={},t={},n={};return{load:(l,d)=>{const p=`Script at URL "${d}" failed to load`,h=`Script at URL "${d}" did not call \`tinymce.Resource.add('${l}', data)\` within 1 second`;if(e[l]!==void 0)return e[l];{const g=new Promise((v,E)=>{const C=LX(v,E);t[l]=C.resolve,no.ScriptLoader.loadScript(d).then(()=>C.start(h),()=>C.reject(p))});return e[l]=g,g}},add:(l,d)=>{t[l]!==void 0&&(t[l](d),delete t[l]),e[l]=Promise.resolve(d),n[l]=d},has:l=>l in n,get:l=>n[l],unload:l=>{delete e[l],delete n[l]}}})(),$X=()=>(()=>{let e={},t=[];const n={getItem:s=>{const o=e[s];return o||null},setItem:(s,o)=>{t.push(s),e[s]=String(o)},key:s=>t[s],removeItem:s=>{t=t.filter(o=>o===s),delete e[s]},clear:()=>{t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:()=>t.length,configurable:!1,enumerable:!1}),n})();let xc;try{const e="__storage_test__";xc=window.localStorage,xc.setItem(e,e),xc.removeItem(e)}catch{xc=$X()}var MX=xc;const FX={geom:{Rect:BX},util:{Delay:Bn,Tools:X,VK:ne,URI:Qn,EventDispatcher:dg,Observable:mg,I18n:hs,LocalStorage:MX,ImageUploader:Ij},dom:{EventUtils:ir,TreeWalker:Pt,TextSeeker:lr,DOMUtils:st,ScriptLoader:no,RangeUtils:vr,Serializer:tA,StyleSheetLoader:Ky,ControlSelection:RE,BookmarkManager:Xa,Selection:eA,Event:ir.Event},html:{Styles:Od,Entities:rr,Node:tn,Schema:_o,DomParser:Ei,Writer:b_,Serializer:xo},Env:Ve,AddOnManager:en,Annotator:EE,Formatter:gA,UndoManager:yA,EditorCommands:Ak,WindowManager:cA,NotificationManager:aA,EditorObservable:xk,Shortcuts:Bk,Editor:nf,FocusManager:JE,EditorManager:Lo,DOM:st.DOM,ScriptLoader:no.ScriptLoader,PluginManager:Si,ThemeManager:wr,ModelManager:_i,IconManager:hu,Resource:IX,FakeClipboard:xX,trim:X.trim,isArray:X.isArray,is:X.is,toArray:X.toArray,makeMap:X.makeMap,each:X.each,map:X.map,grep:X.grep,inArray:X.inArray,extend:X.extend,walk:X.walk,resolve:X.resolve,explode:X.explode,_addCacheSuffix:X._addCacheSuffix},Hk=X.extend(Lo,FX),UX=e=>{try{u.exports=e}catch{}};(e=>{window.tinymce=e,window.tinyMCE=e})(Hk),UX(Hk)})()})(gO);var yse=gO.exports;const jx=bse(yse);jx.init({selector:"textarea.wysiwyg",menubar:!1,statusbar:!1,browser_spellcheck:!0,toolbar1:"undo redo | styleselect | bold italic | link bullist numlist outdent indent | forecolor backcolor | paste",plugins:["lists","link"],contextmenu:[],paste_data_images:!1,paste_webkit_styles:"color",paste_merge_formats:!0,setup:function(u){u.on("blur",function(a){var f=jx.activeEditor.getContent();f.includes("<img src=")&&alert("I've noticed your input contains an image. This cannot be saved here. Please save and then add the image as an attachment in notes.")})}});document.getElementById("logout-btn")&&document.getElementById("logout-btn").addEventListener("click",function(u){u.preventDefault(),document.getElementById("logout-form").submit()});
